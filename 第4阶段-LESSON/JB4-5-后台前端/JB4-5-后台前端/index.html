<!doctype html><html lang=en><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><style>:root{--accent-color:#FF4D4D}</style><title>JB4-5-后台前端</title>
<meta name=description content="[!NOTE] Java道经第4卷 - 第5阶 - 后台前端 lesson-admin-web
S01. 项目实战准备 E01. 搭建Vue项目 1. 创建Vue项目 使用Vue命令创建后台前端项目 lesson-admin-web # 切换到工作空间目录，注意路径中不要有中文 D: cd …"><meta name=keywords content='blog,lsx2216,hugo'><meta property="og:url" content="https://lsx2216.netlify.app/%E7%AC%AC4%E9%98%B6%E6%AE%B5-LESSON/JB4-5-%E5%90%8E%E5%8F%B0%E5%89%8D%E7%AB%AF/JB4-5-%E5%90%8E%E5%8F%B0%E5%89%8D%E7%AB%AF/"><meta property="og:type" content="website"><meta property="og:title" content="JB4-5-后台前端"><meta property="og:description" content="[!NOTE] Java道经第4卷 - 第5阶 - 后台前端 lesson-admin-web
S01. 项目实战准备 E01. 搭建Vue项目 1. 创建Vue项目 使用Vue命令创建后台前端项目 lesson-admin-web # 切换到工作空间目录，注意路径中不要有中文 D: cd …"><meta property="og:image" content="https://lsx2216.netlify.app/assets/images/user.jpg"><meta property="og:image:secure_url" content="https://lsx2216.netlify.app/assets/images/user.jpg"><meta name=twitter:card content="summary_large_image"><meta name=twitter:title content="JB4-5-后台前端"><meta name=twitter:description content="[!NOTE] Java道经第4卷 - 第5阶 - 后台前端 lesson-admin-web
S01. 项目实战准备 E01. 搭建Vue项目 1. 创建Vue项目 使用Vue命令创建后台前端项目 lesson-admin-web # 切换到工作空间目录，注意路径中不要有中文 D: cd …"><meta property="twitter:domain" content="https://lsx2216.netlify.app/%E7%AC%AC4%E9%98%B6%E6%AE%B5-LESSON/JB4-5-%E5%90%8E%E5%8F%B0%E5%89%8D%E7%AB%AF/JB4-5-%E5%90%8E%E5%8F%B0%E5%89%8D%E7%AB%AF/"><meta property="twitter:url" content="https://lsx2216.netlify.app/%E7%AC%AC4%E9%98%B6%E6%AE%B5-LESSON/JB4-5-%E5%90%8E%E5%8F%B0%E5%89%8D%E7%AB%AF/JB4-5-%E5%90%8E%E5%8F%B0%E5%89%8D%E7%AB%AF/"><meta name=twitter:image content="https://lsx2216.netlify.app/assets/images/user.jpg"><link rel=canonical href=https://lsx2216.netlify.app/%E7%AC%AC4%E9%98%B6%E6%AE%B5-LESSON/JB4-5-%E5%90%8E%E5%8F%B0%E5%89%8D%E7%AB%AF/JB4-5-%E5%90%8E%E5%8F%B0%E5%89%8D%E7%AB%AF/><link rel=stylesheet type=text/css href=/css/normalize.min.css media=print><link rel=stylesheet type=text/css href=/css/main.min.css><link id=dark-theme rel=stylesheet href=/css/dark.min.css><script src=/js/bundle.min.3eb19cb61dde9e37b9522867f3e024aeb68e26ab8e03252e46e365abcb19acf7.js integrity="sha256-PrGcth3enje5Uihn8+AkrraOJquOAyUuRuNlq8sZrPc="></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.css integrity=sha384-Xi8rHCmBmhbuyyhbI88391ZKP2dmfnOl4rT9ZfRI7mLTdk1wblIUnrIq35nqwEvC crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.js integrity=sha384-X/XCfMm41VSsqRNQgDerQczD69XqmjOOOwYQvr/uuC+j4OPoNhVgjdGFwhvN02Ja crossorigin=anonymous></script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/contrib/auto-render.min.js integrity=sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR crossorigin=anonymous></script><script>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1}],throwOnError:!1})})</script>    <link rel="shortcut icon" href="/assets/images/user.jpg" type="image/x-icon">
</head><body><script>setThemeByUserPref()</script><header class=header><nav class=header-nav><div class=avatar><a href=https://lsx2216.netlify.app/><img src=/assets/images/user.jpg alt=avatar></a></div><div class=nav-title><a class=nav-brand href=https://lsx2216.netlify.app/>lsx2216</a></div><div class=nav-links><div class=nav-link><a href=https://lsx2216.netlify.app/ aria-label><span data-feather=home></span> Home</a></div><div class=nav-link><a href=https://lsx2216.netlify.app/projects/ aria-label><span data-feather=code></span> Projects</a></div><div class=nav-link><a href=https://github.com aria-label=github><span data-feather=github></span></a></div><span class=nav-icons-divider></span><div class="nav-link dark-theme-toggle"><span class="sr-only dark-theme-toggle-screen-reader-target">theme</span>
<a aria-hidden=true role=switch><span class=theme-toggle-icon data-feather=moon></span></a></div><div class=nav-link id=hamburger-menu-toggle><span class="sr-only hamburger-menu-toggle-screen-reader-target">menu</span>
<a aria-checked=false aria-labelledby=hamburger-menu-toggle id=hamburger-menu-toggle-target role=switch><span data-feather=menu></span></a></div><ul class="nav-hamburger-list visibility-hidden"><li class=nav-item><a href=https://lsx2216.netlify.app/><span data-feather=home></span> Home</a></li><li class=nav-item><a href=https://lsx2216.netlify.app/projects/><span data-feather=code></span> Projects</a></li><li class=nav-item><a href=https://github.com><span data-feather=github></span></a></li><li class="nav-item dark-theme-toggle"><span class="sr-only dark-theme-toggle-screen-reader-target">theme</span>
<a role=switch><span class=theme-toggle-icon data-feather=moon></span></a></li></ul></div></nav></header><main id=content><div class="post container"><div class=post-header-section><h1>JB4-5-后台前端</h1></div><div class=post-content><blockquote><p>[!NOTE] Java道经第4卷 - 第5阶 - 后台前端
lesson-admin-web</p></blockquote><h1 id=s01-项目实战准备>S01. 项目实战准备</h1><h2 id=e01-搭建vue项目>E01. 搭建Vue项目</h2><h3 id=1-创建vue项目>1. 创建Vue项目</h3><ol><li>使用Vue命令创建后台前端项目 <code>lesson-admin-web</code></li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-powershell data-lang=powershell><span style=display:flex><span><span style=color:#75715e># 切换到工作空间目录，注意路径中不要有中文</span>
</span></span><span style=display:flex><span>D:
</span></span><span style=display:flex><span>cd D:\idea\workspace\lesson-project
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 创建Vue项目 `lesson-admin-web`</span>
</span></span><span style=display:flex><span>vue create lesson-admin-web
</span></span></code></pre></div><ol start=2><li>使用IDEA打开Vue项目。</li></ol><h3 id=2-优化项目结构>2. 优化项目结构</h3><ol><li>在线制作一个ICO文件如 <code>lesson-admin.ico</code> 并替换 <code>/public/favicon.ico</code> 图标文件。</li><li>删除 <code>@/asserts/logo.png</code> 示例图片。</li><li>删除 <code>@/components/</code> 中的全部示例Vue组件以及对应 <code>@/router/index.js</code> 中的路由配置。</li><li>删除 <code>@/views/</code> 中的全部示例Vue组件。</li></ol><h3 id=3-优化项目首页>3. 优化项目首页</h3><p><code>index.html</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span><span style=color:#75715e>&lt;!DOCTYPE html&gt;</span>  
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>html</span> <span style=color:#a6e22e>lang</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;zh_CN&#34;</span>&gt;  
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>head</span>&gt;    
</span></span><span style=display:flex><span>	&lt;<span style=color:#f92672>meta</span> <span style=color:#a6e22e>charset</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;utf-8&#34;</span>&gt;  
</span></span><span style=display:flex><span>	&lt;<span style=color:#f92672>meta</span> <span style=color:#a6e22e>http-equiv</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;X-UA-Compatible&#34;</span> <span style=color:#a6e22e>content</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;IE=edge&#34;</span>&gt;  
</span></span><span style=display:flex><span>	&lt;<span style=color:#f92672>meta</span> <span style=color:#a6e22e>name</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;viewport&#34;</span> <span style=color:#a6e22e>content</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;width=device-width,initial-scale=1.0&#34;</span>&gt;
</span></span><span style=display:flex><span>	&lt;<span style=color:#f92672>link</span> <span style=color:#a6e22e>rel</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;icon&#34;</span> <span style=color:#a6e22e>href</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;./lesson-admin.ico&#34;</span>&gt;  
</span></span><span style=display:flex><span>	&lt;<span style=color:#f92672>title</span>&gt;Lesson后台管理&lt;/<span style=color:#f92672>title</span>&gt;  
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>head</span>&gt;  
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>body</span>&gt;    
</span></span><span style=display:flex><span>	&lt;<span style=color:#f92672>noscript</span>&gt;你的浏览器不支持JavaScript&lt;/<span style=color:#f92672>noscript</span>&gt;    
</span></span><span style=display:flex><span>	&lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>id</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;app&#34;</span>&gt;&lt;/<span style=color:#f92672>div</span>&gt;  
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>body</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>html</span>&gt;
</span></span></code></pre></div><h3 id=4-修改项目端口>4. 修改项目端口</h3><p><code>vue.config.js</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>const</span> {<span style=color:#a6e22e>defineConfig</span>} <span style=color:#f92672>=</span> <span style=color:#a6e22e>require</span>(<span style=color:#e6db74>&#39;@vue/cli-service&#39;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>module</span>.<span style=color:#a6e22e>exports</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>defineConfig</span>({
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>transpileDependencies</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span>,
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 配置后台前端项目的IP和端口号  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#e6db74>&#34;devServer&#34;</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;host&#34;</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;localhost&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;port&#34;</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>6625</span>
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 处理浏览器 `__VUE_PROD_HYDRATION_MISMATCH_DETAILS__` 警告，非强迫症无需处理  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>chainWebpack</span><span style=color:#f92672>:</span> (<span style=color:#a6e22e>config</span>) =&gt; {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>config</span>.<span style=color:#a6e22e>plugin</span>(<span style=color:#e6db74>&#39;define&#39;</span>).<span style=color:#a6e22e>tap</span>((<span style=color:#a6e22e>definitions</span>) =&gt; {
</span></span><span style=display:flex><span>            Object.<span style=color:#a6e22e>assign</span>(<span style=color:#a6e22e>definitions</span>[<span style=color:#ae81ff>0</span>], {
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>__VUE_OPTIONS_API__</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;true&#39;</span>,
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>__VUE_PROD_DEVTOOLS__</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;false&#39;</span>,
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>__VUE_PROD_HYDRATION_MISMATCH_DETAILS__</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;false&#39;</span>
</span></span><span style=display:flex><span>            })
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>definitions</span>
</span></span><span style=display:flex><span>        })
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>});
</span></span></code></pre></div><h3 id=5-优化appvue>5. 优化App.vue</h3><p><code>@/App.vue</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-vue data-lang=vue><span style=display:flex><span>&lt;<span style=color:#f92672>template</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>router-view</span>/&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>template</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>&lt;!--</span><span style=color:#a6e22e>全局脚本</span><span style=color:#f92672>--&gt;</span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>script</span> <span style=color:#a6e22e>setup</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* 解决 ResizeObserver loop completed with undelivered notifications 问题 */</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>_ResizeObserver</span> <span style=color:#f92672>=</span> window.<span style=color:#a6e22e>ResizeObserver</span>;
</span></span><span style=display:flex><span>window.<span style=color:#a6e22e>ResizeObserver</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>ResizeObserver</span> <span style=color:#66d9ef>extends</span> <span style=color:#a6e22e>_ResizeObserver</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>constructor</span>(<span style=color:#a6e22e>callback</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>callback</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>debounce</span>(<span style=color:#a6e22e>callback</span>, <span style=color:#ae81ff>16</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>super</span>(<span style=color:#a6e22e>callback</span>);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>debounce</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>fn</span>, <span style=color:#a6e22e>delay</span>) =&gt; {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>timer</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>null</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>function</span> () {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>context</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>this</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>args</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>arguments</span>;
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>clearTimeout</span>(<span style=color:#a6e22e>timer</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>timer</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>setTimeout</span>(<span style=color:#66d9ef>function</span> () { <span style=color:#a6e22e>fn</span>.<span style=color:#a6e22e>apply</span>(<span style=color:#a6e22e>context</span>, <span style=color:#a6e22e>args</span>); }, <span style=color:#a6e22e>delay</span>);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>script</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>&lt;!--</span><span style=color:#a6e22e>全局样式</span><span style=color:#f92672>--&gt;</span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>style</span> <span style=color:#a6e22e>lang</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;scss&#34;</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* 滚动条 */</span>
</span></span><span style=display:flex><span><span style=color:#f92672>::-</span><span style=color:#a6e22e>webkit</span><span style=color:#f92672>-</span><span style=color:#a6e22e>scrollbar</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>display</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>none</span>; <span style=color:#75715e>// 隐藏滚动条
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* 暗黑模式 */</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>html</span>.<span style=color:#a6e22e>dark</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>img</span>, .<span style=color:#a6e22e>dark</span><span style=color:#f92672>-</span><span style=color:#a6e22e>img</span><span style=color:#f92672>-</span><span style=color:#a6e22e>bg</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>filter</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>brightness</span>(<span style=color:#ae81ff>0.8</span>) <span style=color:#a6e22e>saturate</span>(<span style=color:#ae81ff>1.25</span>) <span style=color:#75715e>// 滤镜: 暗黑模式图片的亮度和饱和度
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>html</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>font</span><span style=color:#f92672>-</span><span style=color:#a6e22e>family</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>Consolas</span>, <span style=color:#a6e22e>Avenir</span>, <span style=color:#a6e22e>Helvetica</span>, <span style=color:#a6e22e>Arial</span>, <span style=color:#a6e22e>sans</span><span style=color:#f92672>-</span><span style=color:#a6e22e>serif</span>; <span style=color:#75715e>// 字体
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>font</span><span style=color:#f92672>-</span><span style=color:#a6e22e>size</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>14</span><span style=color:#a6e22e>px</span>; <span style=color:#75715e>// 全局字号
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>body</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>margin</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>0</span>; <span style=color:#75715e>// 清空内边距
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>padding</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>0</span>; <span style=color:#75715e>// 清空外边距
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>style</span>&gt;
</span></span></code></pre></div><h3 id=6-开发全局常量>6. 开发全局常量</h3><p><code>@/const/index.js</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>computed</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;vue&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 环境IP地址
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>DEV_IP</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;localhost&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>PROD_IP</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;192.168.40.77&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>LESSON_ADMIN_HOST</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>`http://</span><span style=color:#e6db74>${</span><span style=color:#a6e22e>DEV_IP</span><span style=color:#e6db74>}</span><span style=color:#e6db74>:5266`</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>LESSON_SEARCH_HOST</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>`http://</span><span style=color:#e6db74>${</span><span style=color:#a6e22e>DEV_IP</span><span style=color:#e6db74>}</span><span style=color:#e6db74>:5003`</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>MEMBER_EXCEL</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>`</span><span style=color:#e6db74>${</span><span style=color:#a6e22e>LESSON_ADMIN_HOST</span><span style=color:#e6db74>}</span><span style=color:#e6db74>/api/v1/member/excel`</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>EPISODE_EXCEL</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>`</span><span style=color:#e6db74>${</span><span style=color:#a6e22e>LESSON_ADMIN_HOST</span><span style=color:#e6db74>}</span><span style=color:#e6db74>/api/v1/episode/excel`</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>ORDER_EXCEL</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>`</span><span style=color:#e6db74>${</span><span style=color:#a6e22e>LESSON_ADMIN_HOST</span><span style=color:#e6db74>}</span><span style=color:#e6db74>/api/v1/order/excel`</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Minio计算属性
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>MINIO_HOST</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>`http://</span><span style=color:#e6db74>${</span><span style=color:#a6e22e>PROD_IP</span><span style=color:#e6db74>}</span><span style=color:#e6db74>:9001/lesson-bucket/`</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>MINIO_AVATAR</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>computed</span>(() =&gt; (<span style=color:#a6e22e>url</span>) =&gt; <span style=color:#a6e22e>MINIO_HOST</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;/avatar/&#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>url</span>);
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>MINIO_BANNER</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>computed</span>(() =&gt; (<span style=color:#a6e22e>url</span>) =&gt; <span style=color:#a6e22e>MINIO_HOST</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;/banner/&#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>url</span>);
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>MINIO_COVER</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>computed</span>(() =&gt; (<span style=color:#a6e22e>url</span>) =&gt; <span style=color:#a6e22e>MINIO_HOST</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;/cover/&#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>url</span>);
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>MINIO_SUMMARY</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>computed</span>(() =&gt; (<span style=color:#a6e22e>url</span>) =&gt; <span style=color:#a6e22e>MINIO_HOST</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;/summary/&#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>url</span>);
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>MINIO_VIDEO</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>computed</span>(() =&gt; (<span style=color:#a6e22e>url</span>) =&gt; <span style=color:#a6e22e>MINIO_HOST</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;/video/&#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>url</span>);
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>MINIO_VIDEO_COVER</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>computed</span>(() =&gt; (<span style=color:#a6e22e>url</span>) =&gt; <span style=color:#a6e22e>MINIO_HOST</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;/videoCover/&#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>url</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 文件上传计算属性
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>UPLOAD_BANNER</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>computed</span>(() =&gt; (<span style=color:#a6e22e>id</span>) =&gt; <span style=color:#a6e22e>LESSON_ADMIN_HOST</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;/api/v1/banner/upload/&#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>id</span>);
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>UPLOAD_COVER</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>computed</span>(() =&gt; (<span style=color:#a6e22e>id</span>) =&gt; <span style=color:#a6e22e>LESSON_ADMIN_HOST</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;/api/v1/course/uploadCover/&#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>id</span>);
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>UPLOAD_SUMMARY</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>computed</span>(() =&gt; (<span style=color:#a6e22e>id</span>) =&gt; <span style=color:#a6e22e>LESSON_ADMIN_HOST</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;/api/v1/course/uploadSummary/&#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>id</span>);
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>UPLOAD_VIDEO_COVER</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>computed</span>(() =&gt; (<span style=color:#a6e22e>id</span>) =&gt; <span style=color:#a6e22e>LESSON_ADMIN_HOST</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;/api/v1/episode/uploadCover/&#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>id</span>);
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>UPLOAD_VIDEO</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>computed</span>(() =&gt; (<span style=color:#a6e22e>id</span>) =&gt; <span style=color:#a6e22e>LESSON_ADMIN_HOST</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;/api/v1/episode/uploadVideo/&#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>id</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 常用请求状态码
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>STATUS</span> <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;SUCCESS&#34;</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>1000</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;FAILED&#34;</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>1001</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;VALIDATE_FAILED&#34;</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>1002</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;TOKEN_FAILED&#34;</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>1003</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;TOKEN_EXPIRING_SOON&#34;</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>1004</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;FORBIDDEN&#34;</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>1005</span>,
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 常用表单规则
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>RULE</span> <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;USERNAME&#39;</span><span style=color:#f92672>:</span> [{
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>pattern</span><span style=color:#f92672>:</span> <span style=color:#e6db74>/^[_a-zA-Z0-9]{4,20}$/</span>,
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>message</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;账号须由4到20个字母，数字或下划线组成&#39;</span>
</span></span><span style=display:flex><span>    }],
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;PASSWORD&#39;</span><span style=color:#f92672>:</span> [{
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>pattern</span><span style=color:#f92672>:</span> <span style=color:#e6db74>/^[_a-zA-Z0-9]{4,20}$/</span>,
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>message</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;密码须由4到20个字母，数字或下划线组成&#39;</span>
</span></span><span style=display:flex><span>    }],
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;NICKNAME&#39;</span><span style=color:#f92672>:</span> [{
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>pattern</span><span style=color:#f92672>:</span> <span style=color:#e6db74>/^[\u4e00-\u9fa5_a-zA-Z0-9]{4,20}$/</span>,
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>message</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;昵称须由4到20个中文，字母，数字或下划线组成&#39;</span>
</span></span><span style=display:flex><span>    }],
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;REALNAME&#39;</span><span style=color:#f92672>:</span> [{
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>pattern</span><span style=color:#f92672>:</span> <span style=color:#e6db74>/^[\u4e00-\u9fa5]{2,10}$/</span>,
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>message</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;姓名须由2到10个中文组成&#39;</span>
</span></span><span style=display:flex><span>    }],
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;PHONE&#39;</span><span style=color:#f92672>:</span> [{
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>pattern</span><span style=color:#f92672>:</span> <span style=color:#e6db74>/^1(3[0-9]|4[01456879]|5[0-35-9]|6[2567]|7[0-8]|8[0-9]|9[0-35-9])\d{8}$/</span>,
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>message</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;手机号码格式有误&#39;</span>
</span></span><span style=display:flex><span>    }],
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;IDCARD&#39;</span><span style=color:#f92672>:</span> [{
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>pattern</span><span style=color:#f92672>:</span> <span style=color:#e6db74>/^[1-9]\d{5}(19|20)\d{2}((0[1-9])|(1[0-2]))(([0-2][1-9])|10|20|30|31)\d{3}[0-9Xx]$/</span>,
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>message</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;身份证号格式有误&#39;</span>
</span></span><span style=display:flex><span>    }],
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;COMM_TITLE&#39;</span><span style=color:#f92672>:</span> [{
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>pattern</span><span style=color:#f92672>:</span> <span style=color:#e6db74>/^[\u4e00-\u9fa5_a-zA-Z0-9]{2,30}$/</span>,
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>message</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;标题须由2到30个字母，数字或下划线组成&#39;</span>
</span></span><span style=display:flex><span>    }],
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;COMMON_INFO&#39;</span><span style=color:#f92672>:</span> [
</span></span><span style=display:flex><span>        {<span style=color:#a6e22e>min</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>1</span>, <span style=color:#a6e22e>max</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>1024</span>, <span style=color:#a6e22e>message</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;描述范围必须在1~1024之间&#39;</span>}
</span></span><span style=display:flex><span>    ],
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// EL图标名
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>ICONS</span> <span style=color:#f92672>=</span> [
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;Plus&#39;</span>, <span style=color:#e6db74>&#39;Minus&#39;</span>, <span style=color:#e6db74>&#39;CirclePlus&#39;</span>, <span style=color:#e6db74>&#39;Search&#39;</span>, <span style=color:#e6db74>&#39;Female&#39;</span>, <span style=color:#e6db74>&#39;Male&#39;</span>, <span style=color:#e6db74>&#39;Aim&#39;</span>, <span style=color:#e6db74>&#39;House&#39;</span>, <span style=color:#e6db74>&#39;FullScreen&#39;</span>, <span style=color:#e6db74>&#39;Loading&#39;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;Link&#39;</span>, <span style=color:#e6db74>&#39;Service&#39;</span>, <span style=color:#e6db74>&#39;Pointer&#39;</span>, <span style=color:#e6db74>&#39;Star&#39;</span>, <span style=color:#e6db74>&#39;Notification&#39;</span>, <span style=color:#e6db74>&#39;Connection&#39;</span>, <span style=color:#e6db74>&#39;ChatDotRound&#39;</span>, <span style=color:#e6db74>&#39;Setting&#39;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;Clock&#39;</span>, <span style=color:#e6db74>&#39;Position&#39;</span>, <span style=color:#e6db74>&#39;Discount&#39;</span>, <span style=color:#e6db74>&#39;Odometer&#39;</span>, <span style=color:#e6db74>&#39;ChatSquare&#39;</span>, <span style=color:#e6db74>&#39;ChatRound&#39;</span>, <span style=color:#e6db74>&#39;ChatLineRound&#39;</span>, <span style=color:#e6db74>&#39;ChatLineSquare&#39;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;ChatDotSquare&#39;</span>, <span style=color:#e6db74>&#39;View&#39;</span>, <span style=color:#e6db74>&#39;Hide&#39;</span>, <span style=color:#e6db74>&#39;Unlock&#39;</span>, <span style=color:#e6db74>&#39;Lock&#39;</span>, <span style=color:#e6db74>&#39;RefreshRight&#39;</span>, <span style=color:#e6db74>&#39;RefreshLeft&#39;</span>, <span style=color:#e6db74>&#39;Refresh&#39;</span>, <span style=color:#e6db74>&#39;Bell&#39;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;MuteNotification&#39;</span>, <span style=color:#e6db74>&#39;User&#39;</span>, <span style=color:#e6db74>&#39;Check&#39;</span>, <span style=color:#e6db74>&#39;CircleCheck&#39;</span>, <span style=color:#e6db74>&#39;Warning&#39;</span>, <span style=color:#e6db74>&#39;CircleClose&#39;</span>, <span style=color:#e6db74>&#39;Close&#39;</span>, <span style=color:#e6db74>&#39;PieChart&#39;</span>, <span style=color:#e6db74>&#39;More&#39;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;Compass&#39;</span>, <span style=color:#e6db74>&#39;Filter&#39;</span>, <span style=color:#e6db74>&#39;Switch&#39;</span>, <span style=color:#e6db74>&#39;Select&#39;</span>, <span style=color:#e6db74>&#39;SemiSelect&#39;</span>, <span style=color:#e6db74>&#39;CloseBold&#39;</span>, <span style=color:#e6db74>&#39;EditPen&#39;</span>, <span style=color:#e6db74>&#39;Edit&#39;</span>, <span style=color:#e6db74>&#39;Message&#39;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;MessageBox&#39;</span>, <span style=color:#e6db74>&#39;TurnOff&#39;</span>, <span style=color:#e6db74>&#39;Finished&#39;</span>, <span style=color:#e6db74>&#39;Delete&#39;</span>, <span style=color:#e6db74>&#39;Crop&#39;</span>, <span style=color:#e6db74>&#39;SwitchButton&#39;</span>, <span style=color:#e6db74>&#39;Operation&#39;</span>, <span style=color:#e6db74>&#39;Open&#39;</span>, <span style=color:#e6db74>&#39;Remove&#39;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;ZoomOut&#39;</span>, <span style=color:#e6db74>&#39;ZoomIn&#39;</span>, <span style=color:#e6db74>&#39;InfoFilled&#39;</span>, <span style=color:#e6db74>&#39;CircleCheckFilled&#39;</span>, <span style=color:#e6db74>&#39;SuccessFilled&#39;</span>, <span style=color:#e6db74>&#39;WarningFilled&#39;</span>, <span style=color:#e6db74>&#39;CircleCloseFilled&#39;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;QuestionFilled&#39;</span>, <span style=color:#e6db74>&#39;WarnTriangleFilled&#39;</span>, <span style=color:#e6db74>&#39;UserFilled&#39;</span>, <span style=color:#e6db74>&#39;MoreFilled&#39;</span>, <span style=color:#e6db74>&#39;Tools&#39;</span>, <span style=color:#e6db74>&#39;HomeFilled&#39;</span>, <span style=color:#e6db74>&#39;Menu&#39;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;UploadFilled&#39;</span>, <span style=color:#e6db74>&#39;Avatar&#39;</span>, <span style=color:#e6db74>&#39;HelpFilled&#39;</span>, <span style=color:#e6db74>&#39;Share&#39;</span>, <span style=color:#e6db74>&#39;StarFilled&#39;</span>, <span style=color:#e6db74>&#39;Comment&#39;</span>, <span style=color:#e6db74>&#39;Histogram&#39;</span>, <span style=color:#e6db74>&#39;Grid&#39;</span>, <span style=color:#e6db74>&#39;Promotion&#39;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;DeleteFilled&#39;</span>, <span style=color:#e6db74>&#39;RemoveFilled&#39;</span>, <span style=color:#e6db74>&#39;CirclePlusFilled&#39;</span>, <span style=color:#e6db74>&#39;ArrowLeft&#39;</span>, <span style=color:#e6db74>&#39;ArrowUp&#39;</span>, <span style=color:#e6db74>&#39;ArrowRight&#39;</span>, <span style=color:#e6db74>&#39;ArrowDown&#39;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;ArrowLeftBold&#39;</span>, <span style=color:#e6db74>&#39;ArrowUpBold&#39;</span>, <span style=color:#e6db74>&#39;ArrowRightBold&#39;</span>, <span style=color:#e6db74>&#39;ArrowDownBold&#39;</span>, <span style=color:#e6db74>&#39;DArrowRight&#39;</span>, <span style=color:#e6db74>&#39;DArrowLeft&#39;</span>, <span style=color:#e6db74>&#39;Download&#39;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;Upload&#39;</span>, <span style=color:#e6db74>&#39;Top&#39;</span>, <span style=color:#e6db74>&#39;Bottom&#39;</span>, <span style=color:#e6db74>&#39;Back&#39;</span>, <span style=color:#e6db74>&#39;Right&#39;</span>, <span style=color:#e6db74>&#39;TopRight&#39;</span>, <span style=color:#e6db74>&#39;TopLeft&#39;</span>, <span style=color:#e6db74>&#39;BottomRight&#39;</span>, <span style=color:#e6db74>&#39;BottomLeft&#39;</span>, <span style=color:#e6db74>&#39;Sort&#39;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;SortUp&#39;</span>, <span style=color:#e6db74>&#39;SortDown&#39;</span>, <span style=color:#e6db74>&#39;Rank&#39;</span>, <span style=color:#e6db74>&#39;CaretLeft&#39;</span>, <span style=color:#e6db74>&#39;CaretTop&#39;</span>, <span style=color:#e6db74>&#39;CaretRight&#39;</span>, <span style=color:#e6db74>&#39;CaretBottom&#39;</span>, <span style=color:#e6db74>&#39;DCaret&#39;</span>, <span style=color:#e6db74>&#39;Expand&#39;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;Fold&#39;</span>, <span style=color:#e6db74>&#39;DocumentAdd&#39;</span>, <span style=color:#e6db74>&#39;Document&#39;</span>, <span style=color:#e6db74>&#39;Notebook&#39;</span>, <span style=color:#e6db74>&#39;Tickets&#39;</span>, <span style=color:#e6db74>&#39;Memo&#39;</span>, <span style=color:#e6db74>&#39;Collection&#39;</span>, <span style=color:#e6db74>&#39;Postcard&#39;</span>, <span style=color:#e6db74>&#39;ScaleToOriginal&#39;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;SetUp&#39;</span>, <span style=color:#e6db74>&#39;DocumentDelete&#39;</span>, <span style=color:#e6db74>&#39;DocumentChecked&#39;</span>, <span style=color:#e6db74>&#39;DataBoard&#39;</span>, <span style=color:#e6db74>&#39;DataAnalysis&#39;</span>, <span style=color:#e6db74>&#39;CopyDocument&#39;</span>, <span style=color:#e6db74>&#39;FolderChecked&#39;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;Files&#39;</span>, <span style=color:#e6db74>&#39;Folder&#39;</span>, <span style=color:#e6db74>&#39;FolderDelete&#39;</span>, <span style=color:#e6db74>&#39;FolderRemove&#39;</span>, <span style=color:#e6db74>&#39;FolderOpened&#39;</span>, <span style=color:#e6db74>&#39;DocumentCopy&#39;</span>, <span style=color:#e6db74>&#39;DocumentRemove&#39;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;FolderAdd&#39;</span>, <span style=color:#e6db74>&#39;FirstAidKit&#39;</span>, <span style=color:#e6db74>&#39;Reading&#39;</span>, <span style=color:#e6db74>&#39;DataLine&#39;</span>, <span style=color:#e6db74>&#39;Management&#39;</span>, <span style=color:#e6db74>&#39;Checked&#39;</span>, <span style=color:#e6db74>&#39;Ticket&#39;</span>, <span style=color:#e6db74>&#39;Failed&#39;</span>, <span style=color:#e6db74>&#39;TrendCharts&#39;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;List&#39;</span>, <span style=color:#e6db74>&#39;Microphone&#39;</span>, <span style=color:#e6db74>&#39;Mute&#39;</span>, <span style=color:#e6db74>&#39;Mic&#39;</span>, <span style=color:#e6db74>&#39;VideoPause&#39;</span>, <span style=color:#e6db74>&#39;VideoCamera&#39;</span>, <span style=color:#e6db74>&#39;VideoPlay&#39;</span>, <span style=color:#e6db74>&#39;Headset&#39;</span>, <span style=color:#e6db74>&#39;Monitor&#39;</span>, <span style=color:#e6db74>&#39;Film&#39;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;Camera&#39;</span>, <span style=color:#e6db74>&#39;Picture&#39;</span>, <span style=color:#e6db74>&#39;PictureRounded&#39;</span>, <span style=color:#e6db74>&#39;Iphone&#39;</span>, <span style=color:#e6db74>&#39;Cellphone&#39;</span>, <span style=color:#e6db74>&#39;VideoCameraFilled&#39;</span>, <span style=color:#e6db74>&#39;PictureFilled&#39;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;Platform&#39;</span>, <span style=color:#e6db74>&#39;CameraFilled&#39;</span>, <span style=color:#e6db74>&#39;BellFilled&#39;</span>, <span style=color:#e6db74>&#39;Location&#39;</span>, <span style=color:#e6db74>&#39;LocationInformation&#39;</span>, <span style=color:#e6db74>&#39;DeleteLocation&#39;</span>, <span style=color:#e6db74>&#39;Coordinate&#39;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;Bicycle&#39;</span>, <span style=color:#e6db74>&#39;OfficeBuilding&#39;</span>, <span style=color:#e6db74>&#39;School&#39;</span>, <span style=color:#e6db74>&#39;Guide&#39;</span>, <span style=color:#e6db74>&#39;AddLocation&#39;</span>, <span style=color:#e6db74>&#39;MapLocation&#39;</span>, <span style=color:#e6db74>&#39;Place&#39;</span>, <span style=color:#e6db74>&#39;LocationFilled&#39;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;Van&#39;</span>, <span style=color:#e6db74>&#39;Watermelon&#39;</span>, <span style=color:#e6db74>&#39;Pear&#39;</span>, <span style=color:#e6db74>&#39;NoSmoking&#39;</span>, <span style=color:#e6db74>&#39;Smoking&#39;</span>, <span style=color:#e6db74>&#39;Mug&#39;</span>, <span style=color:#e6db74>&#39;GobletSquareFull&#39;</span>, <span style=color:#e6db74>&#39;GobletFull&#39;</span>, <span style=color:#e6db74>&#39;KnifeFork&#39;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;Sugar&#39;</span>, <span style=color:#e6db74>&#39;Bowl&#39;</span>, <span style=color:#e6db74>&#39;MilkTea&#39;</span>, <span style=color:#e6db74>&#39;Lollipop&#39;</span>, <span style=color:#e6db74>&#39;Coffee&#39;</span>, <span style=color:#e6db74>&#39;Chicken&#39;</span>, <span style=color:#e6db74>&#39;Dish&#39;</span>, <span style=color:#e6db74>&#39;IceTea&#39;</span>, <span style=color:#e6db74>&#39;ColdDrink&#39;</span>, <span style=color:#e6db74>&#39;CoffeeCup&#39;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;DishDot&#39;</span>, <span style=color:#e6db74>&#39;IceDrink&#39;</span>, <span style=color:#e6db74>&#39;IceCream&#39;</span>, <span style=color:#e6db74>&#39;Dessert&#39;</span>, <span style=color:#e6db74>&#39;IceCreamSquare&#39;</span>, <span style=color:#e6db74>&#39;ForkSpoon&#39;</span>, <span style=color:#e6db74>&#39;IceCreamRound&#39;</span>, <span style=color:#e6db74>&#39;Food&#39;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;HotWater&#39;</span>, <span style=color:#e6db74>&#39;Grape&#39;</span>, <span style=color:#e6db74>&#39;Fries&#39;</span>, <span style=color:#e6db74>&#39;Apple&#39;</span>, <span style=color:#e6db74>&#39;Burger&#39;</span>, <span style=color:#e6db74>&#39;Goblet&#39;</span>, <span style=color:#e6db74>&#39;GobletSquare&#39;</span>, <span style=color:#e6db74>&#39;Orange&#39;</span>, <span style=color:#e6db74>&#39;Cherry&#39;</span>, <span style=color:#e6db74>&#39;Printer&#39;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;Calendar&#39;</span>, <span style=color:#e6db74>&#39;CreditCard&#39;</span>, <span style=color:#e6db74>&#39;Box&#39;</span>, <span style=color:#e6db74>&#39;Money&#39;</span>, <span style=color:#e6db74>&#39;Refrigerator&#39;</span>, <span style=color:#e6db74>&#39;Cpu&#39;</span>, <span style=color:#e6db74>&#39;Football&#39;</span>, <span style=color:#e6db74>&#39;Brush&#39;</span>, <span style=color:#e6db74>&#39;Suitcase&#39;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;SuitcaseLine&#39;</span>, <span style=color:#e6db74>&#39;Umbrella&#39;</span>, <span style=color:#e6db74>&#39;AlarmClock&#39;</span>, <span style=color:#e6db74>&#39;Medal&#39;</span>, <span style=color:#e6db74>&#39;GoldMedal&#39;</span>, <span style=color:#e6db74>&#39;Present&#39;</span>, <span style=color:#e6db74>&#39;Mouse&#39;</span>, <span style=color:#e6db74>&#39;Watch&#39;</span>, <span style=color:#e6db74>&#39;QuartzWatch&#39;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;Magnet&#39;</span>, <span style=color:#e6db74>&#39;Help&#39;</span>, <span style=color:#e6db74>&#39;Soccer&#39;</span>, <span style=color:#e6db74>&#39;ToiletPaper&#39;</span>, <span style=color:#e6db74>&#39;ReadingLamp&#39;</span>, <span style=color:#e6db74>&#39;Paperclip&#39;</span>, <span style=color:#e6db74>&#39;MagicStick&#39;</span>, <span style=color:#e6db74>&#39;Basketball&#39;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;Baseball&#39;</span>, <span style=color:#e6db74>&#39;Coin&#39;</span>, <span style=color:#e6db74>&#39;Goods&#39;</span>, <span style=color:#e6db74>&#39;Sell&#39;</span>, <span style=color:#e6db74>&#39;SoldOut&#39;</span>, <span style=color:#e6db74>&#39;Key&#39;</span>, <span style=color:#e6db74>&#39;ShoppingCart&#39;</span>, <span style=color:#e6db74>&#39;ShoppingCartFull&#39;</span>, <span style=color:#e6db74>&#39;ShoppingTrolley&#39;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;Phone&#39;</span>, <span style=color:#e6db74>&#39;Scissor&#39;</span>, <span style=color:#e6db74>&#39;Handbag&#39;</span>, <span style=color:#e6db74>&#39;ShoppingBag&#39;</span>, <span style=color:#e6db74>&#39;Trophy&#39;</span>, <span style=color:#e6db74>&#39;TrophyBase&#39;</span>, <span style=color:#e6db74>&#39;Stopwatch&#39;</span>, <span style=color:#e6db74>&#39;Timer&#39;</span>, <span style=color:#e6db74>&#39;CollectionTag&#39;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;TakeawayBox&#39;</span>, <span style=color:#e6db74>&#39;PriceTag&#39;</span>, <span style=color:#e6db74>&#39;Wallet&#39;</span>, <span style=color:#e6db74>&#39;Opportunity&#39;</span>, <span style=color:#e6db74>&#39;PhoneFilled&#39;</span>, <span style=color:#e6db74>&#39;WalletFilled&#39;</span>, <span style=color:#e6db74>&#39;GoodsFilled&#39;</span>, <span style=color:#e6db74>&#39;Flag&#39;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;BrushFilled&#39;</span>, <span style=color:#e6db74>&#39;Briefcase&#39;</span>, <span style=color:#e6db74>&#39;Stamp&#39;</span>, <span style=color:#e6db74>&#39;Sunrise&#39;</span>, <span style=color:#e6db74>&#39;Sunny&#39;</span>, <span style=color:#e6db74>&#39;Ship&#39;</span>, <span style=color:#e6db74>&#39;MostlyCloudy&#39;</span>, <span style=color:#e6db74>&#39;PartlyCloudy&#39;</span>, <span style=color:#e6db74>&#39;Sunset&#39;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;Drizzling&#39;</span>, <span style=color:#e6db74>&#39;Pouring&#39;</span>, <span style=color:#e6db74>&#39;Cloudy&#39;</span>, <span style=color:#e6db74>&#39;Moon&#39;</span>, <span style=color:#e6db74>&#39;MoonNight&#39;</span>, <span style=color:#e6db74>&#39;Lightning&#39;</span>, <span style=color:#e6db74>&#39;ChromeFilled&#39;</span>, <span style=color:#e6db74>&#39;Eleme&#39;</span>, <span style=color:#e6db74>&#39;ElemeFilled&#39;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;ElementPlus&#39;</span>, <span style=color:#e6db74>&#39;Shop&#39;</span>, <span style=color:#e6db74>&#39;SwitchFilled&#39;</span>, <span style=color:#e6db74>&#39;WindPower&#39;</span>
</span></span><span style=display:flex><span>];
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 项目信息
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>PROJECT_INFO</span> <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;title&#39;</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;《李氏云课堂》后台管理子系统&#39;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;author&#39;</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;lsx&#39;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;version&#39;</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;v1.0.0&#39;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;host&#39;</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;http://localhost:5266&#39;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;webHost&#39;</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;http://localhost:6625&#39;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;docHost&#39;</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;http://localhost:5266/doc.html&#39;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;postApi&#39;</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>48</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;getApi&#39;</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>49</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;info&#39;</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Lesson后台仅允许管理员用户访问，包含对全部用户记录，全部视频记录及其章节记录，&#39;</span> <span style=color:#f92672>+</span>
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#39;全部订单记录等进行统一管理，数据分析以及数据打印，包含对用户头像文件，视频媒体文件，&#39;</span> <span style=color:#f92672>+</span>
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#39;封面图片，摘要图片等文件的统一管理，数据分析以及数据打印，包含对前后台项目日志数据的&#39;</span> <span style=color:#f92672>+</span>
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#39;统一管理，数据分析以及数据打印。&#39;</span>,
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 项目技术栈信息
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>PROJECT_SKILLS</span> <span style=color:#f92672>=</span> [
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>key</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;底层操作系统&#39;</span>, <span style=color:#a6e22e>val</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Windows&#39;</span>, <span style=color:#a6e22e>version</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;11&#39;</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>key</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;语言开发环境&#39;</span>, <span style=color:#a6e22e>val</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;JDK&#39;</span>, <span style=color:#a6e22e>version</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;11.0.16.1&#39;</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>key</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;集成开发工具&#39;</span>, <span style=color:#a6e22e>val</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;IntelliJ IDEA&#39;</span>, <span style=color:#a6e22e>version</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;2021.3.3 Ultimate Edition&#39;</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>key</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;项目管理工具&#39;</span>, <span style=color:#a6e22e>val</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Maven&#39;</span>, <span style=color:#a6e22e>version</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;3.6.0&#39;</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>key</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;版本控制工具&#39;</span>, <span style=color:#a6e22e>val</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Git&#39;</span>, <span style=color:#a6e22e>version</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;2.28.0.windows.1&#39;</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>key</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;代码托管中心&#39;</span>, <span style=color:#a6e22e>val</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;GitEE&#39;</span>, <span style=color:#a6e22e>version</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;latest&#39;</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>key</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;前端服务容器&#39;</span>, <span style=color:#a6e22e>val</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Node&#39;</span>, <span style=color:#a6e22e>version</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;16.14.0&#39;</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>key</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;前端测试软件&#39;</span>, <span style=color:#a6e22e>val</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Edge&#39;</span>, <span style=color:#a6e22e>version</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;120.0.2210.77&#39;</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>key</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;压力测试工具&#39;</span>, <span style=color:#a6e22e>val</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;JMeter&#39;</span>, <span style=color:#a6e22e>version</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;5.4.1&#39;</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>key</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;虚拟管理工具&#39;</span>, <span style=color:#a6e22e>val</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;VmWare&#39;</span>, <span style=color:#a6e22e>version</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;16.2.1 build-18811642&#39;</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>key</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;虚拟操作系统&#39;</span>, <span style=color:#a6e22e>val</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;CentOS&#39;</span>, <span style=color:#a6e22e>version</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;x86_64-Minimal-1611&#39;</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>key</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;容器管理引擎&#39;</span>, <span style=color:#a6e22e>val</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Docker&#39;</span>, <span style=color:#a6e22e>version</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;18.06.3-ce, build d7080c1&#39;</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>key</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;数据存储仓库&#39;</span>, <span style=color:#a6e22e>val</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;MySQL&#39;</span>, <span style=color:#a6e22e>version</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;8.0.25&#39;</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>key</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;对象存储仓库&#39;</span>, <span style=color:#a6e22e>val</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;MinIO&#39;</span>, <span style=color:#a6e22e>version</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;RELEASE.2023-08-31T15-31-16Z&#39;</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>key</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;文档存储仓库&#39;</span>, <span style=color:#a6e22e>val</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;MongoDB&#39;</span>, <span style=color:#a6e22e>version</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;6.0.3&#39;</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>key</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;数据缓存仓库&#39;</span>, <span style=color:#a6e22e>val</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Redis&#39;</span>, <span style=color:#a6e22e>version</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;7.0.5&#39;</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>key</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;消息队列组件&#39;</span>, <span style=color:#a6e22e>val</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;RabbitMQ&#39;</span>, <span style=color:#a6e22e>version</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;3.11.2-management&#39;</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>key</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;反向代理组件&#39;</span>, <span style=color:#a6e22e>val</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Nginx&#39;</span>, <span style=color:#a6e22e>version</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;1.23.2&#39;</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>key</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;搜索引擎组件&#39;</span>, <span style=color:#a6e22e>val</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;ElasticSearch&#39;</span>, <span style=color:#a6e22e>version</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;7.11.2&#39;</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>key</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;搜索引擎界面&#39;</span>, <span style=color:#a6e22e>val</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Kibana&#39;</span>, <span style=color:#a6e22e>version</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;7.11.2&#39;</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>key</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;日志收集组件&#39;</span>, <span style=color:#a6e22e>val</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Logstash&#39;</span>, <span style=color:#a6e22e>version</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;7.11.2&#39;</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>key</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;短信服务平台&#39;</span>, <span style=color:#a6e22e>val</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;阿里云SMS短信平台&#39;</span>, <span style=color:#a6e22e>version</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;latest&#39;</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>key</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;云端对象存储&#39;</span>, <span style=color:#a6e22e>val</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;阿里云OSS对象存储&#39;</span>, <span style=color:#a6e22e>version</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;latest&#39;</span>},
</span></span><span style=display:flex><span>];
</span></span></code></pre></div><h3 id=7-开发全局工具>7. 开发全局工具</h3><p><code>@/util/index.js</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#75715e>/* ==================== 自定义函数封装 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/*
</span></span></span><span style=display:flex><span><span style=color:#75715e> * 根据CSS选择器，快速捕获单个DOM元素
</span></span></span><span style=display:flex><span><span style=color:#75715e> *
</span></span></span><span style=display:flex><span><span style=color:#75715e> * @param selector CSS风格的选择器字符串，如 &#39;#title&#39; 等
</span></span></span><span style=display:flex><span><span style=color:#75715e> * @return 单个DOM元素
</span></span></span><span style=display:flex><span><span style=color:#75715e> * */</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>dom</span>(<span style=color:#a6e22e>selector</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> document.<span style=color:#a6e22e>querySelector</span>(<span style=color:#a6e22e>selector</span>);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/*
</span></span></span><span style=display:flex><span><span style=color:#75715e> * 根据CSS选择器，快速捕获多个DOM元素
</span></span></span><span style=display:flex><span><span style=color:#75715e> *
</span></span></span><span style=display:flex><span><span style=color:#75715e> * @param selector CSS风格的选择器字符串，如 &#39;.title&#39; 等
</span></span></span><span style=display:flex><span><span style=color:#75715e> * @return 多个DOM元素集合
</span></span></span><span style=display:flex><span><span style=color:#75715e> * */</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>doms</span>(<span style=color:#a6e22e>selector</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> document.<span style=color:#a6e22e>querySelectorAll</span>(<span style=color:#a6e22e>selector</span>);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/*
</span></span></span><span style=display:flex><span><span style=color:#75715e> * 将JSON对象转为QS字符串
</span></span></span><span style=display:flex><span><span style=color:#75715e> *
</span></span></span><span style=display:flex><span><span style=color:#75715e> * @param jsonObj JSON对象
</span></span></span><span style=display:flex><span><span style=color:#75715e> * @return 查询串，如 a=1&amp;b=2
</span></span></span><span style=display:flex><span><span style=color:#75715e> * */</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>jsonToQs</span>(<span style=color:#a6e22e>jsonObj</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> Object.<span style=color:#a6e22e>keys</span>(<span style=color:#a6e22e>jsonObj</span>).<span style=color:#a6e22e>map</span>(<span style=color:#a6e22e>key</span> =&gt; {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (Array.<span style=color:#a6e22e>isArray</span>(<span style=color:#a6e22e>jsonObj</span>[<span style=color:#a6e22e>key</span>])) {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>jsonObj</span>[<span style=color:#a6e22e>key</span>].<span style=color:#a6e22e>map</span>(<span style=color:#a6e22e>e</span> =&gt; <span style=color:#a6e22e>key</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;=&#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>e</span>).<span style=color:#a6e22e>join</span>(<span style=color:#e6db74>&#39;&amp;&#39;</span>);
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>key</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;=&#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>jsonObj</span>[<span style=color:#a6e22e>key</span>]
</span></span><span style=display:flex><span>    }).<span style=color:#a6e22e>join</span>(<span style=color:#e6db74>&#39;&amp;&#39;</span>);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/*
</span></span></span><span style=display:flex><span><span style=color:#75715e> * 生成len位随机字符串
</span></span></span><span style=display:flex><span><span style=color:#75715e> *
</span></span></span><span style=display:flex><span><span style=color:#75715e> * @param len 随机字符串位数，范围在1 ~ 36之间，默认为18
</span></span></span><span style=display:flex><span><span style=color:#75715e> * @return 随机字符串
</span></span></span><span style=display:flex><span><span style=color:#75715e> * */</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>randomStr</span>(<span style=color:#a6e22e>len</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>18</span>) {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 随机一个小数，并将其转为36进制字符
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>result</span> <span style=color:#f92672>=</span> Math.<span style=color:#a6e22e>random</span>().<span style=color:#a6e22e>toString</span>(<span style=color:#ae81ff>36</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 消除所有点符号
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>result</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>result</span>.<span style=color:#a6e22e>replaceAll</span>(<span style=color:#e6db74>&#39;.&#39;</span>, <span style=color:#e6db74>&#39;&#39;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 截取后len位字符串并返回: len不小于1且不超过36
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>len</span> <span style=color:#f92672>=</span> Math.<span style=color:#a6e22e>max</span>(<span style=color:#a6e22e>len</span>, <span style=color:#ae81ff>1</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>len</span> <span style=color:#f92672>=</span> Math.<span style=color:#a6e22e>min</span>(<span style=color:#a6e22e>len</span>, <span style=color:#ae81ff>36</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>result</span>.<span style=color:#a6e22e>slice</span>(<span style=color:#f92672>-</span><span style=color:#a6e22e>len</span>);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/*
</span></span></span><span style=display:flex><span><span style=color:#75715e> * 根据性别代码，返回对应的性别字符
</span></span></span><span style=display:flex><span><span style=color:#75715e> *
</span></span></span><span style=display:flex><span><span style=color:#75715e> * @param genderCode 性别代码
</span></span></span><span style=display:flex><span><span style=color:#75715e> * @return 对应的性别字符，0女，1男，2保密
</span></span></span><span style=display:flex><span><span style=color:#75715e> * */</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>genderStr</span>(<span style=color:#a6e22e>genderCode</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>genderCode</span> <span style=color:#f92672>===</span> <span style=color:#e6db74>&#39;0&#39;</span> <span style=color:#f92672>||</span> <span style=color:#a6e22e>genderCode</span> <span style=color:#f92672>===</span> <span style=color:#ae81ff>0</span>) <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#39;女孩&#39;</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>genderCode</span> <span style=color:#f92672>===</span> <span style=color:#e6db74>&#39;1&#39;</span> <span style=color:#f92672>||</span> <span style=color:#a6e22e>genderCode</span> <span style=color:#f92672>===</span> <span style=color:#ae81ff>1</span>) <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#39;男孩&#39;</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>genderCode</span> <span style=color:#f92672>===</span> <span style=color:#e6db74>&#39;2&#39;</span> <span style=color:#f92672>||</span> <span style=color:#a6e22e>genderCode</span> <span style=color:#f92672>===</span> <span style=color:#ae81ff>2</span>) <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#39;保密&#39;</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#39;性别代码异常&#39;</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/*
</span></span></span><span style=display:flex><span><span style=color:#75715e> * 根据评论目标代码，返回对应的字符串文案
</span></span></span><span style=display:flex><span><span style=color:#75715e> *
</span></span></span><span style=display:flex><span><span style=color:#75715e> * @param typeCode 评论目标代码
</span></span></span><span style=display:flex><span><span style=color:#75715e> * @return 对应的字符串文案，0视频，1评论
</span></span></span><span style=display:flex><span><span style=color:#75715e> * */</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>commentTypeStr</span>(<span style=color:#a6e22e>typeCode</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>typeCode</span> <span style=color:#f92672>===</span> <span style=color:#e6db74>&#39;0&#39;</span> <span style=color:#f92672>||</span> <span style=color:#a6e22e>typeCode</span> <span style=color:#f92672>===</span> <span style=color:#ae81ff>0</span>) <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#39;视频&#39;</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>typeCode</span> <span style=color:#f92672>===</span> <span style=color:#e6db74>&#39;1&#39;</span> <span style=color:#f92672>||</span> <span style=color:#a6e22e>typeCode</span> <span style=color:#f92672>===</span> <span style=color:#ae81ff>1</span>) <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#39;评论&#39;</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#39;评论目标代码异常&#39;</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/*
</span></span></span><span style=display:flex><span><span style=color:#75715e> * 根据举报目标代码，返回对应的字符串文案
</span></span></span><span style=display:flex><span><span style=color:#75715e> *
</span></span></span><span style=display:flex><span><span style=color:#75715e> * @param typeCode 举报目标代码
</span></span></span><span style=display:flex><span><span style=color:#75715e> * @return 对应的字符串文案，0课程，1评论
</span></span></span><span style=display:flex><span><span style=color:#75715e> * */</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>reportTypeStr</span>(<span style=color:#a6e22e>typeCode</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>typeCode</span> <span style=color:#f92672>===</span> <span style=color:#e6db74>&#39;0&#39;</span> <span style=color:#f92672>||</span> <span style=color:#a6e22e>typeCode</span> <span style=color:#f92672>===</span> <span style=color:#ae81ff>0</span>) <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#39;课程&#39;</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>typeCode</span> <span style=color:#f92672>===</span> <span style=color:#e6db74>&#39;1&#39;</span> <span style=color:#f92672>||</span> <span style=color:#a6e22e>typeCode</span> <span style=color:#f92672>===</span> <span style=color:#ae81ff>1</span>) <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#39;评论&#39;</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#39;举报目标代码异常&#39;</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/*
</span></span></span><span style=display:flex><span><span style=color:#75715e> * 根据优惠卷状态代码，返回对应的字符串文案
</span></span></span><span style=display:flex><span><span style=color:#75715e> *
</span></span></span><span style=display:flex><span><span style=color:#75715e> * @param stateCode 优惠卷状态代码
</span></span></span><span style=display:flex><span><span style=color:#75715e> * @return 对应的字符串文案，0可用，1禁用
</span></span></span><span style=display:flex><span><span style=color:#75715e> * */</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>couponsStateStr</span>(<span style=color:#a6e22e>stateCode</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>stateCode</span> <span style=color:#f92672>===</span> <span style=color:#e6db74>&#39;0&#39;</span> <span style=color:#f92672>||</span> <span style=color:#a6e22e>stateCode</span> <span style=color:#f92672>===</span> <span style=color:#ae81ff>0</span>) <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#39;可用&#39;</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>stateCode</span> <span style=color:#f92672>===</span> <span style=color:#e6db74>&#39;1&#39;</span> <span style=color:#f92672>||</span> <span style=color:#a6e22e>stateCode</span> <span style=color:#f92672>===</span> <span style=color:#ae81ff>1</span>) <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#39;禁用&#39;</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#39;优惠卷状态代码异常&#39;</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/*
</span></span></span><span style=display:flex><span><span style=color:#75715e> * 根据订单状态代码，返回对应的字符串文案
</span></span></span><span style=display:flex><span><span style=color:#75715e> *
</span></span></span><span style=display:flex><span><span style=color:#75715e> * @param stateCode 订单状态代码
</span></span></span><span style=display:flex><span><span style=color:#75715e> * @return 对应的字符串文案，0未付款，1已付款
</span></span></span><span style=display:flex><span><span style=color:#75715e> * */</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>orderStateStr</span>(<span style=color:#a6e22e>stateCode</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>stateCode</span> <span style=color:#f92672>===</span> <span style=color:#e6db74>&#39;0&#39;</span> <span style=color:#f92672>||</span> <span style=color:#a6e22e>stateCode</span> <span style=color:#f92672>===</span> <span style=color:#ae81ff>0</span>) <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#39;未付款&#39;</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>stateCode</span> <span style=color:#f92672>===</span> <span style=color:#e6db74>&#39;1&#39;</span> <span style=color:#f92672>||</span> <span style=color:#a6e22e>stateCode</span> <span style=color:#f92672>===</span> <span style=color:#ae81ff>1</span>) <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#39;已付款&#39;</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#39;订单状态代码异常&#39;</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/*
</span></span></span><span style=display:flex><span><span style=color:#75715e> * 根据订单支付方式代码，返回对应的字符串文案
</span></span></span><span style=display:flex><span><span style=color:#75715e> *
</span></span></span><span style=display:flex><span><span style=color:#75715e> * @param typeCode 订单支付方式代码
</span></span></span><span style=display:flex><span><span style=color:#75715e> * @return 对应的字符串文案，0未支付，1支付宝，2微信，3其他
</span></span></span><span style=display:flex><span><span style=color:#75715e> * */</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>orderPayTypeCodeStr</span>(<span style=color:#a6e22e>typeCode</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>typeCode</span> <span style=color:#f92672>===</span> <span style=color:#e6db74>&#39;0&#39;</span> <span style=color:#f92672>||</span> <span style=color:#a6e22e>typeCode</span> <span style=color:#f92672>===</span> <span style=color:#ae81ff>0</span>) <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#39;未支付&#39;</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>typeCode</span> <span style=color:#f92672>===</span> <span style=color:#e6db74>&#39;1&#39;</span> <span style=color:#f92672>||</span> <span style=color:#a6e22e>typeCode</span> <span style=color:#f92672>===</span> <span style=color:#ae81ff>1</span>) <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#39;支付宝&#39;</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>typeCode</span> <span style=color:#f92672>===</span> <span style=color:#e6db74>&#39;2&#39;</span> <span style=color:#f92672>||</span> <span style=color:#a6e22e>typeCode</span> <span style=color:#f92672>===</span> <span style=color:#ae81ff>2</span>) <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#39;微信&#39;</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>typeCode</span> <span style=color:#f92672>===</span> <span style=color:#e6db74>&#39;3&#39;</span> <span style=color:#f92672>||</span> <span style=color:#a6e22e>typeCode</span> <span style=color:#f92672>===</span> <span style=color:#ae81ff>3</span>) <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#39;其他&#39;</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#39;订单支付方式代码异常&#39;</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/*
</span></span></span><span style=display:flex><span><span style=color:#75715e> * 返回友好格式的日期字符串
</span></span></span><span style=display:flex><span><span style=color:#75715e> *
</span></span></span><span style=display:flex><span><span style=color:#75715e> * @param dateStr 日期字符串
</span></span></span><span style=display:flex><span><span style=color:#75715e> * @return 格式化后的日期字符串
</span></span></span><span style=display:flex><span><span style=color:#75715e> * */</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>dateFormat</span>(<span style=color:#a6e22e>dateStr</span>) {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 用于将六大元素处理为两位数格式（年除外）
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>toDouble</span>(<span style=color:#a6e22e>e</span>) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>e</span> <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>10</span> <span style=color:#f92672>?</span> <span style=color:#e6db74>&#39;0&#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>e</span> <span style=color:#f92672>:</span> <span style=color:#a6e22e>e</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 将日期字符串转为日期格式
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>date</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Date(<span style=color:#a6e22e>dateStr</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 获取日期中的六大元素: 年，月，日，时，分，秒
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>yy</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>toDouble</span>(<span style=color:#a6e22e>date</span>.<span style=color:#a6e22e>getFullYear</span>());
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>mm</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>toDouble</span>(<span style=color:#a6e22e>date</span>.<span style=color:#a6e22e>getMonth</span>() <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>dd</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>toDouble</span>(<span style=color:#a6e22e>date</span>.<span style=color:#a6e22e>getDate</span>());
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>hh</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>toDouble</span>(<span style=color:#a6e22e>date</span>.<span style=color:#a6e22e>getHours</span>());
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>mi</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>toDouble</span>(<span style=color:#a6e22e>date</span>.<span style=color:#a6e22e>getMinutes</span>());
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>ss</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>toDouble</span>(<span style=color:#a6e22e>date</span>.<span style=color:#a6e22e>getSeconds</span>());
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 返回美化后的日期字符串
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>return</span> <span style=color:#e6db74>`</span><span style=color:#e6db74>${</span><span style=color:#a6e22e>yy</span><span style=color:#e6db74>}</span><span style=color:#e6db74>年</span><span style=color:#e6db74>${</span><span style=color:#a6e22e>mm</span><span style=color:#e6db74>}</span><span style=color:#e6db74>月</span><span style=color:#e6db74>${</span><span style=color:#a6e22e>dd</span><span style=color:#e6db74>}</span><span style=color:#e6db74>日 </span><span style=color:#e6db74>${</span><span style=color:#a6e22e>hh</span><span style=color:#e6db74>}</span><span style=color:#e6db74>:</span><span style=color:#e6db74>${</span><span style=color:#a6e22e>mi</span><span style=color:#e6db74>}</span><span style=color:#e6db74>:</span><span style=color:#e6db74>${</span><span style=color:#a6e22e>ss</span><span style=color:#e6db74>}</span><span style=color:#e6db74>`</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/*
</span></span></span><span style=display:flex><span><span style=color:#75715e> * 根据会员状态代码，返回对应的字符串文案
</span></span></span><span style=display:flex><span><span style=color:#75715e> *
</span></span></span><span style=display:flex><span><span style=color:#75715e> * @param stateCode 会员状态代码
</span></span></span><span style=display:flex><span><span style=color:#75715e> * @return 对应的字符串文案，0正常，1冻结
</span></span></span><span style=display:flex><span><span style=color:#75715e> * */</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>memberStateStr</span>(<span style=color:#a6e22e>stateCode</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>stateCode</span> <span style=color:#f92672>===</span> <span style=color:#e6db74>&#39;0&#39;</span> <span style=color:#f92672>||</span> <span style=color:#a6e22e>stateCode</span> <span style=color:#f92672>===</span> <span style=color:#ae81ff>0</span>) <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#39;正常&#39;</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>stateCode</span> <span style=color:#f92672>===</span> <span style=color:#e6db74>&#39;1&#39;</span> <span style=color:#f92672>||</span> <span style=color:#a6e22e>stateCode</span> <span style=color:#f92672>===</span> <span style=color:#ae81ff>1</span>) <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#39;冻结&#39;</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#39;会员状态代码异常&#39;</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/*
</span></span></span><span style=display:flex><span><span style=color:#75715e> * 获取服务器响应中的数据
</span></span></span><span style=display:flex><span><span style=color:#75715e> *
</span></span></span><span style=display:flex><span><span style=color:#75715e> * @param res axios响应对象
</span></span></span><span style=display:flex><span><span style=color:#75715e> * @return 响应成功时返回data数据或true，响应失败时返回false
</span></span></span><span style=display:flex><span><span style=color:#75715e> * */</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>getResponseData</span>(<span style=color:#a6e22e>res</span>) {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 若存在2层data，则直接拆除第1层data
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>res</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>res</span>.<span style=color:#a6e22e>data</span>.<span style=color:#a6e22e>data</span> <span style=color:#f92672>!==</span> <span style=color:#66d9ef>undefined</span> <span style=color:#f92672>?</span> <span style=color:#a6e22e>res</span>.<span style=color:#a6e22e>data</span> <span style=color:#f92672>:</span> <span style=color:#a6e22e>res</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 请求成功时返回数据或true
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>res</span>.<span style=color:#a6e22e>code</span> <span style=color:#f92672>===</span> <span style=color:#a6e22e>STATUS</span>.<span style=color:#a6e22e>SUCCESS</span>) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>res</span>.<span style=color:#a6e22e>data</span> <span style=color:#f92672>!==</span> <span style=color:#66d9ef>null</span> <span style=color:#f92672>?</span> <span style=color:#a6e22e>res</span>.<span style=color:#a6e22e>data</span> <span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 请求失败时返回false
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>res</span>.<span style=color:#a6e22e>code</span> <span style=color:#f92672>===</span> <span style=color:#a6e22e>STATUS</span>.<span style=color:#a6e22e>FAILED</span>) <span style=color:#a6e22e>ElMessage</span>.<span style=color:#a6e22e>warning</span>(<span style=color:#e6db74>&#39;请求失败: &#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>res</span>.<span style=color:#a6e22e>data</span>);
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>res</span>.<span style=color:#a6e22e>code</span> <span style=color:#f92672>===</span> <span style=color:#a6e22e>STATUS</span>.<span style=color:#a6e22e>VALIDATE_FAILED</span>) <span style=color:#a6e22e>ElMessage</span>.<span style=color:#a6e22e>warning</span>(<span style=color:#e6db74>&#39;参数异常: &#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>res</span>.<span style=color:#a6e22e>data</span>);
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>res</span>.<span style=color:#a6e22e>code</span> <span style=color:#f92672>===</span> <span style=color:#a6e22e>STATUS</span>.<span style=color:#a6e22e>TOKEN_FAILED</span>) <span style=color:#a6e22e>ElMessage</span>.<span style=color:#a6e22e>warning</span>(<span style=color:#e6db74>&#39;Token异常！&#39;</span>);
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>res</span>.<span style=color:#a6e22e>code</span> <span style=color:#f92672>===</span> <span style=color:#a6e22e>STATUS</span>.<span style=color:#a6e22e>FORBIDDEN</span>) <span style=color:#a6e22e>ElMessage</span>.<span style=color:#a6e22e>warning</span>(<span style=color:#e6db74>&#39;权限不足！&#39;</span>);
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>false</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/*
</span></span></span><span style=display:flex><span><span style=color:#75715e> * 封装使用表单添加数据的异步过程
</span></span></span><span style=display:flex><span><span style=color:#75715e> *
</span></span></span><span style=display:flex><span><span style=color:#75715e> * &lt;ul&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e> *  &lt;li&gt; form: 表单对象，必须是reactive变量，必传 &lt;/li&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e> *  &lt;li&gt; api: API请求函数名（不带小括号），必传 &lt;/li&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e> *  &lt;li&gt; params: API请求参数，可选 &lt;/li&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e> *  &lt;li&gt; callback: 回调函数名（不带小括号），即当请求成功后，调用的函数，可选 &lt;/li&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e> *  &lt;li&gt; drawer: 抽屉对象，必须是reactive变量，可选 &lt;/li&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e> *  &lt;li&gt; needTip: 是否需要成功提示，默认是，可选 &lt;/li&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e> *  &lt;li&gt; successTip: 操作成功后的提示文字，可选 &lt;/li&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e> *  &lt;li&gt; needResetForm: 是否需要重置表单，默认是，可选 &lt;/li&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e> * &lt;/ul&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e> * */</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>myInsert</span>(<span style=color:#a6e22e>config</span>) {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>form</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>config</span>[<span style=color:#e6db74>&#39;form&#39;</span>];
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>api</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>config</span>[<span style=color:#e6db74>&#39;api&#39;</span>];
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>params</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>config</span>[<span style=color:#e6db74>&#39;params&#39;</span>];
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>callback</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>config</span>[<span style=color:#e6db74>&#39;callback&#39;</span>];
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>drawer</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>config</span>[<span style=color:#e6db74>&#39;drawer&#39;</span>];
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>needTip</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>config</span>[<span style=color:#e6db74>&#39;needTip&#39;</span>] <span style=color:#f92672>||</span> <span style=color:#66d9ef>true</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>successTip</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>config</span>[<span style=color:#e6db74>&#39;successTip&#39;</span>] <span style=color:#f92672>||</span> <span style=color:#e6db74>`数据添加成功！`</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>needResetForm</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>config</span>[<span style=color:#e6db74>&#39;needResetForm&#39;</span>] <span style=color:#f92672>||</span> <span style=color:#66d9ef>true</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 空值保护
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>if</span> (<span style=color:#f92672>!</span><span style=color:#a6e22e>form</span> <span style=color:#f92672>||</span> <span style=color:#f92672>!</span><span style=color:#a6e22e>api</span>) <span style=color:#66d9ef>return</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 验证表单
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>form</span>.<span style=color:#a6e22e>value</span>.<span style=color:#a6e22e>validate</span>(<span style=color:#66d9ef>async</span> (<span style=color:#a6e22e>valid</span>) =&gt; {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 只有全部校验规则都通过，valid参数才为true
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>valid</span>) {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#75715e>// 发送请求
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>data</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>getResponseData</span>(<span style=color:#66d9ef>await</span> <span style=color:#a6e22e>api</span>(<span style=color:#a6e22e>params</span>));
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>data</span>) {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>                <span style=color:#75715e>// 成功提示
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>                <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>needTip</span>) <span style=color:#a6e22e>ElMessage</span>.<span style=color:#a6e22e>success</span>(<span style=color:#a6e22e>successTip</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>                <span style=color:#75715e>// 存在抽屉时，需要关闭抽屉
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>                <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>drawer</span>) <span style=color:#a6e22e>drawer</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>false</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>                <span style=color:#75715e>// 存在回调函数时，异步调用回调函数
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>                <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>callback</span>) <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>callback</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#75715e>// 重置表单
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>needResetForm</span>) <span style=color:#a6e22e>form</span>.<span style=color:#a6e22e>value</span>.<span style=color:#a6e22e>resetFields</span>();
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/*
</span></span></span><span style=display:flex><span><span style=color:#75715e> * 封装使用表单修改数据的异步过程
</span></span></span><span style=display:flex><span><span style=color:#75715e> *
</span></span></span><span style=display:flex><span><span style=color:#75715e> * &lt;ul&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e> *  &lt;li&gt; form: 表单对象，必须是reactive变量，必传 &lt;/li&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e> *  &lt;li&gt; api: API请求函数名（不带小括号），必传 &lt;/li&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e> *  &lt;li&gt; params: API请求参数，可选 &lt;/li&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e> *  &lt;li&gt; callback: 回调函数名（不带小括号），即当请求成功后，调用的函数，可选 &lt;/li&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e> *  &lt;li&gt; drawer: 抽屉对象，必须是reactive变量，可选 &lt;/li&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e> *  &lt;li&gt; needTip: 是否需要成功提示，默认是，可选 &lt;/li&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e> *  &lt;li&gt; successTip: 操作成功后的提示文字，可选 &lt;/li&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e> *  &lt;li&gt; needResetForm: 是否需要重置表单，默认是，可选 &lt;/li&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e> * &lt;/ul&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e> */</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>myUpdate</span>(<span style=color:#a6e22e>config</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>config</span>[<span style=color:#e6db74>&#39;successTip&#39;</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>config</span>[<span style=color:#e6db74>&#39;successTip&#39;</span>] <span style=color:#f92672>||</span> <span style=color:#e6db74>`数据修改成功！`</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>myInsert</span>(<span style=color:#a6e22e>config</span>);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/*
</span></span></span><span style=display:flex><span><span style=color:#75715e> * 封装按主键删除单条数据的异步过程
</span></span></span><span style=display:flex><span><span style=color:#75715e> *
</span></span></span><span style=display:flex><span><span style=color:#75715e> * &lt;ul&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e> *  &lt;li&gt; id: 主键，必传 &lt;/li&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e> *  &lt;li&gt; api: API请求函数名（不带小括号），必传 &lt;/li&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e> *  &lt;li&gt; callback: 回调函数名（不带小括号），即当请求成功后，调用的函数，可选 &lt;/li&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e> *  &lt;li&gt; needTip: 是否需要成功提示，默认是，可选 &lt;/li&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e> *  &lt;li&gt; confirmTip: 危险操作保护提示文字，可选 &lt;/li&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e> *  &lt;li&gt; successTip: 操作成功后的提示文字，可选 &lt;/li&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e> * &lt;/ul&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e> */</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>myDelete</span>(<span style=color:#a6e22e>config</span>) {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>id</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>config</span>[<span style=color:#e6db74>&#39;id&#39;</span>];
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>api</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>config</span>[<span style=color:#e6db74>&#39;api&#39;</span>];
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>callback</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>config</span>[<span style=color:#e6db74>&#39;callback&#39;</span>];
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>needTip</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>config</span>[<span style=color:#e6db74>&#39;needTip&#39;</span>] <span style=color:#f92672>||</span> <span style=color:#66d9ef>true</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>confirmTip</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>config</span>[<span style=color:#e6db74>&#39;confirmTip&#39;</span>] <span style=color:#f92672>||</span> <span style=color:#e6db74>`即将删除1条数据，确认吗？`</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>successTip</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>config</span>[<span style=color:#e6db74>&#39;successTip&#39;</span>] <span style=color:#f92672>||</span> <span style=color:#e6db74>`数据删除成功！`</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 空值保护
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>id</span> <span style=color:#f92672>===</span> <span style=color:#66d9ef>null</span> <span style=color:#f92672>||</span> <span style=color:#f92672>!</span><span style=color:#a6e22e>api</span>) <span style=color:#66d9ef>return</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 危险操作保护
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>if</span> (<span style=color:#f92672>!</span><span style=color:#66d9ef>await</span> <span style=color:#a6e22e>elConfirm</span>(<span style=color:#a6e22e>confirmTip</span>)) <span style=color:#66d9ef>return</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 发送请求
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>res</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>api</span>(<span style=color:#a6e22e>id</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 解析响应中的数据
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>data</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>getResponseData</span>(<span style=color:#a6e22e>res</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>data</span>) {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 成功提示
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>needTip</span>) <span style=color:#a6e22e>ElMessage</span>.<span style=color:#a6e22e>success</span>(<span style=color:#a6e22e>successTip</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 异步调用回调函数
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>callback</span>) <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>callback</span>();
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/*
</span></span></span><span style=display:flex><span><span style=color:#75715e> * 封装按主键数组批量删除多条数据的异步过程
</span></span></span><span style=display:flex><span><span style=color:#75715e> *
</span></span></span><span style=display:flex><span><span style=color:#75715e> * &lt;ul&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e> *  &lt;li&gt; ids: 主键数组，必传 &lt;/li&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e> *  &lt;li&gt; api: API请求函数名（不带小括号），必传 &lt;/li&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e> *  &lt;li&gt; callback: 回调函数名（不带小括号），即当请求成功后，调用的函数，可选 &lt;/li&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e> *  &lt;li&gt; needTip: 是否需要成功提示，默认是，可选 &lt;/li&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e> *  &lt;li&gt; confirmTip: 危险操作保护提示文字，可选 &lt;/li&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e> *  &lt;li&gt; successTip: 操作成功后的提示文字，可选 &lt;/li&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e> * &lt;/ul&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e> */</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>myBatchDelete</span>(<span style=color:#a6e22e>config</span>) {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>ids</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>config</span>[<span style=color:#e6db74>&#39;ids&#39;</span>];
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>api</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>config</span>[<span style=color:#e6db74>&#39;api&#39;</span>];
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>callback</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>config</span>[<span style=color:#e6db74>&#39;callback&#39;</span>];
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>needTip</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>config</span>[<span style=color:#e6db74>&#39;needTip&#39;</span>] <span style=color:#f92672>||</span> <span style=color:#66d9ef>true</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>confirmTip</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>config</span>[<span style=color:#e6db74>&#39;confirmTip&#39;</span>] <span style=color:#f92672>||</span> <span style=color:#e6db74>`即将删除 </span><span style=color:#e6db74>${</span><span style=color:#a6e22e>ids</span>.<span style=color:#a6e22e>length</span><span style=color:#e6db74>}</span><span style=color:#e6db74> 条数据，确认吗？`</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>successTip</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>config</span>[<span style=color:#e6db74>&#39;successTip&#39;</span>] <span style=color:#f92672>||</span> <span style=color:#e6db74>`成功删除 </span><span style=color:#e6db74>${</span><span style=color:#a6e22e>ids</span>.<span style=color:#a6e22e>length</span><span style=color:#e6db74>}</span><span style=color:#e6db74> 条数据！`</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 主键数组空值保护
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>if</span> (<span style=color:#f92672>!</span><span style=color:#a6e22e>ids</span> <span style=color:#f92672>||</span> <span style=color:#a6e22e>ids</span>.<span style=color:#a6e22e>length</span> <span style=color:#f92672>&lt;=</span> <span style=color:#ae81ff>0</span>) {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>ElMessage</span>.<span style=color:#a6e22e>warning</span>(<span style=color:#e6db74>&#39;至少选择1项！&#39;</span>);
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 危险操作保护
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>if</span> (<span style=color:#f92672>!</span><span style=color:#66d9ef>await</span> <span style=color:#a6e22e>elConfirm</span>(<span style=color:#a6e22e>confirmTip</span>)) <span style=color:#66d9ef>return</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 发送请求
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>res</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>api</span>(<span style=color:#a6e22e>ids</span>.<span style=color:#a6e22e>join</span>(<span style=color:#e6db74>&#39;,&#39;</span>));
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 解析响应中的数据
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>data</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>getResponseData</span>(<span style=color:#a6e22e>res</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>data</span>) {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 成功提示
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>needTip</span>) <span style=color:#a6e22e>ElMessage</span>.<span style=color:#a6e22e>success</span>(<span style=color:#a6e22e>successTip</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 异步调用回调函数
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>callback</span>) <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>callback</span>();
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/*
</span></span></span><span style=display:flex><span><span style=color:#75715e> * 封装分页查询数据的异步过程
</span></span></span><span style=display:flex><span><span style=color:#75715e> *
</span></span></span><span style=display:flex><span><span style=color:#75715e> * &lt;ul&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e> *  &lt;li&gt; api: API请求函数名（不带小括号），必传 &lt;/li&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e> *  &lt;li&gt; params: API请求参数，可选 &lt;/li&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e> *  &lt;li&gt; records: 分页结果中的数据记录，必传 &lt;/li&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e> *  &lt;li&gt; pageInfo: 分页结果中的元信息，包括当前第几页，每页多少条以及一共多少条，必传 &lt;/li&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e> *  &lt;li&gt; secondParam: 第二参数，可选 &lt;/li&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e> * &lt;/ul&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e> */</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>myPage</span>(<span style=color:#a6e22e>config</span>) {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>res</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>api</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>config</span>[<span style=color:#e6db74>&#39;api&#39;</span>];
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>params</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>config</span>[<span style=color:#e6db74>&#39;params&#39;</span>];
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>records</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>config</span>[<span style=color:#e6db74>&#39;records&#39;</span>];
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>pageInfo</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>config</span>[<span style=color:#e6db74>&#39;pageInfo&#39;</span>];
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>secondParam</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>config</span>[<span style=color:#e6db74>&#39;secondParam&#39;</span>];
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 空值保护
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>if</span> (<span style=color:#f92672>!</span><span style=color:#a6e22e>api</span> <span style=color:#f92672>||</span> <span style=color:#f92672>!</span><span style=color:#a6e22e>records</span> <span style=color:#f92672>||</span> <span style=color:#f92672>!</span><span style=color:#a6e22e>pageInfo</span>) <span style=color:#66d9ef>return</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 若存在第二参数，则携带第二参数发送请求
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>secondParam</span> <span style=color:#f92672>!==</span> <span style=color:#66d9ef>null</span> <span style=color:#f92672>&amp;&amp;</span> <span style=color:#a6e22e>secondParam</span> <span style=color:#f92672>!==</span> <span style=color:#66d9ef>undefined</span>) {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>res</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>api</span>(<span style=color:#a6e22e>params</span>, <span style=color:#a6e22e>secondParam</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 若不存在第二参数，则直接发送请求
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>res</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>api</span>(<span style=color:#a6e22e>params</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 解析响应中的数据
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>data</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>getResponseData</span>(<span style=color:#a6e22e>res</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>data</span>) {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>records</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>data</span>[<span style=color:#e6db74>&#39;records&#39;</span>];
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>pageInfo</span>[<span style=color:#e6db74>&#39;pageNumber&#39;</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>data</span>[<span style=color:#e6db74>&#39;pageNumber&#39;</span>];
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>pageInfo</span>[<span style=color:#e6db74>&#39;pageSize&#39;</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>data</span>[<span style=color:#e6db74>&#39;pageSize&#39;</span>];
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>pageInfo</span>[<span style=color:#e6db74>&#39;totalRow&#39;</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>data</span>[<span style=color:#e6db74>&#39;totalRow&#39;</span>];
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/*
</span></span></span><span style=display:flex><span><span style=color:#75715e> * 封装文件上传前的校验过程
</span></span></span><span style=display:flex><span><span style=color:#75715e> *
</span></span></span><span style=display:flex><span><span style=color:#75715e> * @param file 文件对象，必传
</span></span></span><span style=display:flex><span><span style=color:#75715e> * @param allowTypes 允许的MIME数组，必传，如 [&#39;image/jpeg&#39;, &#39;image/png&#39;]
</span></span></span><span style=display:flex><span><span style=color:#75715e> * @param maxSize 允许的文件最大值，单位MB，默认10MB
</span></span></span><span style=display:flex><span><span style=color:#75715e> * @return true校验成功，false校验失败
</span></span></span><span style=display:flex><span><span style=color:#75715e> */</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>myFileCheck</span>(<span style=color:#a6e22e>file</span>, <span style=color:#a6e22e>allowTypes</span>, <span style=color:#a6e22e>maxSize</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>10</span>) {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 空值保护
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>if</span> (<span style=color:#f92672>!</span><span style=color:#a6e22e>file</span> <span style=color:#f92672>||</span> <span style=color:#f92672>!</span><span style=color:#a6e22e>allowTypes</span>) <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>false</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 校验文件MIME类型
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>if</span> (<span style=color:#f92672>!</span><span style=color:#a6e22e>allowTypes</span>.<span style=color:#a6e22e>includes</span>(<span style=color:#a6e22e>file</span>.<span style=color:#a6e22e>type</span>)) {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>ElMessage</span>.<span style=color:#a6e22e>warning</span>(<span style=color:#e6db74>`仅支持 </span><span style=color:#e6db74>${</span><span style=color:#a6e22e>allowTypes</span>.<span style=color:#a6e22e>toString</span>()<span style=color:#e6db74>}</span><span style=color:#e6db74> 格式！`</span>);
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>false</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 校验文件大小
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>file</span>.<span style=color:#a6e22e>size</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>1024</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>1024</span> <span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>maxSize</span>) {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>ElMessage</span>.<span style=color:#a6e22e>error</span>(<span style=color:#e6db74>`文件大小不能超过 </span><span style=color:#e6db74>${</span><span style=color:#a6e22e>maxSize</span><span style=color:#e6db74>}</span><span style=color:#e6db74> MB`</span>)
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>false</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>true</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/*
</span></span></span><span style=display:flex><span><span style=color:#75715e> * 封装配置Echarts饼图配置对象的过程
</span></span></span><span style=display:flex><span><span style=color:#75715e> *
</span></span></span><span style=display:flex><span><span style=color:#75715e> * &lt;ul&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e> *  &lt;li&gt; data: 系列数据，必传 &lt;/li&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e> *  &lt;li&gt; name: 系列名称，必传 &lt;/li&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e> *  &lt;li&gt; radius: 饼图半径，默认60%，可选 &lt;/li&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e> * &lt;/ul&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e> */</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>pieChartOption</span>(<span style=color:#a6e22e>config</span>) {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>data</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>config</span>[<span style=color:#e6db74>&#39;data&#39;</span>];
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>name</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>config</span>[<span style=color:#e6db74>&#39;name&#39;</span>];
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>radius</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>config</span>[<span style=color:#e6db74>&#39;radius&#39;</span>] <span style=color:#f92672>||</span> <span style=color:#e6db74>&#39;60%&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 系列据
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>series</span> <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;pie&#39;</span>, <span style=color:#75715e>// 系列类型
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#a6e22e>name</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>name</span>, <span style=color:#75715e>// 系列名称
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#a6e22e>data</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>data</span>, <span style=color:#75715e>// 系列数据
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#a6e22e>radius</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>radius</span>, <span style=color:#75715e>// 饼图半径
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>show</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span>, <span style=color:#75715e>// 显示文字
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            <span style=color:#a6e22e>formatter</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>arg</span> =&gt; <span style=color:#a6e22e>genderStr</span>(<span style=color:#a6e22e>arg</span>.<span style=color:#a6e22e>name</span>) <span style=color:#f92672>+</span> <span style=color:#e6db74>` </span><span style=color:#e6db74>${</span><span style=color:#a6e22e>arg</span>.<span style=color:#a6e22e>value</span><span style=color:#e6db74>}</span><span style=color:#e6db74> 人（</span><span style=color:#e6db74>${</span><span style=color:#a6e22e>arg</span>.<span style=color:#a6e22e>percent</span><span style=color:#e6db74>}</span><span style=color:#e6db74>%）`</span> <span style=color:#75715e>// 格式化
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        }
</span></span><span style=display:flex><span>    };
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 鼠标经过时显示提示信息
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>tooltip</span> <span style=color:#f92672>=</span> {};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 返回Echarts饼图配置对象
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>return</span> {<span style=color:#a6e22e>series</span><span style=color:#f92672>:</span> [<span style=color:#a6e22e>series</span>], <span style=color:#a6e22e>tooltip</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>tooltip</span>};
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/*
</span></span></span><span style=display:flex><span><span style=color:#75715e> * 封装配置Echarts柱图配置对象的过程
</span></span></span><span style=display:flex><span><span style=color:#75715e> *
</span></span></span><span style=display:flex><span><span style=color:#75715e> * &lt;ul&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e> *  &lt;li&gt; xData: X轴数据，必传 &lt;/li&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e> *  &lt;li&gt; yData: Y轴数据，必传 &lt;/li&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e> *  &lt;li&gt; name: 系列名称，必传 &lt;/li&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e> *  &lt;li&gt; xName: X轴名称，必传 &lt;/li&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e> *  &lt;li&gt; yName: Y轴名称，必传 &lt;/li&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e> *  &lt;li&gt; barWidth: 柱图宽度，默认50%，可选 &lt;/li&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e> *  &lt;li&gt; markMax: 是否标记最大值，默认是，可选 &lt;/li&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e> *  &lt;li&gt; markMin: 是否标记最小值，默认是，可选 &lt;/li&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e> *  &lt;li&gt; markAvg: 是否标记平均值，默认是，可选 &lt;/li&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e> *  &lt;li&gt; labelShow: 是否在柱子上显示文字，默认是，可选 &lt;/li&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e> *  &lt;li&gt; labelRotate: 文字旋转角度，默认60，可选 &lt;/li&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e> * &lt;/ul&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e> */</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>barChartOption</span>(<span style=color:#a6e22e>config</span>) {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>xData</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>config</span>[<span style=color:#e6db74>&#39;xData&#39;</span>];
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>yData</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>config</span>[<span style=color:#e6db74>&#39;yData&#39;</span>];
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>name</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>config</span>[<span style=color:#e6db74>&#39;name&#39;</span>];
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>xName</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>config</span>[<span style=color:#e6db74>&#39;xName&#39;</span>];
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>yName</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>config</span>[<span style=color:#e6db74>&#39;yName&#39;</span>];
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>barWidth</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>config</span>[<span style=color:#e6db74>&#39;barWidth&#39;</span>] <span style=color:#f92672>||</span> <span style=color:#e6db74>&#39;50%&#39;</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>markMax</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>config</span>[<span style=color:#e6db74>&#39;markMax&#39;</span>] <span style=color:#f92672>||</span> <span style=color:#66d9ef>true</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>markMin</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>config</span>[<span style=color:#e6db74>&#39;markMin&#39;</span>] <span style=color:#f92672>||</span> <span style=color:#66d9ef>true</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>markAvg</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>config</span>[<span style=color:#e6db74>&#39;markAvg&#39;</span>] <span style=color:#f92672>||</span> <span style=color:#66d9ef>true</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>labelShow</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>config</span>[<span style=color:#e6db74>&#39;labelShow&#39;</span>] <span style=color:#f92672>||</span> <span style=color:#66d9ef>true</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>labelRotate</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>config</span>[<span style=color:#e6db74>&#39;labelRotate&#39;</span>] <span style=color:#f92672>||</span> <span style=color:#ae81ff>60</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 系列数据
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>series</span> <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;bar&#39;</span>, <span style=color:#75715e>// 系列类型
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#a6e22e>name</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>name</span>, <span style=color:#75715e>// 系列名称
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#a6e22e>data</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>yData</span>, <span style=color:#75715e>// 系列数据
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#75715e>// 标记点
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#a6e22e>markPoint</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>data</span><span style=color:#f92672>:</span> [
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>markMax</span> <span style=color:#f92672>?</span> {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;max&#39;</span>, <span style=color:#a6e22e>name</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;最大值&#39;</span>} <span style=color:#f92672>:</span> {}, <span style=color:#75715e>// 自动标记最大值
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>                <span style=color:#a6e22e>markMin</span> <span style=color:#f92672>?</span> {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;min&#39;</span>, <span style=color:#a6e22e>name</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;最小值&#39;</span>} <span style=color:#f92672>:</span> {}, <span style=color:#75715e>// 自动标记最小值
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            ]
</span></span><span style=display:flex><span>        },
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 标记线
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#a6e22e>markLine</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>data</span><span style=color:#f92672>:</span> [
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>markAvg</span> <span style=color:#f92672>?</span> {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;average&#39;</span>, <span style=color:#a6e22e>name</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;平均值&#39;</span>} <span style=color:#f92672>:</span> {} <span style=color:#75715e>// 标记平均值线
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            ]
</span></span><span style=display:flex><span>        },
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 图形文字
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> {<span style=color:#a6e22e>show</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>labelShow</span>, <span style=color:#a6e22e>rotate</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>labelRotate</span>}
</span></span><span style=display:flex><span>    };
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 数据X轴
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>xAxis</span> <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>name</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>xName</span>, <span style=color:#75715e>// 名称，可选
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#a6e22e>data</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>xData</span>, <span style=color:#75715e>// 数据数组
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#a6e22e>nameLocation</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;end&#39;</span>, <span style=color:#75715e>// 名称位置，可选
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#a6e22e>axisLine</span><span style=color:#f92672>:</span> {<span style=color:#a6e22e>show</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span>, <span style=color:#a6e22e>lineStyle</span><span style=color:#f92672>:</span> {<span style=color:#a6e22e>color</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;#48b&#39;</span>, <span style=color:#a6e22e>width</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>2</span>}}, <span style=color:#75715e>// 轴线
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#a6e22e>axisLabel</span><span style=color:#f92672>:</span> {<span style=color:#a6e22e>show</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span>, <span style=color:#a6e22e>formatter</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>arg</span> =&gt; <span style=color:#a6e22e>arg</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;星&#39;</span>} <span style=color:#75715e>// 文本
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    };
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 数据Y轴
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>yAxis</span> <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>name</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>yName</span>, <span style=color:#75715e>// 名称，可选
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#a6e22e>nameLocation</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;end&#39;</span>, <span style=color:#75715e>// 名称位置，可选
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#a6e22e>min</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>0</span>, <span style=color:#75715e>// 最小值
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#a6e22e>scale</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span>, <span style=color:#75715e>// 自适应最大最小值
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#a6e22e>interval</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>1</span>, <span style=color:#75715e>// 分割刻度（步长）
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#a6e22e>axisLine</span><span style=color:#f92672>:</span> {<span style=color:#a6e22e>show</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span>, <span style=color:#a6e22e>lineStyle</span><span style=color:#f92672>:</span> {<span style=color:#a6e22e>color</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;#48b&#39;</span>, <span style=color:#a6e22e>width</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>2</span>}}, <span style=color:#75715e>// 轴线
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#a6e22e>axisLabel</span><span style=color:#f92672>:</span> {<span style=color:#a6e22e>show</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span>} <span style=color:#75715e>// 文本
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    };
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 鼠标经过时显示提示信息
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>tooltip</span> <span style=color:#f92672>=</span> {};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 返回配置
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>return</span> {<span style=color:#a6e22e>series</span><span style=color:#f92672>:</span> [<span style=color:#a6e22e>series</span>], <span style=color:#a6e22e>xAxis</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>xAxis</span>, <span style=color:#a6e22e>yAxis</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>yAxis</span>, <span style=color:#a6e22e>tooltip</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>tooltip</span>, <span style=color:#a6e22e>barWidth</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>barWidth</span>};
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== EL函数封装 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>ElMessage</span>, <span style=color:#a6e22e>ElMessageBox</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;element-plus&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>STATUS</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/const&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/*
</span></span></span><span style=display:flex><span><span style=color:#75715e> * 封装功能暂未开放的EL弹窗
</span></span></span><span style=display:flex><span><span style=color:#75715e> */</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>notYet</span>() {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>ElMessage</span>.<span style=color:#a6e22e>warning</span>(<span style=color:#e6db74>&#39;该功能暂未开放！&#39;</span>);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/*
</span></span></span><span style=display:flex><span><span style=color:#75715e> * 封装EL确认弹窗
</span></span></span><span style=display:flex><span><span style=color:#75715e> *
</span></span></span><span style=display:flex><span><span style=color:#75715e> * @param message 弹窗内容
</span></span></span><span style=display:flex><span><span style=color:#75715e> * @param type 弹窗类型，默认 &#39;warning&#39;
</span></span></span><span style=display:flex><span><span style=color:#75715e> * @param title 弹窗标题，默认 &#39;注意&#39;
</span></span></span><span style=display:flex><span><span style=color:#75715e> * @param draggable 是否可拖动弹窗，默认是
</span></span></span><span style=display:flex><span><span style=color:#75715e> * @param confirmButtonText 确定按钮文字，默认 &#39;确认，我很坚定&#39;
</span></span></span><span style=display:flex><span><span style=color:#75715e> * @param cancelButtonText 取消按钮文字，默认 &#39;取消，我后悔了&#39;
</span></span></span><span style=display:flex><span><span style=color:#75715e> * @return true确认，false取消
</span></span></span><span style=display:flex><span><span style=color:#75715e> */</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>elConfirm</span>(<span style=color:#a6e22e>message</span>, <span style=color:#a6e22e>type</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;warning&#39;</span>, <span style=color:#a6e22e>title</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;注意&#39;</span>, <span style=color:#a6e22e>draggable</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span>,
</span></span><span style=display:flex><span>                          <span style=color:#a6e22e>confirmButtonText</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;确认，我很坚定&#39;</span>,
</span></span><span style=display:flex><span>                          <span style=color:#a6e22e>cancelButtonText</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;取消，我后悔了&#39;</span>) {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>ElMessageBox</span>.<span style=color:#a6e22e>confirm</span>(<span style=color:#a6e22e>message</span>, <span style=color:#a6e22e>title</span>, {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>confirmButtonText</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>confirmButtonText</span>,
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>cancelButtonText</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>cancelButtonText</span>,
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>type</span>,
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>draggable</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>draggable</span>
</span></span><span style=display:flex><span>    }).<span style=color:#a6e22e>then</span>(() =&gt; <span style=color:#66d9ef>true</span>).<span style=color:#66d9ef>catch</span>(() =&gt; <span style=color:#66d9ef>false</span>);
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=8-安装功能模块>8. 安装功能模块</h3><blockquote><p>心法: <code>lesson-admin-web</code> 项目相关模块</p></blockquote><pre tabindex=0><code>+-- @element-plus/icons-vue@2.3.1
+-- @vue/cli-plugin-babel@5.0.8
+-- @vue/cli-plugin-router@5.0.8
+-- @vue/cli-plugin-vuex@5.0.8
+-- @vue/cli-service@5.0.8
+-- @vueup/vue-quill@1.2.0
+-- @vueuse/core@10.7.2
+-- axios@1.6.7
+-- core-js@3.35.1
+-- echarts@5.4.3
+-- element-plus@2.5.3
+-- sass-loader@12.6.0
+-- sass@1.70.0
+-- vue-router@4.2.5
+-- vue@3.4.15
+-- vuex@4.1.0
`-- xgplayer@3.0.11
</code></pre><blockquote><p>武技: 在 <code>lesson-admin-web</code> 项目中整合相关功能模块</p></blockquote><ol><li><a href=%E7%AC%AC3%E9%98%B6%E6%AE%B5-SSM/JB3-9-Vue/res/Vue%E5%AE%89%E8%A3%85ElementPlus.md>安装ElementPlus</a></li><li><a href=%E7%AC%AC3%E9%98%B6%E6%AE%B5-SSM/JB3-9-Vue/res/Vue%E5%AE%89%E8%A3%85XGPlayer.md>安装XGPlayer</a></li><li><a href=%E7%AC%AC3%E9%98%B6%E6%AE%B5-SSM/JB3-9-Vue/res/Vue%E5%AE%89%E8%A3%85ApacheECharts.md>安装ApacheECharts</a></li><li><a href=%E7%AC%AC3%E9%98%B6%E6%AE%B5-SSM/JB3-9-Vue/res/Vue%E5%AE%89%E8%A3%85Axios.md>安装Axios</a></li></ol><h2 id=e02-状态管理工具>E02. 状态管理工具</h2><blockquote><p>心法: Vuex状态管理组件 vs Storage存储对象</p></blockquote><table><thead><tr><th style=text-align:left>工具</th><th style=text-align:center>来源</th><th style=text-align:center>存储位置</th><th style=text-align:center>数据存储时效</th><th style=text-align:center>响应式</th><th style=text-align:center>应用场景</th></tr></thead><tbody><tr><td style=text-align:left>vuex状态管理工具</td><td style=text-align:center>JS库</td><td style=text-align:center>内存</td><td style=text-align:center>刷新页面时数据丢失</td><td style=text-align:center>是</td><td style=text-align:center>Vue组件间传值，同步Vue组件状态</td></tr><tr><td style=text-align:left>sessionStorage存储工具</td><td style=text-align:center>浏览器</td><td style=text-align:center>会话</td><td style=text-align:center>关闭页面时数据丢失</td><td style=text-align:center>否</td><td style=text-align:center>在浏览器客户端存储一些临时数据</td></tr><tr><td style=text-align:left>localStorage存储工具</td><td style=text-align:center>浏览器</td><td style=text-align:center>文件</td><td style=text-align:center>删除文件时数据丢失</td><td style=text-align:center>否</td><td style=text-align:center>在本地的文件中存储一些永久数据</td></tr></tbody></table><blockquote><p>心法: Vuex状态管理组件5大核心组成部分</p></blockquote><table><thead><tr><th>核心组件</th><th>描述</th><th>JS中获取方式</th></tr></thead><tbody><tr><td><code>state: {}</code></td><td>存储共享变量</td><td>使用 <code>vuex.state['变量名']</code> 获取共享变量，但不能修改</td></tr><tr><td><code>mutations: {}</code></td><td>修改state区变量的唯一方法就是调用mutations方法</td><td>使用 <code>vuex.commit('方法名')</code> 调用mutations方法</td></tr><tr><td><code>actions: {}</code></td><td>actions方法是mutations方法的上层封装额外支持异步调用</td><td>使用 <code>vuex.dispatch("方法名")</code> 同步调用actions方法使用 <code>await vuex.dispatch("方法名")</code> 异步调用actions方法</td></tr><tr><td><code>modules: {}</code></td><td>用于在大型项目中将vuex拆分成多个子模块</td><td></td></tr><tr><td><code>getters: {}</code></td><td>Vuex基于state的派生状态可理解为组件中的计算属性</td><td></td></tr></tbody></table><blockquote><p>武技: 使用Vuex管理用户的登陆状态</p></blockquote><h3 id=1-管理登录状态>1. 管理登录状态</h3><p><code>@/store/index.js</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>createStore</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;vuex&#39;</span>  
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>default</span> <span style=color:#a6e22e>createStore</span>({  
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>state</span><span style=color:#f92672>:</span> {  
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 用户登录状态变量: 若sessionStorage中存在token则为true，反之为false  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#a6e22e>loginFlag</span><span style=color:#f92672>:</span> <span style=color:#f92672>!!</span><span style=color:#a6e22e>sessionStorage</span>.<span style=color:#a6e22e>getItem</span>(<span style=color:#e6db74>&#39;token&#39;</span>)  
</span></span><span style=display:flex><span>    },  
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>mutations</span><span style=color:#f92672>:</span> {  
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 该方法用于设置用户登录状态变量  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#a6e22e>setLoginFlag</span><span style=color:#f92672>:</span> (<span style=color:#a6e22e>state</span>, <span style=color:#a6e22e>loginFlag</span>) =&gt; <span style=color:#a6e22e>state</span>.<span style=color:#a6e22e>loginFlag</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>loginFlag</span>  
</span></span><span style=display:flex><span>    },  
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>actions</span><span style=color:#f92672>:</span> {  
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 异步调用mutations中的 `setLoginFlag()` 方法  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#a6e22e>setLoginFlag</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>async</span> (<span style=color:#a6e22e>context</span>, <span style=color:#a6e22e>loginFlag</span>) =&gt; <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>context</span>.<span style=color:#a6e22e>commit</span>(<span style=color:#e6db74>&#39;setLoginFlag&#39;</span>, <span style=color:#a6e22e>loginFlag</span>)  
</span></span><span style=display:flex><span>    },  
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>modules</span><span style=color:#f92672>:</span> {},  
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>getters</span><span style=color:#f92672>:</span> {}  
</span></span><span style=display:flex><span>})
</span></span></code></pre></div><h3 id=2-测试登录状态>2. 测试登录状态</h3><p><code>@/App.vue -> &lt;template></code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>&lt;<span style=color:#f92672>el-button</span> <span style=color:#960050;background-color:#1e0010>@</span><span style=color:#a6e22e>click</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;login&#34;</span>&gt;登录&lt;/<span style=color:#f92672>el-button</span>&gt;  
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>el-button</span> <span style=color:#960050;background-color:#1e0010>@</span><span style=color:#a6e22e>click</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;logout&#34;</span>&gt;登出&lt;/<span style=color:#f92672>el-button</span>&gt;
</span></span></code></pre></div><p><code>@/App.vue -> &lt;script></code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#75715e>// 导入Vuex组件的构造方法  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>useStore</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;vuex&#34;</span>;  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span><span style=color:#75715e>// Vuex组件实例  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>vuex</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>useStore</span>();  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span><span style=color:#75715e>// 登录方法  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>login</span>(){  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#75715e>// 在sessionStorage中存储登录状态为false  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>sessionStorage</span>.<span style=color:#a6e22e>setItem</span>(<span style=color:#e6db74>&#39;token&#39;</span>, <span style=color:#e6db74>&#39;token0001&#39;</span>);  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#75715e>// 在Vuex中存储登录状态为false  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>vuex</span>.<span style=color:#a6e22e>dispatch</span>(<span style=color:#e6db74>&#39;setLoginFlag&#39;</span>, <span style=color:#66d9ef>true</span>);  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#75715e>// 打印token和loginFlag  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>&#39;token: &#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>sessionStorage</span>.<span style=color:#a6e22e>getItem</span>(<span style=color:#e6db74>&#39;token&#39;</span>));  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>&#39;loginFlag: &#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>vuex</span>.<span style=color:#a6e22e>state</span>.<span style=color:#a6e22e>loginFlag</span>);  
</span></span><span style=display:flex><span>}  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span><span style=color:#75715e>// 登出方法  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>logout</span>(){  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#75715e>// 在sessionStorage中存储登录状态为false  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>sessionStorage</span>.<span style=color:#a6e22e>removeItem</span>(<span style=color:#e6db74>&#39;token&#39;</span>);  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#75715e>// 在Vuex中存储登录状态为false  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>vuex</span>.<span style=color:#a6e22e>dispatch</span>(<span style=color:#e6db74>&#39;setLoginFlag&#39;</span>, <span style=color:#66d9ef>false</span>);  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#75715e>// 打印token和loginFlag  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>&#39;token: &#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>sessionStorage</span>.<span style=color:#a6e22e>getItem</span>(<span style=color:#e6db74>&#39;token&#39;</span>));  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>&#39;loginFlag: &#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>vuex</span>.<span style=color:#a6e22e>state</span>.<span style=color:#a6e22e>loginFlag</span>);  
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=e03-封装后端接口>E03. 封装后端接口</h2><blockquote><p>武技: 在 <code>lesson-admin-web</code> 项目中开发API请求接口文件</p></blockquote><p><code>@/api/axios.js</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#75715e>// 导入axios实例  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>axios</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;axios&#39;</span>;  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span><span style=color:#75715e>// 导入一些常量  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>LESSON_ADMIN_HOST</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;@/const&#39;</span>;  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span><span style=color:#75715e>/* =============== Axios实例配置 =============== */</span>  
</span></span><span style=display:flex><span><span style=color:#75715e>// 创建Axios实例 `LESSON_ADMIN_AXIOS`: 配置请求前缀和超时时间  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>LESSON_ADMIN_AXIOS</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>axios</span>.<span style=color:#a6e22e>create</span>({  
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>baseURL</span><span style=color:#f92672>:</span> <span style=color:#e6db74>`</span><span style=color:#e6db74>${</span><span style=color:#a6e22e>LESSON_ADMIN_HOST</span><span style=color:#e6db74>}</span><span style=color:#e6db74>/api/v1`</span>,   
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>timeout</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>5000</span>  
</span></span><span style=display:flex><span>});
</span></span></code></pre></div><h3 id=1-封装横幅接口>1. 封装横幅接口</h3><blockquote><p>武技: 在Vue项目中封装横幅表API接口</p></blockquote><p><code>@/api/banner.js</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>LESSON_ADMIN_AXIOS</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;@/api/axios&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// POST - 添加一条记录
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>saveApi</span>(<span style=color:#a6e22e>params</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>LESSON_ADMIN_AXIOS</span>.<span style=color:#a6e22e>post</span>(<span style=color:#e6db74>&#39;/banner/save&#39;</span>, <span style=color:#a6e22e>params</span>)
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// GET - 根据主键查询
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>getInfoApi</span>(<span style=color:#a6e22e>id</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>LESSON_ADMIN_AXIOS</span>.<span style=color:#a6e22e>get</span>(<span style=color:#e6db74>&#39;/banner/getInfo/&#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>id</span>)
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// GET - 全量数据分页
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>pageApi</span>(<span style=color:#a6e22e>params</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>LESSON_ADMIN_AXIOS</span>.<span style=color:#a6e22e>get</span>(<span style=color:#e6db74>&#39;/banner/page&#39;</span>, {<span style=color:#a6e22e>params</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>params</span>});
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// POST - 根据主键修改
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>updateApi</span>(<span style=color:#a6e22e>params</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>LESSON_ADMIN_AXIOS</span>.<span style=color:#a6e22e>post</span>(<span style=color:#e6db74>&#39;/banner/update&#39;</span>, <span style=color:#a6e22e>params</span>)
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// POST - 根据主键删除
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>removeApi</span>(<span style=color:#a6e22e>id</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>LESSON_ADMIN_AXIOS</span>.<span style=color:#a6e22e>post</span>(<span style=color:#e6db74>&#39;/banner/remove/&#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>id</span>)
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// POST - 根据主键批删
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>removeBatchApi</span>(<span style=color:#a6e22e>ids</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>LESSON_ADMIN_AXIOS</span>.<span style=color:#a6e22e>post</span>(<span style=color:#e6db74>&#39;/banner/removeBatch?ids=&#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>ids</span>)
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// POST - 上传横幅图片
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>uploadApi</span>(<span style=color:#a6e22e>id</span>, <span style=color:#a6e22e>params</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>LESSON_ADMIN_AXIOS</span>.<span style=color:#a6e22e>post</span>(<span style=color:#e6db74>&#39;/banner/upload&#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>id</span>, <span style=color:#a6e22e>params</span>, {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>headers</span><span style=color:#f92672>:</span> {<span style=color:#e6db74>&#39;Content-Type&#39;</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;multipart/form-data&#39;</span>}
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=2-封装评论接口>2. 封装评论接口</h3><blockquote><p>武技: 在Vue项目中封装评论表API接口</p></blockquote><p><code>@/api/comment.js</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>LESSON_ADMIN_AXIOS</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;@/api/axios&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// GET - 根据主键查询
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>getInfoApi</span>(<span style=color:#a6e22e>id</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>LESSON_ADMIN_AXIOS</span>.<span style=color:#a6e22e>get</span>(<span style=color:#e6db74>&#39;/comment/getInfo/&#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>id</span>)
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// GET - 全量数据分页
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>pageApi</span>(<span style=color:#a6e22e>params</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>LESSON_ADMIN_AXIOS</span>.<span style=color:#a6e22e>get</span>(<span style=color:#e6db74>&#39;/comment/page&#39;</span>, {<span style=color:#a6e22e>params</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>params</span>});
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// GET - 全查二级评论
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>getSubCommentsApi</span>(<span style=color:#a6e22e>id</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>LESSON_ADMIN_AXIOS</span>.<span style=color:#a6e22e>get</span>(<span style=color:#e6db74>&#39;/comment/getSubComments/&#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>id</span>)
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// POST - 根据主键删除
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>removeApi</span>(<span style=color:#a6e22e>id</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>LESSON_ADMIN_AXIOS</span>.<span style=color:#a6e22e>post</span>(<span style=color:#e6db74>&#39;/comment/remove/&#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>id</span>)
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// POST - 根据主键批删
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>removeBatchApi</span>(<span style=color:#a6e22e>ids</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>LESSON_ADMIN_AXIOS</span>.<span style=color:#a6e22e>post</span>(<span style=color:#e6db74>&#39;/comment/removeBatch?ids=&#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>ids</span>)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=3-封装举报接口>3. 封装举报接口</h3><blockquote><p>武技: 在Vue项目中封装举报表API接口</p></blockquote><p><code>@/api/report.js</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>LESSON_ADMIN_AXIOS</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;@/api/axios&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// GET - 根据主键查询
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>getInfoApi</span>(<span style=color:#a6e22e>id</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>LESSON_ADMIN_AXIOS</span>.<span style=color:#a6e22e>get</span>(<span style=color:#e6db74>&#39;/report/getInfo/&#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>id</span>)
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// GET - 根据类型分页
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>pageApi</span>(<span style=color:#a6e22e>params</span>, <span style=color:#a6e22e>type</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>LESSON_ADMIN_AXIOS</span>.<span style=color:#a6e22e>get</span>(<span style=color:#e6db74>&#39;/report/page/&#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>type</span>, {<span style=color:#a6e22e>params</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>params</span>});
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// POST - 根据主键删除
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>removeApi</span>(<span style=color:#a6e22e>id</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>LESSON_ADMIN_AXIOS</span>.<span style=color:#a6e22e>post</span>(<span style=color:#e6db74>&#39;/report/remove/&#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>id</span>)
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// POST - 根据主键批删
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>removeBatchApi</span>(<span style=color:#a6e22e>ids</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>LESSON_ADMIN_AXIOS</span>.<span style=color:#a6e22e>post</span>(<span style=color:#e6db74>&#39;/report/removeBatch?ids=&#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>ids</span>)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=4-封装购物车接口>4. 封装购物车接口</h3><blockquote><p>武技: 在Vue项目中封装购物车表API接口</p></blockquote><p><code>@/api/cart.js</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>LESSON_ADMIN_AXIOS</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;@/api/axios&#39;</span>;  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span><span style=color:#75715e>// GET - 全量数据分页  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>pageApi</span>(<span style=color:#a6e22e>params</span>) {  
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>LESSON_ADMIN_AXIOS</span>.<span style=color:#a6e22e>get</span>(<span style=color:#e6db74>&#39;/cart/page&#39;</span>, {<span style=color:#a6e22e>params</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>params</span>});  
</span></span><span style=display:flex><span>}  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span><span style=color:#75715e>// GET - 根据课程分页  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>pageCourseApi</span>(<span style=color:#a6e22e>params</span>, <span style=color:#a6e22e>courseId</span>) {  
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>LESSON_ADMIN_AXIOS</span>.<span style=color:#a6e22e>get</span>(<span style=color:#e6db74>&#39;/cart/pageCourse/&#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>courseId</span>, {<span style=color:#a6e22e>params</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>params</span>});  
</span></span><span style=display:flex><span>}  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span><span style=color:#75715e>// GET - 根据会员分页  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>pageMemberApi</span>(<span style=color:#a6e22e>params</span>, <span style=color:#a6e22e>memberId</span>) {  
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>LESSON_ADMIN_AXIOS</span>.<span style=color:#a6e22e>get</span>(<span style=color:#e6db74>&#39;/cart/pageMember/&#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>memberId</span>, {<span style=color:#a6e22e>params</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>params</span>});  
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=5-封装优惠卷接口>5. 封装优惠卷接口</h3><blockquote><p>武技: 在Vue项目中封装优惠卷表API接口</p></blockquote><p><code>@/api/coupons.js</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>LESSON_ADMIN_AXIOS</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;@/api/axios&#39;</span>;  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span><span style=color:#75715e>// POST - 添加一条记录  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>saveApi</span>(<span style=color:#a6e22e>params</span>) {  
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>LESSON_ADMIN_AXIOS</span>.<span style=color:#a6e22e>post</span>(<span style=color:#e6db74>&#39;/coupons/save&#39;</span>, <span style=color:#a6e22e>params</span>)  
</span></span><span style=display:flex><span>}  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span><span style=color:#75715e>// GET - 根据主键查询  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>getInfoApi</span>(<span style=color:#a6e22e>id</span>) {  
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>LESSON_ADMIN_AXIOS</span>.<span style=color:#a6e22e>get</span>(<span style=color:#e6db74>&#39;/coupons/getInfo/&#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>id</span>)  
</span></span><span style=display:flex><span>}  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span><span style=color:#75715e>// GET - 根据状态分页  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>pageApi</span>(<span style=color:#a6e22e>params</span>, <span style=color:#a6e22e>state</span>) {  
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>LESSON_ADMIN_AXIOS</span>.<span style=color:#a6e22e>get</span>(<span style=color:#e6db74>&#39;/coupons/page/&#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>state</span>, {<span style=color:#a6e22e>params</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>params</span>});  
</span></span><span style=display:flex><span>}  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span><span style=color:#75715e>// POST - 根据主键修改  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>updateApi</span>(<span style=color:#a6e22e>params</span>) {  
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>LESSON_ADMIN_AXIOS</span>.<span style=color:#a6e22e>post</span>(<span style=color:#e6db74>&#39;/coupons/update&#39;</span>, <span style=color:#a6e22e>params</span>)  
</span></span><span style=display:flex><span>}  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span><span style=color:#75715e>// POST - 根据主键删除  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>removeApi</span>(<span style=color:#a6e22e>id</span>) {  
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>LESSON_ADMIN_AXIOS</span>.<span style=color:#a6e22e>post</span>(<span style=color:#e6db74>&#39;/coupons/remove/&#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>id</span>)  
</span></span><span style=display:flex><span>}  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span><span style=color:#75715e>// POST - 根据主键批删  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>removeBatchApi</span>(<span style=color:#a6e22e>ids</span>) {  
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>LESSON_ADMIN_AXIOS</span>.<span style=color:#a6e22e>post</span>(<span style=color:#e6db74>&#39;/coupons/removeBatch?ids=&#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>ids</span>)  
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=6-封装订单接口>6. 封装订单接口</h3><blockquote><p>武技: 在Vue项目中封装订单表API接口</p></blockquote><p><code>@/api/order.js</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>LESSON_ADMIN_AXIOS</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;@/api/axios&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// GET - 根据主键查询
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>getInfoApi</span>(<span style=color:#a6e22e>id</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>LESSON_ADMIN_AXIOS</span>.<span style=color:#a6e22e>get</span>(<span style=color:#e6db74>&#39;/order/getInfo/&#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>id</span>)
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// GET - 根据编号查询
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>getBySnApi</span>(<span style=color:#a6e22e>sn</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>LESSON_ADMIN_AXIOS</span>.<span style=color:#a6e22e>get</span>(<span style=color:#e6db74>&#39;/order/getBySn/&#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>sn</span>)
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// GET - 根据状态分页
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>pageApi</span>(<span style=color:#a6e22e>params</span>, <span style=color:#a6e22e>state</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>LESSON_ADMIN_AXIOS</span>.<span style=color:#a6e22e>get</span>(<span style=color:#e6db74>&#39;/order/page/&#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>state</span>, {<span style=color:#a6e22e>params</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>params</span>});
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// GET - 根据会员分页
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>pageMemberApi</span>(<span style=color:#a6e22e>params</span>, <span style=color:#a6e22e>memberId</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>LESSON_ADMIN_AXIOS</span>.<span style=color:#a6e22e>get</span>(<span style=color:#e6db74>&#39;/order/pageMember/&#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>memberId</span>, {<span style=color:#a6e22e>params</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>params</span>});
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// GET - 统计日增订单
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>countTodayApi</span>() {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>LESSON_ADMIN_AXIOS</span>.<span style=color:#a6e22e>get</span>(<span style=color:#e6db74>&#39;/order/countToday&#39;</span>);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// GET - 统计全部订单
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>countTotalApi</span>() {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>LESSON_ADMIN_AXIOS</span>.<span style=color:#a6e22e>get</span>(<span style=color:#e6db74>&#39;/order/countTotal&#39;</span>);
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=7-封装类目接口>7. 封装类目接口</h3><blockquote><p>武技: 在Vue项目中封装类目表API接口</p></blockquote><p><code>@/api/category.js</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>LESSON_ADMIN_AXIOS</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;@/api/axios&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// POST - 添加一条记录
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>saveApi</span>(<span style=color:#a6e22e>params</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>LESSON_ADMIN_AXIOS</span>.<span style=color:#a6e22e>post</span>(<span style=color:#e6db74>&#39;/category/save&#39;</span>, <span style=color:#a6e22e>params</span>)
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// GET - 根据主键查询
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>getInfoApi</span>(<span style=color:#a6e22e>id</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>LESSON_ADMIN_AXIOS</span>.<span style=color:#a6e22e>get</span>(<span style=color:#e6db74>&#39;/category/getInfo/&#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>id</span>)
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// GET - 全量数据分页
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>pageApi</span>(<span style=color:#a6e22e>params</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>LESSON_ADMIN_AXIOS</span>.<span style=color:#a6e22e>get</span>(<span style=color:#e6db74>&#39;/category/page&#39;</span>, {<span style=color:#a6e22e>params</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>params</span>});
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// GET - 查询全部记录
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>listApi</span>() {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>LESSON_ADMIN_AXIOS</span>.<span style=color:#a6e22e>get</span>(<span style=color:#e6db74>&#39;/category/list&#39;</span>);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// POST - 根据主键修改
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>updateApi</span>(<span style=color:#a6e22e>params</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>LESSON_ADMIN_AXIOS</span>.<span style=color:#a6e22e>post</span>(<span style=color:#e6db74>&#39;/category/update&#39;</span>, <span style=color:#a6e22e>params</span>)
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// POST - 根据主键删除
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>removeApi</span>(<span style=color:#a6e22e>id</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>LESSON_ADMIN_AXIOS</span>.<span style=color:#a6e22e>post</span>(<span style=color:#e6db74>&#39;/category/remove/&#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>id</span>)
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// POST - 根据主键批删
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>removeBatchApi</span>(<span style=color:#a6e22e>ids</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>LESSON_ADMIN_AXIOS</span>.<span style=color:#a6e22e>post</span>(<span style=color:#e6db74>&#39;/category/removeBatch?ids=&#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>ids</span>)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=8-封装课程接口>8. 封装课程接口</h3><blockquote><p>武技: 在Vue项目中封装课程表API接口</p></blockquote><p><code>@/api/course.js</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>LESSON_ADMIN_AXIOS</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;@/api/axios&#39;</span>;  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span><span style=color:#75715e>// POST - 添加一条记录  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>saveApi</span>(<span style=color:#a6e22e>params</span>) {  
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>LESSON_ADMIN_AXIOS</span>.<span style=color:#a6e22e>post</span>(<span style=color:#e6db74>&#39;/course/save&#39;</span>, <span style=color:#a6e22e>params</span>)  
</span></span><span style=display:flex><span>}  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span><span style=color:#75715e>// GET - 根据主键查询  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>getInfoApi</span>(<span style=color:#a6e22e>id</span>) {  
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>LESSON_ADMIN_AXIOS</span>.<span style=color:#a6e22e>get</span>(<span style=color:#e6db74>&#39;/course/getInfo/&#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>id</span>)  
</span></span><span style=display:flex><span>}  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span><span style=color:#75715e>// GET - 全量数据分页  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>pageApi</span>(<span style=color:#a6e22e>params</span>) {  
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>LESSON_ADMIN_AXIOS</span>.<span style=color:#a6e22e>get</span>(<span style=color:#e6db74>&#39;/course/page&#39;</span>, {<span style=color:#a6e22e>params</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>params</span>});  
</span></span><span style=display:flex><span>}  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span><span style=color:#75715e>// GET - 统计课程评分  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>countStarApi</span>() {  
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>LESSON_ADMIN_AXIOS</span>.<span style=color:#a6e22e>get</span>(<span style=color:#e6db74>&#39;/course/countStar&#39;</span>);  
</span></span><span style=display:flex><span>}  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span><span style=color:#75715e>// GET - 根据类目分页
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>pageCategoryApi</span>(<span style=color:#a6e22e>params</span>, <span style=color:#a6e22e>categoryId</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>LESSON_ADMIN_AXIOS</span>.<span style=color:#a6e22e>get</span>(<span style=color:#e6db74>&#39;/course/pageCategory/&#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>categoryId</span>, {<span style=color:#a6e22e>params</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>params</span>});
</span></span><span style=display:flex><span>} 
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span><span style=color:#75715e>// POST - 根据主键修改  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>updateApi</span>(<span style=color:#a6e22e>params</span>) {  
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>LESSON_ADMIN_AXIOS</span>.<span style=color:#a6e22e>post</span>(<span style=color:#e6db74>&#39;/course/update&#39;</span>, <span style=color:#a6e22e>params</span>)  
</span></span><span style=display:flex><span>}  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span><span style=color:#75715e>// POST - 根据主键删除  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>removeApi</span>(<span style=color:#a6e22e>id</span>) {  
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>LESSON_ADMIN_AXIOS</span>.<span style=color:#a6e22e>post</span>(<span style=color:#e6db74>&#39;/course/remove/&#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>id</span>)  
</span></span><span style=display:flex><span>}  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span><span style=color:#75715e>// POST - 根据主键批删  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>removeBatchApi</span>(<span style=color:#a6e22e>ids</span>) {  
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>LESSON_ADMIN_AXIOS</span>.<span style=color:#a6e22e>post</span>(<span style=color:#e6db74>&#39;/course/removeBatch?ids=&#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>ids</span>)  
</span></span><span style=display:flex><span>}  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span><span style=color:#75715e>// POST - 上传封面图片  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>uploadCoverApi</span>(<span style=color:#a6e22e>id</span>, <span style=color:#a6e22e>params</span>) {  
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>LESSON_ADMIN_AXIOS</span>.<span style=color:#a6e22e>post</span>(<span style=color:#e6db74>&#39;/course/uploadCover&#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>id</span>, <span style=color:#a6e22e>params</span>, {  
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>headers</span><span style=color:#f92672>:</span> {<span style=color:#e6db74>&#39;Content-Type&#39;</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;multipart/form-data&#39;</span>}  
</span></span><span style=display:flex><span>    });  
</span></span><span style=display:flex><span>}  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span><span style=color:#75715e>// POST - 上传摘要图片  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>uploadSummaryApi</span>(<span style=color:#a6e22e>id</span>, <span style=color:#a6e22e>params</span>) {  
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>LESSON_ADMIN_AXIOS</span>.<span style=color:#a6e22e>post</span>(<span style=color:#e6db74>&#39;/course/uploadSummary&#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>id</span>, <span style=color:#a6e22e>params</span>, {  
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>headers</span><span style=color:#f92672>:</span> {<span style=color:#e6db74>&#39;Content-Type&#39;</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;multipart/form-data&#39;</span>}  
</span></span><span style=display:flex><span>    });  
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=9-封装季次接口>9. 封装季次接口</h3><blockquote><p>武技: 在Vue项目中封装季次表API接口</p></blockquote><p><code>@/api/season.js</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>LESSON_ADMIN_AXIOS</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;@/api/axios&#39;</span>;  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span><span style=color:#75715e>// POST - 添加一条记录  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>saveApi</span>(<span style=color:#a6e22e>params</span>) {  
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>LESSON_ADMIN_AXIOS</span>.<span style=color:#a6e22e>post</span>(<span style=color:#e6db74>&#39;/season/save&#39;</span>, <span style=color:#a6e22e>params</span>)  
</span></span><span style=display:flex><span>}  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span><span style=color:#75715e>// GET - 根据主键查询  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>getInfoApi</span>(<span style=color:#a6e22e>id</span>) {  
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>LESSON_ADMIN_AXIOS</span>.<span style=color:#a6e22e>get</span>(<span style=color:#e6db74>&#39;/season/getInfo/&#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>id</span>)  
</span></span><span style=display:flex><span>}  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span><span style=color:#75715e>// GET - 根据课程分页  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>pageCourseApi</span>(<span style=color:#a6e22e>params</span>, <span style=color:#a6e22e>courseId</span>) {  
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>LESSON_ADMIN_AXIOS</span>.<span style=color:#a6e22e>get</span>(<span style=color:#e6db74>&#39;/season/pageCourse/&#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>courseId</span>, {<span style=color:#a6e22e>params</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>params</span>});  
</span></span><span style=display:flex><span>}  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span><span style=color:#75715e>// POST - 根据主键修改  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>updateApi</span>(<span style=color:#a6e22e>params</span>) {  
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>LESSON_ADMIN_AXIOS</span>.<span style=color:#a6e22e>post</span>(<span style=color:#e6db74>&#39;/season/update&#39;</span>, <span style=color:#a6e22e>params</span>)  
</span></span><span style=display:flex><span>}  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span><span style=color:#75715e>// POST - 根据主键删除  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>removeApi</span>(<span style=color:#a6e22e>id</span>) {  
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>LESSON_ADMIN_AXIOS</span>.<span style=color:#a6e22e>post</span>(<span style=color:#e6db74>&#39;/season/remove/&#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>id</span>)  
</span></span><span style=display:flex><span>}  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span><span style=color:#75715e>// POST - 根据主键批删  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>removeBatchApi</span>(<span style=color:#a6e22e>ids</span>) {  
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>LESSON_ADMIN_AXIOS</span>.<span style=color:#a6e22e>post</span>(<span style=color:#e6db74>&#39;/season/removeBatch?ids=&#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>ids</span>)  
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=10-封装集次接口>10. 封装集次接口</h3><blockquote><p>武技: 在Vue项目中封装集次表API接口</p></blockquote><p><code>@/api/episode.js</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>LESSON_ADMIN_AXIOS</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;@/api/axios&#39;</span>;  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span><span style=color:#75715e>// POST - 添加一条记录  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>saveApi</span>(<span style=color:#a6e22e>params</span>) {  
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>LESSON_ADMIN_AXIOS</span>.<span style=color:#a6e22e>post</span>(<span style=color:#e6db74>&#39;/episode/save&#39;</span>, <span style=color:#a6e22e>params</span>)  
</span></span><span style=display:flex><span>}  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span><span style=color:#75715e>// GET - 根据主键查询  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>getInfoApi</span>(<span style=color:#a6e22e>id</span>) {  
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>LESSON_ADMIN_AXIOS</span>.<span style=color:#a6e22e>get</span>(<span style=color:#e6db74>&#39;/episode/getInfo/&#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>id</span>)  
</span></span><span style=display:flex><span>}  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span><span style=color:#75715e>// GET - 根据季次分页  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>pageSeasonApi</span>(<span style=color:#a6e22e>params</span>, <span style=color:#a6e22e>seasonId</span>) {  
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>LESSON_ADMIN_AXIOS</span>.<span style=color:#a6e22e>get</span>(<span style=color:#e6db74>&#39;/episode/pageSeason/&#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>seasonId</span>, {<span style=color:#a6e22e>params</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>params</span>});  
</span></span><span style=display:flex><span>}  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span><span style=color:#75715e>// POST - 根据主键修改  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>updateApi</span>(<span style=color:#a6e22e>params</span>) {  
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>LESSON_ADMIN_AXIOS</span>.<span style=color:#a6e22e>post</span>(<span style=color:#e6db74>&#39;/episode/update&#39;</span>, <span style=color:#a6e22e>params</span>)  
</span></span><span style=display:flex><span>}  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span><span style=color:#75715e>// POST - 根据主键删除  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>removeApi</span>(<span style=color:#a6e22e>id</span>) {  
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>LESSON_ADMIN_AXIOS</span>.<span style=color:#a6e22e>post</span>(<span style=color:#e6db74>&#39;/episode/remove/&#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>id</span>)  
</span></span><span style=display:flex><span>}  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span><span style=color:#75715e>// POST - 根据主键批删  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>removeBatchApi</span>(<span style=color:#a6e22e>ids</span>) {  
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>LESSON_ADMIN_AXIOS</span>.<span style=color:#a6e22e>post</span>(<span style=color:#e6db74>&#39;/episode/removeBatch?ids=&#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>ids</span>)  
</span></span><span style=display:flex><span>}  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span><span style=color:#75715e>// POST - 上传封面图片  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>uploadCoverApi</span>(<span style=color:#a6e22e>id</span>, <span style=color:#a6e22e>params</span>) {  
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>LESSON_ADMIN_AXIOS</span>.<span style=color:#a6e22e>post</span>(<span style=color:#e6db74>&#39;/episode/uploadCover&#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>id</span>, <span style=color:#a6e22e>params</span>, {  
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>headers</span><span style=color:#f92672>:</span> {<span style=color:#e6db74>&#39;Content-Type&#39;</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;multipart/form-data&#39;</span>}  
</span></span><span style=display:flex><span>    });  
</span></span><span style=display:flex><span>}  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span><span style=color:#75715e>// POST - 上传视频文件  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>uploadVideoApi</span>(<span style=color:#a6e22e>id</span>, <span style=color:#a6e22e>params</span>) {  
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>LESSON_ADMIN_AXIOS</span>.<span style=color:#a6e22e>post</span>(<span style=color:#e6db74>&#39;/episode/uploadVideo&#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>id</span>, <span style=color:#a6e22e>params</span>, {  
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>headers</span><span style=color:#f92672>:</span> {<span style=color:#e6db74>&#39;Content-Type&#39;</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;multipart/form-data&#39;</span>}  
</span></span><span style=display:flex><span>    });  
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=11-封装会员接口>11. 封装会员接口</h3><blockquote><p>武技: 在Vue项目中封装会员表API接口</p></blockquote><p><code>@/api/member.js</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>LESSON_ADMIN_AXIOS</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;@/api/axios&#39;</span>;  
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>qs</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;qs&#34;</span>;  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span><span style=color:#75715e>// GET - 根据主键查询  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>getInfoApi</span>(<span style=color:#a6e22e>id</span>) {  
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>LESSON_ADMIN_AXIOS</span>.<span style=color:#a6e22e>get</span>(<span style=color:#e6db74>&#39;/member/getInfo/&#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>id</span>)  
</span></span><span style=display:flex><span>}  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span><span style=color:#75715e>// GET - 根据账号查询  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>getByUsernameApi</span>(<span style=color:#a6e22e>username</span>) {  
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>LESSON_ADMIN_AXIOS</span>.<span style=color:#a6e22e>get</span>(<span style=color:#e6db74>&#39;/member/getByUsername/&#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>username</span>)  
</span></span><span style=display:flex><span>}  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span><span style=color:#75715e>// GET - 根据昵称查询  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>getByNicknameApi</span>(<span style=color:#a6e22e>nickname</span>) {  
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>LESSON_ADMIN_AXIOS</span>.<span style=color:#a6e22e>get</span>(<span style=color:#e6db74>&#39;/member/getByNickname/&#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>nickname</span>)  
</span></span><span style=display:flex><span>}  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span><span style=color:#75715e>// GET - 根据手机查询  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>getByPhoneApi</span>(<span style=color:#a6e22e>phone</span>) {  
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>LESSON_ADMIN_AXIOS</span>.<span style=color:#a6e22e>get</span>(<span style=color:#e6db74>&#39;/member/getByPhone/&#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>phone</span>)  
</span></span><span style=display:flex><span>}  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span><span style=color:#75715e>// GET - 根据状态分页  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>pageApi</span>(<span style=color:#a6e22e>params</span>, <span style=color:#a6e22e>state</span>) {  
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>LESSON_ADMIN_AXIOS</span>.<span style=color:#a6e22e>get</span>(<span style=color:#e6db74>&#39;/member/page/&#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>state</span>, {<span style=color:#a6e22e>params</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>params</span>});  
</span></span><span style=display:flex><span>}  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span><span style=color:#75715e>// GET - 统计会员性别  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>countGenderApi</span>() {  
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>LESSON_ADMIN_AXIOS</span>.<span style=color:#a6e22e>get</span>(<span style=color:#e6db74>&#39;/member/countGender&#39;</span>);  
</span></span><span style=display:flex><span>}  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span><span style=color:#75715e>// GET - 统计日增会员  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>countTodayApi</span>() {  
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>LESSON_ADMIN_AXIOS</span>.<span style=color:#a6e22e>get</span>(<span style=color:#e6db74>&#39;/member/countToday&#39;</span>);  
</span></span><span style=display:flex><span>}  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span><span style=color:#75715e>// GET - 统计全部会员  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>countTotalApi</span>() {  
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>LESSON_ADMIN_AXIOS</span>.<span style=color:#a6e22e>get</span>(<span style=color:#e6db74>&#39;/member/countTotal&#39;</span>);  
</span></span><span style=display:flex><span>}  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span><span style=color:#75715e>// GET - 查询角色列表  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>getRolesApi</span>(<span style=color:#a6e22e>id</span>) {  
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>LESSON_ADMIN_AXIOS</span>.<span style=color:#a6e22e>get</span>(<span style=color:#e6db74>&#39;/member/getRoles/&#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>id</span>);  
</span></span><span style=display:flex><span>}  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span><span style=color:#75715e>// POST - 冻结会员账号  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>freezeApi</span>(<span style=color:#a6e22e>id</span>) {  
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>LESSON_ADMIN_AXIOS</span>.<span style=color:#a6e22e>post</span>(<span style=color:#e6db74>&#39;/member/freeze/&#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>id</span>);  
</span></span><span style=display:flex><span>}  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span><span style=color:#75715e>// POST - 解冻会员账号  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>unfreezeApi</span>(<span style=color:#a6e22e>id</span>) {  
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>LESSON_ADMIN_AXIOS</span>.<span style=color:#a6e22e>post</span>(<span style=color:#e6db74>&#39;/member/unfreeze/&#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>id</span>);  
</span></span><span style=display:flex><span>}  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span><span style=color:#75715e>// POST - 修改角色列表  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>updateRolesApi</span>(<span style=color:#a6e22e>id</span>, <span style=color:#a6e22e>roleIds</span>) {  
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>LESSON_ADMIN_AXIOS</span>.<span style=color:#a6e22e>post</span>(<span style=color:#e6db74>&#39;/member/updateRoles/&#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>id</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;?roleIds=&#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>roleIds</span>);  
</span></span><span style=display:flex><span>}  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span><span style=color:#75715e>// POST - 重置会员密码  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>resetPasswordApi</span>(<span style=color:#a6e22e>id</span>) {  
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>LESSON_ADMIN_AXIOS</span>.<span style=color:#a6e22e>post</span>(<span style=color:#e6db74>&#39;/member/resetPassword/&#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>id</span>);  
</span></span><span style=display:flex><span>}  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span><span style=color:#75715e>// POST - 账号密码登录  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>loginByAccountApi</span>(<span style=color:#a6e22e>params</span>) {  
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>LESSON_ADMIN_AXIOS</span>.<span style=color:#a6e22e>post</span>(<span style=color:#e6db74>&#39;/member/loginByAccount&#39;</span>, <span style=color:#a6e22e>qs</span>.<span style=color:#a6e22e>stringify</span>(<span style=color:#a6e22e>params</span>));  
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=12-封装角色接口>12. 封装角色接口</h3><blockquote><p>武技: 在Vue项目中封装角色表API接口</p></blockquote><p><code>@/api/role.js</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>LESSON_ADMIN_AXIOS</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;@/api/axios&#39;</span>;  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span><span style=color:#75715e>// POST - 添加一条记录  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>saveApi</span>(<span style=color:#a6e22e>params</span>) {  
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>LESSON_ADMIN_AXIOS</span>.<span style=color:#a6e22e>post</span>(<span style=color:#e6db74>&#39;/role/save&#39;</span>, <span style=color:#a6e22e>params</span>);  
</span></span><span style=display:flex><span>}  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span><span style=color:#75715e>// GET - 根据主键查询  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>getInfoApi</span>(<span style=color:#a6e22e>id</span>) {  
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>LESSON_ADMIN_AXIOS</span>.<span style=color:#a6e22e>get</span>(<span style=color:#e6db74>&#39;/role/getInfo/&#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>id</span>);  
</span></span><span style=display:flex><span>}  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span><span style=color:#75715e>// GET - 全量数据分页  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>pageApi</span>(<span style=color:#a6e22e>params</span>) {  
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>LESSON_ADMIN_AXIOS</span>.<span style=color:#a6e22e>get</span>(<span style=color:#e6db74>&#39;/role/page&#39;</span>, {<span style=color:#a6e22e>params</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>params</span>});  
</span></span><span style=display:flex><span>}  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span><span style=color:#75715e>// GET - 查询全部记录  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>list</span>() {  
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>LESSON_ADMIN_AXIOS</span>.<span style=color:#a6e22e>get</span>(<span style=color:#e6db74>&#39;/role/list&#39;</span>);  
</span></span><span style=display:flex><span>}  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span><span style=color:#75715e>// GET - 查询权限列表  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>getPermissionsApi</span>(<span style=color:#a6e22e>id</span>) {  
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>LESSON_ADMIN_AXIOS</span>.<span style=color:#a6e22e>get</span>(<span style=color:#e6db74>&#39;/role/getPermissions/&#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>id</span>);  
</span></span><span style=display:flex><span>}  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span><span style=color:#75715e>// POST - 根据主键修改  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>updateApi</span>(<span style=color:#a6e22e>params</span>) {  
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>LESSON_ADMIN_AXIOS</span>.<span style=color:#a6e22e>post</span>(<span style=color:#e6db74>&#39;/role/update&#39;</span>, <span style=color:#a6e22e>params</span>);  
</span></span><span style=display:flex><span>}  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span><span style=color:#75715e>// POST - 根据主键删除  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>removeApi</span>(<span style=color:#a6e22e>id</span>) {  
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>LESSON_ADMIN_AXIOS</span>.<span style=color:#a6e22e>post</span>(<span style=color:#e6db74>&#39;/role/remove/&#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>id</span>);  
</span></span><span style=display:flex><span>}  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span><span style=color:#75715e>// POST - 根据主键批删  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>removeBatchApi</span>(<span style=color:#a6e22e>ids</span>) {  
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>LESSON_ADMIN_AXIOS</span>.<span style=color:#a6e22e>post</span>(<span style=color:#e6db74>&#39;/role/removeBatch?ids=&#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>ids</span>);  
</span></span><span style=display:flex><span>}  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span><span style=color:#75715e>// POST - 修改权限列表  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>updatePermissionsApi</span>(<span style=color:#a6e22e>id</span>, <span style=color:#a6e22e>permissionIds</span>) {  
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>LESSON_ADMIN_AXIOS</span>.<span style=color:#a6e22e>post</span>(<span style=color:#e6db74>&#39;/role/updatePermissions/&#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>id</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;?permissionIds=&#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>permissionIds</span>);  
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=13-封装权限接口>13. 封装权限接口</h3><blockquote><p>武技: 在Vue项目中封装权限表API接口</p></blockquote><p><code>@/api/permission.js</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>LESSON_ADMIN_AXIOS</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;@/api/axios&#39;</span>;  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span><span style=color:#75715e>// POST - 添加一条记录  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>saveApi</span>(<span style=color:#a6e22e>params</span>) {  
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>LESSON_ADMIN_AXIOS</span>.<span style=color:#a6e22e>post</span>(<span style=color:#e6db74>&#39;/permission/save&#39;</span>, <span style=color:#a6e22e>params</span>)  
</span></span><span style=display:flex><span>}  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span><span style=color:#75715e>// GET - 根据主键查询  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>getInfoApi</span>(<span style=color:#a6e22e>id</span>) {  
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>LESSON_ADMIN_AXIOS</span>.<span style=color:#a6e22e>get</span>(<span style=color:#e6db74>&#39;/permission/getInfo/&#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>id</span>)  
</span></span><span style=display:flex><span>}  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span><span style=color:#75715e>// GET - 根据父级分页  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>pageApi</span>(<span style=color:#a6e22e>params</span>, <span style=color:#a6e22e>pid</span>) {  
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>LESSON_ADMIN_AXIOS</span>.<span style=color:#a6e22e>get</span>(<span style=color:#e6db74>&#39;/permission/page/&#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>pid</span>, {<span style=color:#a6e22e>params</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>params</span>});  
</span></span><span style=display:flex><span>}  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span><span style=color:#75715e>// GET - 查询全部记录  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>list</span>() {  
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>LESSON_ADMIN_AXIOS</span>.<span style=color:#a6e22e>get</span>(<span style=color:#e6db74>&#39;/permission/list&#39;</span>);  
</span></span><span style=display:flex><span>}  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span><span style=color:#75715e>// POST - 根据主键修改  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>updateApi</span>(<span style=color:#a6e22e>params</span>) {  
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>LESSON_ADMIN_AXIOS</span>.<span style=color:#a6e22e>post</span>(<span style=color:#e6db74>&#39;/permission/update&#39;</span>, <span style=color:#a6e22e>params</span>)  
</span></span><span style=display:flex><span>}  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span><span style=color:#75715e>// POST - 根据主键删除  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>removeApi</span>(<span style=color:#a6e22e>id</span>) {  
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>LESSON_ADMIN_AXIOS</span>.<span style=color:#a6e22e>post</span>(<span style=color:#e6db74>&#39;/permission/remove/&#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>id</span>)  
</span></span><span style=display:flex><span>}  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span><span style=color:#75715e>// POST - 根据主键批删  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>removeBatchApi</span>(<span style=color:#a6e22e>ids</span>) {  
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>LESSON_ADMIN_AXIOS</span>.<span style=color:#a6e22e>post</span>(<span style=color:#e6db74>&#39;/permission/removeBatch?ids=&#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>ids</span>)  
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=e04-开发前端拦截器>E04. 开发前端拦截器</h2><blockquote><p>武技: 开发Axios的请求拦截器和响应拦截器</p></blockquote><h3 id=1-开发请求拦截器>1. 开发请求拦截器</h3><p><code>@/api/axios.js</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#75715e>/* =============== LESSON_ADMIN_AXIOS 请求拦截器 =============== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 在发送请求前执行
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>LESSON_ADMIN_AXIOS</span>.<span style=color:#a6e22e>interceptors</span>.<span style=color:#a6e22e>request</span>.<span style=color:#a6e22e>use</span>(
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 正常时执行该函数，req为当前请求对象
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>req</span> =&gt; {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 统一打印请求数据，便于测试，生产时删除
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>&#39;拦截到请求: &#39;</span>, <span style=color:#a6e22e>req</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 从sessionStorage中获取Token令牌
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>token</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>sessionStorage</span>.<span style=color:#a6e22e>getItem</span>(<span style=color:#e6db74>&#34;token&#34;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 若Token令牌存在，则将Token令牌存入请求头
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>token</span>) <span style=color:#a6e22e>req</span>.<span style=color:#a6e22e>headers</span>[<span style=color:#e6db74>&#39;token&#39;</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>token</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 无论Token是否获取成功，都放行请求
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>req</span>;
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 异常时执行该函数，e为异常对象: 异常时阻止该响应并展示异常信息
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>err</span> =&gt; Promise.<span style=color:#a6e22e>reject</span>(<span style=color:#a6e22e>err</span>)
</span></span><span style=display:flex><span>);
</span></span></code></pre></div><h3 id=2-测试请求拦截器>2. 测试请求拦截器</h3><ul><li>统一打印请求数据，便于测试，生产时删除。</li></ul><h3 id=3-开发响应拦截器>3. 开发响应拦截器</h3><p><code>@/api/axios.js</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#75715e>/* =============== LESSON_ADMIN_AXIOS 响应拦截器 =============== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 在接收到响应之后执行
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>LESSON_ADMIN_AXIOS</span>.<span style=color:#a6e22e>interceptors</span>.<span style=color:#a6e22e>response</span>.<span style=color:#a6e22e>use</span>(
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 正常时执行该函数，req为当前请求对象
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>resp</span> =&gt; {
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 统一打印响应数据，便于测试，生产时删除
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>&#39;拦截到响应: &#39;</span>, <span style=color:#a6e22e>resp</span>);
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 判断需要对Token进行续期: 约定Token即将过期时后台会返回一个 `code=1004` 的响应
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>resp</span>.<span style=color:#a6e22e>data</span>.<span style=color:#a6e22e>code</span> <span style=color:#f92672>===</span> <span style=color:#a6e22e>STATUS</span>.<span style=color:#a6e22e>TOKEN_EXPIRING_SOON</span>) {
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>&#34; &gt;&gt; Token自动续期-开始，原Token: {}&#34;</span>, <span style=color:#a6e22e>sessionStorage</span>.<span style=color:#a6e22e>getItem</span>(<span style=color:#e6db74>&#34;token&#34;</span>));
</span></span><span style=display:flex><span>            <span style=color:#75715e>// 从响应中获取新的Token令牌
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>newToken</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>resp</span>.<span style=color:#a6e22e>data</span>.<span style=color:#a6e22e>data</span>;
</span></span><span style=display:flex><span>            <span style=color:#75715e>// 更新sessionStorage中的Token令牌
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            <span style=color:#a6e22e>sessionStorage</span>.<span style=color:#a6e22e>setItem</span>(<span style=color:#e6db74>&#34;token&#34;</span>, <span style=color:#a6e22e>newToken</span>);
</span></span><span style=display:flex><span>            <span style=color:#75715e>// 将新的Token令牌设置到请求头
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            <span style=color:#a6e22e>LESSON_ADMIN_AXIOS</span>.<span style=color:#a6e22e>defaults</span>.<span style=color:#a6e22e>headers</span>[<span style=color:#e6db74>&#39;token&#39;</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>newToken</span>;
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>&#34; &gt;&gt; Token自动续期-结束，新Token: {}&#34;</span>, <span style=color:#a6e22e>newToken</span>);
</span></span><span style=display:flex><span>            <span style=color:#75715e>// 携带新Token重新发送请求
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>LESSON_ADMIN_AXIOS</span>.<span style=color:#a6e22e>request</span>(<span style=color:#a6e22e>resp</span>.<span style=color:#a6e22e>config</span>);
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 若不需要Token续期，则直接放行请求
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>resp</span>;
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 异常时执行该函数，e为异常对象: 异常时阻止该响应并展示异常信息
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>err</span> =&gt; Promise.<span style=color:#a6e22e>reject</span>(<span style=color:#a6e22e>err</span>)
</span></span><span style=display:flex><span>);
</span></span></code></pre></div><h3 id=4-测试响应拦截器>4. 测试响应拦截器</h3><ul><li>直接修改响应的值，使其触发自动续期过程，发送请求时查看是否执行即可:</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#75715e>// 使用计数器防止无限发送请求
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>num</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Axios响应拦截器
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>LESSON_SERVER_AXIOS</span>.<span style=color:#a6e22e>interceptors</span>.<span style=color:#a6e22e>response</span>.<span style=color:#a6e22e>use</span>(<span style=color:#a6e22e>resp</span> =&gt; {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 统一打印响应数据，便于测试，生产时删除
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 修改响应，为了使其触发自动续期
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>num</span><span style=color:#f92672>++</span> <span style=color:#f92672>===</span> <span style=color:#ae81ff>0</span>) {
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>resp</span>.<span style=color:#a6e22e>data</span>.<span style=color:#a6e22e>code</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>1004</span>;
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>resp</span>.<span style=color:#a6e22e>data</span>.<span style=color:#a6e22e>data</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;I-am-a-new-token&#39;</span>;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 判断需要对Token进行续期: 约定Token即将过期时后台会返回一个 `code=1004` 的响应
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>});
</span></span></code></pre></div><h1 id=s02-通用组件开发>S02. 通用组件开发</h1><h2 id=e01-路径导航组件>E01. 路径导航组件</h2><blockquote><p>心法: 路径导航通用组件 <code>@/components/MyNav.vue</code></p></blockquote><p><img src=/%E7%AC%AC4%E9%98%B6%E6%AE%B5-LESSON/JB4-5-%E5%90%8E%E5%8F%B0%E5%89%8D%E7%AB%AF/image/MyNav%E9%A1%B5%E9%9D%A2.png alt></p><table><thead><tr><th>必填</th><th>属性</th><th>描述</th><th>类型</th><th>默认值</th></tr></thead><tbody><tr><td>√</td><td><code>items</code></td><td>路径导航项 - 数据</td><td>Array</td><td></td></tr><tr><td></td><td><code>items -> icon</code></td><td>路径导航项 - 图标</td><td>String</td><td><code>undefined</code></td></tr><tr><td></td><td><code>items -> text</code></td><td>路径导航项 - 文案</td><td>String</td><td><code>undefined</code></td></tr><tr><td></td><td><code>items -> url</code></td><td>路径导航项 - 点击后的跳转地址</td><td>String</td><td><code>"/"</code></td></tr><tr><td></td><td><code>items -> fn</code></td><td>路径导航项 - 点击事件</td><td>Function</td><td><code>undefined</code></td></tr><tr><td></td><td><code>separator</code></td><td>路径导航条 - 分割符号</td><td>String</td><td><code>undefined</code></td></tr><tr><td></td><td><code>backBtnText</code></td><td>回退按钮文案</td><td>String</td><td><code>"返回"</code></td></tr></tbody></table><blockquote><p>武技: 开发路径导航通用组件 <code>@/components/MyNav.vue</code></p></blockquote><ol><li>开发MyNav组件布局:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>&lt;<span style=color:#f92672>el-breadcrumb</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;my-nav breadcrumb-nav&#34;</span> <span style=color:#a6e22e>:separator</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;separator&#34;</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>el-button</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;back-btn&#34;</span> <span style=color:#a6e22e>size</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;small&#34;</span> <span style=color:#a6e22e>icon</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;Back&#34;</span> <span style=color:#a6e22e>link</span>
</span></span><span style=display:flex><span>             <span style=color:#960050;background-color:#1e0010>@</span><span style=color:#a6e22e>click</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;router.back(-1);&#34;</span>&gt;
</span></span><span style=display:flex><span>    {{ backBtnText }}
</span></span><span style=display:flex><span>  &lt;/<span style=color:#f92672>el-button</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>el-divider</span> <span style=color:#a6e22e>direction</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;vertical&#34;</span>/&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>el-breadcrumb-item</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;items&#34;</span> <span style=color:#a6e22e>v-for</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;(item ,i) in items&#34;</span> <span style=color:#a6e22e>:key</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;item&#34;</span>
</span></span><span style=display:flex><span>                      <span style=color:#a6e22e>:to</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;item[&#39;url&#39;]&#34;</span>&gt;
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!--type: 最后1个按钮为default，其余为info--&gt;</span>
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>el-button</span> <span style=color:#a6e22e>size</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;small&#34;</span> <span style=color:#a6e22e>link</span>
</span></span><span style=display:flex><span>               <span style=color:#a6e22e>:icon</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;item[&#39;icon&#39;]&#34;</span>
</span></span><span style=display:flex><span>               <span style=color:#a6e22e>:type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;i === items.length - 1 ? &#39;info&#39; : &#39;default&#39;&#34;</span>
</span></span><span style=display:flex><span>               <span style=color:#960050;background-color:#1e0010>@</span><span style=color:#a6e22e>click</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;item[&#39;fn&#39;]&#34;</span>&gt;
</span></span><span style=display:flex><span>      {{ item[&#39;title&#39;] }}
</span></span><span style=display:flex><span>    &lt;/<span style=color:#f92672>el-button</span>&gt;
</span></span><span style=display:flex><span>  &lt;/<span style=color:#f92672>el-breadcrumb-item</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>el-breadcrumb</span>&gt;
</span></span></code></pre></div><ol start=2><li>开发MyNav组件样式:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-css data-lang=css><span style=display:flex><span>.<span style=color:#a6e22e>my-nav</span> {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#960050;background-color:#1e0010>*</span> <span style=color:#960050;background-color:#1e0010>{</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>float</span>: <span style=color:#66d9ef>left</span>; <span style=color:#960050;background-color:#1e0010>//</span> <span style=color:#960050;background-color:#1e0010>左浮动</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  .<span style=color:#a6e22e>el-button</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>font-size</span>: <span style=color:#ae81ff>1</span><span style=color:#66d9ef>rem</span>; <span style=color:#960050;background-color:#1e0010>//</span> <span style=color:#960050;background-color:#1e0010>字号</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>padding-top</span>: <span style=color:#ae81ff>0</span>; <span style=color:#960050;background-color:#1e0010>//</span> <span style=color:#960050;background-color:#1e0010>上内边距</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>}</span>
</span></span></code></pre></div><ol start=3><li>开发MyNav组件脚本:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>router</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/router&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 接收父组件传递的数据
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>parent</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>defineProps</span>({
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#39;items&#39;</span><span style=color:#f92672>:</span> {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> Array, <span style=color:#a6e22e>required</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span>},
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#39;separator&#39;</span><span style=color:#f92672>:</span> {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> String, <span style=color:#a6e22e>required</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>false</span>, <span style=color:#66d9ef>default</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;/&#39;</span>},
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#39;backBtnText&#39;</span><span style=color:#f92672>:</span> {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> String, <span style=color:#a6e22e>required</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>false</span>, <span style=color:#66d9ef>default</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;返回&#39;</span>},
</span></span><span style=display:flex><span>});
</span></span></code></pre></div><ol start=4><li>测试MyNav组件效果:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-vue data-lang=vue><span style=display:flex><span>&lt;<span style=color:#f92672>template</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>style</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;margin: 20px;&#34;</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>my-nav</span> <span style=color:#f92672>:items</span><span style=color:#e6db74>=&#34;items&#34;</span> <span style=color:#a6e22e>separator</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;/&#34;</span> <span style=color:#a6e22e>backBtnText</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;返回&#34;</span>/&gt;
</span></span><span style=display:flex><span>  &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>template</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>script</span> <span style=color:#a6e22e>setup</span>&gt;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>MyNav</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/components/MyNav&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>onMounted</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;vue&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>useDark</span>, <span style=color:#a6e22e>useToggle</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@vueuse/core/index&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>router</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/router&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 导航数据
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>items</span> <span style=color:#f92672>=</span> [
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>icon</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;House&#39;</span>, <span style=color:#a6e22e>title</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;首页&#39;</span>, <span style=color:#a6e22e>url</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;/Board&#39;</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>icon</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Files&#39;</span>, <span style=color:#a6e22e>title</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;内容管理&#39;</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> () =&gt; <span style=color:#a6e22e>router</span>.<span style=color:#a6e22e>back</span>(<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>)}},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>icon</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Picture&#39;</span>, <span style=color:#a6e22e>title</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;横幅列表&#39;</span>}
</span></span><span style=display:flex><span>];
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== onMounted ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 暗黑模式
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>onMounted</span>(() =&gt; <span style=color:#a6e22e>useToggle</span>(<span style=color:#a6e22e>useDark</span>()));
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>script</span>&gt;
</span></span></code></pre></div><h2 id=e02-页头栅格组件>E02. 页头栅格组件</h2><blockquote><p>心法: 页头栅格通用组件 <code>@/components/MyHead.vue</code></p></blockquote><p><img src=/%E7%AC%AC4%E9%98%B6%E6%AE%B5-LESSON/JB4-5-%E5%90%8E%E5%8F%B0%E5%89%8D%E7%AB%AF/image/MyHead%E9%A1%B5%E9%9D%A2.png alt></p><ul><li>页头栅格组件中共封装 <code>ipt, rdo, opt, btn, insertBtn, deleteBtn, excelBtn</code> 这7种类型元素。</li></ul><table><thead><tr><th>必填</th><th>属性</th><th>描述</th><th>类型</th><th>默认值</th></tr></thead><tbody><tr><td>√</td><td><code>items</code></td><td>页头栅格数据</td><td>Array</td><td></td></tr><tr><td></td><td><code>items -> span</code></td><td>页头栅格列 - 占位</td><td>Number</td><td><code>1</code></td></tr><tr><td></td><td><code>items -> offset</code></td><td>页头栅格列 - 偏移</td><td>Number</td><td><code>0</code></td></tr><tr><td></td><td><code>items -> type</code></td><td>数据类型</td><td>String</td><td><code>btn</code></td></tr><tr><td></td><td><code>items -> placeholder</code></td><td>背景字，仅 <code>type = ipt, opt</code> 时有效</td><td>String</td><td><code>undefined</code></td></tr><tr><td></td><td><code>items -> icon</code></td><td>图标，仅 <code>type = ipt, btn</code> 时有效</td><td>String</td><td><code>Search</code></td></tr><tr><td></td><td><code>items -> fn</code></td><td>回调事件名，回传当前控件的值作为1号参数</td><td>Function</td><td><code>undefined</code></td></tr><tr><td></td><td><code>items -> rdoItems</code></td><td>单选按钮项，仅 <code>type = rdo</code> 时有效</td><td>Array</td><td><code>undefined</code></td></tr><tr><td></td><td><code>items -> rdoItems -> label</code></td><td>单选按钮项 - 值，仅 <code>type = rdo</code> 时有效</td><td>Object</td><td><code>undefined</code></td></tr><tr><td></td><td><code>items -> rdoItems -> text</code></td><td>单选按钮项 - 文案，仅 <code>type = rdo</code> 时有效</td><td>String</td><td><code>undefined</code></td></tr><tr><td></td><td><code>items -> filterable</code></td><td>开启过滤，仅 <code>type = opt</code> 时有效</td><td>Boolean</td><td><code>true</code></td></tr><tr><td></td><td><code>items -> optItems</code></td><td>下拉菜单项，仅 <code>type = opt</code> 时有效</td><td>Array</td><td><code>undefined</code></td></tr><tr><td></td><td><code>items -> optItems -> label</code></td><td>下拉菜单项 - 文案，仅 <code>type = opt</code> 时有效</td><td>String</td><td><code>undefined</code></td></tr><tr><td></td><td><code>items -> optItems -> value</code></td><td>下拉菜单项 - 值，仅 <code>type = opt</code> 时有效</td><td>Object</td><td><code>undefined</code></td></tr><tr><td></td><td><code>items -> btnTitle</code></td><td>鼠标经过文案，仅 <code>type = btn</code> 时有效</td><td>String</td><td><code>undefined</code></td></tr><tr><td></td><td><code>items -> btnType</code></td><td>按钮类型，仅 <code>type = btn</code> 时有效</td><td>String</td><td><code>undefined</code></td></tr><tr><td></td><td><code>items -> btnIcon</code></td><td>按钮图标，仅 <code>type = btn</code> 时有效</td><td>String</td><td><code>undefined</code></td></tr></tbody></table><blockquote><p>武技: 开发页头栅格通用组件 <code>@/components/MyHead.vue</code></p></blockquote><ol><li>开发MyHead组件布局:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>&lt;<span style=color:#f92672>el-row</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;my-head&#34;</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>el-col</span> <span style=color:#a6e22e>v-for</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;item in items&#34;</span> <span style=color:#a6e22e>:key</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;item&#34;</span>
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>:span</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;item[&#39;span&#39;] || 1&#34;</span>
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>:offset</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;item[&#39;offset&#39;] || 0&#34;</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!--ipt文本框--&gt;</span>
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>el-input</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;ipt&#34;</span> <span style=color:#a6e22e>v-if</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;item[&#39;type&#39;] === INPUT_TYPE&#34;</span> <span style=color:#a6e22e>size</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;small&#34;</span> <span style=color:#a6e22e>clearable</span>
</span></span><span style=display:flex><span>              <span style=color:#a6e22e>v-model</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;iptValues[JSON.stringify(item)]&#34;</span>
</span></span><span style=display:flex><span>              <span style=color:#a6e22e>:placeholder</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;item[&#39;placeholder&#39;]&#34;</span>
</span></span><span style=display:flex><span>              <span style=color:#960050;background-color:#1e0010>@</span><span style=color:#a6e22e>clear</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;item[&#39;fn&#39;](iptValues[JSON.stringify(item)])&#34;</span>&gt;
</span></span><span style=display:flex><span>      &lt;<span style=color:#f92672>template</span> <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#a6e22e>append</span>&gt;
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>el-button</span> <span style=color:#a6e22e>:icon</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;item[&#39;icon&#39;] || &#39;Search&#39;&#34;</span> <span style=color:#a6e22e>size</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;small&#34;</span>
</span></span><span style=display:flex><span>                   <span style=color:#960050;background-color:#1e0010>@</span><span style=color:#a6e22e>click</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;item[&#39;fn&#39;](iptValues[JSON.stringify(item)])&#34;</span>/&gt;
</span></span><span style=display:flex><span>      &lt;/<span style=color:#f92672>template</span>&gt;
</span></span><span style=display:flex><span>    &lt;/<span style=color:#f92672>el-input</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!--opt下拉菜单--&gt;</span>
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>el-select</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;opt&#34;</span> <span style=color:#a6e22e>v-else-if</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;item[&#39;type&#39;] === SELECT_TYPE&#34;</span> <span style=color:#a6e22e>size</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;small&#34;</span> <span style=color:#a6e22e>clearable</span>
</span></span><span style=display:flex><span>               <span style=color:#a6e22e>v-model</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;optValues[JSON.stringify(item)]&#34;</span>
</span></span><span style=display:flex><span>               <span style=color:#a6e22e>:filterable</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;item[&#39;filterable&#39;] || true&#34;</span>
</span></span><span style=display:flex><span>               <span style=color:#a6e22e>:placeholder</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;item[&#39;placeholder&#39;]&#34;</span>
</span></span><span style=display:flex><span>               <span style=color:#960050;background-color:#1e0010>@</span><span style=color:#a6e22e>change</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;item[&#39;fn&#39;](optValues[JSON.stringify(item)])&#34;</span>&gt;
</span></span><span style=display:flex><span>      &lt;<span style=color:#f92672>el-option</span> <span style=color:#a6e22e>v-for</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;optItem in item[&#39;optItems&#39;]&#34;</span> <span style=color:#a6e22e>:key</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;optItem&#34;</span>
</span></span><span style=display:flex><span>                 <span style=color:#a6e22e>:label</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;optItem[&#39;label&#39;]&#34;</span>
</span></span><span style=display:flex><span>                 <span style=color:#a6e22e>:value</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;optItem[&#39;value&#39;]&#34;</span>/&gt;
</span></span><span style=display:flex><span>    &lt;/<span style=color:#f92672>el-select</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!--rdo单选按钮--&gt;</span>
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>el-radio-group</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;rdo&#34;</span> <span style=color:#a6e22e>v-else-if</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;item[&#39;type&#39;] === RADIO_TYPE&#34;</span> <span style=color:#a6e22e>size</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;small&#34;</span>
</span></span><span style=display:flex><span>                    <span style=color:#a6e22e>v-model</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;rdoValues[JSON.stringify(item)]&#34;</span>
</span></span><span style=display:flex><span>                    <span style=color:#960050;background-color:#1e0010>@</span><span style=color:#a6e22e>change</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;item[&#39;fn&#39;](rdoValues[JSON.stringify(item)])&#34;</span>&gt;
</span></span><span style=display:flex><span>      &lt;<span style=color:#f92672>el-radio-button</span> <span style=color:#a6e22e>v-for</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;rdoItem in item[&#39;rdoItems&#39;]&#34;</span> <span style=color:#a6e22e>:key</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;rdoItem&#34;</span>
</span></span><span style=display:flex><span>                       <span style=color:#a6e22e>:label</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;rdoItem[&#39;label&#39;]&#34;</span>&gt;
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>span</span>&gt;{{ rdoItem[&#39;text&#39;] }}&lt;/<span style=color:#f92672>span</span>&gt;
</span></span><span style=display:flex><span>      &lt;/<span style=color:#f92672>el-radio-button</span>&gt;
</span></span><span style=display:flex><span>    &lt;/<span style=color:#f92672>el-radio-group</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!--insertBtn单增记录按钮--&gt;</span>
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>el-button</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;btn&#34;</span> <span style=color:#a6e22e>v-else-if</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;item[&#39;type&#39;] === INSERT_BTN_TYPE&#34;</span> <span style=color:#a6e22e>plain</span> <span style=color:#a6e22e>size</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;small&#34;</span>
</span></span><span style=display:flex><span>               <span style=color:#a6e22e>title</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;单增一条记录&#34;</span> <span style=color:#a6e22e>icon</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;CirclePlusFilled&#34;</span> <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;primary&#34;</span> <span style=color:#960050;background-color:#1e0010>@</span><span style=color:#a6e22e>click</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;item[&#39;fn&#39;]&#34;</span>/&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!--deleteBtn批量删除按钮--&gt;</span>
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>el-button</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;btn&#34;</span> <span style=color:#a6e22e>v-else-if</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;item[&#39;type&#39;] === DELETE_BTN_TYPE&#34;</span> <span style=color:#a6e22e>plain</span> <span style=color:#a6e22e>size</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;small&#34;</span>
</span></span><span style=display:flex><span>               <span style=color:#a6e22e>title</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;批量删除记录&#34;</span> <span style=color:#a6e22e>icon</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;DeleteFilled&#34;</span> <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;danger&#34;</span> <span style=color:#960050;background-color:#1e0010>@</span><span style=color:#a6e22e>click</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;item[&#39;fn&#39;]&#34;</span>/&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!--excelBtn打印报表按钮--&gt;</span>
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>el-button</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;btn&#34;</span> <span style=color:#a6e22e>v-else-if</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;item[&#39;type&#39;] === EXCEL_BTN_TYPE&#34;</span> <span style=color:#a6e22e>plain</span> <span style=color:#a6e22e>size</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;small&#34;</span>
</span></span><span style=display:flex><span>               <span style=color:#a6e22e>title</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;打印数据报表&#34;</span> <span style=color:#a6e22e>icon</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;Grid&#34;</span> <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;warning&#34;</span> <span style=color:#960050;background-color:#1e0010>@</span><span style=color:#a6e22e>click</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;item[&#39;fn&#39;]&#34;</span>/&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!--普通按钮--&gt;</span>
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>el-button</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;btn&#34;</span> <span style=color:#a6e22e>v-else</span> <span style=color:#a6e22e>plain</span> <span style=color:#a6e22e>size</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;small&#34;</span>
</span></span><span style=display:flex><span>               <span style=color:#a6e22e>:title</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;item[&#39;btnTitle&#39;]&#34;</span>
</span></span><span style=display:flex><span>               <span style=color:#a6e22e>:icon</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;item[&#39;btnIcon&#39;]&#34;</span>
</span></span><span style=display:flex><span>               <span style=color:#a6e22e>:type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;item[&#39;btnType&#39;]&#34;</span>
</span></span><span style=display:flex><span>               <span style=color:#960050;background-color:#1e0010>@</span><span style=color:#a6e22e>click</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;item[&#39;fn&#39;]&#34;</span>/&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  &lt;/<span style=color:#f92672>el-col</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>el-row</span>&gt;
</span></span></code></pre></div><ol start=2><li>开发MyHead组件样式:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-css data-lang=css><span style=display:flex><span>:<span style=color:#a6e22e>deep</span><span style=color:#f92672>(</span>.<span style=color:#a6e22e>el-input__inner</span><span style=color:#f92672>)</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>padding-left</span>: <span style=color:#ae81ff>5</span><span style=color:#66d9ef>px</span>; <span style=color:#960050;background-color:#1e0010>//</span> <span style=color:#960050;background-color:#1e0010>左内边距</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>box-sizing</span>: <span style=color:#66d9ef>border-box</span>; <span style=color:#960050;background-color:#1e0010>//</span> <span style=color:#960050;background-color:#1e0010>忽略内边距影响</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>:<span style=color:#a6e22e>deep</span><span style=color:#f92672>(</span>.<span style=color:#a6e22e>el-select__selection</span><span style=color:#f92672>)</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>padding-left</span>: <span style=color:#ae81ff>5</span><span style=color:#66d9ef>px</span>; <span style=color:#960050;background-color:#1e0010>//</span> <span style=color:#960050;background-color:#1e0010>左内边距</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>box-sizing</span>: <span style=color:#66d9ef>border-box</span>; <span style=color:#960050;background-color:#1e0010>//</span> <span style=color:#960050;background-color:#1e0010>忽略内边距影响</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>.<span style=color:#a6e22e>my-head</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>display</span>: <span style=color:#66d9ef>flex</span>; <span style=color:#960050;background-color:#1e0010>//</span> <span style=color:#960050;background-color:#1e0010>flex布局</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>align-items</span>: <span style=color:#66d9ef>center</span>; <span style=color:#960050;background-color:#1e0010>//</span> <span style=color:#960050;background-color:#1e0010>垂直居中</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>margin</span>: <span style=color:#ae81ff>30</span><span style=color:#66d9ef>px</span> <span style=color:#66d9ef>auto</span> <span style=color:#ae81ff>10</span><span style=color:#66d9ef>px</span>; <span style=color:#960050;background-color:#1e0010>//</span> <span style=color:#960050;background-color:#1e0010>外边距</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#960050;background-color:#1e0010>.ipt</span> <span style=color:#960050;background-color:#1e0010>{</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>width</span>: <span style=color:#ae81ff>95</span><span style=color:#66d9ef>%</span>; <span style=color:#960050;background-color:#1e0010>//</span> <span style=color:#960050;background-color:#1e0010>宽度</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  .<span style=color:#a6e22e>rdo</span><span style=color:#f92672>,</span> .<span style=color:#a6e22e>btn</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>float</span>: <span style=color:#66d9ef>right</span>; <span style=color:#960050;background-color:#1e0010>//</span> <span style=color:#960050;background-color:#1e0010>右浮动</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>}</span>
</span></span></code></pre></div><ol start=3><li>开发MyHead组件脚本:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>ref</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;vue&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 数据类型常量
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>INPUT_TYPE</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;ipt&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>RADIO_TYPE</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;rdo&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>SELECT_TYPE</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;opt&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>INSERT_BTN_TYPE</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;insertBtn&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>DELETE_BTN_TYPE</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;deleteBtn&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>EXCEL_BTN_TYPE</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;excelBtn&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 接收父组件传递的数据
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>parent</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>defineProps</span>({
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#39;items&#39;</span><span style=color:#f92672>:</span> {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> Array, <span style=color:#a6e22e>required</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span>}
</span></span><span style=display:flex><span>});
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 存放父组件传递的全部文本框的值 + 全部单选按钮的值 + 全部下拉菜单的值
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>iptValues</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>ref</span>({});
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>rdoValues</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>ref</span>({});
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>optValues</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>ref</span>({});
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 填充 iptValues, rdoValues 和 selectValues 的值
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>item</span> <span style=color:#66d9ef>of</span> <span style=color:#a6e22e>parent</span>[<span style=color:#e6db74>&#39;items&#39;</span>]) {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// 使用当前 Item 的字符串形式作为 key 值，以保证唯一性
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>key</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>JSON</span>.<span style=color:#a6e22e>stringify</span>(<span style=color:#a6e22e>item</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// 将全部单行文本的值存入 iptValues 对象
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>item</span>[<span style=color:#e6db74>&#39;iptValue&#39;</span>] <span style=color:#f92672>!=</span> <span style=color:#66d9ef>null</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>iptValues</span>.<span style=color:#a6e22e>value</span>[<span style=color:#a6e22e>key</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>item</span>[<span style=color:#e6db74>&#39;iptValue&#39;</span>];
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// 将全部单选按钮的值存入 rdoValues 对象
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>item</span>[<span style=color:#e6db74>&#39;rdoValue&#39;</span>] <span style=color:#f92672>!=</span> <span style=color:#66d9ef>null</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>rdoValues</span>.<span style=color:#a6e22e>value</span>[<span style=color:#a6e22e>key</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>item</span>[<span style=color:#e6db74>&#39;rdoValue&#39;</span>];
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// 将全部下拉菜单的值存入 optValues 对象
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>item</span>[<span style=color:#e6db74>&#39;optValues&#39;</span>] <span style=color:#f92672>!=</span> <span style=color:#66d9ef>null</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>optValues</span>.<span style=color:#a6e22e>value</span>[<span style=color:#a6e22e>key</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>item</span>[<span style=color:#e6db74>&#39;optValues&#39;</span>];
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><ol start=4><li>测试MyHead组件效果:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-vue data-lang=vue><span style=display:flex><span>&lt;<span style=color:#f92672>template</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>style</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;margin: 20px;&#34;</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>my-head</span> <span style=color:#f92672>:items</span><span style=color:#e6db74>=&#34;items&#34;</span>/&gt;
</span></span><span style=display:flex><span>  &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>template</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>script</span> <span style=color:#a6e22e>setup</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>MyHead</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/components/MyHead&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>onMounted</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;vue&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>useDark</span>, <span style=color:#a6e22e>useToggle</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@vueuse/core/index&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 通用头数据
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>items</span> <span style=color:#f92672>=</span> [
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;ipt&#39;</span>, <span style=color:#a6e22e>iptValue</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>0</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>r</span> =&gt; <span style=color:#a6e22e>alert</span>(<span style=color:#a6e22e>r</span>), <span style=color:#a6e22e>placeholder</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;请输入&#39;</span>, <span style=color:#a6e22e>span</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>5</span>},
</span></span><span style=display:flex><span>  {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;opt&#39;</span>, <span style=color:#a6e22e>placeholder</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;请选择&#39;</span>, <span style=color:#a6e22e>selectValue</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>0</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>r</span> =&gt; <span style=color:#a6e22e>alert</span>(<span style=color:#a6e22e>r</span>), <span style=color:#a6e22e>span</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>5</span>, <span style=color:#a6e22e>optItems</span><span style=color:#f92672>:</span> [
</span></span><span style=display:flex><span>      {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;女&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>0</span>},
</span></span><span style=display:flex><span>      {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;男&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>1</span>},
</span></span><span style=display:flex><span>    ]
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>  {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;rdo&#39;</span>, <span style=color:#a6e22e>rdoValue</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>0</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>r</span> =&gt; <span style=color:#a6e22e>alert</span>(<span style=color:#a6e22e>r</span>), <span style=color:#a6e22e>span</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>4</span>, <span style=color:#a6e22e>offset</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>6</span>, <span style=color:#a6e22e>rdoItems</span><span style=color:#f92672>:</span> [
</span></span><span style=display:flex><span>      {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>0</span>, <span style=color:#a6e22e>text</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;0号&#39;</span>},
</span></span><span style=display:flex><span>      {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>1</span>, <span style=color:#a6e22e>text</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;1号&#39;</span>},
</span></span><span style=display:flex><span>    ]
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;insertBtn&#39;</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> () =&gt; <span style=color:#a6e22e>alert</span>(<span style=color:#e6db74>&#39;单增数据&#39;</span>)},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;deleteBtn&#39;</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> () =&gt; <span style=color:#a6e22e>alert</span>(<span style=color:#e6db74>&#39;批量删除&#39;</span>)},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;excelBtn&#39;</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> () =&gt; <span style=color:#a6e22e>alert</span>(<span style=color:#e6db74>&#39;打印报表&#39;</span>)},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;btn&#39;</span>, <span style=color:#a6e22e>btnTitle</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;普通按钮&#39;</span>, <span style=color:#a6e22e>btnIcon</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Apple&#39;</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> () =&gt; <span style=color:#a6e22e>alert</span>(<span style=color:#e6db74>&#39;普通按钮&#39;</span>), <span style=color:#a6e22e>btnType</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;primary&#39;</span>},
</span></span><span style=display:flex><span>];
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== onMounted ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 暗黑模式
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>onMounted</span>(() =&gt; <span style=color:#a6e22e>useToggle</span>(<span style=color:#a6e22e>useDark</span>()));
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>script</span>&gt;
</span></span></code></pre></div><h2 id=e03-数据表格组件>E03. 数据表格组件</h2><blockquote><p>心法: 数据表格通用组件 <code>@/components/MyTable.vue</code></p></blockquote><p><img src=/%E7%AC%AC4%E9%98%B6%E6%AE%B5-LESSON/JB4-5-%E5%90%8E%E5%8F%B0%E5%89%8D%E7%AB%AF/image/MyTable%E9%A1%B5%E9%9D%A2.png alt></p><ul><li>数据表格组件中共封装 <code>tag, star, card, img, icon, text</code> 6种中间列内容类型。</li><li>数据表格组件中共封装 <code>info, update, delete, upload, btn</code> 5种末尾列按钮类型。</li></ul><table><thead><tr><th>必填</th><th>属性</th><th>描述</th><th>类型</th><th>默认值</th></tr></thead><tbody><tr><td>√</td><td><code>records</code></td><td>表格数据</td><td>Array</td><td></td></tr><tr><td>√</td><td><code>columns</code></td><td>表格列数据</td><td>Array</td><td></td></tr><tr><td></td><td><code>columns -> type</code></td><td>表格中间列内容类型或末尾列按钮类型</td><td>String</td><td><code>text</code></td></tr><tr><td></td><td><code>columns -> column</code></td><td>表格列名称，最多支持两级标题支持 <code>column: '标题'</code> 格式支持 <code>column: ['标题1']</code> 格式支持 <code>column: ['标题1', '标题2']</code> 格式</td><td>Array</td><td><code>undefined</code></td></tr><tr><td></td><td><code>columns -> property</code></td><td>对应后台属性名</td><td>String</td><td><code>undefined</code></td></tr><tr><td></td><td><code>columns -> width</code></td><td>表格列宽度</td><td>Number</td><td><code>card: 300</code><code>date: 200</code><code>title: 180</code><code>star: 150</code><code>其它: 110</code></td></tr><tr><td></td><td><code>columns -> sortable</code></td><td>表格是否支持当前页排序</td><td>Boolean</td><td><code>true</code></td></tr><tr><td></td><td><code>columns -> tooltip</code></td><td>表格是否支持内容溢出提示</td><td>Boolean</td><td><code>true</code></td></tr><tr><td></td><td><code>columns -> fn</code></td><td>数据处理函数，仅 <code>type = code</code> 时有效</td><td>Object</td><td><code>undefined</code></td></tr><tr><td></td><td><code>columns -> minio</code></td><td>MINIO地址前缀，仅 <code>type = img</code> 时有效</td><td>String</td><td><code>undefined</code></td></tr><tr><td></td><td><code>columns -> iconSize</code></td><td>图标尺寸，仅 <code>type = icon</code> 时有效</td><td>String</td><td><code>small</code></td></tr><tr><td></td><td><code>columns -> iconType</code></td><td>图标主题，仅 <code>type = icon</code> 时有效</td><td>String</td><td><code>primary</code></td></tr><tr><td>√</td><td><code>buttons</code></td><td>表格最后一列的功能按钮数据</td><td>Array</td><td></td></tr><tr><td></td><td><code>buttons -> fn</code></td><td>点击按钮时触发的回调函数名称</td><td>Function</td><td></td></tr><tr><td></td><td><code>buttons -> btnText</code></td><td>按钮文案，仅 <code>type = upload, btn</code> 时有效</td><td>Array</td><td><code>upload: '上传文件'</code><code>btn: '功能按钮'</code></td></tr><tr><td></td><td><code>buttons -> btnIcon</code></td><td>按钮图标，仅 <code>type = btn</code> 时有效</td><td>String</td><td><code>InfoFilled</code></td></tr><tr><td></td><td><code>buttons -> btnType</code></td><td>按钮主题，仅 <code>type = btn</code> 时有效</td><td>String</td><td><code>success</code></td></tr></tbody></table><blockquote><p>武技: 开发数据表格通用组件 <code>@/components/MyTable.vue</code></p></blockquote><ol><li>开发MyTable组件布局:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>&lt;<span style=color:#f92672>el-table</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;my-table&#34;</span> <span style=color:#a6e22e>tooltip-effect</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;light&#34;</span> <span style=color:#a6e22e>stripe</span>
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>:data</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;records&#34;</span> <span style=color:#960050;background-color:#1e0010>@</span><span style=color:#a6e22e>selection-change</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;selectionChange&#34;</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>el-table-column</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;head-col&#34;</span> <span style=color:#a6e22e>label</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;序号&#34;</span> <span style=color:#a6e22e>align</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;center&#34;</span> <span style=color:#a6e22e>fixed</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;left&#34;</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>el-table-column</span> <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;selection&#34;</span> <span style=color:#a6e22e>width</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;40&#34;</span>/&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>el-table-column</span> <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;index&#34;</span> <span style=color:#a6e22e>width</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;40&#34;</span>/&gt;
</span></span><span style=display:flex><span>  &lt;/<span style=color:#f92672>el-table-column</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>el-table-column</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;body-col&#34;</span> <span style=color:#a6e22e>align</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;center&#34;</span>
</span></span><span style=display:flex><span>                   <span style=color:#a6e22e>v-for</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;(childrenArray, parentLabel) in columnsObj&#34;</span> <span style=color:#a6e22e>:key</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;childrenArray&#34;</span>
</span></span><span style=display:flex><span>                   <span style=color:#a6e22e>:label</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;parentLabel&#34;</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>el-table-column</span> <span style=color:#a6e22e>v-for</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;(item) in childrenArray&#34;</span> <span style=color:#a6e22e>:key</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;item&#34;</span>
</span></span><span style=display:flex><span>                     <span style=color:#a6e22e>:label</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;item[&#39;column&#39;]&#34;</span>
</span></span><span style=display:flex><span>                     <span style=color:#a6e22e>:property</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;item[&#39;property&#39;]&#34;</span>
</span></span><span style=display:flex><span>                     <span style=color:#a6e22e>:width</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;item[&#39;width&#39;] || (
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                           item[&#39;type&#39;] === &#39;card&#39; ? 300 :
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                           item[&#39;type&#39;] === &#39;tag&#39; ? 110 :
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                           item[&#39;type&#39;] === &#39;img&#39; ? 110 : 200
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                     )&#34;</span>
</span></span><span style=display:flex><span>                     <span style=color:#a6e22e>:sortable</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;item[&#39;sortable&#39;] || true&#34;</span>
</span></span><span style=display:flex><span>                     <span style=color:#a6e22e>:show-overflow-tooltip</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;item[&#39;tooltip&#39;] || true&#34;</span>&gt;
</span></span><span style=display:flex><span>      &lt;<span style=color:#f92672>template</span> <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#a6e22e>default</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;scope&#34;</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>el-tag</span> <span style=color:#a6e22e>v-if</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;item[&#39;type&#39;] === TAG_TYPE&#34;</span>
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>:type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;item[&#39;tagType&#39;] || &#39;warning&#39;&#34;</span>&gt;
</span></span><span style=display:flex><span>          &lt;<span style=color:#f92672>span</span>&gt;{{ item[&#39;prefix&#39;] }}&lt;/<span style=color:#f92672>span</span>&gt;
</span></span><span style=display:flex><span>          &lt;<span style=color:#f92672>span</span> <span style=color:#a6e22e>v-if</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;item[&#39;fn&#39;]&#34;</span>&gt;{{ item[&#39;fn&#39;](toMustache(scope.row, item[&#39;property&#39;])) }}&lt;/<span style=color:#f92672>span</span>&gt;
</span></span><span style=display:flex><span>          &lt;<span style=color:#f92672>span</span> <span style=color:#a6e22e>v-else</span>&gt;{{ toMustache(scope.row, item[&#39;property&#39;]) }}&lt;/<span style=color:#f92672>span</span>&gt;
</span></span><span style=display:flex><span>          &lt;<span style=color:#f92672>span</span>&gt;{{ item[&#39;suffix&#39;] }}&lt;/<span style=color:#f92672>span</span>&gt;
</span></span><span style=display:flex><span>        &lt;/<span style=color:#f92672>el-tag</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>el-rate</span> <span style=color:#a6e22e>v-else-if</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;item[&#39;type&#39;] === STAR_TYPE&#34;</span> <span style=color:#a6e22e>disabled</span> <span style=color:#a6e22e>show-score</span>
</span></span><span style=display:flex><span>                 <span style=color:#a6e22e>v-model</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;scope.row[item[&#39;property&#39;]]&#34;</span>
</span></span><span style=display:flex><span>                 <span style=color:#a6e22e>text-color</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;#ff9900&#34;</span> <span style=color:#a6e22e>score-template</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;{value} 分&#34;</span>/&gt;
</span></span><span style=display:flex><span>                 
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>el-card</span> <span style=color:#a6e22e>v-else-if</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;item[&#39;type&#39;] === CARD_TYPE&#34;</span>&gt;
</span></span><span style=display:flex><span>          &lt;<span style=color:#f92672>span</span>&gt;{{ item[&#39;prefix&#39;] }}&lt;/<span style=color:#f92672>span</span>&gt;
</span></span><span style=display:flex><span>          &lt;<span style=color:#f92672>span</span> <span style=color:#a6e22e>v-if</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;item[&#39;fn&#39;]&#34;</span>&gt;{{ item[&#39;fn&#39;](toMustache(scope.row, item[&#39;property&#39;])) }}&lt;/<span style=color:#f92672>span</span>&gt;
</span></span><span style=display:flex><span>          &lt;<span style=color:#f92672>span</span> <span style=color:#a6e22e>v-else</span>&gt;{{ toMustache(scope.row, item[&#39;property&#39;]) }}&lt;/<span style=color:#f92672>span</span>&gt;
</span></span><span style=display:flex><span>          &lt;<span style=color:#f92672>span</span>&gt;{{ item[&#39;suffix&#39;] }}&lt;/<span style=color:#f92672>span</span>&gt;
</span></span><span style=display:flex><span>        &lt;/<span style=color:#f92672>el-card</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>&lt;!--preview-teleported用于解决图片Z轴遮挡问题--&gt;</span>
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>el-image</span> <span style=color:#a6e22e>v-else-if</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;item[&#39;type&#39;] === IMG_TYPE&#34;</span> <span style=color:#a6e22e>fit</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;fill&#34;</span> <span style=color:#a6e22e>preview-teleported</span>
</span></span><span style=display:flex><span>                  <span style=color:#a6e22e>:src</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;item[&#39;minio&#39;](toMustache(scope.row, item[&#39;property&#39;]))&#34;</span>
</span></span><span style=display:flex><span>                  <span style=color:#a6e22e>:preview-src-list</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;[item[&#39;minio&#39;](toMustache(scope.row, item[&#39;property&#39;]))]&#34;</span>/&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	    &lt;<span style=color:#f92672>el-button</span> <span style=color:#a6e22e>v-else-if</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;item[&#39;type&#39;] === ICON_TYPE&#34;</span> <span style=color:#a6e22e>plain</span>
</span></span><span style=display:flex><span>				   <span style=color:#a6e22e>:type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;item[&#39;iconType&#39;] || &#39;primary&#39;&#34;</span>
</span></span><span style=display:flex><span>				   <span style=color:#a6e22e>:size</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;item[&#39;iconSize&#39;] || &#39;small&#39;&#34;</span>
</span></span><span style=display:flex><span>				   <span style=color:#a6e22e>:icon</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;toMustache(scope.row, item[&#39;property&#39;])&#34;</span>&gt;
</span></span><span style=display:flex><span>	    &lt;/<span style=color:#f92672>el-button</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>v-else</span>&gt;
</span></span><span style=display:flex><span>          &lt;<span style=color:#f92672>span</span>&gt;{{ item[&#39;prefix&#39;] }}&lt;/<span style=color:#f92672>span</span>&gt;
</span></span><span style=display:flex><span>          &lt;<span style=color:#f92672>span</span> <span style=color:#a6e22e>v-if</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;item[&#39;fn&#39;]&#34;</span>&gt;{{ item[&#39;fn&#39;](toMustache(scope.row, item[&#39;property&#39;])) }}&lt;/<span style=color:#f92672>span</span>&gt;
</span></span><span style=display:flex><span>          &lt;<span style=color:#f92672>span</span> <span style=color:#a6e22e>v-else</span>&gt;{{ toMustache(scope.row, item[&#39;property&#39;]) }}&lt;/<span style=color:#f92672>span</span>&gt;
</span></span><span style=display:flex><span>          &lt;<span style=color:#f92672>span</span>&gt;{{ item[&#39;suffix&#39;] }}&lt;/<span style=color:#f92672>span</span>&gt;
</span></span><span style=display:flex><span>        &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      &lt;/<span style=color:#f92672>template</span>&gt;
</span></span><span style=display:flex><span>    &lt;/<span style=color:#f92672>el-table-column</span>&gt;
</span></span><span style=display:flex><span>  &lt;/<span style=color:#f92672>el-table-column</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>el-table-column</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;time-col&#34;</span> <span style=color:#a6e22e>label</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;时间信息&#34;</span> <span style=color:#a6e22e>align</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;center&#34;</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>el-table-column</span> <span style=color:#a6e22e>label</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;创建时间&#34;</span> <span style=color:#a6e22e>property</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;created&#34;</span> <span style=color:#a6e22e>:width</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;200&#34;</span> <span style=color:#a6e22e>sortable</span>
</span></span><span style=display:flex><span>                     <span style=color:#a6e22e>:formatter</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;row =&gt; dateStr(row[&#39;created&#39;])&#34;</span>/&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>el-table-column</span> <span style=color:#a6e22e>label</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;修改时间&#34;</span> <span style=color:#a6e22e>property</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;updated&#34;</span> <span style=color:#a6e22e>:width</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;200&#34;</span> <span style=color:#a6e22e>sortable</span>
</span></span><span style=display:flex><span>                     <span style=color:#a6e22e>:formatter</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;row =&gt; dateStr(row[&#39;updated&#39;])&#34;</span>/&gt;
</span></span><span style=display:flex><span>  &lt;/<span style=color:#f92672>el-table-column</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>el-table-column</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;foot-col&#34;</span> <span style=color:#a6e22e>label</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;操作区&#34;</span> <span style=color:#a6e22e>align</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;center&#34;</span> <span style=color:#a6e22e>fixed</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;right&#34;</span>
</span></span><span style=display:flex><span>                   <span style=color:#a6e22e>:width</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;170&#34;</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>template</span> <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#a6e22e>default</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;scope&#34;</span>&gt;
</span></span><span style=display:flex><span>      &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;foot-col-inner&#34;</span>&gt;
</span></span><span style=display:flex><span>		&lt;<span style=color:#f92672>span</span> <span style=color:#a6e22e>v-for</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;(button, i) in buttons&#34;</span> <span style=color:#a6e22e>:key</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;button&#34;</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>		  &lt;<span style=color:#f92672>el-button</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;info-btn&#34;</span> <span style=color:#a6e22e>v-if</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;button[&#39;type&#39;] === INFO_BTN_TYPE&#34;</span> <span style=color:#a6e22e>link</span> <span style=color:#a6e22e>size</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;small&#34;</span>
</span></span><span style=display:flex><span>		             <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;info&#34;</span> <span style=color:#a6e22e>icon</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;InfoFilled&#34;</span>
</span></span><span style=display:flex><span>		             <span style=color:#960050;background-color:#1e0010>@</span><span style=color:#a6e22e>click</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;button[&#39;fn&#39;](scope.row)&#34;</span>&gt;
</span></span><span style=display:flex><span>		    查看详情
</span></span><span style=display:flex><span>		  &lt;/<span style=color:#f92672>el-button</span>&gt;
</span></span><span style=display:flex><span>		
</span></span><span style=display:flex><span>		  &lt;<span style=color:#f92672>el-button</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;update-btn&#34;</span> <span style=color:#a6e22e>v-else-if</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;button[&#39;type&#39;] === UPDATE_BTN_TYPE&#34;</span> <span style=color:#a6e22e>link</span> <span style=color:#a6e22e>size</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;small&#34;</span>
</span></span><span style=display:flex><span>		             <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;warning&#34;</span> <span style=color:#a6e22e>icon</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;Edit&#34;</span>
</span></span><span style=display:flex><span>		             <span style=color:#960050;background-color:#1e0010>@</span><span style=color:#a6e22e>click</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;button[&#39;fn&#39;](scope.row)&#34;</span>&gt;
</span></span><span style=display:flex><span>		    修改记录
</span></span><span style=display:flex><span>		  &lt;/<span style=color:#f92672>el-button</span>&gt;
</span></span><span style=display:flex><span>		
</span></span><span style=display:flex><span>		  &lt;<span style=color:#f92672>el-button</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;delete-btn&#34;</span> <span style=color:#a6e22e>v-else-if</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;button[&#39;type&#39;] === DELETE_BTN_TYPE&#34;</span> <span style=color:#a6e22e>link</span> <span style=color:#a6e22e>size</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;small&#34;</span>
</span></span><span style=display:flex><span>		             <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;danger&#34;</span> <span style=color:#a6e22e>icon</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;Delete&#34;</span>
</span></span><span style=display:flex><span>		             <span style=color:#960050;background-color:#1e0010>@</span><span style=color:#a6e22e>click</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;button[&#39;fn&#39;](scope.row)&#34;</span>&gt;
</span></span><span style=display:flex><span>		    删除记录
</span></span><span style=display:flex><span>		  &lt;/<span style=color:#f92672>el-button</span>&gt;
</span></span><span style=display:flex><span>		
</span></span><span style=display:flex><span>		  &lt;<span style=color:#f92672>el-button</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;upload-btn&#34;</span> <span style=color:#a6e22e>v-else-if</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;button[&#39;type&#39;] === UPLOAD_BTN_TYPE&#34;</span> <span style=color:#a6e22e>link</span> <span style=color:#a6e22e>size</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;small&#34;</span>
</span></span><span style=display:flex><span>		             <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;primary&#34;</span> <span style=color:#a6e22e>icon</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;UploadFilled&#34;</span>
</span></span><span style=display:flex><span>		             <span style=color:#960050;background-color:#1e0010>@</span><span style=color:#a6e22e>click</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;button[&#39;fn&#39;](scope.row)&#34;</span>&gt;
</span></span><span style=display:flex><span>		    {{ button[&#39;btnText&#39;] || &#39;上传文件&#39; }}
</span></span><span style=display:flex><span>		  &lt;/<span style=color:#f92672>el-button</span>&gt;
</span></span><span style=display:flex><span>		
</span></span><span style=display:flex><span>		  &lt;<span style=color:#f92672>el-button</span> <span style=color:#a6e22e>v-else</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;foot-col-btn&#34;</span> <span style=color:#a6e22e>link</span> <span style=color:#a6e22e>size</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;small&#34;</span>
</span></span><span style=display:flex><span>		             <span style=color:#a6e22e>:type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;button[&#39;btnType&#39;] || &#39;success&#39;&#34;</span>
</span></span><span style=display:flex><span>		             <span style=color:#a6e22e>:icon</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;button[&#39;btnIcon&#39;] || &#39;InfoFilled&#39;&#34;</span>
</span></span><span style=display:flex><span>		             <span style=color:#960050;background-color:#1e0010>@</span><span style=color:#a6e22e>click</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;button[&#39;fn&#39;](scope.row)&#34;</span>&gt;
</span></span><span style=display:flex><span>		    {{ button[&#39;btnText&#39;] || &#39;功能按钮&#39; }}
</span></span><span style=display:flex><span>		  &lt;/<span style=color:#f92672>el-button</span>&gt;
</span></span><span style=display:flex><span>		
</span></span><span style=display:flex><span>		  <span style=color:#75715e>&lt;!--逢2换行--&gt;</span>
</span></span><span style=display:flex><span>		  &lt;<span style=color:#f92672>br</span> <span style=color:#a6e22e>v-if</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;i % 2 === 1&#34;</span>/&gt;
</span></span><span style=display:flex><span>		&lt;/<span style=color:#f92672>span</span>&gt;
</span></span><span style=display:flex><span>      &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>    &lt;/<span style=color:#f92672>template</span>&gt;
</span></span><span style=display:flex><span>  &lt;/<span style=color:#f92672>el-table-column</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>&lt;!--用于调控表格宽度--&gt;</span>
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>el-table-column</span>/&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>el-table</span>&gt;
</span></span></code></pre></div><ol start=2><li>开发MyTable组件样式:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-css data-lang=css><span style=display:flex><span>.<span style=color:#a6e22e>my-table</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>height</span>: <span style=color:#ae81ff>500</span><span style=color:#66d9ef>px</span>; <span style=color:#960050;background-color:#1e0010>//</span> <span style=color:#960050;background-color:#1e0010>高度</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#960050;background-color:#1e0010>.el-image</span> <span style=color:#960050;background-color:#1e0010>{</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>width</span>: <span style=color:#ae81ff>84</span><span style=color:#66d9ef>px</span>; <span style=color:#960050;background-color:#1e0010>//</span> <span style=color:#960050;background-color:#1e0010>宽度</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>height</span>: <span style=color:#ae81ff>50</span><span style=color:#66d9ef>px</span>; <span style=color:#960050;background-color:#1e0010>//</span> <span style=color:#960050;background-color:#1e0010>高度</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>.<span style=color:#a6e22e>foot-col-btn</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>margin</span>: <span style=color:#ae81ff>0</span> <span style=color:#ae81ff>1</span><span style=color:#66d9ef>px</span>; <span style=color:#960050;background-color:#1e0010>//</span> <span style=color:#960050;background-color:#1e0010>外边距</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>.<span style=color:#a6e22e>foot-col-inner</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>text-align</span>: <span style=color:#66d9ef>left</span>; <span style=color:#960050;background-color:#1e0010>//</span> <span style=color:#960050;background-color:#1e0010>居左</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><ol start=3><li>开发MyTable组件脚本:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>dateStr</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;@/util&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 数据类型常量
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>TAG_TYPE</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;tag&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>STAR_TYPE</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;star&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>CARD_TYPE</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;card&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>IMG_TYPE</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;img&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>ICON_TYPE</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;icon&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>INFO_BTN_TYPE</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;info&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>UPDATE_BTN_TYPE</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;update&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>DELETE_BTN_TYPE</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;delete&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>UPLOAD_BTN_TYPE</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;upload&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 接收父组件传递的数据
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>parent</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>defineProps</span>({
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#39;records&#39;</span><span style=color:#f92672>:</span> {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> Array, <span style=color:#a6e22e>required</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span>},
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#39;columns&#39;</span><span style=color:#f92672>:</span> {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> Array, <span style=color:#a6e22e>required</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span>},
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#39;buttons&#39;</span><span style=color:#f92672>:</span> {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> Array, <span style=color:#a6e22e>required</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span>},
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#39;selectionChange&#39;</span><span style=color:#f92672>:</span> {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> Function, <span style=color:#a6e22e>required</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>false</span>},
</span></span><span style=display:flex><span>});
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 处理表格多级标题 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 表格列数据对象
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>columnsObj</span> <span style=color:#f92672>=</span> {};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/*
</span></span></span><span style=display:flex><span><span style=color:#75715e>* 原格式:
</span></span></span><span style=display:flex><span><span style=color:#75715e>*
</span></span></span><span style=display:flex><span><span style=color:#75715e>* [
</span></span></span><span style=display:flex><span><span style=color:#75715e>*   {column: [&#39;a&#39;, &#39;b&#39;], property: &#39;id01&#39;},
</span></span></span><span style=display:flex><span><span style=color:#75715e>*   {column: [&#39;a&#39;, &#39;c&#39;], property: &#39;id02&#39;},
</span></span></span><span style=display:flex><span><span style=color:#75715e>*   {column: [&#39;b&#39;, &#39;c&#39;], property: &#39;id03&#39;},
</span></span></span><span style=display:flex><span><span style=color:#75715e>* ]
</span></span></span><span style=display:flex><span><span style=color:#75715e>*
</span></span></span><span style=display:flex><span><span style=color:#75715e>* 新格式:
</span></span></span><span style=display:flex><span><span style=color:#75715e>*
</span></span></span><span style=display:flex><span><span style=color:#75715e>* {
</span></span></span><span style=display:flex><span><span style=color:#75715e>*   &#39;a&#39;: [{column: &#39;b&#39;, property: &#39;id01&#39;}, {column: &#39;c&#39;, property: &#39;id02&#39;}],
</span></span></span><span style=display:flex><span><span style=color:#75715e>*   &#39;b&#39;: [{column: &#39;c&#39;, property: &#39;id03&#39;}],
</span></span></span><span style=display:flex><span><span style=color:#75715e>* }
</span></span></span><span style=display:flex><span><span style=color:#75715e>*
</span></span></span><span style=display:flex><span><span style=color:#75715e>* */</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>column</span> <span style=color:#66d9ef>of</span> <span style=color:#a6e22e>parent</span>[<span style=color:#e6db74>&#39;columns&#39;</span>]) {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// &#39;主键&#39; -&gt; [&#39;主键&#39;]
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>if</span> (<span style=color:#66d9ef>typeof</span> <span style=color:#a6e22e>column</span>[<span style=color:#e6db74>&#39;column&#39;</span>] <span style=color:#f92672>===</span> <span style=color:#e6db74>&#39;string&#39;</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>column</span>[<span style=color:#e6db74>&#39;column&#39;</span>] <span style=color:#f92672>=</span> [<span style=color:#a6e22e>column</span>[<span style=color:#e6db74>&#39;column&#39;</span>]]
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// [&#39;主键&#39;] -&gt; [&#39;&#39;, &#39;主键&#39;]
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>column</span>[<span style=color:#e6db74>&#39;column&#39;</span>].<span style=color:#a6e22e>length</span> <span style=color:#f92672>===</span> <span style=color:#ae81ff>1</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>column</span>[<span style=color:#e6db74>&#39;column&#39;</span>] <span style=color:#f92672>=</span> [<span style=color:#e6db74>&#39;&#39;</span>, <span style=color:#a6e22e>column</span>[<span style=color:#e6db74>&#39;column&#39;</span>]];
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// 获取一级标题
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>parentName</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>column</span>[<span style=color:#e6db74>&#39;column&#39;</span>][<span style=color:#ae81ff>0</span>];
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>column</span>[<span style=color:#e6db74>&#39;column&#39;</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>column</span>[<span style=color:#e6db74>&#39;column&#39;</span>][<span style=color:#ae81ff>1</span>];
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// 若 columnsObj 中已经存在该一级标题对应的数组，则取出该数组，并加入该一级标题
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>columnsObj</span>.<span style=color:#a6e22e>hasOwnProperty</span>(<span style=color:#a6e22e>parentName</span>)) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>columnsObj</span>[<span style=color:#a6e22e>parentName</span>].<span style=color:#a6e22e>push</span>(<span style=color:#a6e22e>column</span>);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  <span style=color:#75715e>// 若 columnsObj 中不经存在该一级标题对应的数组，则创建新数组，再加入该一级标题
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>columnsObj</span>[<span style=color:#a6e22e>parentName</span>] <span style=color:#f92672>=</span> [<span style=color:#a6e22e>column</span>];
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 处理表格数据显示 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 将 row[&#39;member.username&#39;] 转为 row[&#39;member&#39;][&#39;username&#39;]
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>toMustache</span>(<span style=color:#a6e22e>row</span>, <span style=color:#a6e22e>property</span>) {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// &#39;member.username&#39; -&gt; [&#39;member&#39;, &#39;username&#39;]
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>propertiesArray</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>property</span>.<span style=color:#a6e22e>split</span>(<span style=color:#e6db74>&#39;.&#39;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>, <span style=color:#a6e22e>j</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>propertiesArray</span>.<span style=color:#a6e22e>length</span>; <span style=color:#a6e22e>i</span> <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>j</span>; <span style=color:#a6e22e>i</span><span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// i=0: row = row[&#39;member&#39;]
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#75715e>// i=1: row = row[&#39;member&#39;][&#39;username&#39;]
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>row</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>row</span>[<span style=color:#a6e22e>propertiesArray</span>[<span style=color:#a6e22e>i</span>]];
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>row</span>;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><ol start=4><li>测试MyTable组件效果:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-vue data-lang=vue><span style=display:flex><span>&lt;<span style=color:#f92672>template</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>style</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;margin: 20px;&#34;</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>my-table</span> <span style=color:#f92672>:records</span><span style=color:#e6db74>=&#34;records&#34;</span> <span style=color:#f92672>:columns</span><span style=color:#e6db74>=&#34;columns&#34;</span> <span style=color:#f92672>:buttons</span><span style=color:#e6db74>=&#34;buttons&#34;</span>/&gt;
</span></span><span style=display:flex><span>  &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>template</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>script</span> <span style=color:#a6e22e>setup</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>MyTable</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/components/MyTable&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>onMounted</span>, <span style=color:#a6e22e>shallowRef</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;vue&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>useDark</span>, <span style=color:#a6e22e>useToggle</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@vueuse/core/index&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>genderStr</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/util&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>records</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>([
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>id</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>1</span>, <span style=color:#a6e22e>name</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;赵四&#39;</span>, <span style=color:#a6e22e>gender</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>0</span>, <span style=color:#a6e22e>created</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>new</span> Date(), <span style=color:#a6e22e>updated</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>new</span> Date(<span style=color:#ae81ff>99999999</span>)},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>id</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>2</span>, <span style=color:#a6e22e>name</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;刘能&#39;</span>, <span style=color:#a6e22e>gender</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>1</span>, <span style=color:#a6e22e>created</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>new</span> Date(), <span style=color:#a6e22e>updated</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>new</span> Date(<span style=color:#ae81ff>99999999</span>)},
</span></span><span style=display:flex><span>])
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 表格中间列数据
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>columns</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>([
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>column</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;主键1&#39;</span>, <span style=color:#a6e22e>property</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;id&#39;</span>, <span style=color:#a6e22e>width</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>110</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>column</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#39;主键2&#39;</span>], <span style=color:#a6e22e>property</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;id&#39;</span>, <span style=color:#a6e22e>width</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>110</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>column</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#39;基础信息&#39;</span>, <span style=color:#e6db74>&#39;姓名&#39;</span>], <span style=color:#a6e22e>property</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;name&#39;</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>column</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#39;基础信息&#39;</span>, <span style=color:#e6db74>&#39;性别&#39;</span>], <span style=color:#a6e22e>property</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;gender&#39;</span>, <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;tag&#39;</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>genderStr</span>},
</span></span><span style=display:flex><span>]);
</span></span><span style=display:flex><span><span style=color:#75715e>// 表格末尾列数据
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>buttons</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>([
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;info&#39;</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> () =&gt; <span style=color:#a6e22e>alert</span>(<span style=color:#e6db74>&#39;查看详情&#39;</span>)},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;update&#39;</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> () =&gt; <span style=color:#a6e22e>alert</span>(<span style=color:#e6db74>&#39;修改记录&#39;</span>)},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;delete&#39;</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> () =&gt; <span style=color:#a6e22e>alert</span>(<span style=color:#e6db74>&#39;删除记录&#39;</span>)},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;upload&#39;</span>, <span style=color:#a6e22e>btnText</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;上传图片&#39;</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> () =&gt; <span style=color:#a6e22e>alert</span>(<span style=color:#e6db74>&#39;上传图片&#39;</span>)},
</span></span><span style=display:flex><span>]);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== onMounted ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 暗黑模式
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>onMounted</span>(() =&gt; <span style=color:#a6e22e>useToggle</span>(<span style=color:#a6e22e>useDark</span>()));
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>script</span>&gt;
</span></span></code></pre></div><h2 id=e04-分页按钮组件>E04. 分页按钮组件</h2><blockquote><p>心法: 分页按钮通用组件 <code>@/components/MyPager.vue</code></p></blockquote><p><img src=/%E7%AC%AC4%E9%98%B6%E6%AE%B5-LESSON/JB4-5-%E5%90%8E%E5%8F%B0%E5%89%8D%E7%AB%AF/image/MyPager%E9%A1%B5%E9%9D%A2.png alt></p><table><thead><tr><th>必填</th><th>属性</th><th>描述</th><th>类型</th><th>默认值</th></tr></thead><tbody><tr><td>√</td><td><code>pageInfo</code></td><td>分页数据</td><td>Object</td><td></td></tr><tr><td></td><td><code>pageInfo -> pageNumber</code></td><td>当前第几页</td><td>Number</td><td><code>1</code></td></tr><tr><td></td><td><code>pageInfo -> pageSize</code></td><td>每页多少条</td><td>Number</td><td><code>5</code></td></tr><tr><td></td><td><code>pageInfo -> pageTotal</code></td><td>总共多少条</td><td>Number</td><td><code>undefined</code></td></tr><tr><td></td><td><code>pageInfo -> fn</code></td><td>分页后的回调函数</td><td>Function</td><td><code>undefined</code></td></tr><tr><td></td><td><code>background</code></td><td>是否显示按钮背景</td><td>Boolean</td><td><code>true</code></td></tr><tr><td></td><td><code>layout</code></td><td>分页功能列表</td><td>String</td><td><code>'total, sizes, prev, pager, next, jumper'</code></td></tr><tr><td></td><td><code>pageSizes</code></td><td>每页多少条可选数量</td><td>Array</td><td><code>[1, 5, 10, 18]</code></td></tr></tbody></table><blockquote><p>武技: 开发分页按钮通用组件 <code>@/components/MyPager.vue</code></p></blockquote><ol><li>开发MyPager组件布局:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>&lt;<span style=color:#f92672>el-pagination</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;my-pager&#34;</span>
</span></span><span style=display:flex><span>               <span style=color:#a6e22e>:background</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;background&#34;</span>
</span></span><span style=display:flex><span>               <span style=color:#a6e22e>:layout</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;layout&#34;</span>
</span></span><span style=display:flex><span>               <span style=color:#a6e22e>:page-sizes</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;pageSizes&#34;</span>
</span></span><span style=display:flex><span>               <span style=color:#a6e22e>:current-page</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;pageInfo[&#39;pageNumber&#39;] || 1&#34;</span>
</span></span><span style=display:flex><span>               <span style=color:#a6e22e>:page-size</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;pageInfo[&#39;pageSize&#39;] || 5&#34;</span>
</span></span><span style=display:flex><span>               <span style=color:#a6e22e>:total</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;pageInfo[&#39;totalRow&#39;]&#34;</span>
</span></span><span style=display:flex><span>               <span style=color:#960050;background-color:#1e0010>@</span><span style=color:#a6e22e>size-change</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;pageSize =&gt; pageInfo[&#39;fn&#39;](pageInfo[&#39;pageNumber&#39;], pageSize)&#34;</span>
</span></span><span style=display:flex><span>               <span style=color:#960050;background-color:#1e0010>@</span><span style=color:#a6e22e>current-change</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;pageNumber =&gt; pageInfo[&#39;fn&#39;](pageNumber, pageInfo[&#39;pageSize&#39;])&#34;</span>/&gt;
</span></span></code></pre></div><ol start=2><li>开发MyPager组件样式:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-css data-lang=css><span style=display:flex><span>.<span style=color:#a6e22e>my-pager</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>margin</span>: <span style=color:#ae81ff>20</span><span style=color:#66d9ef>px</span>; <span style=color:#960050;background-color:#1e0010>//</span> <span style=color:#960050;background-color:#1e0010>外边距</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>justify-content</span>: <span style=color:#66d9ef>center</span>; <span style=color:#960050;background-color:#1e0010>//</span> <span style=color:#960050;background-color:#1e0010>自居中</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><ol start=3><li>开发MyPager组件脚本:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#75715e>// 接收父组件传递的数据
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>parent</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>defineProps</span>({
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#39;pageInfo&#39;</span><span style=color:#f92672>:</span> {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> Object, <span style=color:#a6e22e>required</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span>},
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#39;background&#39;</span><span style=color:#f92672>:</span> {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> Boolean, <span style=color:#a6e22e>required</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>false</span>, <span style=color:#66d9ef>default</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span>},
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#39;layout&#39;</span><span style=color:#f92672>:</span> {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> String, <span style=color:#a6e22e>required</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>false</span>, <span style=color:#66d9ef>default</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;total, sizes, prev, pager, next, jumper&#39;</span>},
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#39;pageSizes&#39;</span><span style=color:#f92672>:</span> {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> Array, <span style=color:#a6e22e>required</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>false</span>, <span style=color:#66d9ef>default</span><span style=color:#f92672>:</span> [<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>5</span>, <span style=color:#ae81ff>10</span>, <span style=color:#ae81ff>18</span>]},
</span></span><span style=display:flex><span>});
</span></span></code></pre></div><ol start=4><li>测试MyPager组件效果:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-vue data-lang=vue><span style=display:flex><span>&lt;<span style=color:#f92672>template</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>style</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;margin: 20px;&#34;</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>my-pager</span> <span style=color:#f92672>:pageInfo</span><span style=color:#e6db74>=&#34;pageInfo&#34;</span>/&gt;
</span></span><span style=display:flex><span>  &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>template</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>script</span> <span style=color:#a6e22e>setup</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>MyPager</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/components/MyPager&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>onMounted</span>, <span style=color:#a6e22e>shallowReactive</span>, <span style=color:#a6e22e>shallowRef</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;vue&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>useDark</span>, <span style=color:#a6e22e>useToggle</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@vueuse/core/index&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>myPage</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/util&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>pageApi</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/api/banner&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 当前操作的横幅对象 + 当前操作的横幅对象列表
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>currentRecords</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 分页信息
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>pageInfo</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowReactive</span>({<span style=color:#a6e22e>pageNumber</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>1</span>, <span style=color:#a6e22e>pageSize</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>5</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>page</span>});
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 分页查询
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>page</span>(<span style=color:#a6e22e>pageNumber</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>pageInfo</span>[<span style=color:#e6db74>&#39;pageNumber&#39;</span>], <span style=color:#a6e22e>pageSize</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>pageInfo</span>[<span style=color:#e6db74>&#39;pageSize&#39;</span>]) {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// 全量分页
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>await</span> <span style=color:#a6e22e>myPage</span>({
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;api&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>pageApi</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;params&#39;</span><span style=color:#f92672>:</span> {<span style=color:#e6db74>&#39;pageNumber&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>pageNumber</span>, <span style=color:#e6db74>&#39;pageSize&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>pageSize</span>},
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;records&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>currentRecords</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;pageInfo&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>pageInfo</span>,
</span></span><span style=display:flex><span>  });
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== onMounted ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 暗黑模式
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>onMounted</span>(() =&gt; {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>useToggle</span>(<span style=color:#a6e22e>useDark</span>());
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>page</span>();
</span></span><span style=display:flex><span>});
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>script</span>&gt;
</span></span></code></pre></div><h2 id=e05-描述列表组件>E05. 描述列表组件</h2><blockquote><p>心法: 描述列表通用组件 <code>@/components/Mylist.vue</code></p></blockquote><p><img src=/%E7%AC%AC4%E9%98%B6%E6%AE%B5-LESSON/JB4-5-%E5%90%8E%E5%8F%B0%E5%89%8D%E7%AB%AF/image/MyList%E9%A1%B5%E9%9D%A2.png alt></p><ul><li>描述列表组件中共封装 <code>tag, star, card, img, icon, text</code> 6种内容类型。</li></ul><table><thead><tr><th>必填</th><th>属性</th><th>描述</th><th>类型</th><th>默认值</th></tr></thead><tbody><tr><td>√</td><td><code>items</code></td><td>列表数据</td><td>Array</td><td></td></tr><tr><td></td><td><code>items -> type</code></td><td>内容类型</td><td>String</td><td><code>text</code></td></tr><tr><td></td><td><code>items -> label</code></td><td>内容标题</td><td>String</td><td></td></tr><tr><td></td><td><code>items -> value</code></td><td>内容</td><td>Object</td><td></td></tr><tr><td></td><td><code>items -> fn</code></td><td>内容显示前的处理函数</td><td>Function</td><td></td></tr><tr><td></td><td><code>items -> prefix</code></td><td>内容前缀文案</td><td>String</td><td></td></tr><tr><td></td><td><code>items -> suffix</code></td><td>内容后缀文案</td><td>String</td><td></td></tr><tr><td></td><td><code>items -> minio</code></td><td>MINIO图片前缀地址，仅 <code>type = img</code> 时有效</td><td>Object</td><td></td></tr><tr><td></td><td><code>items -> large</code></td><td>MINIO大图，宽度200，默认100</td><td>Boolean</td><td><code>false</code></td></tr><tr><td></td><td><code>items -> tagType</code></td><td>EL标签主题，仅 <code>type = tag</code> 时有效</td><td>String</td><td><code>warning</code></td></tr><tr><td></td><td><code>items -> iconSize</code></td><td>图标尺寸，仅 <code>type = icon</code> 时有效</td><td>String</td><td><code>small</code></td></tr><tr><td></td><td><code>items -> iconType</code></td><td>图标主题，仅 <code>type = icon</code> 时有效</td><td>String</td><td><code>primary</code></td></tr><tr><td></td><td><code>items -> width</code></td><td>内容标题宽度</td><td>Number</td><td><code>30</code></td></tr><tr><td></td><td><code>items -> span</code></td><td>内容占位</td><td>Number</td><td><code>1</code></td></tr><tr><td></td><td><code>title</code></td><td>列表标题</td><td>String</td><td><code>'详情信息'</code></td></tr><tr><td></td><td><code>column</code></td><td>列数</td><td>Number</td><td><code>1</code></td></tr></tbody></table><blockquote><p>武技: 开发描述列表通用组件 <code>@/components/Mylist.vue</code></p></blockquote><ol><li>开发Mylist组件布局:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>&lt;<span style=color:#f92672>el-descriptions</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;my-list&#34;</span> <span style=color:#a6e22e>border</span> <span style=color:#a6e22e>label-align</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;center&#34;</span>
</span></span><span style=display:flex><span>                 <span style=color:#a6e22e>:title</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;title&#34;</span>
</span></span><span style=display:flex><span>                 <span style=color:#a6e22e>:column</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;column&#34;</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>el-descriptions-item</span> <span style=color:#a6e22e>v-for</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;item in items&#34;</span> <span style=color:#a6e22e>:key</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;item&#34;</span> <span style=color:#a6e22e>min-width</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;100&#34;</span>
</span></span><span style=display:flex><span>                        <span style=color:#a6e22e>:width</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;item[&#39;width&#39;]&#34;</span> <span style=color:#960050;background-color:#1e0010>||</span> <span style=color:#a6e22e>30</span>
</span></span><span style=display:flex><span>                        <span style=color:#a6e22e>:label</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;item[&#39;label&#39;]&#34;</span>
</span></span><span style=display:flex><span>                        <span style=color:#a6e22e>:span</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;item[&#39;span&#39;] || 1&#34;</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>template</span> <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#a6e22e>default</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      &lt;<span style=color:#f92672>el-tag</span> <span style=color:#a6e22e>v-if</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;item[&#39;type&#39;] === TAG_TYPE&#34;</span>
</span></span><span style=display:flex><span>              <span style=color:#a6e22e>:type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;item[&#39;tagType&#39;] || &#39;warning&#39;&#34;</span>&gt;
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>span</span>&gt;{{ item[&#39;prefix&#39;] }}&lt;/<span style=color:#f92672>span</span>&gt;
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>span</span> <span style=color:#a6e22e>v-if</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;item[&#39;fn&#39;]&#34;</span>&gt;{{ item[&#39;fn&#39;](item[&#39;value&#39;]) }}&lt;/<span style=color:#f92672>span</span>&gt;
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>span</span> <span style=color:#a6e22e>v-else</span>&gt;{{ item[&#39;value&#39;] }}&lt;/<span style=color:#f92672>span</span>&gt;
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>span</span>&gt;{{ item[&#39;suffix&#39;] }}&lt;/<span style=color:#f92672>span</span>&gt;
</span></span><span style=display:flex><span>      &lt;/<span style=color:#f92672>el-tag</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      &lt;<span style=color:#f92672>el-rate</span> <span style=color:#a6e22e>v-else-if</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;item[&#39;type&#39;] === STAR_TYPE&#34;</span> <span style=color:#a6e22e>disabled</span> <span style=color:#a6e22e>show-score</span> <span style=color:#a6e22e>text-color</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;#ff9900&#34;</span>
</span></span><span style=display:flex><span>               <span style=color:#a6e22e>v-model</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;item[&#39;value&#39;]&#34;</span> <span style=color:#a6e22e>score-template</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;{value} 分&#34;</span>/&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      &lt;<span style=color:#f92672>el-card</span> <span style=color:#a6e22e>v-else-if</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;item[&#39;type&#39;] === CARD_TYPE&#34;</span>&gt;
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>span</span>&gt;{{ item[&#39;prefix&#39;] }}&lt;/<span style=color:#f92672>span</span>&gt;
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>span</span> <span style=color:#a6e22e>v-if</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;item[&#39;fn&#39;]&#34;</span>&gt;{{ item[&#39;fn&#39;](item[&#39;value&#39;]) }}&lt;/<span style=color:#f92672>span</span>&gt;
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>span</span> <span style=color:#a6e22e>v-else</span>&gt;{{ item[&#39;value&#39;] }}&lt;/<span style=color:#f92672>span</span>&gt;
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>span</span>&gt;{{ item[&#39;suffix&#39;] }}&lt;/<span style=color:#f92672>span</span>&gt;
</span></span><span style=display:flex><span>      &lt;/<span style=color:#f92672>el-card</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#75715e>&lt;!--preview-teleported用于解决图片Z轴遮挡问题--&gt;</span>
</span></span><span style=display:flex><span>      &lt;<span style=color:#f92672>el-image</span> <span style=color:#a6e22e>v-else-if</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;item[&#39;type&#39;] === IMG_TYPE&#34;</span> <span style=color:#a6e22e>fit</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;fill&#34;</span> <span style=color:#a6e22e>preview-teleported</span>
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>:src</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;item[&#39;minio&#39;](item[&#39;value&#39;])&#34;</span>
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>:preview-src-list</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;[item[&#39;minio&#39;](item[&#39;value&#39;])]&#34;</span>
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>:class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;{&#39;large&#39;: item[&#39;large&#39;]}&#34;</span>/&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      &lt;<span style=color:#f92672>el-button</span> <span style=color:#a6e22e>v-else-if</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;item[&#39;type&#39;] === ICON_TYPE&#34;</span> <span style=color:#a6e22e>plain</span>
</span></span><span style=display:flex><span>                 <span style=color:#a6e22e>:type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;item[&#39;iconType&#39;] || &#39;primary&#39;&#34;</span>
</span></span><span style=display:flex><span>                 <span style=color:#a6e22e>:size</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;item[&#39;iconSize&#39;] || &#39;small&#39;&#34;</span>
</span></span><span style=display:flex><span>                 <span style=color:#a6e22e>:icon</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;item[&#39;value&#39;]&#34;</span>&gt;
</span></span><span style=display:flex><span>      &lt;/<span style=color:#f92672>el-button</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>v-else</span>&gt;
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>span</span>&gt;{{ item[&#39;prefix&#39;] }}&lt;/<span style=color:#f92672>span</span>&gt;
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>span</span> <span style=color:#a6e22e>v-if</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;item[&#39;fn&#39;]&#34;</span>&gt;{{ item[&#39;fn&#39;](item[&#39;value&#39;]) }}&lt;/<span style=color:#f92672>span</span>&gt;
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>span</span> <span style=color:#a6e22e>v-else</span>&gt;{{ item[&#39;value&#39;] }}&lt;/<span style=color:#f92672>span</span>&gt;
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>span</span>&gt;{{ item[&#39;suffix&#39;] }}&lt;/<span style=color:#f92672>span</span>&gt;
</span></span><span style=display:flex><span>      &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    &lt;/<span style=color:#f92672>template</span>&gt;
</span></span><span style=display:flex><span>  &lt;/<span style=color:#f92672>el-descriptions-item</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>el-descriptions</span>&gt;
</span></span></code></pre></div><ol start=2><li>开发Mylist组件样式:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-css data-lang=css><span style=display:flex><span>.<span style=color:#a6e22e>my-list</span> {
</span></span><span style=display:flex><span>  <span style=color:#960050;background-color:#1e0010>.el-image</span> <span style=color:#960050;background-color:#1e0010>{</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>width</span>: <span style=color:#ae81ff>100</span><span style=color:#66d9ef>px</span>; <span style=color:#960050;background-color:#1e0010>//</span> <span style=color:#960050;background-color:#1e0010>宽度</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>height</span>: <span style=color:#ae81ff>100</span><span style=color:#66d9ef>px</span>; <span style=color:#960050;background-color:#1e0010>//</span> <span style=color:#960050;background-color:#1e0010>高度</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  .<span style=color:#a6e22e>large</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>width</span>: <span style=color:#ae81ff>200</span><span style=color:#66d9ef>px</span>; <span style=color:#960050;background-color:#1e0010>//</span> <span style=color:#960050;background-color:#1e0010>宽度</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>height</span>: <span style=color:#ae81ff>100</span><span style=color:#66d9ef>px</span>; <span style=color:#960050;background-color:#1e0010>//</span> <span style=color:#960050;background-color:#1e0010>高度</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>}</span>
</span></span></code></pre></div><ol start=3><li>开发Mylist组件脚本:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#75715e>// 数据类型常量
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>TAG_TYPE</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;tag&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>STAR_TYPE</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;star&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>CARD_TYPE</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;card&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>IMG_TYPE</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;img&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>ICON_TYPE</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;icon&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 接收父组件传递的数据
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>parent</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>defineProps</span>({
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#39;items&#39;</span><span style=color:#f92672>:</span> {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> Array, <span style=color:#a6e22e>required</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span>},
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#39;title&#39;</span><span style=color:#f92672>:</span> {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> String, <span style=color:#a6e22e>required</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>false</span>, <span style=color:#66d9ef>default</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;详情信息&#39;</span>},
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#39;column&#39;</span><span style=color:#f92672>:</span> {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> Number, <span style=color:#a6e22e>required</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>false</span>, <span style=color:#66d9ef>default</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>1</span>},
</span></span><span style=display:flex><span>});
</span></span></code></pre></div><ol start=4><li>测试Mylist组件效果:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-vue data-lang=vue><span style=display:flex><span>&lt;<span style=color:#f92672>template</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>style</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;margin: 20px; width: 50%&#34;</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>my-list</span> <span style=color:#f92672>:title</span><span style=color:#e6db74>=&#34;descTitle&#34;</span> <span style=color:#f92672>:items</span><span style=color:#e6db74>=&#34;descItems&#34;</span> <span style=color:#f92672>:column</span><span style=color:#e6db74>=&#34;2&#34;</span>/&gt;
</span></span><span style=display:flex><span>  &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>template</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>script</span> <span style=color:#a6e22e>setup</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>dateStr</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/util&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>MyList</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/components/MyList&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>onMounted</span>, <span style=color:#a6e22e>shallowRef</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;vue&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>useDark</span>, <span style=color:#a6e22e>useToggle</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@vueuse/core/index&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>MINIO_BANNER</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/const&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>descTitle</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>(<span style=color:#e6db74>&#39;标题&#39;</span>);
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>descItems</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>([
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;TAG&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>1</span>, <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;tag&#39;</span>, <span style=color:#a6e22e>prefix</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;No.&#39;</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;TAG&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>2</span>, <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;tag&#39;</span>, <span style=color:#a6e22e>prefix</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;No.&#39;</span>, <span style=color:#a6e22e>tagType</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;danger&#39;</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;IMG&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;default-banner.jpg&#39;</span>, <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;img&#39;</span>, <span style=color:#a6e22e>minio</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>MINIO_BANNER</span>.<span style=color:#a6e22e>value</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;IMG&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;default-banner.jpg&#39;</span>, <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;img&#39;</span>, <span style=color:#a6e22e>minio</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>MINIO_BANNER</span>.<span style=color:#a6e22e>value</span>, <span style=color:#a6e22e>large</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;TEXT&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;标题&#39;</span>,},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;TEXT&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;标题&#39;</span>, <span style=color:#a6e22e>prefix</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;《&#39;</span>, <span style=color:#a6e22e>suffix</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;》&#39;</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;CARD&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;描述&#39;</span>, <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;card&#39;</span>, <span style=color:#a6e22e>span</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>2</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;STAR&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>1</span>, <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;star&#39;</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;DATE&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>new</span> Date(), <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>dateStr</span>},
</span></span><span style=display:flex><span>]);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== onMounted ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 暗黑模式
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>onMounted</span>(() =&gt; <span style=color:#a6e22e>useToggle</span>(<span style=color:#a6e22e>useDark</span>()));
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>script</span>&gt;
</span></span></code></pre></div><h2 id=e06-操作表单组件>E06. 操作表单组件</h2><blockquote><p>心法: 操作表单通用组件 <code>@/components/MyForm.vue</code></p></blockquote><p><img src=/%E7%AC%AC4%E9%98%B6%E6%AE%B5-LESSON/JB4-5-%E5%90%8E%E5%8F%B0%E5%89%8D%E7%AB%AF/image/MyForm%E9%A1%B5%E9%9D%A2.png alt></p><ul><li>操作表单组件中共封装 <code>insert, update</code> 2种表单类型。</li><li>操作表单组件中共封装 <code>number, textarea, datetime, select, icon, input</code> 5种表单项类型。</li></ul><table><thead><tr><th>必填</th><th>属性</th><th>描述</th><th>类型</th><th>默认值</th></tr></thead><tbody><tr><td></td><td><code>type</code></td><td>表单类型，可选 <code>insert</code> 或 <code>update</code></td><td>String</td><td><code>insert</code></td></tr><tr><td>√</td><td><code>items</code></td><td>表单项</td><td>Array</td><td></td></tr><tr><td></td><td><code>items -> label</code></td><td>表单项文案</td><td>String</td><td>表单项属性名</td></tr><tr><td></td><td><code>items -> prop</code></td><td>表单项属性名</td><td>String</td><td></td></tr><tr><td></td><td><code>items -> required</code></td><td>表单项是否必填</td><td>Boolean</td><td><code>true</code></td></tr><tr><td></td><td><code>items -> min</code></td><td>表单项最小值，仅 <code>type = number</code> 时有效</td><td>Number</td><td><code>0</code></td></tr><tr><td></td><td><code>items -> max</code></td><td>表单项最大值，仅 <code>type = number</code> 时有效</td><td>Number</td><td></td></tr><tr><td></td><td><code>items -> precision</code></td><td>表单项数字精度，仅 <code>type = number</code> 时有效</td><td>Number</td><td><code>0</code></td></tr><tr><td></td><td><code>items -> placeholder</code></td><td>表单项背景字</td><td>String</td><td><code>'type'</code> + 表单项属性名</td></tr><tr><td></td><td><code>items -> clearable</code></td><td>表单项是否可清空</td><td>Boolean</td><td><code>true</code></td></tr><tr><td></td><td><code>items -> disabled</code></td><td>表单项是否禁用</td><td>Boolean</td><td><code>false</code></td></tr><tr><td></td><td><code>items -> readonly</code></td><td>表单项是否只读</td><td>Boolean</td><td><code>false</code></td></tr><tr><td></td><td><code>items -> rows</code></td><td>表单项行数，仅 <code>type = textarea</code> 时有效</td><td>Number</td><td><code>8</code></td></tr><tr><td></td><td><code>items -> cols</code></td><td>表单项列数，仅 <code>type = textarea</code> 时有效</td><td>Number</td><td></td></tr><tr><td></td><td><code>items -> filterable</code></td><td>表单项是否支持过滤，仅 <code>type = select</code> 时有效</td><td>Boolean</td><td><code>true</code></td></tr><tr><td></td><td><code>items -> iconSize</code></td><td>图标尺寸，仅 <code>type = icon</code> 时有效</td><td>Number</td><td><code>14</code></td></tr><tr><td>√</td><td><code>data</code></td><td>表单数据列表</td><td>Array</td><td></td></tr><tr><td>√</td><td><code>rule</code></td><td>表单规则对象</td><td>Object</td><td></td></tr><tr><td>√</td><td><code>api</code></td><td>表单提交的API接口函数</td><td>Function</td><td></td></tr><tr><td></td><td><code>fn</code></td><td>表单提交后的回调函数</td><td>Function</td><td></td></tr></tbody></table><blockquote><p>武技: 开发操作表单通用组件 <code>@/components/MyForm.vue</code></p></blockquote><ol><li>开发MyForm组件布局:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>&lt;<span style=color:#f92672>el-form</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;my-form&#34;</span> <span style=color:#a6e22e>ref</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;form&#34;</span> <span style=color:#a6e22e>status-icon</span> <span style=color:#a6e22e>:model</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;data&#34;</span> <span style=color:#a6e22e>:rules</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;rule&#34;</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>&lt;!--表单内容项--&gt;</span>
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>el-form-item</span> <span style=color:#a6e22e>v-for</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;item in items&#34;</span> <span style=color:#a6e22e>:key</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;item&#34;</span>
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>:label</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;item[&#39;label&#39;] || item[&#39;prop&#39;]&#34;</span>
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>:prop</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;item[&#39;prop&#39;]&#34;</span>
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>:required</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;item[&#39;required&#39;] || true&#34;</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#75715e>&lt;!--数字框--&gt;</span>
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>el-input-number</span> <span style=color:#a6e22e>v-if</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;item[&#39;type&#39;] === NUMBER_TYPE&#34;</span>
</span></span><span style=display:flex><span>                     <span style=color:#a6e22e>v-model</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;data[item[&#39;prop&#39;]]&#34;</span>
</span></span><span style=display:flex><span>                     <span style=color:#a6e22e>:min</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;item[&#39;min&#39;] || 0&#34;</span>
</span></span><span style=display:flex><span>                     <span style=color:#a6e22e>:max</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;item[&#39;max&#39;]&#34;</span>
</span></span><span style=display:flex><span>                     <span style=color:#a6e22e>:precision</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;item[&#39;precision&#39;] || 0&#34;</span>
</span></span><span style=display:flex><span>                     <span style=color:#a6e22e>:placeholder</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;item[&#39;placeholder&#39;] || (&#39;type &#39; + item[&#39;prop&#39;])&#34;</span>
</span></span><span style=display:flex><span>                     <span style=color:#a6e22e>:clearable</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;item[&#39;clearable&#39;] || true&#34;</span>
</span></span><span style=display:flex><span>                     <span style=color:#a6e22e>:disabled</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;item[&#39;disabled&#39;] || false&#34;</span>
</span></span><span style=display:flex><span>                     <span style=color:#a6e22e>:readonly</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;item[&#39;readonly&#39;] || false&#34;</span>/&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#75715e>&lt;!--文本域--&gt;</span>
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>el-input</span> <span style=color:#a6e22e>v-else-if</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;item[&#39;type&#39;] === TEXTAREA_TYPE&#34;</span> <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;textarea&#34;</span> <span style=color:#a6e22e>resize</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;none&#34;</span>
</span></span><span style=display:flex><span>              <span style=color:#a6e22e>v-model</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;data[item[&#39;prop&#39;]]&#34;</span>
</span></span><span style=display:flex><span>              <span style=color:#a6e22e>:rows</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;item[&#39;rows&#39;] || 8&#34;</span>
</span></span><span style=display:flex><span>              <span style=color:#a6e22e>:cols</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;item[&#39;cols&#39;]&#34;</span>
</span></span><span style=display:flex><span>              <span style=color:#a6e22e>:placeholder</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;item[&#39;placeholder&#39;] || &#39;type &#39; + item[&#39;prop&#39;]&#34;</span>
</span></span><span style=display:flex><span>              <span style=color:#a6e22e>:clearable</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;item[&#39;clearable&#39;] || true&#34;</span>
</span></span><span style=display:flex><span>              <span style=color:#a6e22e>:disabled</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;item[&#39;disabled&#39;] || false&#34;</span>
</span></span><span style=display:flex><span>              <span style=color:#a6e22e>:readonly</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;item[&#39;readonly&#39;] || false&#34;</span>/&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#75715e>&lt;!--下拉框--&gt;</span>
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>el-select</span> <span style=color:#a6e22e>v-else-if</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;item[&#39;type&#39;] === SELECT_TYPE&#34;</span>
</span></span><span style=display:flex><span>               <span style=color:#a6e22e>v-model</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;data[item[&#39;prop&#39;]]&#34;</span>
</span></span><span style=display:flex><span>               <span style=color:#a6e22e>:filterable</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;item[&#39;filterable&#39;] || true&#34;</span>
</span></span><span style=display:flex><span>               <span style=color:#a6e22e>:clearable</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;item[&#39;clearable&#39;] || true&#34;</span>
</span></span><span style=display:flex><span>               <span style=color:#a6e22e>:disabled</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;item[&#39;disabled&#39;] || false&#34;</span>
</span></span><span style=display:flex><span>               <span style=color:#a6e22e>:readonly</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;item[&#39;readonly&#39;] || false&#34;</span>
</span></span><span style=display:flex><span>               <span style=color:#a6e22e>:placeholder</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;item[&#39;placeholder&#39;] || &#39;type &#39; + item[&#39;prop&#39;]&#34;</span>&gt;
</span></span><span style=display:flex><span>      &lt;<span style=color:#f92672>el-option</span> <span style=color:#a6e22e>v-for</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;optionItem in item[&#39;optionItems&#39;]&#34;</span> <span style=color:#a6e22e>:key</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;optionItem[&#39;id&#39;]&#34;</span>
</span></span><span style=display:flex><span>                 <span style=color:#a6e22e>:label</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;optionItem[&#39;label&#39;]&#34;</span>
</span></span><span style=display:flex><span>                 <span style=color:#a6e22e>:value</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;optionItem[&#39;value&#39;]&#34;</span>/&gt;
</span></span><span style=display:flex><span>    &lt;/<span style=color:#f92672>el-select</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#75715e>&lt;!--时间框--&gt;</span>
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>el-date-picker</span> <span style=color:#a6e22e>v-else-if</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;item[&#39;type&#39;] === DATETIME_TYPE&#34;</span> <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;datetime&#34;</span>
</span></span><span style=display:flex><span>                    <span style=color:#a6e22e>v-model</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;data[item[&#39;prop&#39;]]&#34;</span>
</span></span><span style=display:flex><span>                    <span style=color:#a6e22e>:placeholder</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;item[&#39;placeholder&#39;] || &#39;type &#39; + item[&#39;prop&#39;]&#34;</span>
</span></span><span style=display:flex><span>                    <span style=color:#a6e22e>:clearable</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;item[&#39;clearable&#39;] || true&#34;</span>
</span></span><span style=display:flex><span>                    <span style=color:#a6e22e>:disabled</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;item[&#39;disabled&#39;] || false&#34;</span>
</span></span><span style=display:flex><span>                    <span style=color:#a6e22e>:readonly</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;item[&#39;readonly&#39;] || false&#34;</span>/&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!--ICON单选框--&gt;</span>
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>el-radio-group</span> <span style=color:#a6e22e>v-else-if</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;item[&#39;type&#39;] === ICON_TYPE&#34;</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;icon-list&#34;</span> 
</span></span><span style=display:flex><span>                    <span style=color:#a6e22e>v-model</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;data[item[&#39;prop&#39;]]&#34;</span> <span style=color:#a6e22e>size</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;small&#34;</span>&gt;
</span></span><span style=display:flex><span>	  &lt;<span style=color:#f92672>el-radio-button</span> <span style=color:#a6e22e>v-for</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;icon in ICONS&#34;</span> <span style=color:#a6e22e>:key</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;icon&#34;</span> <span style=color:#a6e22e>:label</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;icon&#34;</span>&gt;
</span></span><span style=display:flex><span>	    &lt;<span style=color:#f92672>template</span> <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#a6e22e>default</span>&gt;
</span></span><span style=display:flex><span>		  &lt;<span style=color:#f92672>el-icon</span> <span style=color:#a6e22e>:size</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;item[&#39;iconSize&#39;] || 14&#34;</span>&gt;
</span></span><span style=display:flex><span>		    &lt;<span style=color:#f92672>component</span> <span style=color:#a6e22e>:is</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;icon&#34;</span>/&gt;
</span></span><span style=display:flex><span>		  &lt;/<span style=color:#f92672>el-icon</span>&gt;
</span></span><span style=display:flex><span>	    &lt;/<span style=color:#f92672>template</span>&gt;
</span></span><span style=display:flex><span>	  &lt;/<span style=color:#f92672>el-radio-button</span>&gt;
</span></span><span style=display:flex><span>    &lt;/<span style=color:#f92672>el-radio-group</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#75715e>&lt;!--文本框--&gt;</span>
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>el-input</span> <span style=color:#a6e22e>v-else</span>
</span></span><span style=display:flex><span>              <span style=color:#a6e22e>v-model</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;data[item[&#39;prop&#39;]]&#34;</span>
</span></span><span style=display:flex><span>              <span style=color:#a6e22e>:placeholder</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;item[&#39;placeholder&#39;] || &#39;type &#39; + item[&#39;prop&#39;]&#34;</span>
</span></span><span style=display:flex><span>              <span style=color:#a6e22e>:clearable</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;item[&#39;clearable&#39;] || true&#34;</span>
</span></span><span style=display:flex><span>              <span style=color:#a6e22e>:disabled</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;item[&#39;disabled&#39;] || false&#34;</span>
</span></span><span style=display:flex><span>              <span style=color:#a6e22e>:readonly</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;item[&#39;readonly&#39;] || false&#34;</span>/&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  &lt;/<span style=color:#f92672>el-form-item</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>&lt;!--表单按钮项--&gt;</span>
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>el-form-item</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;btn-item&#34;</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>el-button</span> <span style=color:#a6e22e>v-if</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;type === &#39;insert&#39;&#34;</span> <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;primary&#34;</span> <span style=color:#960050;background-color:#1e0010>@</span><span style=color:#a6e22e>click</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;insert&#34;</span>&gt;确认添加&lt;/<span style=color:#f92672>el-button</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>el-button</span> <span style=color:#a6e22e>v-else-if</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;type === &#39;update&#39;&#34;</span> <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;primary&#34;</span> <span style=color:#960050;background-color:#1e0010>@</span><span style=color:#a6e22e>click</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;update&#34;</span>&gt;确认修改&lt;/<span style=color:#f92672>el-button</span>&gt;
</span></span><span style=display:flex><span>  &lt;/<span style=color:#f92672>el-form-item</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>el-form</span>&gt;
</span></span></code></pre></div><ol start=2><li>开发MyForm组件样式:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-css data-lang=css><span style=display:flex><span>.<span style=color:#a6e22e>my-form</span> {
</span></span><span style=display:flex><span>  <span style=color:#960050;background-color:#1e0010>.el-input-number,</span> <span style=color:#960050;background-color:#1e0010>.el-button</span> <span style=color:#960050;background-color:#1e0010>{</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>width</span>: <span style=color:#ae81ff>100</span><span style=color:#66d9ef>%</span>; <span style=color:#960050;background-color:#1e0010>//</span> <span style=color:#960050;background-color:#1e0010>宽度</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>:<span style=color:#a6e22e>deep</span><span style=color:#f92672>(</span>.<span style=color:#a6e22e>el-date-editor</span><span style=color:#f92672>)</span> {
</span></span><span style=display:flex><span>  --el-date-editor-width: <span style=color:#ae81ff>100</span><span style=color:#66d9ef>%</span>; <span style=color:#960050;background-color:#1e0010>//</span> <span style=color:#960050;background-color:#1e0010>宽度</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>.<span style=color:#a6e22e>icon-list</span> {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>max-height</span>: <span style=color:#ae81ff>180</span><span style=color:#66d9ef>px</span>; <span style=color:#960050;background-color:#1e0010>//</span> <span style=color:#960050;background-color:#1e0010>最大高度</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>overflow-y</span>: <span style=color:#66d9ef>scroll</span>; <span style=color:#960050;background-color:#1e0010>//</span> <span style=color:#960050;background-color:#1e0010>Y滚动</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#960050;background-color:#1e0010>.el-radio</span> <span style=color:#960050;background-color:#1e0010>{</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>margin-bottom</span>: <span style=color:#ae81ff>3</span><span style=color:#66d9ef>px</span>; <span style=color:#960050;background-color:#1e0010>//</span> <span style=color:#960050;background-color:#1e0010>下外边距</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>margin-right</span>: <span style=color:#ae81ff>3</span><span style=color:#66d9ef>px</span>; <span style=color:#960050;background-color:#1e0010>//</span> <span style=color:#960050;background-color:#1e0010>右外边距</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/*取消首尾按钮的圆角*/</span>
</span></span><span style=display:flex><span>:<span style=color:#a6e22e>deep</span><span style=color:#f92672>(</span>.<span style=color:#a6e22e>el-radio-button</span>:<span style=color:#a6e22e>first-child</span> .<span style=color:#a6e22e>el-radio-button__inner</span><span style=color:#f92672>),</span>
</span></span><span style=display:flex><span>:<span style=color:#a6e22e>deep</span><span style=color:#f92672>(</span>.<span style=color:#a6e22e>el-radio-button</span>:<span style=color:#a6e22e>last-child</span> .<span style=color:#a6e22e>el-radio-button__inner</span><span style=color:#f92672>)</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>border-radius</span>: <span style=color:#ae81ff>0</span>; <span style=color:#960050;background-color:#1e0010>//</span> <span style=color:#960050;background-color:#1e0010>圆角</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/*修改单选按钮样式*/</span>
</span></span><span style=display:flex><span>:<span style=color:#a6e22e>deep</span><span style=color:#f92672>(</span>.<span style=color:#a6e22e>el-radio-button--small</span> .<span style=color:#a6e22e>el-radio-button__inner</span><span style=color:#f92672>)</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>border-left</span>: <span style=color:#ae81ff>1</span><span style=color:#66d9ef>px</span> <span style=color:#66d9ef>solid</span> <span style=color:#ae81ff>#7e7e7e</span>; <span style=color:#960050;background-color:#1e0010>//</span> <span style=color:#960050;background-color:#1e0010>左边框</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>margin</span>: <span style=color:#ae81ff>0</span> <span style=color:#ae81ff>2</span><span style=color:#66d9ef>px</span>; <span style=color:#960050;background-color:#1e0010>//</span> <span style=color:#960050;background-color:#1e0010>左右外边距</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><ol start=3><li>开发MyForm组件脚本:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>shallowRef</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;vue&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>myInsert</span>, <span style=color:#a6e22e>myUpdate</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/util&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 数据类型常量
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>NUMBER_TYPE</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;number&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>TEXTAREA_TYPE</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;textarea&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>DATETIME_TYPE</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;datetime&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>SELECT_TYPE</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;select&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>ICON_TYPE</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;icon&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 接收父组件传递的数据
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>parent</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>defineProps</span>({
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#39;type&#39;</span><span style=color:#f92672>:</span> {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> String, <span style=color:#a6e22e>required</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>false</span>, <span style=color:#66d9ef>default</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;insert&#39;</span>},
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#39;items&#39;</span><span style=color:#f92672>:</span> {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> Array, <span style=color:#a6e22e>required</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span>},
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#39;data&#39;</span><span style=color:#f92672>:</span> {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> Array, <span style=color:#a6e22e>required</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span>},
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#39;rule&#39;</span><span style=color:#f92672>:</span> {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> Object, <span style=color:#a6e22e>required</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span>},
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#39;api&#39;</span><span style=color:#f92672>:</span> {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> Function, <span style=color:#a6e22e>required</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span>},
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#39;fn&#39;</span><span style=color:#f92672>:</span> {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> Function, <span style=color:#a6e22e>required</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>false</span>},
</span></span><span style=display:flex><span>});
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 表单对象
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>form</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 添加数据: 发送请求 + 重置表单
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>insert</span>() {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>myInsert</span>({<span style=color:#e6db74>&#39;form&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>form</span>, <span style=color:#e6db74>&#39;api&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>parent</span>[<span style=color:#e6db74>&#39;api&#39;</span>], <span style=color:#e6db74>&#39;params&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>parent</span>[<span style=color:#e6db74>&#39;data&#39;</span>], <span style=color:#e6db74>&#39;callback&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>parent</span>[<span style=color:#e6db74>&#39;fn&#39;</span>]});
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>form</span>.<span style=color:#a6e22e>value</span>.<span style=color:#a6e22e>resetFields</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 修改数据: 发送请求 + 重置表单
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>update</span>() {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>myUpdate</span>({<span style=color:#e6db74>&#39;form&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>form</span>, <span style=color:#e6db74>&#39;api&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>parent</span>[<span style=color:#e6db74>&#39;api&#39;</span>], <span style=color:#e6db74>&#39;params&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>parent</span>[<span style=color:#e6db74>&#39;data&#39;</span>], <span style=color:#e6db74>&#39;callback&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>parent</span>[<span style=color:#e6db74>&#39;fn&#39;</span>]});
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>form</span>.<span style=color:#a6e22e>value</span>.<span style=color:#a6e22e>resetFields</span>;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><ol start=4><li>测试MyForm组件效果:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-vue data-lang=vue><span style=display:flex><span>&lt;<span style=color:#f92672>template</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>style</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;margin: 20px 200px;&#34;</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>my-form</span> <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;insert&#34;</span>
</span></span><span style=display:flex><span>             <span style=color:#f92672>:items</span><span style=color:#e6db74>=&#34;insertFormItems&#34;</span>
</span></span><span style=display:flex><span>             <span style=color:#f92672>:data</span><span style=color:#e6db74>=&#34;insertFormData&#34;</span>
</span></span><span style=display:flex><span>             <span style=color:#f92672>:rule</span><span style=color:#e6db74>=&#34;insertFormRule&#34;</span>
</span></span><span style=display:flex><span>             <span style=color:#f92672>:api</span><span style=color:#e6db74>=&#34;saveApi&#34;</span>
</span></span><span style=display:flex><span>             <span style=color:#f92672>:fn</span><span style=color:#e6db74>=&#34;insertSuccess&#34;</span>/&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>el-divider</span>/&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>my-form</span> <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;update&#34;</span>
</span></span><span style=display:flex><span>             <span style=color:#f92672>:items</span><span style=color:#e6db74>=&#34;updateFormItems&#34;</span>
</span></span><span style=display:flex><span>             <span style=color:#f92672>:data</span><span style=color:#e6db74>=&#34;updateFormData&#34;</span>
</span></span><span style=display:flex><span>             <span style=color:#f92672>:rule</span><span style=color:#e6db74>=&#34;updateFormRule&#34;</span>
</span></span><span style=display:flex><span>             <span style=color:#f92672>:api</span><span style=color:#e6db74>=&#34;updateApi&#34;</span>
</span></span><span style=display:flex><span>             <span style=color:#f92672>:fn</span><span style=color:#e6db74>=&#34;updateSuccess&#34;</span>/&gt;
</span></span><span style=display:flex><span>  &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>template</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>script</span> <span style=color:#a6e22e>setup</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>MyForm</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;@/components/MyForm&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>onMounted</span>, <span style=color:#a6e22e>shallowReactive</span>, <span style=color:#a6e22e>shallowRef</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;vue&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>useDark</span>, <span style=color:#a6e22e>useToggle</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@vueuse/core/index&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>RULE</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/const&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>saveApi</span>, <span style=color:#a6e22e>updateApi</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/api/banner&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 单条添加 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 抽屉 + 表单数据 + 表单规则
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>insertFormItems</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>([
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;横幅权重&#39;</span>, <span style=color:#a6e22e>prop</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;weight&#39;</span>, <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;number&#39;</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;横幅描述&#39;</span>, <span style=color:#a6e22e>prop</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;info&#39;</span>, <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;textarea&#39;</span>}
</span></span><span style=display:flex><span>]);
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>insertFormData</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowReactive</span>({});
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>insertFormRule</span> <span style=color:#f92672>=</span> {<span style=color:#a6e22e>info</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>RULE</span>.<span style=color:#a6e22e>COMMON_INFO</span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>insertSuccess</span>() {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>alert</span>(<span style=color:#e6db74>&#39;添加完成！&#39;</span>);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 单条修改 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 抽屉 + 表单数据 + 表单规则
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>updateFormItems</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>([
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;横幅权重&#39;</span>, <span style=color:#a6e22e>prop</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;weight&#39;</span>, <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;number&#39;</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;横幅描述&#39;</span>, <span style=color:#a6e22e>prop</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;info&#39;</span>, <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;textarea&#39;</span>}
</span></span><span style=display:flex><span>]);
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>updateFormData</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowReactive</span>({});
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>updateFormRule</span> <span style=color:#f92672>=</span> {<span style=color:#a6e22e>info</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>RULE</span>.<span style=color:#a6e22e>COMMON_INFO</span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>updateSuccess</span>() {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>alert</span>(<span style=color:#e6db74>&#39;修改完成！&#39;</span>);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>onMounted</span>(() =&gt; <span style=color:#a6e22e>useToggle</span>(<span style=color:#a6e22e>useDark</span>()));
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>script</span>&gt;
</span></span></code></pre></div><h2 id=e07-文件上传控件>E07. 文件上传控件</h2><blockquote><p>心法: 文件上传通用组件 <code>@/components/MyUploader.vue</code></p></blockquote><p><img src=/%E7%AC%AC4%E9%98%B6%E6%AE%B5-LESSON/JB4-5-%E5%90%8E%E5%8F%B0%E5%89%8D%E7%AB%AF/image/MyUploader%E9%A1%B5%E9%9D%A2.png alt></p><table><thead><tr><th>必填</th><th>属性</th><th>描述</th><th>类型</th><th>默认值</th></tr></thead><tbody><tr><td>√</td><td><code>name</code></td><td>控件名称，对应后台API接口中的文件参数名</td><td>String</td><td></td></tr><tr><td>√</td><td><code>action</code></td><td>上传地址，对应后台API接口地址</td><td>String</td><td></td></tr><tr><td></td><td><code>fn</code></td><td>上传成功后的回调函数</td><td>Function</td><td></td></tr><tr><td></td><td><code>drag</code></td><td>是否支持拖拽上传</td><td>Boolean</td><td><code>true</code></td></tr><tr><td></td><td><code>limit</code></td><td>单次文件上传的最大数量限制</td><td>Number</td><td><code>1</code></td></tr><tr><td></td><td><code>showFileList</code></td><td>是否显示上传的文件列表</td><td>Boolean</td><td><code>true</code></td></tr><tr><td></td><td><code>autoUpload</code></td><td>是否自动上传</td><td>Boolean</td><td><code>false</code></td></tr><tr><td></td><td><code>btnText</code></td><td>上传提交按钮文案</td><td>String</td><td><code>确认上传</code></td></tr><tr><td></td><td><code>btnType</code></td><td>上传提交按钮主题</td><td>String</td><td><code>warning</code></td></tr><tr><td></td><td><code>allowTypes</code></td><td>支持上传的MIME格式数组</td><td>Array</td><td><code>['image/jpeg', 'image/png']</code></td></tr><tr><td></td><td><code>maxSize</code></td><td>支持上传的文件最大限制，单位MB</td><td>Number</td><td>10</td></tr></tbody></table><blockquote><p>武技: 开发文件上传通用组件 <code>@/components/MyUploader.vue</code></p></blockquote><ol><li>开发MyUploader组件布局:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>&lt;<span style=color:#f92672>el-upload</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;my-uploader&#34;</span> <span style=color:#a6e22e>ref</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;uploader&#34;</span> <span style=color:#a6e22e>list-type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;picture&#34;</span>
</span></span><span style=display:flex><span>           <span style=color:#a6e22e>:name</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;name&#34;</span>
</span></span><span style=display:flex><span>           <span style=color:#a6e22e>:action</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;action&#34;</span>
</span></span><span style=display:flex><span>           <span style=color:#a6e22e>:headers</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;{&#39;token&#39;: currentToken}&#34;</span>
</span></span><span style=display:flex><span>           <span style=color:#a6e22e>:drag</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;drag&#34;</span>
</span></span><span style=display:flex><span>           <span style=color:#a6e22e>:limit</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;limit&#34;</span>
</span></span><span style=display:flex><span>           <span style=color:#a6e22e>:show-file-list</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;showFileList&#34;</span>
</span></span><span style=display:flex><span>           <span style=color:#a6e22e>:auto-upload</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;autoUpload&#34;</span>
</span></span><span style=display:flex><span>           <span style=color:#a6e22e>:before-upload</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;beforeUpload&#34;</span>
</span></span><span style=display:flex><span>           <span style=color:#a6e22e>:on-success</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;onSuccess&#34;</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>el-link</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;el-icon--upload&#34;</span> <span style=color:#a6e22e>icon</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;UploadFilled&#34;</span> <span style=color:#a6e22e>:underline</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;false&#34;</span>/&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;el-upload__text&#34;</span>&gt;拖拽文件 或 &lt;<span style=color:#f92672>em</span>&gt;点击上传&lt;/<span style=color:#f92672>em</span>&gt;&lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>template</span> <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#a6e22e>tip</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;el-upload__tip&#34;</span>&gt;
</span></span><span style=display:flex><span>      仅支持 {{ allowTypes.toString() }} 格式，且单个文件不超过 {{ maxSize }} MB
</span></span><span style=display:flex><span>    &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>  &lt;/<span style=color:#f92672>template</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>el-upload</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>&lt;!--上传按钮--&gt;</span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>el-button</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;upload-btn&#34;</span> <span style=color:#a6e22e>:type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;btnType&#34;</span> <span style=color:#960050;background-color:#1e0010>@</span><span style=color:#a6e22e>click</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;uploader.submit()&#34;</span>&gt;
</span></span><span style=display:flex><span>  {{ btnText }}
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>el-button</span>&gt;
</span></span></code></pre></div><ol start=2><li>开发MyUploader组件样式:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-css data-lang=css><span style=display:flex><span>.<span style=color:#a6e22e>upload-btn</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>margin-top</span>: <span style=color:#ae81ff>10</span><span style=color:#66d9ef>px</span>; <span style=color:#960050;background-color:#1e0010>//</span> <span style=color:#960050;background-color:#1e0010>上外边距</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>width</span>: <span style=color:#ae81ff>100</span><span style=color:#66d9ef>%</span>; <span style=color:#960050;background-color:#1e0010>//</span> <span style=color:#960050;background-color:#1e0010>宽度</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><ol start=3><li>开发MyUploader组件脚本:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>shallowRef</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;vue&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>getResponseData</span>, <span style=color:#a6e22e>myFileCheck</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/util&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>ElMessage</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;element-plus&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 上传控件对象
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>uploader</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 当前token值
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>currentToken</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>sessionStorage</span>.<span style=color:#a6e22e>getItem</span>(<span style=color:#e6db74>&#39;token&#39;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 接收父组件传递的数据
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>parent</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>defineProps</span>({
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#39;name&#39;</span><span style=color:#f92672>:</span> {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> String, <span style=color:#a6e22e>required</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span>},
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#39;action&#39;</span><span style=color:#f92672>:</span> {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> String, <span style=color:#a6e22e>required</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span>},
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#39;fn&#39;</span><span style=color:#f92672>:</span> {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> Function, <span style=color:#a6e22e>required</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>false</span>},
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#39;drag&#39;</span><span style=color:#f92672>:</span> {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> Boolean, <span style=color:#a6e22e>required</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>false</span>, <span style=color:#66d9ef>default</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span>},
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#39;limit&#39;</span><span style=color:#f92672>:</span> {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> Number, <span style=color:#a6e22e>required</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>false</span>, <span style=color:#66d9ef>default</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>1</span>},
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#39;showFileList&#39;</span><span style=color:#f92672>:</span> {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> Boolean, <span style=color:#a6e22e>required</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>false</span>, <span style=color:#66d9ef>default</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span>},
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#39;autoUpload&#39;</span><span style=color:#f92672>:</span> {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> Boolean, <span style=color:#a6e22e>required</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>false</span>, <span style=color:#66d9ef>default</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>false</span>},
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#39;btnText&#39;</span><span style=color:#f92672>:</span> {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> String, <span style=color:#a6e22e>required</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>false</span>, <span style=color:#66d9ef>default</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;确认上传&#39;</span>},
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#39;btnType&#39;</span><span style=color:#f92672>:</span> {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> String, <span style=color:#a6e22e>required</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>false</span>, <span style=color:#66d9ef>default</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;warning&#39;</span>},
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#39;successTip&#39;</span><span style=color:#f92672>:</span> {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> Boolean, <span style=color:#a6e22e>required</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>false</span>, <span style=color:#66d9ef>default</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;上传成功！&#39;</span>},
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#39;allowTypes&#39;</span><span style=color:#f92672>:</span> {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> Array, <span style=color:#a6e22e>required</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>false</span>, <span style=color:#66d9ef>default</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#39;image/jpeg&#39;</span>, <span style=color:#e6db74>&#39;image/png&#39;</span>]},
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#39;maxSize&#39;</span><span style=color:#f92672>:</span> {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> Number, <span style=color:#a6e22e>required</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>false</span>, <span style=color:#66d9ef>default</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>10</span>},
</span></span><span style=display:flex><span>});
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 上传文件前校验
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>beforeUpload</span>(<span style=color:#a6e22e>file</span>) {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>myFileCheck</span>(<span style=color:#a6e22e>file</span>, <span style=color:#a6e22e>parent</span>[<span style=color:#e6db74>&#39;allowTypes&#39;</span>], <span style=color:#a6e22e>parent</span>[<span style=color:#e6db74>&#39;maxSize&#39;</span>]);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 上传文件成功后: 解析响应 + 清空上传控件的文件列表 + 成功提示 + 回调函数
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>onSuccess</span>(<span style=color:#a6e22e>res</span>) {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>data</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>getResponseData</span>(<span style=color:#a6e22e>res</span>);
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>data</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>uploader</span>.<span style=color:#a6e22e>value</span>.<span style=color:#a6e22e>clearFiles</span>();
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>parent</span>[<span style=color:#e6db74>&#39;successTip&#39;</span>]) <span style=color:#a6e22e>ElMessage</span>.<span style=color:#a6e22e>success</span>(<span style=color:#a6e22e>parent</span>[<span style=color:#e6db74>&#39;successTip&#39;</span>]);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>parent</span>[<span style=color:#e6db74>&#39;fn&#39;</span>]) <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>parent</span>[<span style=color:#e6db74>&#39;fn&#39;</span>]();
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><ol start=4><li>测试MyUploader组件效果:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#f92672>&lt;</span><span style=color:#a6e22e>template</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>div</span> <span style=color:#a6e22e>style</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;margin: 20px 200px;&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>my</span><span style=color:#f92672>-</span><span style=color:#a6e22e>uploader</span> <span style=color:#a6e22e>name</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;bannerFile&#34;</span>
</span></span><span style=display:flex><span>                 <span style=color:#f92672>:</span><span style=color:#a6e22e>action</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;&#39;http://localhost:5266/api/v1/banner/upload/1&#39;&#34;</span>
</span></span><span style=display:flex><span>                 <span style=color:#f92672>:</span><span style=color:#a6e22e>fn</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;onSuccess&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/div&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/template&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;</span><span style=color:#a6e22e>script</span> <span style=color:#a6e22e>setup</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>onMounted</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;vue&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>MyUploader</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/components/MyUploader&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>useToggle</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@vueuse/core/index&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>useDark</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@vueuse/core&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>onSuccess</span>() {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>alert</span>(<span style=color:#e6db74>&#39;上传成功！&#39;</span>);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>onMounted</span>(() =&gt; <span style=color:#a6e22e>useToggle</span>(<span style=color:#a6e22e>useDark</span>()));
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/script&gt;</span>
</span></span></code></pre></div><h2 id=e08-西瓜视频组件>E08. 西瓜视频组件</h2><blockquote><p>心法: 西瓜视频通用组件 <code>@/components/MyPlayer.vue</code></p></blockquote><p><img src=/%E7%AC%AC4%E9%98%B6%E6%AE%B5-LESSON/JB4-5-%E5%90%8E%E5%8F%B0%E5%89%8D%E7%AB%AF/image/MyPlayer%E9%A1%B5%E9%9D%A2.png alt></p><table><thead><tr><th>必填</th><th>属性</th><th>描述</th><th>类型</th><th>默认值</th></tr></thead><tbody><tr><td>√</td><td><code>url</code></td><td>视频地址</td><td>String</td><td></td></tr><tr><td>√</td><td><code>poster</code></td><td>视频封面</td><td>String</td><td></td></tr><tr><td></td><td><code>message</code></td><td>父子组件之间传递的消息当子组件接收到 <code>close</code> 消息时，立刻停止播放</td><td>String</td><td></td></tr><tr><td></td><td><code>fluid</code></td><td>是否使用流体布局</td><td>Boolean</td><td><code>true</code></td></tr><tr><td></td><td><code>marginControls</code></td><td>是否分离播放器控件</td><td>Boolean</td><td><code>true</code></td></tr><tr><td></td><td><code>autoplay</code></td><td>是否自动播放视频</td><td>Boolean</td><td><code>false</code></td></tr><tr><td></td><td><code>autoplayMuted</code></td><td>是否静音播放视频</td><td>Boolean</td><td><code>true</code></td></tr><tr><td></td><td><code>lang</code></td><td>视频播放器语言</td><td>String</td><td><code>zh-cn</code></td></tr><tr><td></td><td><code>volume</code></td><td>视频播放器初始音量，范围0~1</td><td>Number</td><td><code>0.6</code></td></tr><tr><td></td><td><code>playbackRate</code></td><td>支持的倍速播放列表</td><td>Array</td><td><code>[0.5, 1, 2, 4]</code></td></tr><tr><td></td><td><code>loop</code></td><td>是否支持循环播放</td><td>Boolean</td><td><code>false</code></td></tr><tr><td></td><td><code>download</code></td><td>是否支持下载</td><td>Boolean</td><td><code>true</code></td></tr><tr><td></td><td><code>mini</code></td><td>是否支持迷你屏幕</td><td>Boolean</td><td><code>true</code></td></tr><tr><td></td><td><code>pip</code></td><td>是否支持画中画</td><td>Boolean</td><td><code>true</code></td></tr></tbody></table><blockquote><p>武技: 开发西瓜视频通用组件 <code>@/components/MyPlayer.vue</code></p></blockquote><ol><li>开发MyPlayer组件布局:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>&lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>id</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;player&#34;</span>/&gt;
</span></span></code></pre></div><ol start=2><li>开发MyPlayer组件样式:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-css data-lang=css><span style=display:flex><span><span style=color:#75715e>/*暂无*/</span>
</span></span></code></pre></div><ol start=3><li>开发MyPlayer组件脚本:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#75715e>// 引入西瓜播放器: 核心实例，核心CSS，弹幕插件，弹幕CSS
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>Player</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;xgplayer&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#e6db74>&#39;xgplayer/dist/index.min.css&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>Danmu</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;xgplayer/es/plugins/danmu&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#e6db74>&#39;xgplayer/es/plugins/danmu/index.css&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>MINIO_VIDEO</span>, <span style=color:#a6e22e>MINIO_VIDEO_COVER</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/const&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>onMounted</span>, <span style=color:#a6e22e>watch</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;vue&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>randomStr</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/util&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 播放器对象
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>player</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>null</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 接收父组件传递的数据
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>parent</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>defineProps</span>({
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#39;url&#39;</span><span style=color:#f92672>:</span> {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> String, <span style=color:#a6e22e>required</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span>},
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#39;poster&#39;</span><span style=color:#f92672>:</span> {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> String, <span style=color:#a6e22e>required</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span>},
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#39;fluid&#39;</span><span style=color:#f92672>:</span> {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> Boolean, <span style=color:#a6e22e>required</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>false</span>, <span style=color:#66d9ef>default</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span>},
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#39;message&#39;</span><span style=color:#f92672>:</span> {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> String, <span style=color:#a6e22e>required</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>false</span>},
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#39;marginControls&#39;</span><span style=color:#f92672>:</span> {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> Boolean, <span style=color:#a6e22e>required</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>false</span>, <span style=color:#66d9ef>default</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span>},
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#39;autoplay&#39;</span><span style=color:#f92672>:</span> {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> Boolean, <span style=color:#a6e22e>required</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>false</span>, <span style=color:#66d9ef>default</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>false</span>},
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#39;autoplayMuted&#39;</span><span style=color:#f92672>:</span> {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> Boolean, <span style=color:#a6e22e>required</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>false</span>, <span style=color:#66d9ef>default</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span>},
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#39;lang&#39;</span><span style=color:#f92672>:</span> {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> String, <span style=color:#a6e22e>required</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>false</span>, <span style=color:#66d9ef>default</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;zh-cn&#39;</span>},
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#39;volume&#39;</span><span style=color:#f92672>:</span> {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> Number, <span style=color:#a6e22e>required</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>false</span>, <span style=color:#66d9ef>default</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>0.6</span>},
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#39;playbackRate&#39;</span><span style=color:#f92672>:</span> {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> Array, <span style=color:#a6e22e>required</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>false</span>, <span style=color:#66d9ef>default</span><span style=color:#f92672>:</span> [<span style=color:#ae81ff>0.5</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>4</span>]},
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#39;loop&#39;</span><span style=color:#f92672>:</span> {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> Boolean, <span style=color:#a6e22e>required</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>false</span>, <span style=color:#66d9ef>default</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>false</span>},
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#39;download&#39;</span><span style=color:#f92672>:</span> {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> Boolean, <span style=color:#a6e22e>required</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>false</span>, <span style=color:#66d9ef>default</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span>},
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#39;mini&#39;</span><span style=color:#f92672>:</span> {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> Boolean, <span style=color:#a6e22e>required</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>false</span>, <span style=color:#66d9ef>default</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span>},
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#39;pip&#39;</span><span style=color:#f92672>:</span> {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> Boolean, <span style=color:#a6e22e>required</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>false</span>, <span style=color:#66d9ef>default</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span>},
</span></span><span style=display:flex><span>});
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 监听 message 变量，一旦 message 发生变化，则停止播放视频
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>watch</span>(() =&gt; <span style=color:#a6e22e>parent</span>[<span style=color:#e6db74>&#39;message&#39;</span>], (<span style=color:#a6e22e>newValue</span>, <span style=color:#a6e22e>oldValue</span>) =&gt; {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>newValue</span> <span style=color:#f92672>===</span> <span style=color:#e6db74>&#39;closePlayVideoDrawer&#39;</span>) {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 重置播放器
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>player</span>.<span style=color:#a6e22e>resetState</span>();
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>});
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 页面加载完毕后再进行视频初始化
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>onMounted</span>(() =&gt; {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// 欢迎弹幕配置
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>welcomeDanmu</span> <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>duration</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>15000</span>, <span style=color:#75715e>// 弹幕持续显示时间，毫秒，最低为 5000
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>id</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>randomStr</span>, <span style=color:#75715e>// 弹幕ID，必须唯一
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>start</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>3000</span>, <span style=color:#75715e>// 弹幕出现时间，毫秒
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>prior</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span>, <span style=color:#75715e>// 该条弹幕优先显示，默认 false
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>color</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span>, <span style=color:#75715e>// 该条弹幕为彩色弹幕，默认 false
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>txt</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;一大波弹幕即将来袭&#39;</span>, <span style=color:#75715e>// 弹幕内容
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>style</span><span style=color:#f92672>:</span> {<span style=color:#a6e22e>color</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;red&#39;</span>, <span style=color:#a6e22e>fontSize</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;20px&#39;</span>, <span style=color:#a6e22e>padding</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;20px&#39;</span>}, <span style=color:#75715e>// 弹幕样式
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>mode</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;scroll&#39;</span> <span style=color:#75715e>// 显示模式 [top顶部居中，bottom底部居中，scroll滚动]，默认为scroll
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  };
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// 西瓜播放器配置
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>config</span> <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>id</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;player&#39;</span>, <span style=color:#75715e>// 绑定DOM元素的ID值
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>url</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>MINIO_VIDEO</span>.<span style=color:#a6e22e>value</span>(<span style=color:#a6e22e>parent</span>[<span style=color:#e6db74>&#39;url&#39;</span>]), <span style=color:#75715e>// 视频地址
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>poster</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>MINIO_VIDEO_COVER</span>.<span style=color:#a6e22e>value</span>(<span style=color:#a6e22e>parent</span>[<span style=color:#e6db74>&#39;poster&#39;</span>]), <span style=color:#75715e>// 视频封面
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>fluid</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>parent</span>[<span style=color:#e6db74>&#39;fluid&#39;</span>], <span style=color:#75715e>// 根据父容器调整宽高
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>marginControls</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>parent</span>[<span style=color:#e6db74>&#39;marginControls&#39;</span>], <span style=color:#75715e>// 分离控制栏
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>lang</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>parent</span>[<span style=color:#e6db74>&#39;lang&#39;</span>], <span style=color:#75715e>// 语言
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>volume</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>parent</span>[<span style=color:#e6db74>&#39;volume&#39;</span>], <span style=color:#75715e>// 音量
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>playbackRate</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>parent</span>[<span style=color:#e6db74>&#39;playbackRate&#39;</span>], <span style=color:#75715e>// 倍速列表
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>autoplay</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>parent</span>[<span style=color:#e6db74>&#39;autoplay&#39;</span>], <span style=color:#75715e>// 自动播放
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>autoplayMuted</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>parent</span>[<span style=color:#e6db74>&#39;autoplayMuted&#39;</span>], <span style=color:#75715e>// 静音播放
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>loop</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>parent</span>[<span style=color:#e6db74>&#39;loop&#39;</span>], <span style=color:#75715e>// 循环播放
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>download</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>parent</span>[<span style=color:#e6db74>&#39;download&#39;</span>], <span style=color:#75715e>// 允许下载
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>mini</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>parent</span>[<span style=color:#e6db74>&#39;mini&#39;</span>], <span style=color:#75715e>// 迷你屏
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>pip</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>parent</span>[<span style=color:#e6db74>&#39;pip&#39;</span>], <span style=color:#75715e>// 画中画
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>plugins</span><span style=color:#f92672>:</span> [<span style=color:#a6e22e>Danmu</span>], <span style=color:#75715e>// 添加弹幕插件
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>danmu</span><span style=color:#f92672>:</span> {<span style=color:#a6e22e>comments</span><span style=color:#f92672>:</span> [<span style=color:#a6e22e>welcomeDanmu</span>]} <span style=color:#75715e>// 弹幕
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  };
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// 实例化西瓜播放器
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>player</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>Player</span>(<span style=color:#a6e22e>config</span>);
</span></span><span style=display:flex><span>});
</span></span></code></pre></div><ol start=4><li>测试MyPlayer组件效果:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-vue data-lang=vue><span style=display:flex><span>&lt;<span style=color:#f92672>template</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>style</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;margin: 20px 200px;&#34;</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>my-player</span> <span style=color:#a6e22e>poster</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;default-cover.jpg&#34;</span> <span style=color:#a6e22e>url</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;default-video.mp4&#34;</span>/&gt;
</span></span><span style=display:flex><span>  &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>template</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>script</span> <span style=color:#a6e22e>setup</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>onMounted</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;vue&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>MyPlayer</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/components/MyPlayer&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>useToggle</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@vueuse/core/index&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>useDark</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@vueuse/core&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>onMounted</span>(() =&gt; <span style=color:#a6e22e>useToggle</span>(<span style=color:#a6e22e>useDark</span>()));
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>script</span>&gt;
</span></span></code></pre></div><h2 id=e09-图标标题组件>E09. 图标标题组件</h2><blockquote><p>心法: 图标标题通用组件 <code>@/components/MyIcon.vue</code></p></blockquote><p><img src=/%E7%AC%AC4%E9%98%B6%E6%AE%B5-LESSON/JB4-5-%E5%90%8E%E5%8F%B0%E5%89%8D%E7%AB%AF/image/MyIcon%E9%A1%B5%E9%9D%A2.png alt></p><table><thead><tr><th>必填</th><th>属性</th><th>描述</th><th>类型</th><th>默认值</th></tr></thead><tbody><tr><td>√</td><td><code>icon</code></td><td>图标名称</td><td>String</td><td></td></tr><tr><td></td><td><code>text</code></td><td>标题文案</td><td>String</td><td></td></tr><tr><td></td><td><code>size</code></td><td>图标和标题的共同尺寸</td><td>Number</td><td><code>14</code></td></tr></tbody></table><blockquote><p>武技: 开发图标标题通用组件 <code>@/components/MyIcon.vue</code></p></blockquote><ol><li>开发MyIcon组件布局:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>&lt;<span style=color:#f92672>el-icon</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;icon&#34;</span> <span style=color:#a6e22e>:size</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;size&#34;</span>&gt;
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>component</span> <span style=color:#a6e22e>:is</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;icon&#34;</span>/&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>el-icon</span>&gt;
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>span</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;text&#34;</span> <span style=color:#a6e22e>:style</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;{&#39;font-size&#39; : size + &#39;px&#39;}&#34;</span>&gt;{{ text }}&lt;/<span style=color:#f92672>span</span>&gt;
</span></span></code></pre></div><ol start=2><li>开发MyIcon组件样式:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-css data-lang=css><span style=display:flex><span><span style=color:#75715e>/**暂无*/</span>
</span></span></code></pre></div><ol start=3><li>开发MyIcon组件脚本:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#75715e>// 接收父组件传递的数据
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>parent</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>defineProps</span>({
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#39;icon&#39;</span><span style=color:#f92672>:</span> {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> String, <span style=color:#a6e22e>required</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span>},
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#39;text&#39;</span><span style=color:#f92672>:</span> {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> String, <span style=color:#a6e22e>required</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>false</span>},
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#39;size&#39;</span><span style=color:#f92672>:</span> {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> Number, <span style=color:#a6e22e>required</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>false</span>, <span style=color:#66d9ef>default</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>14</span>},
</span></span><span style=display:flex><span>});
</span></span></code></pre></div><ol start=4><li>测试MyIcon组件效果:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-vue data-lang=vue><span style=display:flex><span>&lt;<span style=color:#f92672>template</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>style</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;margin: 20px 200px;&#34;</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>my-icon</span> <span style=color:#a6e22e>text</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;苹果&#34;</span> <span style=color:#a6e22e>icon</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;Apple&#34;</span> <span style=color:#a6e22e>size</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;50&#34;</span>/&gt;
</span></span><span style=display:flex><span>  &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>template</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>script</span> <span style=color:#a6e22e>setup</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>onMounted</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;vue&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>MyIcon</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/components/MyIcon&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>useToggle</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@vueuse/core/index&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>useDark</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@vueuse/core&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>onMounted</span>(() =&gt; <span style=color:#a6e22e>useToggle</span>(<span style=color:#a6e22e>useDark</span>()));
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>script</span>&gt;
</span></span></code></pre></div><h2 id=e10-确认弹窗组件>E10. 确认弹窗组件</h2><blockquote><p>心法: 确认弹窗通用组件 <code>@/components/MyConfirm.vue</code></p></blockquote><p><img src=/%E7%AC%AC4%E9%98%B6%E6%AE%B5-LESSON/JB4-5-%E5%90%8E%E5%8F%B0%E5%89%8D%E7%AB%AF/image/MyConfirm%E9%A1%B5%E9%9D%A2.png alt></p><table><thead><tr><th>必填</th><th>属性</th><th>描述</th><th>类型</th><th>默认值</th></tr></thead><tbody><tr><td>√</td><td><code>title</code></td><td>确认弹框标题文案</td><td>String</td><td></td></tr><tr><td></td><td><code>fn</code></td><td>确认弹框点击确认时触发的事件</td><td>Function</td><td></td></tr><tr><td></td><td><code>btnSize</code></td><td>确认按钮尺寸</td><td>String</td><td><code>small</code></td></tr><tr><td></td><td><code>btnText</code></td><td>确认按钮文案</td><td>String</td><td><code>14</code></td></tr><tr><td></td><td><code>btnType</code></td><td>确认按钮主题</td><td>String</td><td><code>'danger'</code></td></tr><tr><td></td><td><code>btnPlain</code></td><td>是否设置为简单按钮</td><td>Boolean</td><td><code>true</code></td></tr></tbody></table><blockquote><p>武技: 开发确认弹窗通用组件 <code>@/components/MyConfirm.vue</code></p></blockquote><ol><li>开发MyConfirm组件布局:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>&lt;<span style=color:#f92672>el-popconfirm</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;my-confirm&#34;</span> <span style=color:#a6e22e>:title</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;title&#34;</span> <span style=color:#960050;background-color:#1e0010>@</span><span style=color:#a6e22e>confirm</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;fn&#34;</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>template</span> <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#a6e22e>reference</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>el-button</span> <span style=color:#a6e22e>:type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;btnTypeToEnum(btnType)&#34;</span> <span style=color:#a6e22e>:plain</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;btnPlain&#34;</span> <span style=color:#a6e22e>:size</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;sizeToEnum(btnSize)&#34;</span>&gt;
</span></span><span style=display:flex><span>      {{ btnText }}
</span></span><span style=display:flex><span>    &lt;/<span style=color:#f92672>el-button</span>&gt;
</span></span><span style=display:flex><span>  &lt;/<span style=color:#f92672>template</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>el-popconfirm</span>&gt;
</span></span></code></pre></div><ol start=2><li>开发MyConfirm组件样式:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-css data-lang=css><span style=display:flex><span><span style=color:#75715e>/*暂无*/</span>
</span></span></code></pre></div><ol start=3><li>开发MyConfirm组件脚本:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#75715e>// 接收父组件传递的数据
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>parent</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>defineProps</span>({
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#39;title&#39;</span><span style=color:#f92672>:</span> {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> String, <span style=color:#a6e22e>required</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span>},
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#39;fn&#39;</span><span style=color:#f92672>:</span> {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> Function, <span style=color:#a6e22e>required</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>false</span>},
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#39;btnSize&#39;</span><span style=color:#f92672>:</span> {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> String, <span style=color:#a6e22e>required</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>false</span>, <span style=color:#66d9ef>default</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;small&#39;</span>},
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#39;btnText&#39;</span><span style=color:#f92672>:</span> {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> String, <span style=color:#a6e22e>required</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>false</span>, <span style=color:#66d9ef>default</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>14</span>},
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#39;btnType&#39;</span><span style=color:#f92672>:</span> {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> String, <span style=color:#a6e22e>required</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>false</span>, <span style=color:#66d9ef>default</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;danger&#39;</span>},
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#39;btnPlain&#39;</span><span style=color:#f92672>:</span> {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> Boolean, <span style=color:#a6e22e>required</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>false</span>, <span style=color:#66d9ef>default</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span>},
</span></span><span style=display:flex><span>});
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 按钮尺寸 - 枚举处理 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 按钮尺寸枚举列表
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>SIZE_ENUM</span> <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>SMALL</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;small&#39;</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>DEFAULT</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;default&#39;</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>LARGE</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;large&#39;</span>,
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 字符串类型的按钮尺寸 -&gt; 枚举类型的按钮尺寸
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>sizeToEnum</span>(<span style=color:#a6e22e>size</span>) {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>size</span> <span style=color:#f92672>===</span> <span style=color:#e6db74>&#39;small&#39;</span>) <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>SIZE_ENUM</span>.<span style=color:#a6e22e>SMALL</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>size</span> <span style=color:#f92672>===</span> <span style=color:#e6db74>&#39;default&#39;</span>) <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>SIZE_ENUM</span>.<span style=color:#a6e22e>DEFAULT</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>size</span> <span style=color:#f92672>===</span> <span style=color:#e6db74>&#39;large&#39;</span>) <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>SIZE_ENUM</span>.<span style=color:#a6e22e>LARGE</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 按钮类型 - 枚举处理 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 按钮类型枚举列表
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>BTN_TYPE_ENUM</span> <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>PRIMARY</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;primary&#39;</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>SUCCESS</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;success&#39;</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>WARNING</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;warning&#39;</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>DANGER</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;danger&#39;</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>INFO</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;info&#39;</span>,
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 字符串类型的按钮类型 -&gt; 枚举类型的按钮类型
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>btnTypeToEnum</span>(<span style=color:#a6e22e>btnType</span>) {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>btnType</span> <span style=color:#f92672>===</span> <span style=color:#e6db74>&#39;primary&#39;</span>) <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>BTN_TYPE_ENUM</span>.<span style=color:#a6e22e>PRIMARY</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>btnType</span> <span style=color:#f92672>===</span> <span style=color:#e6db74>&#39;success&#39;</span>) <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>BTN_TYPE_ENUM</span>.<span style=color:#a6e22e>SUCCESS</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>btnType</span> <span style=color:#f92672>===</span> <span style=color:#e6db74>&#39;warning&#39;</span>) <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>BTN_TYPE_ENUM</span>.<span style=color:#a6e22e>WARNING</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>btnType</span> <span style=color:#f92672>===</span> <span style=color:#e6db74>&#39;danger&#39;</span>) <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>BTN_TYPE_ENUM</span>.<span style=color:#a6e22e>DANGER</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>btnType</span> <span style=color:#f92672>===</span> <span style=color:#e6db74>&#39;info&#39;</span>) <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>BTN_TYPE_ENUM</span>.<span style=color:#a6e22e>INFO</span>;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><ol start=4><li>测试MyConfirm组件效果:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-vue data-lang=vue><span style=display:flex><span>&lt;<span style=color:#f92672>template</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>style</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;margin: 20px 200px;&#34;</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>my-confirm</span> <span style=color:#a6e22e>title</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;确定登出账号？&#34;</span> <span style=color:#f92672>:fn</span><span style=color:#e6db74>=&#34;onSuccess&#34;</span> <span style=color:#a6e22e>btn</span><span style=color:#f92672>-text</span><span style=color:#960050;background-color:#1e0010>=&#34;</span><span style=color:#a6e22e>EXIT</span><span style=color:#960050;background-color:#1e0010>&#34;</span>/&gt;
</span></span><span style=display:flex><span>  &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>template</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>script</span> <span style=color:#a6e22e>setup</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>onMounted</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;vue&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>MyConfirm</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/components/MyConfirm&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>useToggle</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@vueuse/core/index&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>useDark</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@vueuse/core&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 确认删除
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>onSuccess</span>() {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>alert</span>(<span style=color:#e6db74>&#39;删除成功！&#39;</span>);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>onMounted</span>(() =&gt; <span style=color:#a6e22e>useToggle</span>(<span style=color:#a6e22e>useDark</span>()));
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>script</span>&gt;
</span></span></code></pre></div><h1 id=s03-业务组件开发>S03. 业务组件开发</h1><h2 id=e01-会员登录组件>E01. 会员登录组件</h2><blockquote><p>心法: 会员登录组件 <code>@/views/Login.vue</code></p></blockquote><p><img src=/%E7%AC%AC4%E9%98%B6%E6%AE%B5-LESSON/JB4-5-%E5%90%8E%E5%8F%B0%E5%89%8D%E7%AB%AF/image/Login%E9%A1%B5%E9%9D%A2.png alt></p><blockquote><p>武技: 开发会员登录组件 <code>@/views/Login.vue</code></p></blockquote><ol><li>配置Login组件路由:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>Login</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;@/views/Login&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>{<span style=color:#a6e22e>path</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;/&#39;</span>, <span style=color:#a6e22e>name</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Login&#39;</span>, <span style=color:#a6e22e>component</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>Login</span>},
</span></span></code></pre></div><ol start=2><li>开发Login组件布局:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>&lt;<span style=color:#f92672>section</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;login-body&#34;</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>el-card</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;login-card&#34;</span> <span style=color:#a6e22e>:header</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;loginBoardTitle&#34;</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>el-form</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;login-form&#34;</span> <span style=color:#a6e22e>ref</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;loginForm&#34;</span> <span style=color:#a6e22e>:model</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;loginFormData&#34;</span> <span style=color:#a6e22e>:rules</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;loginFormRule&#34;</span> <span style=color:#a6e22e>status-icon</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      &lt;<span style=color:#f92672>el-form-item</span> <span style=color:#a6e22e>prop</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;username&#34;</span> <span style=color:#a6e22e>required</span>&gt;
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>el-input</span> <span style=color:#a6e22e>v-model</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;loginFormData[&#39;username&#39;]&#34;</span> <span style=color:#a6e22e>suffix-icon</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;User&#34;</span> <span style=color:#a6e22e>clearable</span>
</span></span><span style=display:flex><span>                  <span style=color:#a6e22e>placeholder</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;输入账号 ..&#34;</span>/&gt;
</span></span><span style=display:flex><span>      &lt;/<span style=color:#f92672>el-form-item</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      &lt;<span style=color:#f92672>el-form-item</span> <span style=color:#a6e22e>prop</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;password&#34;</span> <span style=color:#a6e22e>required</span>&gt;
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>el-input</span> <span style=color:#a6e22e>v-model</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;loginFormData[&#39;password&#39;]&#34;</span> <span style=color:#a6e22e>suffix-icon</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;Lock&#34;</span> <span style=color:#a6e22e>clearable</span>
</span></span><span style=display:flex><span>                  <span style=color:#a6e22e>placeholder</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;输入密码 ..&#34;</span> <span style=color:#a6e22e>show-password</span>/&gt;
</span></span><span style=display:flex><span>      &lt;/<span style=color:#f92672>el-form-item</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      &lt;<span style=color:#f92672>el-button</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;login-btn&#34;</span> <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;primary&#34;</span> <span style=color:#960050;background-color:#1e0010>@</span><span style=color:#a6e22e>click</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;login()&#34;</span>&gt;
</span></span><span style=display:flex><span>        管理员登录
</span></span><span style=display:flex><span>      &lt;/<span style=color:#f92672>el-button</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      &lt;<span style=color:#f92672>el-checkbox</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;remember-cbx&#34;</span> <span style=color:#a6e22e>v-model</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;rememberMe&#34;</span> <span style=color:#a6e22e>label</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;记住账号&#34;</span> <span style=color:#a6e22e>size</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;small&#34;</span>/&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      &lt;<span style=color:#f92672>el-button</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;forget-btn&#34;</span> <span style=color:#a6e22e>link</span> <span style=color:#a6e22e>size</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;small&#34;</span> <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;default&#34;</span> <span style=color:#960050;background-color:#1e0010>@</span><span style=color:#a6e22e>click</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;forget()&#34;</span>&gt;
</span></span><span style=display:flex><span>        忘记密码
</span></span><span style=display:flex><span>      &lt;/<span style=color:#f92672>el-button</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      &lt;<span style=color:#f92672>el-button</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;reset-btn&#34;</span> <span style=color:#a6e22e>link</span> <span style=color:#a6e22e>size</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;small&#34;</span> <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;warning&#34;</span> <span style=color:#960050;background-color:#1e0010>@</span><span style=color:#a6e22e>click</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;reset()&#34;</span>&gt;
</span></span><span style=display:flex><span>        重置内容
</span></span><span style=display:flex><span>      &lt;/<span style=color:#f92672>el-button</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    &lt;/<span style=color:#f92672>el-form</span>&gt;
</span></span><span style=display:flex><span>  &lt;/<span style=color:#f92672>el-card</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>section</span>&gt;
</span></span></code></pre></div><ol start=3><li>开发Login组件样式:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-css data-lang=css><span style=display:flex><span>.<span style=color:#a6e22e>login-body</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>height</span>: <span style=color:#ae81ff>100</span><span style=color:#66d9ef>vh</span>; <span style=color:#960050;background-color:#1e0010>//</span> <span style=color:#960050;background-color:#1e0010>高度</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>background</span>: url(<span style=color:#e6db74>&#34;../assets/image/loginBackground.png&#34;</span>) <span style=color:#66d9ef>no-repeat</span>; <span style=color:#960050;background-color:#1e0010>//</span> <span style=color:#960050;background-color:#1e0010>背景图片（不平铺）</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>background-size</span>: <span style=color:#ae81ff>100</span><span style=color:#66d9ef>%</span> <span style=color:#ae81ff>100</span><span style=color:#66d9ef>%</span>; <span style=color:#960050;background-color:#1e0010>//</span> <span style=color:#960050;background-color:#1e0010>上下</span> <span style=color:#960050;background-color:#1e0010>左右</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>padding-top</span>: <span style=color:#ae81ff>200</span><span style=color:#66d9ef>px</span>; <span style=color:#960050;background-color:#1e0010>//</span> <span style=color:#960050;background-color:#1e0010>上内边距</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>box-sizing</span>: <span style=color:#66d9ef>border-box</span>; <span style=color:#960050;background-color:#1e0010>//</span> <span style=color:#960050;background-color:#1e0010>忽略内边距影响</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#960050;background-color:#1e0010>.login-card</span> <span style=color:#960050;background-color:#1e0010>{</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>margin</span>: <span style=color:#66d9ef>auto</span>; <span style=color:#960050;background-color:#1e0010>//</span> <span style=color:#960050;background-color:#1e0010>自居中</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>width</span>: <span style=color:#ae81ff>50</span><span style=color:#66d9ef>vh</span>; <span style=color:#960050;background-color:#1e0010>//</span> <span style=color:#960050;background-color:#1e0010>宽度</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>opacity</span>: <span style=color:#ae81ff>0.95</span>; <span style=color:#960050;background-color:#1e0010>//</span> <span style=color:#960050;background-color:#1e0010>透明度</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  .<span style=color:#a6e22e>login-btn</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>width</span>: <span style=color:#ae81ff>100</span><span style=color:#66d9ef>%</span>; <span style=color:#960050;background-color:#1e0010>//</span> <span style=color:#960050;background-color:#1e0010>宽度</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>margin</span>: <span style=color:#ae81ff>0</span> <span style=color:#66d9ef>auto</span> <span style=color:#ae81ff>10</span><span style=color:#66d9ef>px</span>; <span style=color:#960050;background-color:#1e0010>//</span> <span style=color:#960050;background-color:#1e0010>外边距</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>letter-spacing</span>: <span style=color:#ae81ff>2</span><span style=color:#66d9ef>px</span>; <span style=color:#960050;background-color:#1e0010>//</span> <span style=color:#960050;background-color:#1e0010>字母间距</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  .<span style=color:#a6e22e>forget-btn</span><span style=color:#f92672>,</span> .<span style=color:#a6e22e>reset-btn</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>float</span>: <span style=color:#66d9ef>right</span>; <span style=color:#960050;background-color:#1e0010>//</span> <span style=color:#960050;background-color:#1e0010>右浮动</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>line-height</span>: <span style=color:#ae81ff>18</span><span style=color:#66d9ef>px</span>; <span style=color:#960050;background-color:#1e0010>//</span> <span style=color:#960050;background-color:#1e0010>行高</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>}</span>
</span></span></code></pre></div><ol start=4><li>开发Login组件脚本:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>onMounted</span>, <span style=color:#a6e22e>shallowReactive</span>, <span style=color:#a6e22e>shallowRef</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;vue&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>RULE</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/const&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>ElMessage</span>, <span style=color:#a6e22e>ElNotification</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;element-plus&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>loginByAccountApi</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/api/member&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>useStore</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;vuex&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>router</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/router&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>useDark</span>, <span style=color:#a6e22e>useToggle</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@vueuse/core/index&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>getResponseData</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/util&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 通用数据 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>vuex</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>useStore</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 会员登录 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 登录面板标题
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>loginBoardTitle</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;《李氏云课堂》后台管理子系统&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#75715e>// 表单 + 表单数据 + 表单规则 todo: 上线后将默认值删除
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>loginForm</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>();
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>loginFormData</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowReactive</span>({<span style=color:#a6e22e>username</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;admin&#39;</span>, <span style=color:#a6e22e>password</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;admin&#39;</span>});
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>loginFormRule</span> <span style=color:#f92672>=</span> {<span style=color:#e6db74>&#39;username&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>RULE</span>.<span style=color:#a6e22e>USERNAME</span>, <span style=color:#e6db74>&#39;password&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>RULE</span>.<span style=color:#a6e22e>PASSWORD</span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 会员登录: 验证表单 + 发送请求 + 解析响应
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>login</span>() {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>loginForm</span>.<span style=color:#a6e22e>value</span>.<span style=color:#a6e22e>validate</span>(<span style=color:#a6e22e>valid</span> =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>valid</span>) {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>loginByAccountApi</span>(<span style=color:#a6e22e>loginFormData</span>).<span style=color:#a6e22e>then</span>(<span style=color:#a6e22e>res</span> =&gt; {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>data</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>getResponseData</span>(<span style=color:#a6e22e>res</span>);
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 登录成功: 更新登录状态 + 存储Token令牌，会员信息和权限列表 + 跳到主页面
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>data</span>) {
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>ElMessage</span>.<span style=color:#a6e22e>success</span>(<span style=color:#e6db74>&#39;登录成功！&#39;</span>);
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>vuex</span>.<span style=color:#a6e22e>dispatch</span>(<span style=color:#e6db74>&#39;setLoginFlag&#39;</span>, <span style=color:#66d9ef>true</span>);
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>sessionStorage</span>.<span style=color:#a6e22e>setItem</span>(<span style=color:#e6db74>&#39;token&#39;</span>, <span style=color:#a6e22e>data</span>[<span style=color:#e6db74>&#39;token&#39;</span>]);
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>sessionStorage</span>.<span style=color:#a6e22e>setItem</span>(<span style=color:#e6db74>&#39;member&#39;</span>, <span style=color:#a6e22e>JSON</span>.<span style=color:#a6e22e>stringify</span>(<span style=color:#a6e22e>data</span>[<span style=color:#e6db74>&#39;member&#39;</span>]));
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>sessionStorage</span>.<span style=color:#a6e22e>setItem</span>(<span style=color:#e6db74>&#39;permissions&#39;</span>, <span style=color:#a6e22e>JSON</span>.<span style=color:#a6e22e>stringify</span>(<span style=color:#a6e22e>data</span>[<span style=color:#e6db74>&#39;permissions&#39;</span>]));
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>router</span>.<span style=color:#a6e22e>push</span>(<span style=color:#e6db74>&#39;/Main&#39;</span>);
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>      });
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  });
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 记住账号 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>rememberMe</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>(<span style=color:#66d9ef>false</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 重置内容 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 重置内容
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>reset</span>() {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>loginForm</span>.<span style=color:#a6e22e>value</span>.<span style=color:#a6e22e>resetFields</span>();
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 忘记密码 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 忘记密码
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>forget</span>() {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>ElNotification</span>.<span style=color:#a6e22e>info</span>(<span style=color:#e6db74>&#39;管理员账号: admin / admin&#39;</span>);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== onMounted ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 暗黑模式
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>onMounted</span>(() =&gt; <span style=color:#a6e22e>useToggle</span>(<span style=color:#a6e22e>useDark</span>()));
</span></span></code></pre></div><h2 id=e02-系统主体组件>E02. 系统主体组件</h2><blockquote><p>心法: 系统主体组件 <code>@/views/Main.vue</code></p></blockquote><p><img src=/%E7%AC%AC4%E9%98%B6%E6%AE%B5-LESSON/JB4-5-%E5%90%8E%E5%8F%B0%E5%89%8D%E7%AB%AF/image/Main%E9%A1%B5%E9%9D%A2.png alt></p><blockquote><p>武技: 开发系统主体组件 <code>@/views/Main.vue</code></p></blockquote><ol><li>配置Main组件路由:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>Main</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;@/views/Main&#39;</span>  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>{<span style=color:#a6e22e>path</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;/Main&#39;</span>, <span style=color:#a6e22e>name</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Main&#39;</span>, <span style=color:#a6e22e>component</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>Main</span>},
</span></span></code></pre></div><ol start=2><li>开发Main组件布局:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>&lt;<span style=color:#f92672>el-container</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;main-body&#34;</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>el-aside</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;main-body-left&#34;</span> <span style=color:#a6e22e>width</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;collapse&#34;</span> <span style=color:#a6e22e>max-width</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;200px&#34;</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>el-menu</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;permissions-menu el-menu-vertical-demo&#34;</span> <span style=color:#a6e22e>unique-opened</span> <span style=color:#a6e22e>router</span>
</span></span><span style=display:flex><span>             <span style=color:#a6e22e>:collapse</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;isCollapse&#34;</span>
</span></span><span style=display:flex><span>             <span style=color:#a6e22e>:default-active</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;currentMenuIndex&#34;</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      &lt;<span style=color:#f92672>el-image</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;logo&#34;</span> <span style=color:#a6e22e>:src</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;require(&#39;../assets/image/logo.jpg&#39;)&#34;</span>/&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      &lt;<span style=color:#f92672>el-menu-item</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;house-item&#34;</span> <span style=color:#a6e22e>index</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;/Board&#34;</span> <span style=color:#a6e22e>title</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;回到后台项目首页&#34;</span>&gt;
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>template</span> <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#a6e22e>title</span>&gt;
</span></span><span style=display:flex><span>          &lt;<span style=color:#f92672>my-icon</span> <span style=color:#a6e22e>icon</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;House&#34;</span> <span style=color:#a6e22e>text</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;首页&#34;</span>/&gt;
</span></span><span style=display:flex><span>        &lt;/<span style=color:#f92672>template</span>&gt;
</span></span><span style=display:flex><span>      &lt;/<span style=color:#f92672>el-menu-item</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      &lt;<span style=color:#f92672>el-sub-menu</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;permissions&#34;</span>
</span></span><span style=display:flex><span>                   <span style=color:#a6e22e>v-for</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;(permission, i) in permissions&#34;</span> <span style=color:#a6e22e>:key</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;permission[&#39;id&#39;]&#34;</span>
</span></span><span style=display:flex><span>                   <span style=color:#a6e22e>:index</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;i.toString()&#34;</span> <span style=color:#a6e22e>:title</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;permission[&#39;info&#39;]&#34;</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>template</span> <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#a6e22e>title</span>&gt;
</span></span><span style=display:flex><span>          &lt;<span style=color:#f92672>my-icon</span> <span style=color:#a6e22e>:icon</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;permission[&#39;icon&#39;]&#34;</span> <span style=color:#a6e22e>:text</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;permission[&#39;title&#39;]&#34;</span>/&gt;
</span></span><span style=display:flex><span>        &lt;/<span style=color:#f92672>template</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>el-menu-item</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;sub-permissions&#34;</span>
</span></span><span style=display:flex><span>                      <span style=color:#a6e22e>v-for</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;subPermission in permission[&#39;subPermissions&#39;]&#34;</span> <span style=color:#a6e22e>:key</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;subPermission[&#39;id&#39;]&#34;</span>
</span></span><span style=display:flex><span>                      <span style=color:#a6e22e>:index</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;subPermission[&#39;url&#39;]&#34;</span> <span style=color:#a6e22e>:title</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;subPermission[&#39;info&#39;]&#34;</span>&gt;
</span></span><span style=display:flex><span>          &lt;<span style=color:#f92672>my-icon</span> <span style=color:#a6e22e>:icon</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;subPermission[&#39;icon&#39;]&#34;</span> <span style=color:#a6e22e>:text</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;subPermission[&#39;title&#39;]&#34;</span>/&gt;
</span></span><span style=display:flex><span>        &lt;/<span style=color:#f92672>el-menu-item</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      &lt;/<span style=color:#f92672>el-sub-menu</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    &lt;/<span style=color:#f92672>el-menu</span>&gt;
</span></span><span style=display:flex><span>  &lt;/<span style=color:#f92672>el-aside</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>el-container</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;main-body-right&#34;</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>el-header</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;main-body-right-head&#34;</span>&gt;
</span></span><span style=display:flex><span>      &lt;<span style=color:#f92672>el-row</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;is-align-middle&#34;</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>el-col</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;fold-expand&#34;</span> <span style=color:#a6e22e>:span</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;2&#34;</span>&gt;
</span></span><span style=display:flex><span>          &lt;<span style=color:#f92672>el-radio-group</span> <span style=color:#a6e22e>v-model</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;isCollapse&#34;</span>&gt;
</span></span><span style=display:flex><span>            &lt;<span style=color:#f92672>el-radio-button</span> <span style=color:#a6e22e>:label</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;!isCollapse&#34;</span>&gt;
</span></span><span style=display:flex><span>              &lt;<span style=color:#f92672>my-icon</span> <span style=color:#a6e22e>size</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;20&#34;</span> <span style=color:#a6e22e>:icon</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;!isCollapse ? &#39;Fold&#39; : &#39;Expand&#39;&#34;</span>/&gt;
</span></span><span style=display:flex><span>            &lt;/<span style=color:#f92672>el-radio-button</span>&gt;
</span></span><span style=display:flex><span>          &lt;/<span style=color:#f92672>el-radio-group</span>&gt;
</span></span><span style=display:flex><span>        &lt;/<span style=color:#f92672>el-col</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>el-col</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;project-title&#34;</span> <span style=color:#a6e22e>:span</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;7&#34;</span>&gt;
</span></span><span style=display:flex><span>          &lt;<span style=color:#f92672>h2</span>&gt;{{ PROJECT_INFO.title }}&lt;/<span style=color:#f92672>h2</span>&gt;
</span></span><span style=display:flex><span>        &lt;/<span style=color:#f92672>el-col</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>el-col</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;operation-btn&#34;</span> <span style=color:#a6e22e>:span</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;6&#34;</span> <span style=color:#a6e22e>:offset</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;7&#34;</span>&gt;
</span></span><span style=display:flex><span>          &lt;<span style=color:#f92672>el-divider</span> <span style=color:#a6e22e>direction</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;vertical&#34;</span>/&gt;
</span></span><span style=display:flex><span>          &lt;<span style=color:#f92672>el-button</span> <span style=color:#a6e22e>icon</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;search&#34;</span> <span style=color:#960050;background-color:#1e0010>@</span><span style=color:#a6e22e>click</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;notYet&#34;</span> <span style=color:#a6e22e>size</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;small&#34;</span> <span style=color:#a6e22e>round</span>/&gt;
</span></span><span style=display:flex><span>          &lt;<span style=color:#f92672>el-button</span> <span style=color:#a6e22e>icon</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;bell&#34;</span> <span style=color:#960050;background-color:#1e0010>@</span><span style=color:#a6e22e>click</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;notYet&#34;</span> <span style=color:#a6e22e>size</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;small&#34;</span> <span style=color:#a6e22e>round</span>/&gt;
</span></span><span style=display:flex><span>          &lt;<span style=color:#f92672>el-button</span> <span style=color:#a6e22e>icon</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;list&#34;</span> <span style=color:#960050;background-color:#1e0010>@</span><span style=color:#a6e22e>click</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;openProjectInfoDrawer()&#34;</span> <span style=color:#a6e22e>size</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;small&#34;</span> <span style=color:#a6e22e>round</span>/&gt;
</span></span><span style=display:flex><span>          &lt;<span style=color:#f92672>el-button</span> <span style=color:#a6e22e>icon</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;calendar&#34;</span> <span style=color:#960050;background-color:#1e0010>@</span><span style=color:#a6e22e>click</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;openCalendarDrawer()&#34;</span> <span style=color:#a6e22e>size</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;small&#34;</span> <span style=color:#a6e22e>round</span>/&gt;
</span></span><span style=display:flex><span>          &lt;<span style=color:#f92672>el-divider</span> <span style=color:#a6e22e>direction</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;vertical&#34;</span>/&gt;
</span></span><span style=display:flex><span>          &lt;<span style=color:#f92672>el-switch</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;theme-switch&#34;</span> <span style=color:#a6e22e>v-model</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;currentTheme&#34;</span> <span style=color:#960050;background-color:#1e0010>@</span><span style=color:#a6e22e>change</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;toggleTheme()&#34;</span> <span style=color:#a6e22e>inline-prompt</span>
</span></span><span style=display:flex><span>                     <span style=color:#a6e22e>title</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;开启暗黑模式&#34;</span>/&gt;
</span></span><span style=display:flex><span>          &lt;<span style=color:#f92672>el-divider</span> <span style=color:#a6e22e>direction</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;vertical&#34;</span>/&gt;
</span></span><span style=display:flex><span>        &lt;/<span style=color:#f92672>el-col</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>el-col</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;member-avatar&#34;</span> <span style=color:#a6e22e>:span</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;1&#34;</span>&gt;
</span></span><span style=display:flex><span>          &lt;<span style=color:#f92672>el-avatar</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;avatar-img&#34;</span> <span style=color:#a6e22e>:size</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;45&#34;</span> <span style=color:#a6e22e>:src</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;MINIO_AVATAR(member[&#39;avatar&#39;])&#34;</span>
</span></span><span style=display:flex><span>                     <span style=color:#960050;background-color:#1e0010>@</span><span style=color:#a6e22e>click</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;openMemberInfoDrawer()&#34;</span>/&gt;
</span></span><span style=display:flex><span>        &lt;/<span style=color:#f92672>el-col</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>el-col</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;logout&#34;</span> <span style=color:#a6e22e>:span</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;1&#34;</span>&gt;
</span></span><span style=display:flex><span>          &lt;<span style=color:#f92672>my-confirm</span> <span style=color:#a6e22e>title</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;确定登出账号？&#34;</span> <span style=color:#960050;background-color:#1e0010>@</span><span style=color:#a6e22e>confirm</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;logout()&#34;</span> <span style=color:#a6e22e>btn-text</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;EXIT&#34;</span>/&gt;
</span></span><span style=display:flex><span>        &lt;/<span style=color:#f92672>el-col</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      &lt;/<span style=color:#f92672>el-row</span>&gt;
</span></span><span style=display:flex><span>    &lt;/<span style=color:#f92672>el-header</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>el-main</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;main-body-right-main&#34;</span>&gt;
</span></span><span style=display:flex><span>      &lt;<span style=color:#f92672>router-view</span>/&gt;
</span></span><span style=display:flex><span>    &lt;/<span style=color:#f92672>el-main</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  &lt;/<span style=color:#f92672>el-container</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>el-container</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>el-drawer</span> <span style=color:#a6e22e>title</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;详情抽屉&#34;</span> <span style=color:#a6e22e>v-model</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;descDrawer&#34;</span> <span style=color:#a6e22e>size</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;35%&#34;</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>my-list</span> <span style=color:#a6e22e>:title</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;descTitle&#34;</span> <span style=color:#a6e22e>:items</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;descItems&#34;</span>/&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>el-drawer</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>el-drawer</span> <span style=color:#a6e22e>title</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;日历抽屉&#34;</span> <span style=color:#a6e22e>v-model</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;calendarDrawer&#34;</span> <span style=color:#a6e22e>size</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;50%&#34;</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>el-calendar</span> <span style=color:#a6e22e>v-model</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;now&#34;</span>/&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>el-drawer</span>&gt;
</span></span></code></pre></div><ol start=3><li>开发Main组件样式:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-css data-lang=css><span style=display:flex><span>.<span style=color:#a6e22e>main-body-left</span> {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>height</span>: <span style=color:#ae81ff>100</span><span style=color:#66d9ef>vh</span>; <span style=color:#960050;background-color:#1e0010>//</span> <span style=color:#960050;background-color:#1e0010>高度</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>border-right</span>: <span style=color:#ae81ff>1</span><span style=color:#66d9ef>px</span> <span style=color:#66d9ef>solid</span> <span style=color:#ae81ff>#cccccc</span>; <span style=color:#960050;background-color:#1e0010>//</span> <span style=color:#960050;background-color:#1e0010>右边框</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#960050;background-color:#1e0010>.logo</span> <span style=color:#960050;background-color:#1e0010>{</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>padding</span>: <span style=color:#ae81ff>10</span><span style=color:#66d9ef>px</span>; <span style=color:#960050;background-color:#1e0010>//</span> <span style=color:#960050;background-color:#1e0010>内边距</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  .<span style=color:#a6e22e>el-menu-vertical-demo</span>:<span style=color:#a6e22e>not</span><span style=color:#f92672>(</span>.<span style=color:#a6e22e>el-menu--collapse</span><span style=color:#f92672>)</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>width</span>: <span style=color:#ae81ff>200</span><span style=color:#66d9ef>px</span>; <span style=color:#960050;background-color:#1e0010>//</span> <span style=color:#960050;background-color:#1e0010>宽度</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>height</span>: <span style=color:#ae81ff>100</span><span style=color:#66d9ef>vh</span>; <span style=color:#960050;background-color:#1e0010>//</span> <span style=color:#960050;background-color:#1e0010>高度</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>letter-spacing</span>: <span style=color:#ae81ff>2</span><span style=color:#66d9ef>px</span>; <span style=color:#960050;background-color:#1e0010>//</span> <span style=color:#960050;background-color:#1e0010>字间距</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  .<span style=color:#a6e22e>el-icon</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>margin</span>: <span style=color:#ae81ff>0</span> <span style=color:#ae81ff>10</span><span style=color:#66d9ef>px</span>; <span style=color:#960050;background-color:#1e0010>//</span> <span style=color:#960050;background-color:#1e0010>上下外边距</span> <span style=color:#960050;background-color:#1e0010>左右外边距</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>.<span style=color:#a6e22e>main-body-right-head</span> {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#960050;background-color:#1e0010>.avatar-img</span> <span style=color:#960050;background-color:#1e0010>{</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>margin</span>: <span style=color:#ae81ff>10</span><span style=color:#66d9ef>px</span>; <span style=color:#960050;background-color:#1e0010>//</span> <span style=color:#960050;background-color:#1e0010>外边距</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>outline</span>: <span style=color:#ae81ff>1</span><span style=color:#66d9ef>px</span> <span style=color:#66d9ef>solid</span> <span style=color:#ae81ff>#854040</span>; <span style=color:#960050;background-color:#1e0010>//</span> <span style=color:#960050;background-color:#1e0010>边框</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>border</span>: <span style=color:#ae81ff>1</span><span style=color:#66d9ef>px</span> <span style=color:#66d9ef>solid</span> <span style=color:#ae81ff>#854040</span>; <span style=color:#960050;background-color:#1e0010>//</span> <span style=color:#960050;background-color:#1e0010>边框</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>}</span>
</span></span></code></pre></div><ol start=4><li>开发Main组件脚本:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>MyIcon</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/components/MyIcon&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>MyConfirm</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/components/MyConfirm&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>MyList</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/components/MyList&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>useDark</span>, <span style=color:#a6e22e>useToggle</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;@vueuse/core&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>useStore</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;vuex&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>shallowRef</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;vue&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>MINIO_AVATAR</span>, <span style=color:#a6e22e>PROJECT_INFO</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/const&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>genderStr</span>, <span style=color:#a6e22e>dateStr</span>, <span style=color:#a6e22e>notYet</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/util&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>ElMessage</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;element-plus&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>router</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/router&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 通用数据 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>vuex</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>useStore</span>();
</span></span><span style=display:flex><span><span style=color:#75715e>// 详情抽屉 + 详情标题 + 详情数据
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>descDrawer</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>(<span style=color:#66d9ef>null</span>);
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>descTitle</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>(<span style=color:#e6db74>&#39;&#39;</span>);
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>descItems</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>([]);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 功能菜单 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 当前选中权限的index值
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>currentMenuIndex</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>(<span style=color:#e6db74>&#39;/Board&#39;</span>);
</span></span><span style=display:flex><span><span style=color:#75715e>// 左侧权限列表是否折叠
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>isCollapse</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>(<span style=color:#66d9ef>false</span>);
</span></span><span style=display:flex><span><span style=color:#75715e>// 当前登录的会员的权限列表
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>permissions</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>JSON</span>.<span style=color:#a6e22e>parse</span>(<span style=color:#a6e22e>sessionStorage</span>.<span style=color:#a6e22e>getItem</span>(<span style=color:#e6db74>&#39;permissions&#39;</span>));
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 项目信息 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 打开抽屉: 设计列表标题 + 设计列表项 + 打开抽屉
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>openProjectInfoDrawer</span>() {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>descTitle</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;查看项目信息&#39;</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>descItems</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> [
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;项目标题&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>PROJECT_INFO</span>.<span style=color:#a6e22e>title</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;项目作者&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>PROJECT_INFO</span>.<span style=color:#a6e22e>author</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;项目版本&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>PROJECT_INFO</span>.<span style=color:#a6e22e>version</span>, <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;tag&#39;</span>, <span style=color:#a6e22e>tagType</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;primary&#39;</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;后端地址&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>PROJECT_INFO</span>.<span style=color:#a6e22e>host</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;前端地址&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>PROJECT_INFO</span>.<span style=color:#a6e22e>webHost</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;文档地址&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>PROJECT_INFO</span>.<span style=color:#a6e22e>docHost</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;接口统计&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>PROJECT_INFO</span>.<span style=color:#a6e22e>getApi</span>, <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;tag&#39;</span>, <span style=color:#a6e22e>prefix</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;GET - &#39;</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;接口统计&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>PROJECT_INFO</span>.<span style=color:#a6e22e>postApi</span>, <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;tag&#39;</span>, <span style=color:#a6e22e>prefix</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;POST - &#39;</span>,},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;项目描述&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>PROJECT_INFO</span>.<span style=color:#a6e22e>info</span>, <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;card&#39;</span>},
</span></span><span style=display:flex><span>  ];
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>descDrawer</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 系统日历 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 抽屉
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>calendarDrawer</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>();
</span></span><span style=display:flex><span><span style=color:#75715e>// 当前时间
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>now</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>(<span style=color:#66d9ef>new</span> Date());
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 打开抽屉
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>openCalendarDrawer</span>() {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>calendarDrawer</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 暗黑模式 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 根据localStorage判断，当前是否正在使用暗黑模式
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>currentTheme</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>(<span style=color:#a6e22e>localStorage</span>.<span style=color:#a6e22e>getItem</span>(<span style=color:#e6db74>&#39;vueuse-color-scheme&#39;</span>) <span style=color:#f92672>===</span> <span style=color:#e6db74>&#39;auto&#39;</span>)
</span></span><span style=display:flex><span><span style=color:#75715e>// 切换暗黑模式和默认模式
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>toggleTheme</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>useToggle</span>(<span style=color:#a6e22e>useDark</span>());
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 会员信息 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 当前登录的会员信息
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>member</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>JSON</span>.<span style=color:#a6e22e>parse</span>(<span style=color:#a6e22e>sessionStorage</span>.<span style=color:#a6e22e>getItem</span>(<span style=color:#e6db74>&#39;member&#39;</span>));
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 打开抽屉: 设计列表标题 + 设计列表项 + 打开抽屉
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>openMemberInfoDrawer</span>() {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>descTitle</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;查看当前登录人员信息&#39;</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>descItems</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> [
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;会员头像&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>member</span>[<span style=color:#e6db74>&#39;avatar&#39;</span>], <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;img&#39;</span>, <span style=color:#a6e22e>minio</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>MINIO_AVATAR</span>.<span style=color:#a6e22e>value</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;会员账号&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>member</span>[<span style=color:#e6db74>&#39;username&#39;</span>]},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;会员年龄&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>member</span>[<span style=color:#e6db74>&#39;age&#39;</span>]},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;会员性别&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>member</span>[<span style=color:#e6db74>&#39;gender&#39;</span>], <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;tag&#39;</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>genderStr</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;会员星座&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>member</span>[<span style=color:#e6db74>&#39;zodiac&#39;</span>]},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;所属省份&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>member</span>[<span style=color:#e6db74>&#39;province&#39;</span>]},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;邮箱地址&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>member</span>[<span style=color:#e6db74>&#39;email&#39;</span>]},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;真实姓名&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>member</span>[<span style=color:#e6db74>&#39;realname&#39;</span>]},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;手机号码&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>member</span>[<span style=color:#e6db74>&#39;phone&#39;</span>]},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;身份证号&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>member</span>[<span style=color:#e6db74>&#39;idcard&#39;</span>]},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;粉丝数量&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>member</span>[<span style=color:#e6db74>&#39;fanCount&#39;</span>]},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;创建时间&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>member</span>[<span style=color:#e6db74>&#39;created&#39;</span>], <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>dateStr</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;修改时间&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>member</span>[<span style=color:#e6db74>&#39;updated&#39;</span>], <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>dateStr</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;会员描述&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>member</span>[<span style=color:#e6db74>&#39;info&#39;</span>], <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;card&#39;</span>},
</span></span><span style=display:flex><span>  ];
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>descDrawer</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 退出登录 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 退出登录: 清空sessionStorage + 更新登录状态 + 成功提示 + 跳入登录页面
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>logout</span>() {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>sessionStorage</span>.<span style=color:#a6e22e>clear</span>();
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>vuex</span>.<span style=color:#a6e22e>dispatch</span>(<span style=color:#e6db74>&#39;setLoginFlag&#39;</span>, <span style=color:#66d9ef>false</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>ElMessage</span>.<span style=color:#a6e22e>success</span>(<span style=color:#e6db74>&#39;登出成功！&#39;</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>router</span>.<span style=color:#a6e22e>push</span>(<span style=color:#e6db74>&#39;/&#39;</span>);
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=e03-首页面板组件>E03. 首页面板组件</h2><blockquote><p>心法: 首页面板组件 <code>@/views/Board.vue</code></p></blockquote><p><img src=/%E7%AC%AC4%E9%98%B6%E6%AE%B5-LESSON/JB4-5-%E5%90%8E%E5%8F%B0%E5%89%8D%E7%AB%AF/image/Board%E9%A1%B5%E9%9D%A2A.png alt>
<img src=/%E7%AC%AC4%E9%98%B6%E6%AE%B5-LESSON/JB4-5-%E5%90%8E%E5%8F%B0%E5%89%8D%E7%AB%AF/image/Board%E9%A1%B5%E9%9D%A2B.png alt></p><blockquote><p>武技: 开发首页面板组件 <code>@/views/Board.vue</code></p></blockquote><ol><li>配置Board组件路由:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>Board</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;@/views/Board&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>path</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;/Main&#39;</span>, <span style=color:#a6e22e>name</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Main&#39;</span>, <span style=color:#a6e22e>component</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>Main</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>redirect</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;/Board&#39;</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>children</span><span style=color:#f92672>:</span> [
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>path</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;/Board&#39;</span>, <span style=color:#a6e22e>name</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Board&#39;</span>, <span style=color:#a6e22e>component</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>Board</span>},
</span></span><span style=display:flex><span>  ]
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><ol start=2><li>开发Board组件布局:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>&lt;<span style=color:#f92672>section</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;board-head&#34;</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>el-row</span> <span style=color:#a6e22e>:gutter</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;16&#34;</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>el-col</span> <span style=color:#a6e22e>:span</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;6&#34;</span> <span style=color:#a6e22e>v-for</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;statisticCard in statisticCards&#34;</span>&gt;
</span></span><span style=display:flex><span>      &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;statistic-card&#34;</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>el-statistic</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;statistic-body&#34;</span> <span style=color:#a6e22e>:value</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;statisticCard[&#39;value&#39;]&#34;</span>&gt;
</span></span><span style=display:flex><span>          &lt;<span style=color:#f92672>template</span> <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#a6e22e>title</span>&gt;
</span></span><span style=display:flex><span>            &lt;<span style=color:#f92672>el-link</span> <span style=color:#a6e22e>icon</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;InfoFilled&#34;</span> <span style=color:#a6e22e>:underline</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;false&#34;</span> <span style=color:#a6e22e>:title</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;statisticCard[&#39;content&#39;]&#34;</span>&gt;
</span></span><span style=display:flex><span>              &amp;nbsp;{{ statisticCard[&#39;title&#39;] }}
</span></span><span style=display:flex><span>            &lt;/<span style=color:#f92672>el-link</span>&gt;
</span></span><span style=display:flex><span>          &lt;/<span style=color:#f92672>template</span>&gt;
</span></span><span style=display:flex><span>        &lt;/<span style=color:#f92672>el-statistic</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;statistic-footer&#34;</span>&gt;
</span></span><span style=display:flex><span>          &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;footer-item&#34;</span>&gt;
</span></span><span style=display:flex><span>            &lt;<span style=color:#f92672>span</span>&gt;than yesterday&lt;/<span style=color:#f92672>span</span>&gt;
</span></span><span style=display:flex><span>            &lt;<span style=color:#f92672>span</span> <span style=color:#a6e22e>:class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;statisticCard[&#39;increase&#39;] &gt; 0 ? &#39;green&#39;: &#39;red&#39;&#34;</span>&gt;
</span></span><span style=display:flex><span>            &lt;<span style=color:#f92672>span</span>&gt;{{ statisticCard[&#39;increase&#39;] }}%&lt;/<span style=color:#f92672>span</span>&gt;
</span></span><span style=display:flex><span>            &lt;<span style=color:#f92672>el-icon</span>&gt;
</span></span><span style=display:flex><span>              &lt;<span style=color:#f92672>component</span> <span style=color:#a6e22e>:is</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;statisticCard[&#39;increase&#39;] &gt; 0 ? &#39;CaretTop&#39;: &#39;CaretBottom&#39;&#34;</span>/&gt;
</span></span><span style=display:flex><span>            &lt;/<span style=color:#f92672>el-icon</span>&gt;
</span></span><span style=display:flex><span>          &lt;/<span style=color:#f92672>span</span>&gt;
</span></span><span style=display:flex><span>          &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>        &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>    &lt;/<span style=color:#f92672>el-col</span>&gt;
</span></span><span style=display:flex><span>  &lt;/<span style=color:#f92672>el-row</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>section</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>section</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;board-body&#34;</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>el-row</span> <span style=color:#a6e22e>:gutter</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;16&#34;</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>el-col</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;chart-board&#34;</span> <span style=color:#a6e22e>:span</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;12&#34;</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      &lt;<span style=color:#f92672>el-divider</span>&gt;
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>el-button</span> <span style=color:#a6e22e>link</span> <span style=color:#a6e22e>icon</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;PieChart&#34;</span>&gt;会员 - 性别 · 图例&lt;/<span style=color:#f92672>el-button</span>&gt;
</span></span><span style=display:flex><span>      &lt;/<span style=color:#f92672>el-divider</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>id</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;memberGenderBoard&#34;</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;board&#34;</span>&gt;&lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      &lt;<span style=color:#f92672>el-divider</span>&gt;
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>el-button</span> <span style=color:#a6e22e>link</span> <span style=color:#a6e22e>icon</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;Histogram&#34;</span>&gt;课程 - 评分 · 图例&lt;/<span style=color:#f92672>el-button</span>&gt;
</span></span><span style=display:flex><span>      &lt;/<span style=color:#f92672>el-divider</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>id</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;courseStarBoard&#34;</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;board&#34;</span>&gt;&lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    &lt;/<span style=color:#f92672>el-col</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>el-col</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;skill-board&#34;</span> <span style=color:#a6e22e>:span</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;12&#34;</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      &lt;<span style=color:#f92672>el-divider</span>&gt;
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>el-button</span> <span style=color:#a6e22e>link</span> <span style=color:#a6e22e>icon</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;CoffeeCup&#34;</span>&gt;项目技术栈&lt;/<span style=color:#f92672>el-button</span>&gt;
</span></span><span style=display:flex><span>      &lt;/<span style=color:#f92672>el-divider</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      &lt;<span style=color:#f92672>el-descriptions</span> <span style=color:#a6e22e>:column</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;1&#34;</span> <span style=color:#a6e22e>border</span>&gt;
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>el-descriptions-item</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;skill-descriptions-item&#34;</span> <span style=color:#a6e22e>:label</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;projectSkill[&#39;key&#39;]&#34;</span> <span style=color:#a6e22e>width</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;60&#34;</span>
</span></span><span style=display:flex><span>                              <span style=color:#a6e22e>v-for</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;projectSkill in PROJECT_SKILLS&#34;</span> <span style=color:#a6e22e>:key</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;projectSkill[&#39;key&#39;]&#34;</span>&gt;
</span></span><span style=display:flex><span>          &lt;<span style=color:#f92672>template</span> <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#a6e22e>default</span>&gt;
</span></span><span style=display:flex><span>            &lt;<span style=color:#f92672>span</span>&gt;{{ projectSkill[&#39;val&#39;] }}&amp;nbsp;&lt;/<span style=color:#f92672>span</span>&gt;
</span></span><span style=display:flex><span>            &lt;<span style=color:#f92672>el-tag</span>&gt;{{ projectSkill[&#39;version&#39;] }}&lt;/<span style=color:#f92672>el-tag</span>&gt;
</span></span><span style=display:flex><span>          &lt;/<span style=color:#f92672>template</span>&gt;
</span></span><span style=display:flex><span>        &lt;/<span style=color:#f92672>el-descriptions-item</span>&gt;
</span></span><span style=display:flex><span>      &lt;/<span style=color:#f92672>el-descriptions</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    &lt;/<span style=color:#f92672>el-col</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  &lt;/<span style=color:#f92672>el-row</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>el-divider</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;foot-divider-tip&#34;</span>&gt;已经到最底了&lt;/<span style=color:#f92672>el-divider</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>section</span>&gt;
</span></span></code></pre></div><ol start=3><li>开发Board组件样式:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-css data-lang=css><span style=display:flex><span>.<span style=color:#a6e22e>board-head</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>margin-bottom</span>: <span style=color:#ae81ff>40</span><span style=color:#66d9ef>px</span>; <span style=color:#960050;background-color:#1e0010>//</span> <span style=color:#960050;background-color:#1e0010>下外边距</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#960050;background-color:#1e0010>.el-statistic</span> <span style=color:#960050;background-color:#1e0010>{</span>
</span></span><span style=display:flex><span>    --el-statistic-content-font-size: <span style=color:#ae81ff>30</span><span style=color:#66d9ef>px</span>; <span style=color:#960050;background-color:#1e0010>//</span> <span style=color:#960050;background-color:#1e0010>value字号</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#960050;background-color:#1e0010>.el-icon</span> <span style=color:#960050;background-color:#1e0010>{</span>
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>margin-left</span>: <span style=color:#ae81ff>4</span><span style=color:#66d9ef>px</span>; <span style=color:#960050;background-color:#1e0010>//</span> <span style=color:#960050;background-color:#1e0010>左外边距</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  <span style=color:#960050;background-color:#1e0010>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  .<span style=color:#a6e22e>statistic-card</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>height</span>: <span style=color:#ae81ff>100</span><span style=color:#66d9ef>%</span>; <span style=color:#960050;background-color:#1e0010>//</span> <span style=color:#960050;background-color:#1e0010>高度</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>border-radius</span>: <span style=color:#ae81ff>4</span><span style=color:#66d9ef>px</span>; <span style=color:#960050;background-color:#1e0010>//</span> <span style=color:#960050;background-color:#1e0010>圆角</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>background-color</span>: <span style=color:#a6e22e>var</span>(<span style=color:#f92672>--</span>el<span style=color:#f92672>-</span>bg<span style=color:#f92672>-</span><span style=color:#66d9ef>color</span><span style=color:#f92672>-</span><span style=color:#66d9ef>overlay</span>); <span style=color:#960050;background-color:#1e0010>//</span> <span style=color:#960050;background-color:#1e0010>背景色</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>padding</span>: <span style=color:#ae81ff>20</span><span style=color:#66d9ef>px</span> <span style=color:#ae81ff>20</span><span style=color:#66d9ef>px</span> <span style=color:#ae81ff>0</span>; <span style=color:#960050;background-color:#1e0010>//</span> <span style=color:#960050;background-color:#1e0010>上内边距，左右内边距，下内边距</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>text-align</span>: <span style=color:#66d9ef>center</span>; <span style=color:#960050;background-color:#1e0010>//</span> <span style=color:#960050;background-color:#1e0010>内容居中</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  .<span style=color:#a6e22e>statistic-footer</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>display</span>: <span style=color:#66d9ef>flex</span>; <span style=color:#960050;background-color:#1e0010>//</span> <span style=color:#960050;background-color:#1e0010>flex布局</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>justify-content</span>: <span style=color:#66d9ef>center</span>; <span style=color:#960050;background-color:#1e0010>//</span> <span style=color:#960050;background-color:#1e0010>左右居中</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>flex-wrap</span>: <span style=color:#66d9ef>wrap</span>; <span style=color:#960050;background-color:#1e0010>//</span> <span style=color:#960050;background-color:#1e0010>flex环绕</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>font-size</span>: <span style=color:#ae81ff>12</span><span style=color:#66d9ef>px</span>; <span style=color:#960050;background-color:#1e0010>//</span> <span style=color:#960050;background-color:#1e0010>字号</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>color</span>: <span style=color:#a6e22e>var</span>(<span style=color:#f92672>--</span>el<span style=color:#f92672>-</span><span style=color:#66d9ef>text</span><span style=color:#f92672>-</span><span style=color:#66d9ef>color</span><span style=color:#f92672>-</span>regular); <span style=color:#960050;background-color:#1e0010>//</span> <span style=color:#960050;background-color:#1e0010>前景色</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>margin-top</span>: <span style=color:#ae81ff>16</span><span style=color:#66d9ef>px</span>; <span style=color:#960050;background-color:#1e0010>//</span> <span style=color:#960050;background-color:#1e0010>上外边距</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  .<span style=color:#a6e22e>statistic-footer</span> .<span style=color:#a6e22e>footer-item</span> <span style=color:#f92672>span</span>:<span style=color:#a6e22e>last-child</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>display</span>: <span style=color:#66d9ef>inline-flex</span>; <span style=color:#960050;background-color:#1e0010>//</span> <span style=color:#960050;background-color:#1e0010>flex布局</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>align-items</span>: <span style=color:#66d9ef>center</span>; <span style=color:#960050;background-color:#1e0010>//</span> <span style=color:#960050;background-color:#1e0010>居中</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>margin-left</span>: <span style=color:#ae81ff>4</span><span style=color:#66d9ef>px</span>; <span style=color:#960050;background-color:#1e0010>//</span> <span style=color:#960050;background-color:#1e0010>左外边距</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  .<span style=color:#a6e22e>green</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>color</span>: <span style=color:#a6e22e>var</span>(<span style=color:#f92672>--</span>el<span style=color:#f92672>-</span><span style=color:#66d9ef>color</span><span style=color:#f92672>-</span>success); <span style=color:#960050;background-color:#1e0010>//</span> <span style=color:#960050;background-color:#1e0010>绿色</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  .<span style=color:#a6e22e>red</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>color</span>: <span style=color:#a6e22e>var</span>(<span style=color:#f92672>--</span>el<span style=color:#f92672>-</span><span style=color:#66d9ef>color</span><span style=color:#f92672>-</span>error); <span style=color:#960050;background-color:#1e0010>//</span> <span style=color:#960050;background-color:#1e0010>红色</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>.<span style=color:#a6e22e>board-body</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>height</span>: <span style=color:#ae81ff>500</span><span style=color:#66d9ef>px</span>; <span style=color:#960050;background-color:#1e0010>//</span> <span style=color:#960050;background-color:#1e0010>高度</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#960050;background-color:#1e0010>.board</span> <span style=color:#960050;background-color:#1e0010>{</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>width</span>: <span style=color:#ae81ff>100</span><span style=color:#66d9ef>%</span>; <span style=color:#960050;background-color:#1e0010>//</span> <span style=color:#960050;background-color:#1e0010>宽度</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>height</span>: <span style=color:#ae81ff>447</span><span style=color:#66d9ef>px</span>; <span style=color:#960050;background-color:#1e0010>//</span> <span style=color:#960050;background-color:#1e0010>高度</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>border</span>: <span style=color:#ae81ff>1</span><span style=color:#66d9ef>px</span> <span style=color:#66d9ef>solid</span> <span style=color:#ae81ff>#5470C6</span>; <span style=color:#960050;background-color:#1e0010>//</span> <span style=color:#960050;background-color:#1e0010>边框</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  .<span style=color:#a6e22e>foot-divider-tip</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>padding-bottom</span>: <span style=color:#ae81ff>50</span><span style=color:#66d9ef>px</span>; <span style=color:#960050;background-color:#1e0010>//</span> <span style=color:#960050;background-color:#1e0010>下外边距</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>}</span>
</span></span></code></pre></div><ol start=4><li>开发Board组件脚本:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>onMounted</span>, <span style=color:#a6e22e>shallowRef</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;vue&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>countTodayApi</span> <span style=color:#a6e22e>as</span> <span style=color:#a6e22e>memberCountTodayApi</span>, <span style=color:#a6e22e>countTotalApi</span> <span style=color:#a6e22e>as</span> <span style=color:#a6e22e>memberCountTotalApi</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/api/member&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>countTodayApi</span> <span style=color:#a6e22e>as</span> <span style=color:#a6e22e>orderCountTodayApi</span>, <span style=color:#a6e22e>countTotalApi</span> <span style=color:#a6e22e>as</span> <span style=color:#a6e22e>orderCountTotalApi</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/api/order&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>countGenderApi</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/api/member&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>countStarApi</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/api/course&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>as</span> <span style=color:#a6e22e>echarts</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;echarts&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>barChartOption</span>, <span style=color:#a6e22e>getResponseData</span>, <span style=color:#a6e22e>pieChartOption</span>, <span style=color:#a6e22e>dom</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/util&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>PROJECT_SKILLS</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/const&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 统计组件数据 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 今日会员数量 + 今日订单数量 + 会员总数 + 订单总数
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>memberTodayCount</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>(<span style=color:#ae81ff>0</span>);
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>orderTodayCount</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>(<span style=color:#ae81ff>0</span>);
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>memberTotalCount</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>(<span style=color:#ae81ff>0</span>);
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>orderTotalCount</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>(<span style=color:#ae81ff>0</span>);
</span></span><span style=display:flex><span><span style=color:#75715e>// 统计组件数据列表
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>statisticCards</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>([
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>memberTodayCount</span>, <span style=color:#a6e22e>title</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;今日会员数量（人）&#39;</span>, <span style=color:#a6e22e>content</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;展示今日注册的会员数量&#39;</span>, <span style=color:#a6e22e>increase</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;15&#39;</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>orderTodayCount</span>, <span style=color:#a6e22e>title</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;今日订单数量（单）&#39;</span>, <span style=color:#a6e22e>content</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;展示今日添加的订单数量&#39;</span>, <span style=color:#a6e22e>increase</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;-25&#39;</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>memberTotalCount</span>, <span style=color:#a6e22e>title</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;全部会员总数（人）&#39;</span>, <span style=color:#a6e22e>content</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;展示全部会员总数&#39;</span>, <span style=color:#a6e22e>increase</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;5&#39;</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>orderTotalCount</span>, <span style=color:#a6e22e>title</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;全部订单总数（单）&#39;</span>, <span style=color:#a6e22e>content</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;展示全部订单总数&#39;</span>, <span style=color:#a6e22e>increase</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;-2&#39;</span>},
</span></span><span style=display:flex><span>]);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 获取统计组件数据: 获取日增会员数量 + 日增会员数量 + 会员总数 + 订单总数
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>getStatisticCardData</span>() {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>memberTodayCount</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>getResponseData</span>(<span style=color:#66d9ef>await</span> <span style=color:#a6e22e>memberCountTodayApi</span>());
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>orderTodayCount</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>getResponseData</span>(<span style=color:#66d9ef>await</span> <span style=color:#a6e22e>orderCountTodayApi</span>());
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>memberTotalCount</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>getResponseData</span>(<span style=color:#66d9ef>await</span> <span style=color:#a6e22e>memberCountTotalApi</span>());
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>orderTotalCount</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>getResponseData</span>(<span style=color:#66d9ef>await</span> <span style=color:#a6e22e>orderCountTotalApi</span>());
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 统计图表数据 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 统计会员性别: 发送请求 + 绘制饼图
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>getMemberGenderCount</span>() {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>data</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>getResponseData</span>(<span style=color:#66d9ef>await</span> <span style=color:#a6e22e>countGenderApi</span>());
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>data</span>) {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 绘制饼图
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>option</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>pieChartOption</span>({
</span></span><span style=display:flex><span>      <span style=color:#e6db74>&#39;data&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>data</span>,
</span></span><span style=display:flex><span>      <span style=color:#e6db74>&#39;name&#39;</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;性别 - 会员数&#39;</span>
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>echarts</span>.<span style=color:#a6e22e>init</span>(<span style=color:#a6e22e>dom</span>(<span style=color:#e6db74>&#39;#memberGenderBoard&#39;</span>)).<span style=color:#a6e22e>setOption</span>(<span style=color:#a6e22e>option</span>);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 统计课程评分: 发送请求 + 准备X轴数据和Y轴数据 + 绘制柱图
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>getCourseStarCount</span>() {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>data</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>getResponseData</span>(<span style=color:#66d9ef>await</span> <span style=color:#a6e22e>countStarApi</span>());
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>data</span>) {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 准备X轴数据和Y轴数据
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>xData</span> <span style=color:#f92672>=</span> [], <span style=color:#a6e22e>yData</span> <span style=color:#f92672>=</span> [];
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>i</span> <span style=color:#66d9ef>in</span> <span style=color:#a6e22e>data</span>) {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>xData</span>.<span style=color:#a6e22e>push</span>(<span style=color:#a6e22e>data</span>[<span style=color:#a6e22e>i</span>][<span style=color:#e6db74>&#39;name&#39;</span>]);
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>yData</span>.<span style=color:#a6e22e>push</span>(<span style=color:#a6e22e>data</span>[<span style=color:#a6e22e>i</span>][<span style=color:#e6db74>&#39;value&#39;</span>]);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 绘制柱图
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>option</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>barChartOption</span>({
</span></span><span style=display:flex><span>      <span style=color:#e6db74>&#39;xData&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>xData</span>,
</span></span><span style=display:flex><span>      <span style=color:#e6db74>&#39;yData&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>yData</span>,
</span></span><span style=display:flex><span>      <span style=color:#e6db74>&#39;name&#39;</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;课程 - 评分数&#39;</span>,
</span></span><span style=display:flex><span>      <span style=color:#e6db74>&#39;xName&#39;</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;评分&#39;</span>,
</span></span><span style=display:flex><span>      <span style=color:#e6db74>&#39;yName&#39;</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;数量&#39;</span>,
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>echarts</span>.<span style=color:#a6e22e>init</span>(<span style=color:#a6e22e>dom</span>(<span style=color:#e6db74>&#39;#courseStarBoard&#39;</span>)).<span style=color:#a6e22e>setOption</span>(<span style=color:#a6e22e>option</span>);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== onMounted ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>onMounted</span>(() =&gt; {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>getStatisticCardData</span>();
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>getMemberGenderCount</span>();
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>getCourseStarCount</span>();
</span></span><span style=display:flex><span>});
</span></span></code></pre></div><h2 id=e04-横幅列表组件>E04. 横幅列表组件</h2><blockquote><p>心法: 横幅列表组件 <code>@/views/cms/Banner.vue</code></p></blockquote><p><img src=/%E7%AC%AC4%E9%98%B6%E6%AE%B5-LESSON/JB4-5-%E5%90%8E%E5%8F%B0%E5%89%8D%E7%AB%AF/image/Banner%E9%A1%B5%E9%9D%A2.png alt></p><blockquote><p>武技: 开发横幅列表组件</p></blockquote><ol><li>配置Banner组件路由:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span>{  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>path</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;/Main&#39;</span>, <span style=color:#a6e22e>name</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Main&#39;</span>, <span style=color:#a6e22e>component</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>Main</span>,  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>redirect</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;/Board&#39;</span>,  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>children</span><span style=color:#f92672>:</span> [  
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>path</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;/Banner&#39;</span>, <span style=color:#a6e22e>name</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Banner&#39;</span>, <span style=color:#a6e22e>component</span><span style=color:#f92672>:</span> () =&gt; <span style=color:#66d9ef>import</span>(<span style=color:#e6db74>&#39;@/views/cms/Banner&#39;</span>)},   
</span></span><span style=display:flex><span>  ]  
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><ol start=2><li>开发Banner组件布局:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>&lt;<span style=color:#f92672>my-nav</span> <span style=color:#a6e22e>:items</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;navItems&#34;</span>/&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>my-head</span> <span style=color:#a6e22e>:items</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;headItems&#34;</span>/&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>my-table</span> <span style=color:#a6e22e>:records</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;currentRecords&#34;</span> <span style=color:#a6e22e>:columns</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;columns&#34;</span> <span style=color:#a6e22e>:buttons</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;buttons&#34;</span> 
</span></span><span style=display:flex><span>		  <span style=color:#a6e22e>:selection-change</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;selectionChange&#34;</span>/&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>my-pager</span> <span style=color:#a6e22e>:pageInfo</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;pageInfo&#34;</span>/&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>el-drawer</span> <span style=color:#a6e22e>title</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;详情抽屉&#34;</span> <span style=color:#a6e22e>v-model</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;descDrawer&#34;</span> <span style=color:#a6e22e>size</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;30%&#34;</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>my-list</span> <span style=color:#a6e22e>:title</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;descTitle&#34;</span> <span style=color:#a6e22e>:items</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;descItems&#34;</span>/&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>el-drawer</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>el-drawer</span> <span style=color:#a6e22e>title</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;单增抽屉 - 添加横幅记录&#34;</span> <span style=color:#a6e22e>v-model</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;insertDrawer&#34;</span> <span style=color:#a6e22e>size</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;30%&#34;</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>my-form</span> <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;insert&#34;</span> <span style=color:#a6e22e>:items</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;insertFormItems&#34;</span> <span style=color:#a6e22e>:data</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;insertFormData&#34;</span> <span style=color:#a6e22e>:rule</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;insertFormRule&#34;</span>
</span></span><span style=display:flex><span>           <span style=color:#a6e22e>:api</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;saveApi&#34;</span> <span style=color:#a6e22e>:fn</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;closeInsertDrawer&#34;</span>/&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>el-drawer</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>el-drawer</span> <span style=color:#a6e22e>title</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;修改抽屉 - 修改横幅记录&#34;</span> <span style=color:#a6e22e>v-model</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;updateDrawer&#34;</span> <span style=color:#a6e22e>size</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;30%&#34;</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>my-form</span> <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;update&#34;</span> <span style=color:#a6e22e>:items</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;updateFormItems&#34;</span> <span style=color:#a6e22e>:data</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;updateFormData&#34;</span> <span style=color:#a6e22e>:rule</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;updateFormRule&#34;</span>
</span></span><span style=display:flex><span>           <span style=color:#a6e22e>:api</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;updateApi&#34;</span> <span style=color:#a6e22e>:fn</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;closeUpdateDrawer&#34;</span>/&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>el-drawer</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>el-drawer</span> <span style=color:#a6e22e>title</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;文件抽屉 - 上传横幅图片&#34;</span> <span style=color:#a6e22e>v-model</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;uploadDrawer&#34;</span> <span style=color:#a6e22e>size</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;30%&#34;</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>my-uploader</span> <span style=color:#a6e22e>name</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;bannerFile&#34;</span> <span style=color:#a6e22e>:action</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;UPLOAD_BANNER(currentId)&#34;</span> <span style=color:#a6e22e>:fn</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;closeUploadDrawer&#34;</span>/&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>el-drawer</span>&gt;
</span></span></code></pre></div><ol start=3><li>开发Banner组件样式:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-css data-lang=css><span style=display:flex><span><span style=color:#75715e>/* 暂无 */</span>
</span></span></code></pre></div><ol start=4><li>开发Banner组件脚本:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>MyNav</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/components/MyNav&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>MyHead</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/components/MyHead&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>MyTable</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/components/MyTable&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>MyPager</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/components/MyPager&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>MyList</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/components/MyList&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>MyForm</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;@/components/MyForm&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>MyUploader</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/components/MyUploader&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>onBeforeMount</span>, <span style=color:#a6e22e>shallowReactive</span>, <span style=color:#a6e22e>shallowRef</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;vue&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>MINIO_BANNER</span>, <span style=color:#a6e22e>RULE</span>, <span style=color:#a6e22e>UPLOAD_BANNER</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/const&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>dateStr</span>, <span style=color:#a6e22e>notYet</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/util&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>myBatchDelete</span>, <span style=color:#a6e22e>myDelete</span>, <span style=color:#a6e22e>myPage</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/util&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>pageApi</span>, <span style=color:#a6e22e>removeApi</span>, <span style=color:#a6e22e>removeBatchApi</span>, <span style=color:#a6e22e>saveApi</span>, <span style=color:#a6e22e>updateApi</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/api/banner&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 通用数据 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 当前操作的横幅对象 + 当前操作的横幅对象列表
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>currentRecord</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>();
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>currentRecords</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>();
</span></span><span style=display:flex><span><span style=color:#75715e>// 分页信息
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>pageInfo</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowReactive</span>({<span style=color:#a6e22e>pageNumber</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>1</span>, <span style=color:#a6e22e>pageSize</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>5</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>page</span>});
</span></span><span style=display:flex><span><span style=color:#75715e>// 详情抽屉 + 详情标题 + 详情数据
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>descDrawer</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>(<span style=color:#66d9ef>null</span>);
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>descTitle</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>(<span style=color:#e6db74>&#39;&#39;</span>);
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>descItems</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>([]);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 组件数据 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 导航数据
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>navItems</span> <span style=color:#f92672>=</span> [
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>icon</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;House&#39;</span>, <span style=color:#a6e22e>title</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;首页&#39;</span>, <span style=color:#a6e22e>url</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;/Board&#39;</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>icon</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Files&#39;</span>, <span style=color:#a6e22e>title</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;内容管理&#39;</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>icon</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Picture&#39;</span>, <span style=color:#a6e22e>title</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;横幅列表&#39;</span>},
</span></span><span style=display:flex><span>];
</span></span><span style=display:flex><span><span style=color:#75715e>// 通用头数据
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>headItems</span> <span style=color:#f92672>=</span> [
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;insertBtn&#39;</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>openInsertDrawer</span>, <span style=color:#a6e22e>offset</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>21</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;deleteBtn&#39;</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>removeBatch</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;excelBtn&#39;</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>notYet</span>},
</span></span><span style=display:flex><span>];
</span></span><span style=display:flex><span><span style=color:#75715e>// 表格中间列数据
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>columns</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>([
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>column</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#39;基础信息&#39;</span>, <span style=color:#e6db74>&#39;横幅权重&#39;</span>], <span style=color:#a6e22e>property</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;weight&#39;</span>, <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;tag&#39;</span>, <span style=color:#a6e22e>prefix</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;No.&#39;</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>column</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#39;基础信息&#39;</span>, <span style=color:#e6db74>&#39;横幅地址&#39;</span>], <span style=color:#a6e22e>property</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;url&#39;</span>, <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;img&#39;</span>, <span style=color:#a6e22e>minio</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>MINIO_BANNER</span>.<span style=color:#a6e22e>value</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>column</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#39;基础信息&#39;</span>, <span style=color:#e6db74>&#39;横幅描述&#39;</span>], <span style=color:#a6e22e>property</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;info&#39;</span>, <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;card&#39;</span>},
</span></span><span style=display:flex><span>]);
</span></span><span style=display:flex><span><span style=color:#75715e>// 表格末尾列数据
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>buttons</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>([
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;info&#39;</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>openInfoDrawer</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;update&#39;</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>openUpdateDrawer</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;delete&#39;</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>remove</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;upload&#39;</span>, <span style=color:#a6e22e>btnText</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;上传图片&#39;</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>openUploadDrawer</span>},
</span></span><span style=display:flex><span>]);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 分页查询 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 分页查询
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>page</span>(<span style=color:#a6e22e>pageNumber</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>pageInfo</span>[<span style=color:#e6db74>&#39;pageNumber&#39;</span>], <span style=color:#a6e22e>pageSize</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>pageInfo</span>[<span style=color:#e6db74>&#39;pageSize&#39;</span>]) {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// 全量分页
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>myPage</span>({
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;api&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>pageApi</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;params&#39;</span><span style=color:#f92672>:</span> {<span style=color:#e6db74>&#39;pageNumber&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>pageNumber</span>, <span style=color:#e6db74>&#39;pageSize&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>pageSize</span>},
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;records&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>currentRecords</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;pageInfo&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>pageInfo</span>,
</span></span><span style=display:flex><span>  });
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 单条添加 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 抽屉 + 表单数据 + 表单规则
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>insertDrawer</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>();
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>insertFormItems</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>();
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>insertFormData</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowReactive</span>({});
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>insertFormRule</span> <span style=color:#f92672>=</span> {<span style=color:#a6e22e>info</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>RULE</span>.<span style=color:#a6e22e>COMMON_INFO</span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 打开抽屉: 设计表单项 + 打开抽屉
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>openInsertDrawer</span>() {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>insertFormItems</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> [
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;横幅权重&#39;</span>, <span style=color:#a6e22e>prop</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;weight&#39;</span>, <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;number&#39;</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;横幅描述&#39;</span>, <span style=color:#a6e22e>prop</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;info&#39;</span>, <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;textarea&#39;</span>}
</span></span><span style=display:flex><span>  ];
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>insertDrawer</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 关闭抽屉: 关闭抽屉 + 重新分页
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>closeInsertDrawer</span>() {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>insertDrawer</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>false</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>page</span>();
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 查看详情 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 打开抽屉: 设计列表标题 + 设计列表项 + 打开抽屉
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>openInfoDrawer</span>(<span style=color:#a6e22e>record</span>) {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>descTitle</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;查看横幅详情&#39;</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>descItems</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> [
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;横幅权重&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;weight&#39;</span>], <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;tag&#39;</span>, <span style=color:#a6e22e>prefix</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;No.&#39;</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;横幅图片&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;url&#39;</span>], <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;img&#39;</span>, <span style=color:#a6e22e>minio</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>MINIO_BANNER</span>.<span style=color:#a6e22e>value</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;横幅描述&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;info&#39;</span>], <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;card&#39;</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;创建时间&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;created&#39;</span>], <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>dateStr</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;修改时间&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;updated&#39;</span>], <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>dateStr</span>},
</span></span><span style=display:flex><span>  ];
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>descDrawer</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 单条修改 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 抽屉 + 表单数据 + 表单规则
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>updateDrawer</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>();
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>updateFormData</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowReactive</span>({});
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>updateFormItems</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>();
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>updateFormRule</span> <span style=color:#f92672>=</span> {<span style=color:#a6e22e>info</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>RULE</span>.<span style=color:#a6e22e>COMMON_INFO</span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 打开抽屉: 赋值表单默认值 + 设计表单项 + 打开抽屉
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>openUpdateDrawer</span>(<span style=color:#a6e22e>record</span>) {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>updateFormData</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>record</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>updateFormItems</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> [
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;横幅权重&#39;</span>, <span style=color:#a6e22e>prop</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;weight&#39;</span>, <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;number&#39;</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;横幅描述&#39;</span>, <span style=color:#a6e22e>prop</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;info&#39;</span>, <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;textarea&#39;</span>}
</span></span><span style=display:flex><span>  ];
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>updateDrawer</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 关闭抽屉: 关闭抽屉 + 重新分页
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>closeUpdateDrawer</span>() {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>updateDrawer</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>false</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>page</span>();
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 单条删除 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 删除横幅信息
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>remove</span>(<span style=color:#a6e22e>record</span>) {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>myDelete</span>({
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;id&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;id&#39;</span>],
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;api&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>removeApi</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;callback&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>page</span>
</span></span><span style=display:flex><span>  });
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 批量删除 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 横幅主键数组
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>ids</span> <span style=color:#f92672>=</span> [];
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 当复选框发生改变时，重新计算当前选中的主键数组
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>selectionChange</span>(<span style=color:#a6e22e>row</span>) {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>ids</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>row</span>.<span style=color:#a6e22e>map</span>(<span style=color:#a6e22e>e</span> =&gt; <span style=color:#a6e22e>e</span>[<span style=color:#e6db74>&#39;id&#39;</span>]);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 批量删除横幅信息
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>removeBatch</span>() {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>myBatchDelete</span>({
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;ids&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>ids</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;api&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>removeBatchApi</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;callback&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>page</span>
</span></span><span style=display:flex><span>  });
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 上传图片 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 抽屉 + 当前记录的ID值
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>uploadDrawer</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>();
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>currentId</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 打开抽屉: 获取当前记录的ID值 + 打开抽屉
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>openUploadDrawer</span>(<span style=color:#a6e22e>record</span>) {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>currentId</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;id&#39;</span>];
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>uploadDrawer</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 关闭抽屉: 重新分页，关闭抽屉
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>closeUploadDrawer</span>() {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>page</span>();
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>uploadDrawer</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>false</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== mount ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>onBeforeMount</span>(() =&gt; <span style=color:#a6e22e>page</span>());
</span></span></code></pre></div><h2 id=e05-评论列表组件>E05. 评论列表组件</h2><blockquote><p>心法: 评论列表组件 <code>@/views/cms/Comment.vue</code></p></blockquote><p><img src=/%E7%AC%AC4%E9%98%B6%E6%AE%B5-LESSON/JB4-5-%E5%90%8E%E5%8F%B0%E5%89%8D%E7%AB%AF/image/Comment%E9%A1%B5%E9%9D%A2.png alt></p><blockquote><p>武技: 开发评论列表组件 <code>@/views/cms/Comment.vue</code></p></blockquote><ol><li>配置Comment组件路由:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span>{  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>path</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;/Main&#39;</span>, <span style=color:#a6e22e>name</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Main&#39;</span>, <span style=color:#a6e22e>component</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>Main</span>,  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>redirect</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;/Board&#39;</span>,  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>children</span><span style=color:#f92672>:</span> [  
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>path</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;/Comment&#39;</span>, <span style=color:#a6e22e>name</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Comment&#39;</span>, <span style=color:#a6e22e>component</span><span style=color:#f92672>:</span> () =&gt; <span style=color:#66d9ef>import</span>(<span style=color:#e6db74>&#39;@/views/cms/Comment&#39;</span>)},
</span></span><span style=display:flex><span>  ]  
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><ol start=2><li>开发Comment组件布局:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>&lt;<span style=color:#f92672>my-nav</span> <span style=color:#a6e22e>:items</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;navItems&#34;</span>/&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>my-head</span> <span style=color:#a6e22e>:items</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;headItems&#34;</span>/&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>my-table</span> <span style=color:#a6e22e>:records</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;currentRecords&#34;</span> <span style=color:#a6e22e>:columns</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;columns&#34;</span> <span style=color:#a6e22e>:buttons</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;buttons&#34;</span>
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>:selectionChange</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;selectionChange&#34;</span>/&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>my-pager</span> <span style=color:#a6e22e>:pageInfo</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;pageInfo&#34;</span>/&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>el-drawer</span> <span style=color:#a6e22e>title</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;详情抽屉&#34;</span> <span style=color:#a6e22e>v-model</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;descDrawer&#34;</span> <span style=color:#a6e22e>size</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;30%&#34;</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>my-list</span> <span style=color:#a6e22e>:items</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;descItems&#34;</span> <span style=color:#a6e22e>:title</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;descTitle&#34;</span>/&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>el-drawer</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>el-drawer</span> <span style=color:#a6e22e>title</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;详情抽屉 - 查看回复列表&#34;</span> <span style=color:#a6e22e>v-model</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;subCommentsDrawer&#34;</span> <span style=color:#a6e22e>size</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;30%&#34;</span>
</span></span><span style=display:flex><span>           <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;sub-comments-drawer&#34;</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>section</span> <span style=color:#a6e22e>v-if</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;subComments.length &gt; 0&#34;</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>el-row</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;sub-comment-item&#34;</span> <span style=color:#a6e22e>v-for</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;subComment in subComments&#34;</span> <span style=color:#a6e22e>:key</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;subComment[&#39;id&#39;]&#34;</span>&gt;
</span></span><span style=display:flex><span>      
</span></span><span style=display:flex><span>      &lt;<span style=color:#f92672>el-col</span> <span style=color:#a6e22e>:span</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;2&#34;</span>&gt;
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>el-image</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;avatar-img&#34;</span> <span style=color:#a6e22e>fit</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;fill&#34;</span> <span style=color:#a6e22e>preview-teleported</span>
</span></span><span style=display:flex><span>                  <span style=color:#a6e22e>:src</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;MINIO_AVATAR(subComment[&#39;member&#39;][&#39;avatar&#39;])&#34;</span>
</span></span><span style=display:flex><span>                  <span style=color:#a6e22e>:preview-src-list</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;[MINIO_AVATAR(subComment[&#39;member&#39;][&#39;avatar&#39;])]&#34;</span>/&gt;
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;nickname&#34;</span>&gt;{{ subComment[&#39;member&#39;][&#39;nickname&#39;] }}&lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>      &lt;/<span style=color:#f92672>el-col</span>&gt;
</span></span><span style=display:flex><span>      
</span></span><span style=display:flex><span>      &lt;<span style=color:#f92672>el-col</span> <span style=color:#a6e22e>:span</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;22&#34;</span>&gt;
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>el-card</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;content&#34;</span>&gt;{{ subComment[&#39;content&#39;] }}&lt;/<span style=color:#f92672>el-card</span>&gt;
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;tips&#34;</span>&gt;评论时间: {{ dateStr(subComment[&#39;created&#39;]) }}&lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>      &lt;/<span style=color:#f92672>el-col</span>&gt;
</span></span><span style=display:flex><span>      
</span></span><span style=display:flex><span>    &lt;/<span style=color:#f92672>el-row</span>&gt;
</span></span><span style=display:flex><span>  &lt;/<span style=color:#f92672>section</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>section</span> <span style=color:#a6e22e>v-else</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>small</span>&gt;该评论暂无回复&lt;/<span style=color:#f92672>small</span>&gt;
</span></span><span style=display:flex><span>  &lt;/<span style=color:#f92672>section</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>el-drawer</span>&gt;
</span></span></code></pre></div><ol start=3><li>开发Comment组件样式:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-css data-lang=css><span style=display:flex><span>.<span style=color:#a6e22e>sub-comment-item</span> {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#960050;background-color:#1e0010>.nickname</span> <span style=color:#960050;background-color:#1e0010>{</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>width</span>: <span style=color:#ae81ff>50</span><span style=color:#66d9ef>px</span>; <span style=color:#960050;background-color:#1e0010>//</span> <span style=color:#960050;background-color:#1e0010>宽度</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>text-align</span>: <span style=color:#66d9ef>center</span>; <span style=color:#960050;background-color:#1e0010>//</span> <span style=color:#960050;background-color:#1e0010>居中</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>font-size</span>: <span style=color:#66d9ef>smaller</span>; <span style=color:#960050;background-color:#1e0010>//</span> <span style=color:#960050;background-color:#1e0010>小号</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>color</span>: <span style=color:#ae81ff>#9a9696</span>; <span style=color:#960050;background-color:#1e0010>//</span> <span style=color:#960050;background-color:#1e0010>前景色</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  .<span style=color:#a6e22e>el-image</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>width</span>: <span style=color:#ae81ff>50</span><span style=color:#66d9ef>px</span>; <span style=color:#960050;background-color:#1e0010>//</span> <span style=color:#960050;background-color:#1e0010>宽度</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>height</span>: <span style=color:#ae81ff>50</span><span style=color:#66d9ef>px</span>; <span style=color:#960050;background-color:#1e0010>//</span> <span style=color:#960050;background-color:#1e0010>高度</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>border-radius</span>: <span style=color:#ae81ff>5</span><span style=color:#66d9ef>%</span>; <span style=color:#960050;background-color:#1e0010>//圆角</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  .<span style=color:#a6e22e>content</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>margin-left</span>: <span style=color:#ae81ff>40</span><span style=color:#66d9ef>px</span>; <span style=color:#960050;background-color:#1e0010>//</span> <span style=color:#960050;background-color:#1e0010>左外边距</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>height</span>: <span style=color:#ae81ff>100</span><span style=color:#66d9ef>px</span>;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  .<span style=color:#a6e22e>tips</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>float</span>: <span style=color:#66d9ef>right</span>; <span style=color:#960050;background-color:#1e0010>//</span> <span style=color:#960050;background-color:#1e0010>右浮动</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>font-size</span>: <span style=color:#66d9ef>smaller</span>; <span style=color:#960050;background-color:#1e0010>//</span> <span style=color:#960050;background-color:#1e0010>小号</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>color</span>: <span style=color:#ae81ff>#9a9696</span>; <span style=color:#960050;background-color:#1e0010>//</span> <span style=color:#960050;background-color:#1e0010>前景色</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>margin</span>: <span style=color:#ae81ff>5</span><span style=color:#66d9ef>px</span> <span style=color:#ae81ff>0</span> <span style=color:#ae81ff>20</span><span style=color:#66d9ef>px</span>; <span style=color:#960050;background-color:#1e0010>//</span> <span style=color:#960050;background-color:#1e0010>外边距</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>}</span>
</span></span></code></pre></div><ol start=4><li>开发Comment组件脚本:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>MyNav</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/components/MyNav&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>MyHead</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/components/MyHead&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>MyTable</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;@/components/MyTable&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>MyPager</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/components/MyPager&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>MyList</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/components/MyList&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>onBeforeMount</span>, <span style=color:#a6e22e>shallowReactive</span>, <span style=color:#a6e22e>shallowRef</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;vue&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>MINIO_AVATAR</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/const&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>commentTypeStr</span>, <span style=color:#a6e22e>dateStr</span>, <span style=color:#a6e22e>getResponseData</span>, <span style=color:#a6e22e>myBatchDelete</span>, <span style=color:#a6e22e>myDelete</span>, <span style=color:#a6e22e>myPage</span>, <span style=color:#a6e22e>notYet</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/util&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>getInfoApi</span> <span style=color:#a6e22e>as</span> <span style=color:#a6e22e>getCommentInfoApi</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/api/comment&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>getSubCommentsApi</span>, <span style=color:#a6e22e>pageApi</span>, <span style=color:#a6e22e>removeApi</span>, <span style=color:#a6e22e>removeBatchApi</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/api/comment&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>getInfoApi</span> <span style=color:#a6e22e>as</span> <span style=color:#a6e22e>getEpisodeInfoApi</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/api/episode&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 通用数据 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 当前操作的评论对象 + 当前操作的评论对象列表
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>currentRecord</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>();
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>currentRecords</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>();
</span></span><span style=display:flex><span><span style=color:#75715e>// 分页信息
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>pageInfo</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowReactive</span>({<span style=color:#a6e22e>pageNumber</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>1</span>, <span style=color:#a6e22e>pageSize</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>5</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>page</span>});
</span></span><span style=display:flex><span><span style=color:#75715e>// 详情抽屉 + 详情标题 + 详情数据
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>descDrawer</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>(<span style=color:#66d9ef>null</span>);
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>descTitle</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>(<span style=color:#e6db74>&#39;&#39;</span>);
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>descItems</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>([]);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 组件数据 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 导航数据
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>navItems</span> <span style=color:#f92672>=</span> [
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>icon</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;House&#39;</span>, <span style=color:#a6e22e>title</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;首页&#39;</span>, <span style=color:#a6e22e>url</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;/Board&#39;</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>icon</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Files&#39;</span>, <span style=color:#a6e22e>title</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;内容管理&#39;</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>icon</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Comment&#39;</span>, <span style=color:#a6e22e>title</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;评论列表&#39;</span>}
</span></span><span style=display:flex><span>];
</span></span><span style=display:flex><span><span style=color:#75715e>// 通用头数据
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>headItems</span> <span style=color:#f92672>=</span> [
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;insertBtn&#39;</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>notYet</span>, <span style=color:#a6e22e>offset</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>21</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;deleteBtn&#39;</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>removeBatch</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;excelBtn&#39;</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>notYet</span>},
</span></span><span style=display:flex><span>];
</span></span><span style=display:flex><span><span style=color:#75715e>// 表格中间列数据
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>columns</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>([
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>column</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#39;基础信息&#39;</span>, <span style=color:#e6db74>&#39;评论目标&#39;</span>], <span style=color:#a6e22e>property</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;type&#39;</span>, <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;tag&#39;</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>commentTypeStr</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>column</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#39;基础信息&#39;</span>, <span style=color:#e6db74>&#39;评论账号&#39;</span>], <span style=color:#a6e22e>property</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;member.username&#39;</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>column</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#39;基础信息&#39;</span>, <span style=color:#e6db74>&#39;评论内容&#39;</span>], <span style=color:#a6e22e>property</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;content&#39;</span>, <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;card&#39;</span>},
</span></span><span style=display:flex><span>]);
</span></span><span style=display:flex><span><span style=color:#75715e>// 表格末尾列数据
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>buttons</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>([
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;info&#39;</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>openInfoDrawer</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>btnText</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;回复列表&#39;</span>, <span style=color:#a6e22e>btnType</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;primary&#39;</span>, <span style=color:#a6e22e>btnIcon</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;List&#39;</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>openSubCommentsDrawer</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;delete&#39;</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>remove</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>btnText</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;查看目标&#39;</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>openTargetDrawer</span>},
</span></span><span style=display:flex><span>]);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 分页查询 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 分页查询
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>page</span>(<span style=color:#a6e22e>pageNumber</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>pageInfo</span>[<span style=color:#e6db74>&#39;pageNumber&#39;</span>], <span style=color:#a6e22e>pageSize</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>pageInfo</span>[<span style=color:#e6db74>&#39;pageSize&#39;</span>]) {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// 全量分页
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>myPage</span>({
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;api&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>pageApi</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;params&#39;</span><span style=color:#f92672>:</span> {<span style=color:#e6db74>&#39;pageNumber&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>pageNumber</span>, <span style=color:#e6db74>&#39;pageSize&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>pageSize</span>},
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;records&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>currentRecords</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;pageInfo&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>pageInfo</span>,
</span></span><span style=display:flex><span>  });
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 查看详情 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 打开抽屉: 设计列表标题 + 设计列表项 + 打开抽屉
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>openInfoDrawer</span>(<span style=color:#a6e22e>record</span>) {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>descTitle</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;查看举报详情&#39;</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>descItems</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> [
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;评论目标&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;type&#39;</span>], <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;tag&#39;</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>commentTypeStr</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;评论会员&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;member&#39;</span>][<span style=color:#e6db74>&#39;nickname&#39;</span>]},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;评论内容&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;content&#39;</span>], <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;card&#39;</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;创建时间&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;created&#39;</span>], <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>dateStr</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;修改时间&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;updated&#39;</span>], <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>dateStr</span>},
</span></span><span style=display:flex><span>  ];
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>descDrawer</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 单条删除 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 删除评论信息
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>remove</span>(<span style=color:#a6e22e>record</span>) {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>myDelete</span>({
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;id&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;id&#39;</span>],
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;api&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>removeApi</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;callback&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>page</span>
</span></span><span style=display:flex><span>  });
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 批量删除 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 评论主键数组
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>ids</span> <span style=color:#f92672>=</span> [];
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 当复选框发生改变时触发
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>selectionChange</span>(<span style=color:#a6e22e>row</span>) {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>ids</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>row</span>.<span style=color:#a6e22e>map</span>(<span style=color:#a6e22e>e</span> =&gt; <span style=color:#a6e22e>e</span>[<span style=color:#e6db74>&#39;id&#39;</span>]);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 批量删除评论信息
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>removeBatch</span>() {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>myBatchDelete</span>({
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;ids&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>ids</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;api&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>removeBatchApi</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;callback&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>page</span>
</span></span><span style=display:flex><span>  });
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 查看目标 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 打开抽屉: 查询目标信息 + 设计列表标题 + 设计列表项 + 打开抽屉
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>openTargetDrawer</span>(<span style=color:#a6e22e>record</span>) {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// 评论目标为视频
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;type&#39;</span>] <span style=color:#f92672>===</span> <span style=color:#ae81ff>0</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>data</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>getResponseData</span>(<span style=color:#66d9ef>await</span> <span style=color:#a6e22e>getEpisodeInfoApi</span>(<span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;fkEpisodeId&#39;</span>]));
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>data</span>) {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>descTitle</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;查看目标视频（被评论的视频）&#39;</span>;
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>descItems</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> [
</span></span><span style=display:flex><span>        {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;视频标题&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>data</span>[<span style=color:#e6db74>&#39;title&#39;</span>]},
</span></span><span style=display:flex><span>        {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;视频描述&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>data</span>[<span style=color:#e6db74>&#39;info&#39;</span>], <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;card&#39;</span>},
</span></span><span style=display:flex><span>        {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;创建时间&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>data</span>[<span style=color:#e6db74>&#39;created&#39;</span>], <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>dateStr</span>},
</span></span><span style=display:flex><span>        {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;修改时间&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>data</span>[<span style=color:#e6db74>&#39;updated&#39;</span>], <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>dateStr</span>},
</span></span><span style=display:flex><span>      ];
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>descDrawer</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span>;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// 评论目标为评论
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;type&#39;</span>] <span style=color:#f92672>===</span> <span style=color:#ae81ff>1</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>data</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>getResponseData</span>(<span style=color:#66d9ef>await</span> <span style=color:#a6e22e>getCommentInfoApi</span>(<span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;fkCommentId&#39;</span>]));
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>data</span>) {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>descTitle</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;查看目标评论（被评论的评论）&#39;</span>;
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>descItems</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> [
</span></span><span style=display:flex><span>        {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;被评论人&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>data</span>[<span style=color:#e6db74>&#39;member&#39;</span>][<span style=color:#e6db74>&#39;nickname&#39;</span>]},
</span></span><span style=display:flex><span>        {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;评论内容&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>data</span>[<span style=color:#e6db74>&#39;content&#39;</span>], <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;card&#39;</span>},
</span></span><span style=display:flex><span>        {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;创建时间&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>data</span>[<span style=color:#e6db74>&#39;created&#39;</span>], <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>dateStr</span>},
</span></span><span style=display:flex><span>        {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;修改时间&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>data</span>[<span style=color:#e6db74>&#39;created&#39;</span>], <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>dateStr</span>},
</span></span><span style=display:flex><span>      ];
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>descDrawer</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 查看回复 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 抽屉 + 回复列表
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>subCommentsDrawer</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>();
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>subComments</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 打开抽屉: 查询回复列表 + 打开抽屉
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>openSubCommentsDrawer</span>(<span style=color:#a6e22e>record</span>) {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>data</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>getResponseData</span>(<span style=color:#66d9ef>await</span> <span style=color:#a6e22e>getSubCommentsApi</span>(<span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;id&#39;</span>]));
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>data</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>subComments</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>data</span>;
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>subCommentsDrawer</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span>;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== mount ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>onBeforeMount</span>(() =&gt; <span style=color:#a6e22e>page</span>());
</span></span></code></pre></div><h2 id=e06-举报列表组件>E06. 举报列表组件</h2><blockquote><p>心法: 举报列表组件 <code>@/views/cms/Report.vue</code></p></blockquote><p><img src=/%E7%AC%AC4%E9%98%B6%E6%AE%B5-LESSON/JB4-5-%E5%90%8E%E5%8F%B0%E5%89%8D%E7%AB%AF/image/Report%E9%A1%B5%E9%9D%A2.png alt></p><blockquote><p>武技: 开发举报列表组件 <code>@/views/cms/Report.vue</code></p></blockquote><ol><li>配置Report组件路由:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span>{  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>path</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;/Main&#39;</span>, <span style=color:#a6e22e>name</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Main&#39;</span>, <span style=color:#a6e22e>component</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>Main</span>,  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>redirect</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;/Board&#39;</span>,  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>children</span><span style=color:#f92672>:</span> [  
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>path</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;/Report&#39;</span>, <span style=color:#a6e22e>name</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Report&#39;</span>, <span style=color:#a6e22e>component</span><span style=color:#f92672>:</span> () =&gt; <span style=color:#66d9ef>import</span>(<span style=color:#e6db74>&#39;@/views/cms/Report&#39;</span>)},   
</span></span><span style=display:flex><span>  ]  
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><ol start=2><li>开发Report组件布局:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>&lt;<span style=color:#f92672>my-nav</span> <span style=color:#a6e22e>:items</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;navItems&#34;</span>/&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>my-head</span> <span style=color:#a6e22e>:items</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;headItems&#34;</span>/&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>my-table</span> <span style=color:#a6e22e>:records</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;currentRecords&#34;</span> <span style=color:#a6e22e>:columns</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;columns&#34;</span> <span style=color:#a6e22e>:buttons</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;buttons&#34;</span>
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>:selectionChange</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;selectionChange&#34;</span>/&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>my-pager</span> <span style=color:#a6e22e>:pageInfo</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;pageInfo&#34;</span>/&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>el-drawer</span> <span style=color:#a6e22e>title</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;详情抽屉&#34;</span> <span style=color:#a6e22e>v-model</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;descDrawer&#34;</span> <span style=color:#a6e22e>size</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;30%&#34;</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>my-list</span> <span style=color:#a6e22e>:items</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;descItems&#34;</span> <span style=color:#a6e22e>:title</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;descTitle&#34;</span>/&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>el-drawer</span>&gt;
</span></span></code></pre></div><ol start=3><li>开发Report组件样式:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-css data-lang=css><span style=display:flex><span><span style=color:#75715e>/*暂无*/</span>
</span></span></code></pre></div><ol start=4><li>开发Report组件脚本:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>MyNav</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/components/MyNav&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>MyHead</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/components/MyHead&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>MyTable</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/components/MyTable&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>MyPager</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/components/MyPager&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>MyList</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/components/MyList&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>onBeforeMount</span>, <span style=color:#a6e22e>shallowReactive</span>, <span style=color:#a6e22e>shallowRef</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;vue&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>pageApi</span>, <span style=color:#a6e22e>removeApi</span>, <span style=color:#a6e22e>removeBatchApi</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/api/report&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>getInfoApi</span> <span style=color:#a6e22e>as</span> <span style=color:#a6e22e>getCourseInfoApi</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/api/course&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>getInfoApi</span> <span style=color:#a6e22e>as</span> <span style=color:#a6e22e>getCommentInfoApi</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/api/comment&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>getResponseData</span>, <span style=color:#a6e22e>myPage</span>, <span style=color:#a6e22e>myDelete</span>, <span style=color:#a6e22e>myBatchDelete</span>, <span style=color:#a6e22e>reportTypeStr</span>, <span style=color:#a6e22e>notYet</span>, <span style=color:#a6e22e>dateStr</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/util&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>MINIO_COVER</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/const&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 通用数据 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 当前操作的举报对象 + 当前操作的举报对象列表 + 当前举报类型[0课程，1评论]
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>currentRecord</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>();
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>currentRecords</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>();
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>currentType</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>(<span style=color:#ae81ff>0</span>);
</span></span><span style=display:flex><span><span style=color:#75715e>// 分页信息
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>pageInfo</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowReactive</span>({<span style=color:#a6e22e>pageNumber</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>1</span>, <span style=color:#a6e22e>pageSize</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>5</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>page</span>});
</span></span><span style=display:flex><span><span style=color:#75715e>// 详情抽屉 + 详情标题 + 详情数据
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>descDrawer</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>(<span style=color:#66d9ef>null</span>);
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>descTitle</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>(<span style=color:#e6db74>&#39;&#39;</span>);
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>descItems</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>([]);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 组件数据 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 导航数据
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>navItems</span> <span style=color:#f92672>=</span> [
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>icon</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;House&#39;</span>, <span style=color:#a6e22e>title</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;首页&#39;</span>, <span style=color:#a6e22e>url</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;/Board&#39;</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>icon</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Files&#39;</span>, <span style=color:#a6e22e>title</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;内容管理&#39;</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>icon</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Warning&#39;</span>, <span style=color:#a6e22e>title</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;举报列表&#39;</span>}
</span></span><span style=display:flex><span>];
</span></span><span style=display:flex><span><span style=color:#75715e>// 通用头数据
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>headItems</span> <span style=color:#f92672>=</span> [
</span></span><span style=display:flex><span>  {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;rdo&#39;</span>, <span style=color:#a6e22e>rdoValue</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>currentType</span>.<span style=color:#a6e22e>value</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>currentReportType</span> =&gt; {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>currentType</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>currentReportType</span>;
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>page</span>();
</span></span><span style=display:flex><span>    }, <span style=color:#a6e22e>rdoItems</span><span style=color:#f92672>:</span> [
</span></span><span style=display:flex><span>      {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>0</span>, <span style=color:#a6e22e>text</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;课程举报&#39;</span>},
</span></span><span style=display:flex><span>      {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>1</span>, <span style=color:#a6e22e>text</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;评论举报&#39;</span>},
</span></span><span style=display:flex><span>    ], <span style=color:#a6e22e>span</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>4</span>, <span style=color:#a6e22e>offset</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>17</span>
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;insertBtn&#39;</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>notYet</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;deleteBtn&#39;</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>removeBatch</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;excelBtn&#39;</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>notYet</span>},
</span></span><span style=display:flex><span>];
</span></span><span style=display:flex><span><span style=color:#75715e>// 表格中间列数据
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>columns</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>([
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>column</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#39;基础信息&#39;</span>, <span style=color:#e6db74>&#39;举报目标&#39;</span>], <span style=color:#a6e22e>property</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;type&#39;</span>, <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;tag&#39;</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>reportTypeStr</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>column</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#39;基础信息&#39;</span>, <span style=color:#e6db74>&#39;举报账号&#39;</span>], <span style=color:#a6e22e>property</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;member.username&#39;</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>column</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#39;基础信息&#39;</span>, <span style=color:#e6db74>&#39;举报理由&#39;</span>], <span style=color:#a6e22e>property</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;reason&#39;</span>, <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;card&#39;</span>},
</span></span><span style=display:flex><span>]);
</span></span><span style=display:flex><span><span style=color:#75715e>// 表格末尾列数据
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>buttons</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>([
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;info&#39;</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>openInfoDrawer</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;delete&#39;</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>remove</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>btnText</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;查看目标&#39;</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>openTargetDrawer</span>},
</span></span><span style=display:flex><span>]);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 分页查询 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 分页查询
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>page</span>(<span style=color:#a6e22e>pageNumber</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>pageInfo</span>[<span style=color:#e6db74>&#39;pageNumber&#39;</span>], <span style=color:#a6e22e>pageSize</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>pageInfo</span>[<span style=color:#e6db74>&#39;pageSize&#39;</span>],
</span></span><span style=display:flex><span>                    <span style=color:#a6e22e>reportType</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>currentType</span>.<span style=color:#a6e22e>value</span>) {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// 根据目标分页
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>myPage</span>({
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;api&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>pageApi</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;params&#39;</span><span style=color:#f92672>:</span> {<span style=color:#e6db74>&#39;pageNumber&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>pageNumber</span>, <span style=color:#e6db74>&#39;pageSize&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>pageSize</span>},
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;records&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>currentRecords</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;pageInfo&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>pageInfo</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;secondParam&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>reportType</span>
</span></span><span style=display:flex><span>  });
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 查看详情 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 打开抽屉: 设计列表标题 + 设计列表项 + 打开抽屉
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>openInfoDrawer</span>(<span style=color:#a6e22e>record</span>) {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>descTitle</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;查看举报详情&#39;</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>descItems</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> [
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;举报目标&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;type&#39;</span>], <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;tag&#39;</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>reportTypeStr</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;举报来源&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;member&#39;</span>][<span style=color:#e6db74>&#39;nickname&#39;</span>]},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;举报理由&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;reason&#39;</span>], <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;card&#39;</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;举报时间&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;created&#39;</span>], <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>dateStr</span>},
</span></span><span style=display:flex><span>  ];
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>descDrawer</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 单条删除 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 删除举报信息
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>remove</span>(<span style=color:#a6e22e>record</span>) {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>myDelete</span>({
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;id&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;id&#39;</span>],
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;api&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>removeApi</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;callback&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>page</span>
</span></span><span style=display:flex><span>  });
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 批量删除 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 举报主键数组
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>ids</span> <span style=color:#f92672>=</span> [];
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 当复选框发生改变时触发
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>selectionChange</span>(<span style=color:#a6e22e>row</span>) {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>ids</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>row</span>.<span style=color:#a6e22e>map</span>(<span style=color:#a6e22e>e</span> =&gt; <span style=color:#a6e22e>e</span>[<span style=color:#e6db74>&#39;id&#39;</span>]);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 批量删除举报信息
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>removeBatch</span>() {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>myBatchDelete</span>({
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;ids&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>ids</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;api&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>removeBatchApi</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;callback&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>page</span>
</span></span><span style=display:flex><span>  });
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 查看目标 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 打开抽屉: 查询举报目标，设计列表标题 + 设计列表项 + 打开抽屉
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>openTargetDrawer</span>(<span style=color:#a6e22e>record</span>) {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// 举报目标为课程
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;type&#39;</span>] <span style=color:#f92672>===</span> <span style=color:#ae81ff>0</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>data</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>getResponseData</span>(<span style=color:#66d9ef>await</span> <span style=color:#a6e22e>getCourseInfoApi</span>(<span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;fkCourseId&#39;</span>]));
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>data</span>) {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>descTitle</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;查看目标课程（被举报的课程）&#39;</span>;
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>descItems</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> [
</span></span><span style=display:flex><span>        {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;课程封面&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>data</span>[<span style=color:#e6db74>&#39;cover&#39;</span>], <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;img&#39;</span>, <span style=color:#a6e22e>minio</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>MINIO_COVER</span>.<span style=color:#a6e22e>value</span>},
</span></span><span style=display:flex><span>        {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;课程标题&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>data</span>[<span style=color:#e6db74>&#39;title&#39;</span>]},
</span></span><span style=display:flex><span>        {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;课程描述&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>data</span>[<span style=color:#e6db74>&#39;info&#39;</span>], <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;card&#39;</span>},
</span></span><span style=display:flex><span>        {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;创建时间&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>data</span>[<span style=color:#e6db74>&#39;created&#39;</span>], <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>dateStr</span>},
</span></span><span style=display:flex><span>        {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;修改时间&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>data</span>[<span style=color:#e6db74>&#39;updated&#39;</span>], <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>dateStr</span>},
</span></span><span style=display:flex><span>      ];
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>descDrawer</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span>;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// 举报目标为发言
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;type&#39;</span>] <span style=color:#f92672>===</span> <span style=color:#ae81ff>1</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>data</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>getResponseData</span>(<span style=color:#66d9ef>await</span> <span style=color:#a6e22e>getCommentInfoApi</span>(<span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;fkCommentId&#39;</span>]));
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>data</span>) {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>descTitle</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;查看目标评论（被举报的评论）&#39;</span>;
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>descItems</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> [
</span></span><span style=display:flex><span>        {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;评论来源&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>data</span>[<span style=color:#e6db74>&#39;member&#39;</span>][<span style=color:#e6db74>&#39;nickname&#39;</span>]},
</span></span><span style=display:flex><span>        {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;评论内容&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>data</span>[<span style=color:#e6db74>&#39;content&#39;</span>], <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;card&#39;</span>},
</span></span><span style=display:flex><span>        {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;创建时间&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>data</span>[<span style=color:#e6db74>&#39;created&#39;</span>], <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>dateStr</span>},
</span></span><span style=display:flex><span>        {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;修改时间&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>data</span>[<span style=color:#e6db74>&#39;created&#39;</span>], <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>dateStr</span>},
</span></span><span style=display:flex><span>      ];
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>descDrawer</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== mount ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>onBeforeMount</span>(() =&gt; <span style=color:#a6e22e>page</span>());
</span></span></code></pre></div><h2 id=e07-购物车列表组件>E07. 购物车列表组件</h2><blockquote><p>心法: 购物车列表组件 <code>@/views/oms/Cart.vue</code></p></blockquote><p><img src=/%E7%AC%AC4%E9%98%B6%E6%AE%B5-LESSON/JB4-5-%E5%90%8E%E5%8F%B0%E5%89%8D%E7%AB%AF/image/Cart%E9%A1%B5%E9%9D%A2.png alt></p><blockquote><p>武技: 开发购物车列表组件 <code>@/views/oms/Cart.vue</code></p></blockquote><ol><li>配置Cart组件路由:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span>{  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>path</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;/Main&#39;</span>, <span style=color:#a6e22e>name</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Main&#39;</span>, <span style=color:#a6e22e>component</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>Main</span>,  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>redirect</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;/Board&#39;</span>,  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>children</span><span style=color:#f92672>:</span> [  
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>path</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;/Cart&#39;</span>, <span style=color:#a6e22e>name</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Cart&#39;</span>, <span style=color:#a6e22e>component</span><span style=color:#f92672>:</span> () =&gt; <span style=color:#66d9ef>import</span>(<span style=color:#e6db74>&#39;@/views/oms/Cart&#39;</span>)},   
</span></span><span style=display:flex><span>  ]  
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><ol start=2><li>开发Cart组件布局:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>&lt;<span style=color:#f92672>my-nav</span> <span style=color:#a6e22e>:items</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;navItems&#34;</span>/&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>my-head</span> <span style=color:#a6e22e>:items</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;headItems&#34;</span>/&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>my-table</span> <span style=color:#a6e22e>:records</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;currentRecords&#34;</span> <span style=color:#a6e22e>:columns</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;columns&#34;</span> <span style=color:#a6e22e>:buttons</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;buttons&#34;</span>/&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>my-pager</span> <span style=color:#a6e22e>:pageInfo</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;pageInfo&#34;</span>/&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>el-drawer</span> <span style=color:#a6e22e>title</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;详情抽屉&#34;</span> <span style=color:#a6e22e>v-model</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;descDrawer&#34;</span> <span style=color:#a6e22e>size</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;50%&#34;</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>my-list</span> <span style=color:#a6e22e>:items</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;descItems&#34;</span> <span style=color:#a6e22e>:title</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;descTitle&#34;</span> <span style=color:#a6e22e>:column</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;2&#34;</span>/&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>el-drawer</span>&gt;
</span></span></code></pre></div><ol start=3><li>开发Cart组件样式:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-css data-lang=css><span style=display:flex><span><span style=color:#75715e>/*暂无*/</span>
</span></span></code></pre></div><ol start=4><li>开发Cart组件脚本:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>MyNav</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/components/MyNav&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>MyHead</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/components/MyHead&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>MyTable</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/components/MyTable&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>MyPager</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/components/MyPager&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>MyList</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/components/MyList&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>MINIO_AVATAR</span>, <span style=color:#a6e22e>MINIO_COVER</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;@/const&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>onBeforeMount</span>, <span style=color:#a6e22e>shallowReactive</span>, <span style=color:#a6e22e>shallowRef</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;vue&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>pageApi</span>, <span style=color:#a6e22e>pageCourseApi</span>, <span style=color:#a6e22e>pageMemberApi</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/api/cart&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>dateStr</span>, <span style=color:#a6e22e>genderStr</span>, <span style=color:#a6e22e>myPage</span>, <span style=color:#a6e22e>notYet</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/util&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 通用数据 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 当前操作的购物车对象 + 当前操作的购物车对象列表
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>currentRecord</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>();
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>currentRecords</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>();
</span></span><span style=display:flex><span><span style=color:#75715e>// 分页信息
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>pageInfo</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowReactive</span>({<span style=color:#a6e22e>pageNumber</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>1</span>, <span style=color:#a6e22e>pageSize</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>5</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>page</span>});
</span></span><span style=display:flex><span><span style=color:#75715e>// 会员ID搜索框 + 课程ID搜索框
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>memberIdIpt</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>(<span style=color:#e6db74>&#39;&#39;</span>);
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>courseIdIpt</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>(<span style=color:#e6db74>&#39;&#39;</span>);
</span></span><span style=display:flex><span><span style=color:#75715e>// 详情抽屉 + 详情标题 + 详情数据
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>descDrawer</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>(<span style=color:#66d9ef>null</span>);
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>descTitle</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>(<span style=color:#e6db74>&#39;&#39;</span>);
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>descItems</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>([]);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 组件数据 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 导航数据
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>navItems</span> <span style=color:#f92672>=</span> [
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>icon</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;House&#39;</span>, <span style=color:#a6e22e>title</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;首页&#39;</span>, <span style=color:#a6e22e>url</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;/Board&#39;</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>icon</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Goods&#39;</span>, <span style=color:#a6e22e>title</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;订单管理&#39;</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>icon</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;ShoppingCart&#39;</span>, <span style=color:#a6e22e>title</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;购物车列表&#39;</span>}
</span></span><span style=display:flex><span>];
</span></span><span style=display:flex><span><span style=color:#75715e>// 通用头数据
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>headItems</span> <span style=color:#f92672>=</span> [
</span></span><span style=display:flex><span>  {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;ipt&#39;</span>, <span style=color:#a6e22e>iptValue</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>memberIdIpt</span>.<span style=color:#a6e22e>value</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>memberId</span> =&gt; {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>courseIdIpt</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;&#39;</span>;
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>memberIdIpt</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>memberId</span>;
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>page</span>();
</span></span><span style=display:flex><span>    }, <span style=color:#a6e22e>placeholder</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;输入会员ID..&#39;</span>, <span style=color:#a6e22e>span</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>5</span>
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>  {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;ipt&#39;</span>, <span style=color:#a6e22e>iptValue</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>courseIdIpt</span>.<span style=color:#a6e22e>value</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>courseId</span> =&gt; {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>memberIdIpt</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;&#39;</span>;
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>courseIdIpt</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>courseId</span>;
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>page</span>();
</span></span><span style=display:flex><span>    }, <span style=color:#a6e22e>placeholder</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;输入课程ID..&#39;</span>, <span style=color:#a6e22e>span</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>5</span>
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;insertBtn&#39;</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>notYet</span>, <span style=color:#a6e22e>offset</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>11</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;deleteBtn&#39;</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>notYet</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;excelBtn&#39;</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>notYet</span>},
</span></span><span style=display:flex><span>];
</span></span><span style=display:flex><span><span style=color:#75715e>// 表格中间列数据
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>columns</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>([
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>column</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#39;会员信息&#39;</span>, <span style=color:#e6db74>&#39;会员主键&#39;</span>], <span style=color:#a6e22e>property</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;member.id&#39;</span>, <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;tag&#39;</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>column</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#39;会员信息&#39;</span>, <span style=color:#e6db74>&#39;会员账号&#39;</span>], <span style=color:#a6e22e>property</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;member.username&#39;</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>column</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#39;会员信息&#39;</span>, <span style=color:#e6db74>&#39;会员昵称&#39;</span>], <span style=color:#a6e22e>property</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;member.nickname&#39;</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>column</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#39;课程信息&#39;</span>, <span style=color:#e6db74>&#39;课程主键&#39;</span>], <span style=color:#a6e22e>property</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;course.id&#39;</span>, <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;tag&#39;</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>column</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#39;课程信息&#39;</span>, <span style=color:#e6db74>&#39;课程标题&#39;</span>], <span style=color:#a6e22e>property</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;course.title&#39;</span>, <span style=color:#a6e22e>prefix</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;《&#39;</span>, <span style=color:#a6e22e>suffix</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;》&#39;</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>column</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#39;课程信息&#39;</span>, <span style=color:#e6db74>&#39;课程单价&#39;</span>], <span style=color:#a6e22e>property</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;course.price&#39;</span>, <span style=color:#a6e22e>suffix</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;元&#39;</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>column</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#39;课程信息&#39;</span>, <span style=color:#e6db74>&#39;课程描述&#39;</span>], <span style=color:#a6e22e>property</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;course.info&#39;</span>, <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;card&#39;</span>},
</span></span><span style=display:flex><span>]);
</span></span><span style=display:flex><span><span style=color:#75715e>// 表格末尾列数据
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>buttons</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>([
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>btnText</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;会员详情&#39;</span>, <span style=color:#a6e22e>btnType</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;info&#39;</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>openMemberInfoDrawer</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>btnText</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;课程详情&#39;</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>openCourseInfoDrawer</span>},
</span></span><span style=display:flex><span>]);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 分页查询 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 分页查询
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>page</span>(<span style=color:#a6e22e>pageNumber</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>pageInfo</span>[<span style=color:#e6db74>&#39;pageNumber&#39;</span>], <span style=color:#a6e22e>pageSize</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>pageInfo</span>[<span style=color:#e6db74>&#39;pageSize&#39;</span>],
</span></span><span style=display:flex><span>                    <span style=color:#a6e22e>courseId</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>courseIdIpt</span>.<span style=color:#a6e22e>value</span>,
</span></span><span style=display:flex><span>                    <span style=color:#a6e22e>memberId</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>memberIdIpt</span>.<span style=color:#a6e22e>value</span>) {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>pageConfig</span> <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;params&#39;</span><span style=color:#f92672>:</span> {<span style=color:#e6db74>&#39;pageNumber&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>pageNumber</span>, <span style=color:#e6db74>&#39;pageSize&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>pageSize</span>},
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;records&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>currentRecords</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;pageInfo&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>pageInfo</span>,
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// 根据会员分页
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>memberId</span> <span style=color:#f92672>!==</span> <span style=color:#e6db74>&#39;&#39;</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>pageConfig</span>[<span style=color:#e6db74>&#39;api&#39;</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>pageMemberApi</span>;
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>pageConfig</span>[<span style=color:#e6db74>&#39;secondParam&#39;</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>memberId</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>myPage</span>(<span style=color:#a6e22e>pageConfig</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span>;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// 根据课程分页
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>courseId</span> <span style=color:#f92672>!==</span> <span style=color:#e6db74>&#39;&#39;</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>pageConfig</span>[<span style=color:#e6db74>&#39;api&#39;</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>pageCourseApi</span>;
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>pageConfig</span>[<span style=color:#e6db74>&#39;secondParam&#39;</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>courseId</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>myPage</span>(<span style=color:#a6e22e>pageConfig</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span>;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// 全量分页
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>pageConfig</span>[<span style=color:#e6db74>&#39;api&#39;</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>pageApi</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>pageConfig</span>[<span style=color:#e6db74>&#39;secondParam&#39;</span>] <span style=color:#f92672>=</span> <span style=color:#66d9ef>null</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>myPage</span>(<span style=color:#a6e22e>pageConfig</span>);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 会员详情 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 打开抽屉: 设计列表标题 + 设计列表项 + 打开抽屉
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>openMemberInfoDrawer</span>(<span style=color:#a6e22e>record</span>) {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>descTitle</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;查看会员详情&#39;</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>descItems</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> [
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;会员头像&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;member&#39;</span>][<span style=color:#e6db74>&#39;avatar&#39;</span>], <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;img&#39;</span>, <span style=color:#a6e22e>minio</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>MINIO_AVATAR</span>.<span style=color:#a6e22e>value</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;会员账号&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;member&#39;</span>][<span style=color:#e6db74>&#39;username&#39;</span>]},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;会员昵称&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;member&#39;</span>][<span style=color:#e6db74>&#39;nickname&#39;</span>]},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;会员年龄&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;member&#39;</span>][<span style=color:#e6db74>&#39;age&#39;</span>]},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;会员性别&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;member&#39;</span>][<span style=color:#e6db74>&#39;gender&#39;</span>], <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>genderStr</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;会员星座&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;member&#39;</span>][<span style=color:#e6db74>&#39;zodiac&#39;</span>]},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;所在省份&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;member&#39;</span>][<span style=color:#e6db74>&#39;province&#39;</span>]},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;邮箱地址&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;member&#39;</span>][<span style=color:#e6db74>&#39;email&#39;</span>]},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;真实姓名&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;member&#39;</span>][<span style=color:#e6db74>&#39;realname&#39;</span>]},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;手机号码&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;member&#39;</span>][<span style=color:#e6db74>&#39;phone&#39;</span>]},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;身份证号&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;member&#39;</span>][<span style=color:#e6db74>&#39;idcard&#39;</span>]},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;粉丝数量&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;member&#39;</span>][<span style=color:#e6db74>&#39;fanCount&#39;</span>]},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;创建时间&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;created&#39;</span>], <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>dateStr</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;修改时间&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;updated&#39;</span>], <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>dateStr</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;会员描述&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;member&#39;</span>][<span style=color:#e6db74>&#39;info&#39;</span>], <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;card&#39;</span>},
</span></span><span style=display:flex><span>  ];
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>descDrawer</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 课程详情 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 打开抽屉: 设计列表标题 + 设计列表项 + 打开抽屉
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>openCourseInfoDrawer</span>(<span style=color:#a6e22e>record</span>) {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>descTitle</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;查看课程详情&#39;</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>descItems</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> [
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;课程封面&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;course&#39;</span>][<span style=color:#e6db74>&#39;cover&#39;</span>], <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;img&#39;</span>, <span style=color:#a6e22e>minio</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>MINIO_COVER</span>.<span style=color:#a6e22e>value</span>, <span style=color:#a6e22e>large</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;课程标题&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;course&#39;</span>][<span style=color:#e6db74>&#39;title&#39;</span>], <span style=color:#a6e22e>prefix</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;《&#39;</span>, <span style=color:#a6e22e>suffix</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;》&#39;</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;课程作者&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;course&#39;</span>][<span style=color:#e6db74>&#39;member&#39;</span>][<span style=color:#e6db74>&#39;username&#39;</span>]},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;课程类目&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;course&#39;</span>][<span style=color:#e6db74>&#39;category&#39;</span>][<span style=color:#e6db74>&#39;title&#39;</span>], <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;tag&#39;</span>, <span style=color:#a6e22e>tagType</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;primary&#39;</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;课程单价&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;course&#39;</span>][<span style=color:#e6db74>&#39;price&#39;</span>], <span style=color:#a6e22e>suffix</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;元&#39;</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;课程评分&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;course&#39;</span>][<span style=color:#e6db74>&#39;star&#39;</span>], <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;star&#39;</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;创建时间&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;created&#39;</span>], <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>dateStr</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;修改时间&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;updated&#39;</span>], <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>dateStr</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;课程描述&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;course&#39;</span>][<span style=color:#e6db74>&#39;info&#39;</span>], <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;card&#39;</span>},
</span></span><span style=display:flex><span>  ];
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>descDrawer</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== mount ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>onBeforeMount</span>(() =&gt; <span style=color:#a6e22e>page</span>());
</span></span></code></pre></div><h2 id=e08-优惠卷列表组件>E08. 优惠卷列表组件</h2><blockquote><p>心法: 优惠卷列表组件 <code>@/views/oms/Coupons.vue</code></p></blockquote><p><img src=/%E7%AC%AC4%E9%98%B6%E6%AE%B5-LESSON/JB4-5-%E5%90%8E%E5%8F%B0%E5%89%8D%E7%AB%AF/image/Coupons%E9%A1%B5%E9%9D%A2.png alt></p><blockquote><p>武技: 开发优惠卷列表组件 <code>@/views/oms/Coupons.vue</code></p></blockquote><ol><li>配置Coupons组件路由:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span>{  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>path</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;/Main&#39;</span>, <span style=color:#a6e22e>name</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Main&#39;</span>, <span style=color:#a6e22e>component</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>Main</span>,  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>redirect</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;/Board&#39;</span>,  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>children</span><span style=color:#f92672>:</span> [  
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>path</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;/Coupons&#39;</span>, <span style=color:#a6e22e>name</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Coupons&#39;</span>, <span style=color:#a6e22e>component</span><span style=color:#f92672>:</span> () =&gt; <span style=color:#66d9ef>import</span>(<span style=color:#e6db74>&#39;@/views/oms/Coupons&#39;</span>)},   
</span></span><span style=display:flex><span>  ]  
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><ol start=2><li>开发Coupons组件布局:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>&lt;<span style=color:#f92672>my-nav</span> <span style=color:#a6e22e>:items</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;navItems&#34;</span>/&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>my-head</span> <span style=color:#a6e22e>:items</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;headItems&#34;</span>/&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>my-table</span> <span style=color:#a6e22e>:records</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;currentRecords&#34;</span>
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>:columns</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;columns&#34;</span>
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>:buttons</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;buttons&#34;</span>
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>:selectionChange</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;selectionChange&#34;</span>/&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>my-pager</span> <span style=color:#a6e22e>:pageInfo</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;pageInfo&#34;</span>/&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>el-drawer</span> <span style=color:#a6e22e>title</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;详情抽屉&#34;</span> <span style=color:#a6e22e>v-model</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;descDrawer&#34;</span> <span style=color:#a6e22e>size</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;30%&#34;</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>my-list</span> <span style=color:#a6e22e>:items</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;descItems&#34;</span> <span style=color:#a6e22e>:title</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;descTitle&#34;</span>/&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>el-drawer</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>el-drawer</span> <span style=color:#a6e22e>title</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;单增抽屉 - 添加优惠卷记录&#34;</span> <span style=color:#a6e22e>v-model</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;insertDrawer&#34;</span> <span style=color:#a6e22e>size</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;30%&#34;</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>my-form</span> <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;insert&#34;</span> <span style=color:#a6e22e>:items</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;insertFormItems&#34;</span> <span style=color:#a6e22e>:data</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;insertFormData&#34;</span> <span style=color:#a6e22e>:rule</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;insertFormRule&#34;</span>
</span></span><span style=display:flex><span>           <span style=color:#a6e22e>:api</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;saveApi&#34;</span> <span style=color:#a6e22e>:fn</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;closeInsertDrawer&#34;</span>/&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>el-drawer</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>el-drawer</span> <span style=color:#a6e22e>title</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;修改抽屉 - 修改优惠卷记录&#34;</span> <span style=color:#a6e22e>v-model</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;updateDrawer&#34;</span> <span style=color:#a6e22e>size</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;30%&#34;</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>my-form</span> <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;update&#34;</span> <span style=color:#a6e22e>:items</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;updateFormItems&#34;</span> <span style=color:#a6e22e>:data</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;updateFormData&#34;</span> <span style=color:#a6e22e>:rule</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;updateFormRule&#34;</span>
</span></span><span style=display:flex><span>           <span style=color:#a6e22e>:api</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;updateApi&#34;</span> <span style=color:#a6e22e>:fn</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;closeUpdateDrawer&#34;</span>/&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>el-drawer</span>&gt;
</span></span></code></pre></div><ol start=3><li>开发Coupons组件样式:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-css data-lang=css><span style=display:flex><span><span style=color:#75715e>/*暂无*/</span>
</span></span></code></pre></div><ol start=4><li>开发Coupons组件脚本:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>MyNav</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/components/MyNav&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>MyHead</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/components/MyHead&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>MyTable</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/components/MyTable&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>MyPager</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/components/MyPager&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>MyList</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/components/MyList&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>MyForm</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/components/MyForm&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>onBeforeMount</span>, <span style=color:#a6e22e>shallowReactive</span>, <span style=color:#a6e22e>shallowRef</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;vue&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>couponsStateStr</span>, <span style=color:#a6e22e>dateStr</span>, <span style=color:#a6e22e>elConfirm</span>, <span style=color:#a6e22e>getResponseData</span>, <span style=color:#a6e22e>notYet</span>,} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/util&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>myBatchDelete</span>, <span style=color:#a6e22e>myDelete</span>, <span style=color:#a6e22e>myPage</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/util&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>pageApi</span>, <span style=color:#a6e22e>removeApi</span>, <span style=color:#a6e22e>removeBatchApi</span>, <span style=color:#a6e22e>saveApi</span>, <span style=color:#a6e22e>updateApi</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/api/coupons&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>ElMessage</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;element-plus&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 通用数据 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 当前操作的优惠卷对象 + 当前操作的优惠卷对象列表 + 当前操作的优惠卷状态[0可用，1禁用]
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>currentRecord</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>();
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>currentRecords</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>();
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>currentState</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>(<span style=color:#ae81ff>0</span>);
</span></span><span style=display:flex><span><span style=color:#75715e>// 分页信息
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>pageInfo</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowReactive</span>({<span style=color:#a6e22e>pageNumber</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>1</span>, <span style=color:#a6e22e>pageSize</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>5</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>page</span>});
</span></span><span style=display:flex><span><span style=color:#75715e>// 详情抽屉 + 详情标题 + 详情数据
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>descDrawer</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>(<span style=color:#66d9ef>null</span>);
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>descTitle</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>(<span style=color:#e6db74>&#39;&#39;</span>);
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>descItems</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>([]);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 组件数据 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 导航数据
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>navItems</span> <span style=color:#f92672>=</span> [
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>icon</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;House&#39;</span>, <span style=color:#a6e22e>title</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;首页&#39;</span>, <span style=color:#a6e22e>url</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;/Board&#39;</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>icon</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Goods&#39;</span>, <span style=color:#a6e22e>title</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;订单管理&#39;</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>icon</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Present&#39;</span>, <span style=color:#a6e22e>title</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;优惠卷列表&#39;</span>}
</span></span><span style=display:flex><span>];
</span></span><span style=display:flex><span><span style=color:#75715e>// 通用头数据
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>headItems</span> <span style=color:#f92672>=</span> [
</span></span><span style=display:flex><span>  {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;rdo&#39;</span>, <span style=color:#a6e22e>rdoValue</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>currentState</span>.<span style=color:#a6e22e>value</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>currentCouponsState</span> =&gt; {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>currentState</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>currentCouponsState</span>;
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>page</span>();
</span></span><span style=display:flex><span>    }, <span style=color:#a6e22e>rdoItems</span><span style=color:#f92672>:</span> [
</span></span><span style=display:flex><span>      {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>0</span>, <span style=color:#a6e22e>text</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;可用优惠卷&#39;</span>},
</span></span><span style=display:flex><span>      {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>1</span>, <span style=color:#a6e22e>text</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;不可用优惠卷&#39;</span>},
</span></span><span style=display:flex><span>    ], <span style=color:#a6e22e>span</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>4</span>, <span style=color:#a6e22e>offset</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>17</span>
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;insertBtn&#39;</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>openInsertDrawer</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;deleteBtn&#39;</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>removeBatch</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;excelBtn&#39;</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>notYet</span>},
</span></span><span style=display:flex><span>];
</span></span><span style=display:flex><span><span style=color:#75715e>// 表格中间列数据
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>columns</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>([
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>column</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#39;基础信息&#39;</span>, <span style=color:#e6db74>&#39;可用状态&#39;</span>], <span style=color:#a6e22e>property</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;state&#39;</span>, <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;tag&#39;</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>couponsStateStr</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>column</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#39;基础信息&#39;</span>, <span style=color:#e6db74>&#39;标题名称&#39;</span>], <span style=color:#a6e22e>property</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;name&#39;</span>, <span style=color:#a6e22e>prefix</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;《&#39;</span>, <span style=color:#a6e22e>suffix</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;》&#39;</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>column</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#39;基础信息&#39;</span>, <span style=color:#e6db74>&#39;兑换口令&#39;</span>], <span style=color:#a6e22e>property</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;code&#39;</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>column</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#39;基础信息&#39;</span>, <span style=color:#e6db74>&#39;优惠金额&#39;</span>], <span style=color:#a6e22e>property</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;value&#39;</span>, <span style=color:#a6e22e>suffix</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;元&#39;</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>column</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#39;基础信息&#39;</span>, <span style=color:#e6db74>&#39;满减条件&#39;</span>], <span style=color:#a6e22e>property</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;condition&#39;</span>, <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;card&#39;</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>column</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#39;基础信息&#39;</span>, <span style=color:#e6db74>&#39;可用描述&#39;</span>], <span style=color:#a6e22e>property</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;description&#39;</span>, <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;card&#39;</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>column</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#39;基础信息&#39;</span>, <span style=color:#e6db74>&#39;禁用原因&#39;</span>], <span style=color:#a6e22e>property</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;reason&#39;</span>, <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;card&#39;</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>column</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#39;基础信息&#39;</span>, <span style=color:#e6db74>&#39;金额文案&#39;</span>], <span style=color:#a6e22e>property</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;valueDesc&#39;</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>column</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#39;基础信息&#39;</span>, <span style=color:#e6db74>&#39;单位文案&#39;</span>], <span style=color:#a6e22e>property</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;unitDesc&#39;</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>column</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#39;基础信息&#39;</span>, <span style=color:#e6db74>&#39;生效时间&#39;</span>], <span style=color:#a6e22e>property</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;startAt&#39;</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>dateStr</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>column</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#39;基础信息&#39;</span>, <span style=color:#e6db74>&#39;失效时间&#39;</span>], <span style=color:#a6e22e>property</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;endAt&#39;</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>dateStr</span>},
</span></span><span style=display:flex><span>]);
</span></span><span style=display:flex><span><span style=color:#75715e>// 表格末尾列数据
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>buttons</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>([
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;info&#39;</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>openInfoDrawer</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;update&#39;</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>openUpdateDrawer</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;delete&#39;</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>remove</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>btnText</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;立即失效&#39;</span>, <span style=color:#a6e22e>btnType</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;primary&#39;</span>, <span style=color:#a6e22e>btnIcon</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;CircleCloseFilled&#39;</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>destroy</span>},
</span></span><span style=display:flex><span>]);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 分页查询 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 分页查询
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>page</span>(<span style=color:#a6e22e>pageNumber</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>pageInfo</span>[<span style=color:#e6db74>&#39;pageNumber&#39;</span>], <span style=color:#a6e22e>pageSize</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>pageInfo</span>[<span style=color:#e6db74>&#39;pageSize&#39;</span>],
</span></span><span style=display:flex><span>                    <span style=color:#a6e22e>state</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>currentState</span>.<span style=color:#a6e22e>value</span>) {
</span></span><span style=display:flex><span>  <span style=color:#75715e>// 根据状态分页
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>myPage</span>({
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;api&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>pageApi</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;params&#39;</span><span style=color:#f92672>:</span> {<span style=color:#e6db74>&#39;pageNumber&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>pageNumber</span>, <span style=color:#e6db74>&#39;pageSize&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>pageSize</span>},
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;records&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>currentRecords</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;pageInfo&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>pageInfo</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;secondParam&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>state</span>
</span></span><span style=display:flex><span>  });
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 单条添加 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 抽屉 + 表单数据 + 表单规则
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>insertDrawer</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>();
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>insertFormItems</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>();
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>insertFormData</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowReactive</span>({});
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>insertFormRule</span> <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>name</span><span style=color:#f92672>:</span> [{<span style=color:#a6e22e>min</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>1</span>, <span style=color:#a6e22e>max</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>128</span>, <span style=color:#a6e22e>message</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;名称长度必须在1~128之间&#39;</span>}],
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>condition</span><span style=color:#f92672>:</span> [{<span style=color:#a6e22e>min</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>1</span>, <span style=color:#a6e22e>max</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>128</span>, <span style=color:#a6e22e>message</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;满减条件长度必须在1~128之间&#39;</span>}],
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>description</span><span style=color:#f92672>:</span> [{<span style=color:#a6e22e>min</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>1</span>, <span style=color:#a6e22e>max</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>128</span>, <span style=color:#a6e22e>message</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;可用描述长度必须在1~128之间&#39;</span>}],
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>reason</span><span style=color:#f92672>:</span> [{<span style=color:#a6e22e>min</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>1</span>, <span style=color:#a6e22e>max</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>128</span>, <span style=color:#a6e22e>message</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;禁用原因长度必须在1~128之间&#39;</span>}],
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>valueDesc</span><span style=color:#f92672>:</span> [{<span style=color:#a6e22e>min</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>1</span>, <span style=color:#a6e22e>max</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>128</span>, <span style=color:#a6e22e>message</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;金额文案长度必须在1~128之间&#39;</span>}],
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>unitDesc</span><span style=color:#f92672>:</span> [{<span style=color:#a6e22e>min</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>1</span>, <span style=color:#a6e22e>max</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>128</span>, <span style=color:#a6e22e>message</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;单位文案长度必须在1~128之间&#39;</span>}]
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 打开抽屉: 设计表单项 + 打开抽屉
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>openInsertDrawer</span>() {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>insertFormItems</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> [
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;名称标题&#39;</span>, <span style=color:#a6e22e>prop</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;name&#39;</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;优惠金额&#39;</span>, <span style=color:#a6e22e>prop</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;value&#39;</span>, <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;number&#39;</span>, <span style=color:#a6e22e>precision</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>2</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;满减条件&#39;</span>, <span style=color:#a6e22e>prop</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;condition&#39;</span>, <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;textarea&#39;</span>, <span style=color:#a6e22e>rows</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>3</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;可用描述&#39;</span>, <span style=color:#a6e22e>prop</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;description&#39;</span>, <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;textarea&#39;</span>, <span style=color:#a6e22e>rows</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>3</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;禁用原因&#39;</span>, <span style=color:#a6e22e>prop</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;reason&#39;</span>, <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;textarea&#39;</span>, <span style=color:#a6e22e>rows</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>3</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;金额文案&#39;</span>, <span style=color:#a6e22e>prop</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;valueDesc&#39;</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;单位文案&#39;</span>, <span style=color:#a6e22e>prop</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;unitDesc&#39;</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;生效时间&#39;</span>, <span style=color:#a6e22e>prop</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;startAt&#39;</span>, <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;datetime&#39;</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;失效时间&#39;</span>, <span style=color:#a6e22e>prop</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;endAt&#39;</span>, <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;datetime&#39;</span>}
</span></span><span style=display:flex><span>  ];
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>insertDrawer</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 关闭抽屉: 关闭抽屉 + 重新分页
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>closeInsertDrawer</span>() {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>insertDrawer</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>false</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>page</span>();
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 查看详情 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 打开抽屉: 设计列表标题 + 设计列表项 + 打开抽屉
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>openInfoDrawer</span>(<span style=color:#a6e22e>record</span>) {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>descTitle</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;查看优惠卷详情&#39;</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>descItems</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> [
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;兑换口令&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;code&#39;</span>]},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;名称标题&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;name&#39;</span>], <span style=color:#a6e22e>prefix</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;《&#39;</span>, <span style=color:#a6e22e>suffix</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;》&#39;</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;优惠金额&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;value&#39;</span>], <span style=color:#a6e22e>suffix</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;元&#39;</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;可用状态&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;state&#39;</span>], <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;tag&#39;</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>couponsStateStr</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;满减条件&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;condition&#39;</span>], <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;card&#39;</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;可用描述&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;description&#39;</span>], <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;card&#39;</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;禁用原因&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;reason&#39;</span>], <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;card&#39;</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;金额文案&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;valueDesc&#39;</span>]},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;单位文案&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;unitDesc&#39;</span>]},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;生效时间&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;startAt&#39;</span>], <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>dateStr</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;失效时间&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;endAt&#39;</span>], <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>dateStr</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;创建时间&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;created&#39;</span>], <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>dateStr</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;修改时间&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;updated&#39;</span>], <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>dateStr</span>},
</span></span><span style=display:flex><span>  ];
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>descDrawer</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 单条修改 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 抽屉 + 表单数据 + 表单规则
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>updateDrawer</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>();
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>updateFormData</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowReactive</span>({});
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>updateFormItems</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>();
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>updateFormRule</span> <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>name</span><span style=color:#f92672>:</span> [{<span style=color:#a6e22e>min</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>1</span>, <span style=color:#a6e22e>max</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>128</span>, <span style=color:#a6e22e>message</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;名称长度必须在1~128之间&#39;</span>}],
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>condition</span><span style=color:#f92672>:</span> [{<span style=color:#a6e22e>min</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>1</span>, <span style=color:#a6e22e>max</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>128</span>, <span style=color:#a6e22e>message</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;满减条件长度必须在1~128之间&#39;</span>}],
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>description</span><span style=color:#f92672>:</span> [{<span style=color:#a6e22e>min</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>1</span>, <span style=color:#a6e22e>max</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>128</span>, <span style=color:#a6e22e>message</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;可用描述长度必须在1~128之间&#39;</span>}],
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>reason</span><span style=color:#f92672>:</span> [{<span style=color:#a6e22e>min</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>1</span>, <span style=color:#a6e22e>max</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>128</span>, <span style=color:#a6e22e>message</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;禁用原因长度必须在1~128之间&#39;</span>}],
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>valueDesc</span><span style=color:#f92672>:</span> [{<span style=color:#a6e22e>min</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>1</span>, <span style=color:#a6e22e>max</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>128</span>, <span style=color:#a6e22e>message</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;金额文案长度必须在1~128之间&#39;</span>}],
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>unitDesc</span><span style=color:#f92672>:</span> [{<span style=color:#a6e22e>min</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>1</span>, <span style=color:#a6e22e>max</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>128</span>, <span style=color:#a6e22e>message</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;单位文案长度必须在1~128之间&#39;</span>}]
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 打开抽屉: 赋值表单默认值 + 设计表单项 + 打开抽屉
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>openUpdateDrawer</span>(<span style=color:#a6e22e>record</span>) {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>updateFormData</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>record</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>updateFormItems</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> [
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;兑换口令&#39;</span>, <span style=color:#a6e22e>prop</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;code&#39;</span>, <span style=color:#a6e22e>disabled</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;名称标题&#39;</span>, <span style=color:#a6e22e>prop</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;name&#39;</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;优惠金额&#39;</span>, <span style=color:#a6e22e>prop</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;value&#39;</span>, <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;number&#39;</span>, <span style=color:#a6e22e>precision</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>2</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;满减条件&#39;</span>, <span style=color:#a6e22e>prop</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;condition&#39;</span>, <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;textarea&#39;</span>, <span style=color:#a6e22e>rows</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>3</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;可用描述&#39;</span>, <span style=color:#a6e22e>prop</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;description&#39;</span>, <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;textarea&#39;</span>, <span style=color:#a6e22e>rows</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>3</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;禁用原因&#39;</span>, <span style=color:#a6e22e>prop</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;reason&#39;</span>, <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;textarea&#39;</span>, <span style=color:#a6e22e>rows</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>3</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;金额文案&#39;</span>, <span style=color:#a6e22e>prop</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;valueDesc&#39;</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;单位文案&#39;</span>, <span style=color:#a6e22e>prop</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;unitDesc&#39;</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;生效时间&#39;</span>, <span style=color:#a6e22e>prop</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;startAt&#39;</span>, <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;datetime&#39;</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;失效时间&#39;</span>, <span style=color:#a6e22e>prop</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;endAt&#39;</span>, <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;datetime&#39;</span>}
</span></span><span style=display:flex><span>  ];
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>updateDrawer</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 关闭抽屉: 关闭抽屉 + 重新分页
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>closeUpdateDrawer</span>() {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>updateDrawer</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>false</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>page</span>();
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 单条删除 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 删除优惠卷信息
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>remove</span>(<span style=color:#a6e22e>record</span>) {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>myDelete</span>({
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;id&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;id&#39;</span>],
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;api&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>removeApi</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;callback&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>page</span>
</span></span><span style=display:flex><span>  });
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 批量删除 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 优惠卷主键数组
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>ids</span> <span style=color:#f92672>=</span> [];
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 当复选框发生改变时触发
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>selectionChange</span>(<span style=color:#a6e22e>row</span>) {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>ids</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>row</span>.<span style=color:#a6e22e>map</span>(<span style=color:#a6e22e>e</span> =&gt; <span style=color:#a6e22e>e</span>[<span style=color:#e6db74>&#39;id&#39;</span>]);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 批量删除优惠卷信息
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>removeBatch</span>() {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>myBatchDelete</span>({
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;ids&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>ids</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;api&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>removeBatchApi</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;callback&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>page</span>
</span></span><span style=display:flex><span>  });
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 立即失效 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 立即失效: 危险操作保护 + 修改优惠卷状态为禁用
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>destroy</span>(<span style=color:#a6e22e>record</span>) {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (<span style=color:#f92672>!</span><span style=color:#66d9ef>await</span> <span style=color:#a6e22e>elConfirm</span>(<span style=color:#e6db74>&#39;该操作会让优惠卷立刻失效，确认吗？&#39;</span>)) <span style=color:#66d9ef>return</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;state&#39;</span>] <span style=color:#f92672>===</span> <span style=color:#ae81ff>0</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>data</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>getResponseData</span>(<span style=color:#66d9ef>await</span> <span style=color:#a6e22e>updateApi</span>({<span style=color:#e6db74>&#39;id&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;id&#39;</span>], <span style=color:#e6db74>&#39;state&#39;</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>1</span>}));
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>data</span>) {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>ElMessage</span>.<span style=color:#a6e22e>success</span>(<span style=color:#e6db74>&#39;该优惠卷已失效！&#39;</span>);
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>page</span>();
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== mount ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>onBeforeMount</span>(() =&gt; <span style=color:#a6e22e>page</span>());
</span></span></code></pre></div><h2 id=e09-订单列表组件>E09. 订单列表组件</h2><blockquote><p>心法: 订单列表组件 <code>@/views/oms/Order.vue</code></p></blockquote><p><img src=/%E7%AC%AC4%E9%98%B6%E6%AE%B5-LESSON/JB4-5-%E5%90%8E%E5%8F%B0%E5%89%8D%E7%AB%AF/image/Order%E9%A1%B5%E9%9D%A2.png alt></p><blockquote><p>武技: 开发订单列表组件 <code>@/views/oms/Order.vue</code></p></blockquote><ol><li>配置Order组件路由:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span>{  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>path</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;/Main&#39;</span>, <span style=color:#a6e22e>name</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Main&#39;</span>, <span style=color:#a6e22e>component</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>Main</span>,  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>redirect</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;/Board&#39;</span>,  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>children</span><span style=color:#f92672>:</span> [  
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>path</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;/Order&#39;</span>, <span style=color:#a6e22e>name</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Order&#39;</span>, <span style=color:#a6e22e>component</span><span style=color:#f92672>:</span> () =&gt; <span style=color:#66d9ef>import</span>(<span style=color:#e6db74>&#39;@/views/oms/Order&#39;</span>)},   
</span></span><span style=display:flex><span>  ]  
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><ol start=2><li>开发Order组件布局:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>&lt;<span style=color:#f92672>my-nav</span> <span style=color:#a6e22e>:items</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;navItems&#34;</span>/&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>my-head</span> <span style=color:#a6e22e>:items</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;headItems&#34;</span>/&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>my-table</span> <span style=color:#a6e22e>:records</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;currentRecords&#34;</span>
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>:columns</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;columns&#34;</span>
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>:buttons</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;buttons&#34;</span>/&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>my-pager</span> <span style=color:#a6e22e>:pageInfo</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;pageInfo&#34;</span>/&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>el-drawer</span> <span style=color:#a6e22e>title</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;详情抽屉&#34;</span> <span style=color:#a6e22e>v-model</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;descDrawer&#34;</span> <span style=color:#a6e22e>size</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;30%&#34;</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>my-list</span> <span style=color:#a6e22e>:items</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;descItems&#34;</span> <span style=color:#a6e22e>:title</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;descTitle&#34;</span>/&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>el-drawer</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>el-drawer</span> <span style=color:#a6e22e>title</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;查看订单明细记录&#34;</span> <span style=color:#a6e22e>v-model</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;orderDetailDrawer&#34;</span> <span style=color:#a6e22e>size</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;40%&#34;</span>
</span></span><span style=display:flex><span>           <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;order-detail-drawer&#34;</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>section</span> <span style=color:#a6e22e>v-if</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;currentOrderDetails.length &gt; 0&#34;</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>el-row</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;order-detail-item&#34;</span> <span style=color:#a6e22e>v-for</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;course in currentOrderDetails&#34;</span> <span style=color:#a6e22e>:key</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;course[&#39;id&#39;]&#34;</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      &lt;<span style=color:#f92672>el-col</span> <span style=color:#a6e22e>:span</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;8&#34;</span>&gt;
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>el-image</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;course-cover-img&#34;</span> <span style=color:#a6e22e>fit</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;fill&#34;</span> <span style=color:#a6e22e>preview-teleported</span>
</span></span><span style=display:flex><span>                  <span style=color:#a6e22e>:src</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;MINIO_COVER(course[&#39;cover&#39;])&#34;</span>
</span></span><span style=display:flex><span>                  <span style=color:#a6e22e>:preview-src-list</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;[MINIO_COVER(course[&#39;cover&#39;])]&#34;</span>/&gt;
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;course-cover-img-tip&#34;</span>&gt;
</span></span><span style=display:flex><span>          &lt;<span style=color:#f92672>el-rate</span> <span style=color:#a6e22e>v-model</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;course[&#39;star&#39;]&#34;</span>/&gt;
</span></span><span style=display:flex><span>          &lt;<span style=color:#f92672>el-tag</span> <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;primary&#34;</span>&gt;{{ course[&#39;category&#39;][&#39;title&#39;] }}&lt;/<span style=color:#f92672>el-tag</span>&gt;
</span></span><span style=display:flex><span>          &lt;<span style=color:#f92672>el-divider</span> <span style=color:#a6e22e>direction</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;vertical&#34;</span>/&gt;
</span></span><span style=display:flex><span>          &lt;<span style=color:#f92672>el-tag</span> <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;success&#34;</span>&gt;￥{{ course[&#39;price&#39;] }}元&lt;/<span style=color:#f92672>el-tag</span>&gt;
</span></span><span style=display:flex><span>        &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>      &lt;/<span style=color:#f92672>el-col</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      &lt;<span style=color:#f92672>el-col</span> <span style=color:#a6e22e>:span</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;16&#34;</span>&gt;
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>el-card</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;content&#34;</span>&gt;
</span></span><span style=display:flex><span>          &lt;<span style=color:#f92672>div</span>&gt;&lt;<span style=color:#f92672>strong</span>&gt;标题: &lt;/<span style=color:#f92672>strong</span>&gt;{{ course[&#39;title&#39;] }}&lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>          &lt;<span style=color:#f92672>div</span>&gt;&lt;<span style=color:#f92672>strong</span>&gt;作者: &lt;/<span style=color:#f92672>strong</span>&gt;{{ course[&#39;member&#39;][&#39;username&#39;] }}&lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>          &lt;<span style=color:#f92672>div</span>&gt;&lt;<span style=color:#f92672>strong</span>&gt;简介: &lt;/<span style=color:#f92672>strong</span>&gt;{{ course[&#39;info&#39;] }}&lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>        &lt;/<span style=color:#f92672>el-card</span>&gt;
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;content-tip&#34;</span>&gt;
</span></span><span style=display:flex><span>          首次创建日期: {{ dateStr(course[&#39;created&#39;]) }}
</span></span><span style=display:flex><span>          &lt;<span style=color:#f92672>br</span>/&gt;
</span></span><span style=display:flex><span>          最后修改时间: {{ dateStr(course[&#39;updated&#39;]) }}
</span></span><span style=display:flex><span>        &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>      &lt;/<span style=color:#f92672>el-col</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    &lt;/<span style=color:#f92672>el-row</span>&gt;
</span></span><span style=display:flex><span>  &lt;/<span style=color:#f92672>section</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>section</span> <span style=color:#a6e22e>v-else</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>small</span>&gt;该订单暂无明细记录&lt;/<span style=color:#f92672>small</span>&gt;
</span></span><span style=display:flex><span>  &lt;/<span style=color:#f92672>section</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>el-drawer</span>&gt;
</span></span></code></pre></div><ol start=3><li>开发Order组件样式:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-css data-lang=css><span style=display:flex><span>.<span style=color:#a6e22e>order-detail-item</span> {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#960050;background-color:#1e0010>.course-cover-img</span> <span style=color:#960050;background-color:#1e0010>{</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>width</span>: <span style=color:#ae81ff>100</span><span style=color:#66d9ef>%</span>; <span style=color:#960050;background-color:#1e0010>//</span> <span style=color:#960050;background-color:#1e0010>宽度</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>height</span>: <span style=color:#ae81ff>100</span><span style=color:#66d9ef>px</span>; <span style=color:#960050;background-color:#1e0010>//</span> <span style=color:#960050;background-color:#1e0010>高度</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>border-radius</span>: <span style=color:#ae81ff>5</span><span style=color:#66d9ef>%</span>; <span style=color:#960050;background-color:#1e0010>//圆角</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  .<span style=color:#a6e22e>course-cover-img-tip</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>text-align</span>: <span style=color:#66d9ef>center</span>; <span style=color:#960050;background-color:#1e0010>//</span> <span style=color:#960050;background-color:#1e0010>居中</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  .<span style=color:#a6e22e>content</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>margin-left</span>: <span style=color:#ae81ff>20</span><span style=color:#66d9ef>px</span>; <span style=color:#960050;background-color:#1e0010>//</span> <span style=color:#960050;background-color:#1e0010>左外边距</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>height</span>: <span style=color:#ae81ff>160</span><span style=color:#66d9ef>px</span>; <span style=color:#960050;background-color:#1e0010>//</span> <span style=color:#960050;background-color:#1e0010>高度</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>line-height</span>: <span style=color:#ae81ff>25</span><span style=color:#66d9ef>px</span>; <span style=color:#960050;background-color:#1e0010>//</span> <span style=color:#960050;background-color:#1e0010>行号</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  .<span style=color:#a6e22e>content-tip</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>float</span>: <span style=color:#66d9ef>right</span>; <span style=color:#960050;background-color:#1e0010>//</span> <span style=color:#960050;background-color:#1e0010>右浮动</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>font-size</span>: <span style=color:#66d9ef>smaller</span>; <span style=color:#960050;background-color:#1e0010>//</span> <span style=color:#960050;background-color:#1e0010>小号</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>color</span>: <span style=color:#ae81ff>#9a9696</span>; <span style=color:#960050;background-color:#1e0010>//</span> <span style=color:#960050;background-color:#1e0010>前景色</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>margin</span>: <span style=color:#ae81ff>5</span><span style=color:#66d9ef>px</span> <span style=color:#ae81ff>0</span> <span style=color:#ae81ff>20</span><span style=color:#66d9ef>px</span>; <span style=color:#960050;background-color:#1e0010>//</span> <span style=color:#960050;background-color:#1e0010>外边距</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>}</span>
</span></span></code></pre></div><ol start=4><li>开发Order组件脚本:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>MyNav</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/components/MyNav&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>MyHead</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;@/components/MyHead&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>MyTable</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/components/MyTable&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>MyPager</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/components/MyPager&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>MyList</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;@/components/MyList&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>onBeforeMount</span>, <span style=color:#a6e22e>shallowReactive</span>, <span style=color:#a6e22e>shallowRef</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;vue&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>couponsStateStr</span>, <span style=color:#a6e22e>dateStr</span>, <span style=color:#a6e22e>elConfirm</span>, <span style=color:#a6e22e>getResponseData</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/util&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>myPage</span>, <span style=color:#a6e22e>notYet</span>, <span style=color:#a6e22e>orderPayTypeCodeStr</span>, <span style=color:#a6e22e>orderStateStr</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/util&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>getBySnApi</span>, <span style=color:#a6e22e>pageApi</span>, <span style=color:#a6e22e>pageMemberApi</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/api/order&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>ORDER_EXCEL</span>, <span style=color:#a6e22e>MINIO_COVER</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/const&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>getInfoApi</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/api/coupons&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 通用数据 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 当前操作的订单对象 + 当前操作的订单对象列表 + 当前操作的订单状态[0未付款，1已付款]
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>currentRecord</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>();
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>currentRecords</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>();
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>currentState</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>(<span style=color:#ae81ff>1</span>);
</span></span><span style=display:flex><span><span style=color:#75715e>// 分页信息
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>pageInfo</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowReactive</span>({<span style=color:#a6e22e>pageNumber</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>1</span>, <span style=color:#a6e22e>pageSize</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>5</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>page</span>});
</span></span><span style=display:flex><span><span style=color:#75715e>// 订单编号搜索框 + 会员ID搜索框
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>snIpt</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>(<span style=color:#e6db74>&#39;&#39;</span>);
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>memberIdIpt</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>(<span style=color:#e6db74>&#39;&#39;</span>);
</span></span><span style=display:flex><span><span style=color:#75715e>// 详情抽屉 + 详情标题 + 详情数据
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>descDrawer</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>(<span style=color:#66d9ef>null</span>);
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>descTitle</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>(<span style=color:#e6db74>&#39;&#39;</span>);
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>descItems</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>([]);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 组件数据 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 导航数据
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>navItems</span> <span style=color:#f92672>=</span> [
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>icon</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;House&#39;</span>, <span style=color:#a6e22e>title</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;首页&#39;</span>, <span style=color:#a6e22e>url</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;/Board&#39;</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>icon</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Goods&#39;</span>, <span style=color:#a6e22e>title</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;订单管理&#39;</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>icon</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Goods&#39;</span>, <span style=color:#a6e22e>title</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;订单列表&#39;</span>}
</span></span><span style=display:flex><span>];
</span></span><span style=display:flex><span><span style=color:#75715e>// 通用头数据
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>headItems</span> <span style=color:#f92672>=</span> [
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;ipt&#39;</span>, <span style=color:#a6e22e>iptValue</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>snIpt</span>.<span style=color:#a6e22e>value</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>searchBySn</span>, <span style=color:#a6e22e>placeholder</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;输入订单编号..&#39;</span>, <span style=color:#a6e22e>span</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>5</span>},
</span></span><span style=display:flex><span>  {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;ipt&#39;</span>, <span style=color:#a6e22e>iptValue</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>memberIdIpt</span>.<span style=color:#a6e22e>value</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>currentMemberId</span> =&gt; {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>memberIdIpt</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>currentMemberId</span>;
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>page</span>();
</span></span><span style=display:flex><span>    }, <span style=color:#a6e22e>placeholder</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;输入会员ID..&#39;</span>, <span style=color:#a6e22e>span</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>5</span>
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>  {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;rdo&#39;</span>, <span style=color:#a6e22e>rdoValue</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>currentState</span>.<span style=color:#a6e22e>value</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>currentOrderState</span> =&gt; {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>currentState</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>currentOrderState</span>;
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>page</span>();
</span></span><span style=display:flex><span>    }, <span style=color:#a6e22e>rdoItems</span><span style=color:#f92672>:</span> [
</span></span><span style=display:flex><span>      {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>0</span>, <span style=color:#a6e22e>text</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;未付款订单&#39;</span>},
</span></span><span style=display:flex><span>      {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>1</span>, <span style=color:#a6e22e>text</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;已付款订单&#39;</span>},
</span></span><span style=display:flex><span>    ], <span style=color:#a6e22e>span</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>4</span>, <span style=color:#a6e22e>offset</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>7</span>
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;insertBtn&#39;</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>notYet</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;deleteBtn&#39;</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>notYet</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;excelBtn&#39;</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>excel</span>},
</span></span><span style=display:flex><span>];
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 表格中间列数据
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>columns</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>([
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>column</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#39;基础信息&#39;</span>, <span style=color:#e6db74>&#39;订单状态&#39;</span>], <span style=color:#a6e22e>property</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;state&#39;</span>, <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;tag&#39;</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>orderStateStr</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>column</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#39;基础信息&#39;</span>, <span style=color:#e6db74>&#39;订单编号&#39;</span>], <span style=color:#a6e22e>property</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;sn&#39;</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>column</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#39;基础信息&#39;</span>, <span style=color:#e6db74>&#39;订单总额&#39;</span>], <span style=color:#a6e22e>property</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;totalAmount&#39;</span>, <span style=color:#a6e22e>suffix</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;元&#39;</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>column</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#39;基础信息&#39;</span>, <span style=color:#e6db74>&#39;实际支付&#39;</span>], <span style=color:#a6e22e>property</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;payAmount&#39;</span>, <span style=color:#a6e22e>suffix</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;元&#39;</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>column</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#39;基础信息&#39;</span>, <span style=color:#e6db74>&#39;支付方式&#39;</span>], <span style=color:#a6e22e>property</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;payType&#39;</span>, <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;tag&#39;</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>orderPayTypeCodeStr</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>column</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#39;基础信息&#39;</span>, <span style=color:#e6db74>&#39;订单描述&#39;</span>], <span style=color:#a6e22e>property</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;info&#39;</span>, <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;card&#39;</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>column</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#39;会员信息&#39;</span>, <span style=color:#e6db74>&#39;会员主键&#39;</span>], <span style=color:#a6e22e>property</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;fkMemberId&#39;</span>, <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;tag&#39;</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>column</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#39;会员信息&#39;</span>, <span style=color:#e6db74>&#39;会员账号&#39;</span>], <span style=color:#a6e22e>property</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;username&#39;</span>},
</span></span><span style=display:flex><span>]);
</span></span><span style=display:flex><span><span style=color:#75715e>// 表格末尾列数据
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>buttons</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>([
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;info&#39;</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>openInfoDrawer</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>btnText</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;优惠详情&#39;</span>, <span style=color:#a6e22e>btnType</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;success&#39;</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>openCouponsInfoDrawer</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>btnText</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;订单明细&#39;</span>, <span style=color:#a6e22e>btnType</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;primary&#39;</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>openOrderDetailDrawer</span>},
</span></span><span style=display:flex><span>]);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 分页查询 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 分页查询
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>page</span>(<span style=color:#a6e22e>pageNumber</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>pageInfo</span>[<span style=color:#e6db74>&#39;pageNumber&#39;</span>], <span style=color:#a6e22e>pageSize</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>pageInfo</span>[<span style=color:#e6db74>&#39;pageSize&#39;</span>],
</span></span><span style=display:flex><span>                    <span style=color:#a6e22e>memberId</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>memberIdIpt</span>.<span style=color:#a6e22e>value</span>,
</span></span><span style=display:flex><span>                    <span style=color:#a6e22e>state</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>currentState</span>.<span style=color:#a6e22e>value</span>) {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>pageConfig</span> <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;params&#39;</span><span style=color:#f92672>:</span> {<span style=color:#e6db74>&#39;pageNumber&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>pageNumber</span>, <span style=color:#e6db74>&#39;pageSize&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>pageSize</span>},
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;records&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>currentRecords</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;pageInfo&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>pageInfo</span>,
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// 根据会员分页
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>memberId</span> <span style=color:#f92672>!==</span> <span style=color:#e6db74>&#39;&#39;</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>pageConfig</span>[<span style=color:#e6db74>&#39;api&#39;</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>pageMemberApi</span>;
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>pageConfig</span>[<span style=color:#e6db74>&#39;secondParam&#39;</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>memberId</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>myPage</span>(<span style=color:#a6e22e>pageConfig</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span>;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// 根据状态分页
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>pageConfig</span>[<span style=color:#e6db74>&#39;api&#39;</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>pageApi</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>pageConfig</span>[<span style=color:#e6db74>&#39;secondParam&#39;</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>state</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>myPage</span>(<span style=color:#a6e22e>pageConfig</span>);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 查看详情 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 打开抽屉: 设计列表标题 + 设计列表项 + 打开抽屉
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>openInfoDrawer</span>(<span style=color:#a6e22e>record</span>) {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>descTitle</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;查看订单详情&#39;</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>descItems</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> [
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;订单编号&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;sn&#39;</span>], <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;tag&#39;</span>, <span style=color:#a6e22e>prefix</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;No.&#39;</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;订单总额&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;totalAmount&#39;</span>], <span style=color:#a6e22e>suffix</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;元&#39;</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;支付方式&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;payType&#39;</span>], <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;tag&#39;</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>orderPayTypeCodeStr</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;订单状态&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;state&#39;</span>], <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;tag&#39;</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>orderStateStr</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;会员主键&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;fkMemberId&#39;</span>], <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;tag&#39;</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;会员账号&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;username&#39;</span>]},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;优惠卷ID&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;fkCouponsId&#39;</span>], <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;tag&#39;</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;订单描述&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;info&#39;</span>], <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;card&#39;</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;创建时间&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;created&#39;</span>], <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>dateStr</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;修改时间&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;updated&#39;</span>], <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>dateStr</span>},
</span></span><span style=display:flex><span>  ];
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>descDrawer</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 查看优惠卷详情 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 打开抽屉: 设计列表标题 + 设计列表项 + 打开抽屉
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>openCouponsInfoDrawer</span>(<span style=color:#a6e22e>record</span>) {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>data</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>getResponseData</span>(<span style=color:#66d9ef>await</span> <span style=color:#a6e22e>getInfoApi</span>(<span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;fkCouponsId&#39;</span>]));
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>data</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>descTitle</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;当前使用的优惠卷详情&#39;</span>;
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>descItems</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> [
</span></span><span style=display:flex><span>      {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;兑换口令&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>data</span>[<span style=color:#e6db74>&#39;code&#39;</span>]},
</span></span><span style=display:flex><span>      {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;名称标题&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>data</span>[<span style=color:#e6db74>&#39;name&#39;</span>], <span style=color:#a6e22e>prefix</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;《&#39;</span>, <span style=color:#a6e22e>suffix</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;》&#39;</span>},
</span></span><span style=display:flex><span>      {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;优惠金额&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>data</span>[<span style=color:#e6db74>&#39;value&#39;</span>], <span style=color:#a6e22e>suffix</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;元&#39;</span>},
</span></span><span style=display:flex><span>      {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;可用状态&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>data</span>[<span style=color:#e6db74>&#39;state&#39;</span>], <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;tag&#39;</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>couponsStateStr</span>},
</span></span><span style=display:flex><span>      {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;满减条件&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>data</span>[<span style=color:#e6db74>&#39;condition&#39;</span>], <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;card&#39;</span>},
</span></span><span style=display:flex><span>      {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;可用描述&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>data</span>[<span style=color:#e6db74>&#39;description&#39;</span>], <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;card&#39;</span>},
</span></span><span style=display:flex><span>      {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;禁用原因&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>data</span>[<span style=color:#e6db74>&#39;reason&#39;</span>], <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;card&#39;</span>},
</span></span><span style=display:flex><span>      {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;金额文案&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>data</span>[<span style=color:#e6db74>&#39;valueDesc&#39;</span>]},
</span></span><span style=display:flex><span>      {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;单位文案&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>data</span>[<span style=color:#e6db74>&#39;unitDesc&#39;</span>]},
</span></span><span style=display:flex><span>      {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;生效时间&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>data</span>[<span style=color:#e6db74>&#39;startAt&#39;</span>], <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>dateStr</span>},
</span></span><span style=display:flex><span>      {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;失效时间&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>data</span>[<span style=color:#e6db74>&#39;endAt&#39;</span>], <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>dateStr</span>},
</span></span><span style=display:flex><span>      {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;创建时间&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>data</span>[<span style=color:#e6db74>&#39;created&#39;</span>], <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>dateStr</span>},
</span></span><span style=display:flex><span>      {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;修改时间&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>data</span>[<span style=color:#e6db74>&#39;updated&#39;</span>], <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>dateStr</span>},
</span></span><span style=display:flex><span>    ];
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>descDrawer</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span>;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 订单明细 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 抽屉 + 当前订单明细列表[当前订单中购买的全部课程列表]
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>orderDetailDrawer</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>();
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>currentOrderDetails</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>({});
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 打开抽屉: 查看当前订单明细 + 打开抽屉
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>openOrderDetailDrawer</span>(<span style=color:#a6e22e>record</span>) {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>currentOrderDetails</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;courses&#39;</span>];
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>orderDetailDrawer</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 按编号查询 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 按订单编号搜索: 空值保护 + 按订单编号搜索 + 打开抽屉
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>searchBySn</span>(<span style=color:#a6e22e>sn</span>) {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>sn</span> <span style=color:#f92672>===</span> <span style=color:#e6db74>&#39;&#39;</span>) <span style=color:#66d9ef>return</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>data</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>getResponseData</span>(<span style=color:#66d9ef>await</span> <span style=color:#a6e22e>getBySnApi</span>(<span style=color:#a6e22e>sn</span>));
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>data</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>openInfoDrawer</span>(<span style=color:#a6e22e>data</span>);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 打印报表 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 打印报表数据: 误操作保护 + 打印报表数据
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>excel</span>() {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (<span style=color:#f92672>!</span><span style=color:#66d9ef>await</span> <span style=color:#a6e22e>elConfirm</span>(<span style=color:#e6db74>&#39;正在打印报表数据，确认吗？&#39;</span>)) <span style=color:#66d9ef>return</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>location</span>.<span style=color:#a6e22e>href</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>ORDER_EXCEL</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== mount ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>onBeforeMount</span>(() =&gt; <span style=color:#a6e22e>page</span>());
</span></span></code></pre></div><h2 id=e10-类目列表组件>E10. 类目列表组件</h2><blockquote><p>心法: 类目列表组件 <code>@/views/pms/Category.vue</code></p></blockquote><p><img src=/%E7%AC%AC4%E9%98%B6%E6%AE%B5-LESSON/JB4-5-%E5%90%8E%E5%8F%B0%E5%89%8D%E7%AB%AF/image/Category%E9%A1%B5%E9%9D%A2.png alt></p><blockquote><p>武技: 开发类目列表组件 <code>@/views/pms/Category.vue</code></p></blockquote><ol><li>配置Category组件路由:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span>{  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>path</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;/Main&#39;</span>, <span style=color:#a6e22e>name</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Main&#39;</span>, <span style=color:#a6e22e>component</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>Main</span>,  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>redirect</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;/Board&#39;</span>,  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>children</span><span style=color:#f92672>:</span> [  
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>path</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;/Category&#39;</span>, <span style=color:#a6e22e>name</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Category&#39;</span>, <span style=color:#a6e22e>component</span><span style=color:#f92672>:</span> () =&gt; <span style=color:#66d9ef>import</span>(<span style=color:#e6db74>&#39;@/views/pms/Category&#39;</span>)},   
</span></span><span style=display:flex><span>  ]  
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><ol start=2><li>开发Category组件布局:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>&lt;<span style=color:#f92672>my-nav</span> <span style=color:#a6e22e>:items</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;navItems&#34;</span>/&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>my-head</span> <span style=color:#a6e22e>:items</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;headItems&#34;</span>/&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>my-table</span> <span style=color:#a6e22e>:records</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;currentRecords&#34;</span> <span style=color:#a6e22e>:columns</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;columns&#34;</span> <span style=color:#a6e22e>:buttons</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;buttons&#34;</span>
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>:selectionChange</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;selectionChange&#34;</span>/&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>my-pager</span> <span style=color:#a6e22e>:pageInfo</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;pageInfo&#34;</span>/&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>el-drawer</span> <span style=color:#a6e22e>title</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;详情抽屉&#34;</span> <span style=color:#a6e22e>v-model</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;descDrawer&#34;</span> <span style=color:#a6e22e>size</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;30%&#34;</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>my-list</span> <span style=color:#a6e22e>:items</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;descItems&#34;</span> <span style=color:#a6e22e>:title</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;descTitle&#34;</span>/&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>el-drawer</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>el-drawer</span> <span style=color:#a6e22e>title</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;单增抽屉 - 添加类目记录&#34;</span> <span style=color:#a6e22e>v-model</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;insertDrawer&#34;</span> <span style=color:#a6e22e>size</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;30%&#34;</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>my-form</span> <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;insert&#34;</span> <span style=color:#a6e22e>:items</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;insertFormItems&#34;</span> <span style=color:#a6e22e>:data</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;insertFormData&#34;</span> <span style=color:#a6e22e>:rule</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;insertFormRule&#34;</span>
</span></span><span style=display:flex><span>           <span style=color:#a6e22e>:api</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;saveApi&#34;</span> <span style=color:#a6e22e>:fn</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;closeInsertDrawer&#34;</span>/&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>el-drawer</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>el-drawer</span> <span style=color:#a6e22e>title</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;修改抽屉 - 修改类目记录&#34;</span> <span style=color:#a6e22e>v-model</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;updateDrawer&#34;</span> <span style=color:#a6e22e>size</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;30%&#34;</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>my-form</span> <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;update&#34;</span> <span style=color:#a6e22e>:items</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;updateFormItems&#34;</span> <span style=color:#a6e22e>:data</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;updateFormData&#34;</span> <span style=color:#a6e22e>:rule</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;updateFormRule&#34;</span>
</span></span><span style=display:flex><span>           <span style=color:#a6e22e>:api</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;updateApi&#34;</span> <span style=color:#a6e22e>:fn</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;closeUpdateDrawer&#34;</span>/&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>el-drawer</span>&gt;
</span></span></code></pre></div><ol start=3><li>开发Category组件样式:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-css data-lang=css><span style=display:flex><span><span style=color:#75715e>/*暂无*/</span>
</span></span></code></pre></div><ol start=4><li>开发组件脚本:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>MyNav</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/components/MyNav&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>MyPager</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/components/MyPager&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>MyTable</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;@/components/MyTable&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>MyHead</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/components/MyHead&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>MyList</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/components/MyList&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>MyForm</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/components/MyForm&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>onBeforeMount</span>, <span style=color:#a6e22e>shallowReactive</span>, <span style=color:#a6e22e>shallowRef</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;vue&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>myBatchDelete</span>, <span style=color:#a6e22e>myDelete</span>, <span style=color:#a6e22e>notYet</span>, <span style=color:#a6e22e>myPage</span>, <span style=color:#a6e22e>dateStr</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/util&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>pageApi</span>, <span style=color:#a6e22e>removeApi</span>, <span style=color:#a6e22e>removeBatchApi</span>, <span style=color:#a6e22e>saveApi</span>, <span style=color:#a6e22e>updateApi</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/api/category&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 通用数据 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 当前操作的横幅对象 + 当前操作的横幅对象列表
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>currentRecord</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>();
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>currentRecords</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>();
</span></span><span style=display:flex><span><span style=color:#75715e>// 分页信息
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>pageInfo</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowReactive</span>({<span style=color:#a6e22e>pageNumber</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>1</span>, <span style=color:#a6e22e>pageSize</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>5</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>page</span>});
</span></span><span style=display:flex><span><span style=color:#75715e>// 详情抽屉 + 详情标题 + 详情数据
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>descDrawer</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>(<span style=color:#66d9ef>null</span>);
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>descTitle</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>(<span style=color:#e6db74>&#39;&#39;</span>);
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>descItems</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>([]);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 组件数据 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 导航数据
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>navItems</span> <span style=color:#f92672>=</span> [
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>icon</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;House&#39;</span>, <span style=color:#a6e22e>title</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;首页&#39;</span>, <span style=color:#a6e22e>url</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;/Board&#39;</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>icon</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Notebook&#39;</span>, <span style=color:#a6e22e>title</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;课程管理&#39;</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>icon</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Management&#39;</span>, <span style=color:#a6e22e>title</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;类目列表&#39;</span>}
</span></span><span style=display:flex><span>];
</span></span><span style=display:flex><span><span style=color:#75715e>// 通用头数据
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>headItems</span> <span style=color:#f92672>=</span> [
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;insertBtn&#39;</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>openInsertDrawer</span>, <span style=color:#a6e22e>offset</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>21</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;deleteBtn&#39;</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>removeBatch</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;excelBtn&#39;</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>notYet</span>},
</span></span><span style=display:flex><span>];
</span></span><span style=display:flex><span><span style=color:#75715e>// 表格中间列数据
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>columns</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>([
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>column</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#39;基础信息&#39;</span>, <span style=color:#e6db74>&#39;类目权重&#39;</span>], <span style=color:#a6e22e>property</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;weight&#39;</span>, <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;tag&#39;</span>, <span style=color:#a6e22e>prefix</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;No.&#39;</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>column</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#39;基础信息&#39;</span>, <span style=color:#e6db74>&#39;类目标题&#39;</span>], <span style=color:#a6e22e>property</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;title&#39;</span>},
</span></span><span style=display:flex><span>]);
</span></span><span style=display:flex><span><span style=color:#75715e>// 表格末尾列数据
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>buttons</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>([
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;info&#39;</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>openInfoDrawer</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;update&#39;</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>openUpdateDrawer</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;delete&#39;</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>remove</span>},
</span></span><span style=display:flex><span>]);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 分页查询 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 分页查询
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>page</span>(<span style=color:#a6e22e>pageNumber</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>pageInfo</span>[<span style=color:#e6db74>&#39;pageNumber&#39;</span>], <span style=color:#a6e22e>pageSize</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>pageInfo</span>[<span style=color:#e6db74>&#39;pageSize&#39;</span>]) {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// 全量分页
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>myPage</span>({
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;api&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>pageApi</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;params&#39;</span><span style=color:#f92672>:</span> {<span style=color:#e6db74>&#39;pageNumber&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>pageNumber</span>, <span style=color:#e6db74>&#39;pageSize&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>pageSize</span>},
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;records&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>currentRecords</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;pageInfo&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>pageInfo</span>,
</span></span><span style=display:flex><span>  });
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 单条添加 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 抽屉 + 表单数据 + 表单规则
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>insertDrawer</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>();
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>insertFormItems</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>();
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>insertFormData</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowReactive</span>({});
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>insertFormRule</span> <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>title</span><span style=color:#f92672>:</span> [{<span style=color:#a6e22e>min</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>1</span>, <span style=color:#a6e22e>max</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>128</span>, <span style=color:#a6e22e>message</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;标题长度必须在1~128之间&#39;</span>}]
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 打开抽屉: 设计表单项 + 打开抽屉
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>openInsertDrawer</span>() {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>insertFormItems</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> [
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;类目权重&#39;</span>, <span style=color:#a6e22e>prop</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;weight&#39;</span>, <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;number&#39;</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;类目标题&#39;</span>, <span style=color:#a6e22e>prop</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;title&#39;</span>}
</span></span><span style=display:flex><span>  ];
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>insertDrawer</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 关闭抽屉: 关闭抽屉 + 重新分页
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>closeInsertDrawer</span>() {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>insertDrawer</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>false</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>page</span>();
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 查看详情 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 打开抽屉: 设计列表标题 + 设计列表项 + 打开抽屉
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>openInfoDrawer</span>(<span style=color:#a6e22e>record</span>) {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>descTitle</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;查看类目详情&#39;</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>descItems</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> [
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;类目权重&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;weight&#39;</span>], <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;tag&#39;</span>, <span style=color:#a6e22e>prefix</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;No.&#39;</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;类目标题&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;title&#39;</span>], <span style=color:#a6e22e>prefix</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;《&#39;</span>, <span style=color:#a6e22e>suffix</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;》&#39;</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;创建时间&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;created&#39;</span>], <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>dateStr</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;修改时间&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;updated&#39;</span>], <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>dateStr</span>},
</span></span><span style=display:flex><span>  ];
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>descDrawer</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 单条修改 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 抽屉 + 表单数据 + 表单规则
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>updateDrawer</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>();
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>updateFormData</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowReactive</span>({});
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>updateFormItems</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>();
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>updateFormRule</span> <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>title</span><span style=color:#f92672>:</span> [{<span style=color:#a6e22e>min</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>1</span>, <span style=color:#a6e22e>max</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>128</span>, <span style=color:#a6e22e>message</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;标题长度必须在1~128之间&#39;</span>}]
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 打开抽屉: 赋值表单默认值 + 设计表单项 + 打开抽屉
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>openUpdateDrawer</span>(<span style=color:#a6e22e>record</span>) {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>updateFormData</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>record</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>updateFormItems</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> [
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;类目权重&#39;</span>, <span style=color:#a6e22e>prop</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;weight&#39;</span>, <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;number&#39;</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;类目标题&#39;</span>, <span style=color:#a6e22e>prop</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;title&#39;</span>}
</span></span><span style=display:flex><span>  ];
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>updateDrawer</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 关闭抽屉: 关闭抽屉 + 重新分页
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>closeUpdateDrawer</span>() {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>updateDrawer</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>false</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>page</span>();
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 单条删除 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 删除类目信息
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>remove</span>(<span style=color:#a6e22e>record</span>) {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>myDelete</span>({
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;id&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;id&#39;</span>],
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;api&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>removeApi</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;callback&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>page</span>
</span></span><span style=display:flex><span>  });
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 批量删除 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 类目主键数组
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>ids</span> <span style=color:#f92672>=</span> [];
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 当复选框发生改变时触发
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>selectionChange</span>(<span style=color:#a6e22e>row</span>) {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>ids</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>row</span>.<span style=color:#a6e22e>map</span>(<span style=color:#a6e22e>e</span> =&gt; <span style=color:#a6e22e>e</span>[<span style=color:#e6db74>&#39;id&#39;</span>]);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 批量删除类目信息
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>removeBatch</span>() {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>myBatchDelete</span>({
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;ids&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>ids</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;api&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>removeBatchApi</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;callback&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>page</span>
</span></span><span style=display:flex><span>  });
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== mount ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>onBeforeMount</span>(() =&gt; <span style=color:#a6e22e>page</span>());
</span></span></code></pre></div><h2 id=e11-课程列表组件>E11. 课程列表组件</h2><blockquote><p>心法: 课程列表组件 <code>@/views/pms/Course.vue</code></p></blockquote><p><img src=/%E7%AC%AC4%E9%98%B6%E6%AE%B5-LESSON/JB4-5-%E5%90%8E%E5%8F%B0%E5%89%8D%E7%AB%AF/image/Course%E9%A1%B5%E9%9D%A2.png alt></p><blockquote><p>武技: 开发课程列表组件 <code>@/views/pms/Course.vue</code></p></blockquote><ol><li>配置Course组件路由:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span>{  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>path</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;/Main&#39;</span>, <span style=color:#a6e22e>name</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Main&#39;</span>, <span style=color:#a6e22e>component</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>Main</span>,  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>redirect</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;/Board&#39;</span>,  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>children</span><span style=color:#f92672>:</span> [  
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>path</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;/Course&#39;</span>, <span style=color:#a6e22e>name</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Course&#39;</span>, <span style=color:#a6e22e>component</span><span style=color:#f92672>:</span> () =&gt; <span style=color:#66d9ef>import</span>(<span style=color:#e6db74>&#39;@/views/pms/Course&#39;</span>)},   
</span></span><span style=display:flex><span>  ]  
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><ol start=2><li>开发Course组件布局:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>&lt;<span style=color:#f92672>my-nav</span> <span style=color:#a6e22e>:items</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;navItems&#34;</span>/&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>my-head</span> <span style=color:#a6e22e>:items</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;headItems&#34;</span>/&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>my-table</span> <span style=color:#a6e22e>:records</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;currentRecords&#34;</span> <span style=color:#a6e22e>:columns</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;columns&#34;</span> <span style=color:#a6e22e>:buttons</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;buttons&#34;</span>
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>:selectionChange</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;selectionChange&#34;</span>/&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>my-pager</span> <span style=color:#a6e22e>:pageInfo</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;pageInfo&#34;</span>/&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>el-drawer</span> <span style=color:#a6e22e>title</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;详情抽屉&#34;</span> <span style=color:#a6e22e>v-model</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;descDrawer&#34;</span> <span style=color:#a6e22e>size</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;30%&#34;</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>my-list</span> <span style=color:#a6e22e>:items</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;descItems&#34;</span> <span style=color:#a6e22e>:title</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;descTitle&#34;</span>/&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>el-drawer</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>el-drawer</span> <span style=color:#a6e22e>title</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;单增抽屉 - 添加课程记录&#34;</span> <span style=color:#a6e22e>v-model</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;insertDrawer&#34;</span> <span style=color:#a6e22e>size</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;30%&#34;</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>my-form</span> <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;insert&#34;</span> <span style=color:#a6e22e>:items</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;insertFormItems&#34;</span> <span style=color:#a6e22e>:data</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;insertFormData&#34;</span> <span style=color:#a6e22e>:rule</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;insertFormRule&#34;</span>
</span></span><span style=display:flex><span>           <span style=color:#a6e22e>:api</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;saveApi&#34;</span> <span style=color:#a6e22e>:fn</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;closeInsertDrawer&#34;</span>/&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>el-drawer</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>el-drawer</span> <span style=color:#a6e22e>title</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;修改抽屉 - 修改课程记录&#34;</span> <span style=color:#a6e22e>v-model</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;updateDrawer&#34;</span> <span style=color:#a6e22e>size</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;30%&#34;</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>my-form</span> <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;update&#34;</span> <span style=color:#a6e22e>:items</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;updateFormItems&#34;</span> <span style=color:#a6e22e>:data</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;updateFormData&#34;</span> <span style=color:#a6e22e>:rule</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;updateFormRule&#34;</span>
</span></span><span style=display:flex><span>           <span style=color:#a6e22e>:api</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;updateApi&#34;</span> <span style=color:#a6e22e>:fn</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;closeUpdateDrawer&#34;</span>/&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>el-drawer</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>el-drawer</span> <span style=color:#a6e22e>title</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;文件抽屉 - 上传封面图片&#34;</span> <span style=color:#a6e22e>v-model</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;uploadCoverDrawer&#34;</span> <span style=color:#a6e22e>size</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;30%&#34;</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>my-uploader</span> <span style=color:#a6e22e>name</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;coverFile&#34;</span> <span style=color:#a6e22e>:action</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;UPLOAD_COVER(currentId)&#34;</span> <span style=color:#a6e22e>:fn</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;closeUploadCoverDrawer&#34;</span>/&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>el-drawer</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>el-drawer</span> <span style=color:#a6e22e>title</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;文件抽屉 - 上传摘要图片&#34;</span> <span style=color:#a6e22e>v-model</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;uploadSummaryDrawer&#34;</span> <span style=color:#a6e22e>size</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;30%&#34;</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>my-uploader</span> <span style=color:#a6e22e>name</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;summaryFile&#34;</span> <span style=color:#a6e22e>:action</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;UPLOAD_SUMMARY(currentId)&#34;</span> <span style=color:#a6e22e>:fn</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;closeUploadSummaryDrawer&#34;</span>/&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>el-drawer</span>&gt;
</span></span></code></pre></div><ol start=3><li>开发Course组件样式:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-css data-lang=css><span style=display:flex><span><span style=color:#75715e>/*暂无*/</span>
</span></span></code></pre></div><ol start=4><li>开发Course组件脚本:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>MyNav</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/components/MyNav&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>MyHead</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/components/MyHead&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>MyTable</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/components/MyTable&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>MyPager</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/components/MyPager&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>MyList</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/components/MyList&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>MyForm</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;@/components/MyForm&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>MyUploader</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;@/components/MyUploader&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>router</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/router&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>onBeforeMount</span>, <span style=color:#a6e22e>shallowReactive</span>, <span style=color:#a6e22e>shallowRef</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;vue&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>MINIO_SUMMARY</span>, <span style=color:#a6e22e>MINIO_COVER</span>, <span style=color:#a6e22e>RULE</span>, <span style=color:#a6e22e>UPLOAD_COVER</span>, <span style=color:#a6e22e>UPLOAD_SUMMARY</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/const&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>dateStr</span>, <span style=color:#a6e22e>getResponseData</span>, <span style=color:#a6e22e>notYet</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/util&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>myBatchDelete</span>, <span style=color:#a6e22e>myDelete</span>, <span style=color:#a6e22e>myPage</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/util&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>pageApi</span>, <span style=color:#a6e22e>pageCategoryApi</span>, <span style=color:#a6e22e>removeApi</span>, <span style=color:#a6e22e>removeBatchApi</span>, <span style=color:#a6e22e>saveApi</span>, <span style=color:#a6e22e>updateApi</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/api/course&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>listApi</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/api/category&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 通用数据 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 当前操作的课程对象 + 当前操作的课程对象列表 + 当前操作的课程对象的ID
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>currentRecord</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>();
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>currentRecords</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>();
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>currentId</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>();
</span></span><span style=display:flex><span><span style=color:#75715e>// 当前选择的类目ID
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>currentCategoryId</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>(<span style=color:#e6db74>&#39;&#39;</span>);
</span></span><span style=display:flex><span><span style=color:#75715e>// 分页信息
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>pageInfo</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowReactive</span>({<span style=color:#a6e22e>pageNumber</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>1</span>, <span style=color:#a6e22e>pageSize</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>5</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>page</span>});
</span></span><span style=display:flex><span><span style=color:#75715e>// 详情抽屉 + 详情标题 + 详情数据
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>descDrawer</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>(<span style=color:#66d9ef>null</span>);
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>descTitle</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>(<span style=color:#e6db74>&#39;&#39;</span>);
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>descItems</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>([]);
</span></span><span style=display:flex><span><span style=color:#75715e>// 全部类目列表[下拉菜单项需要的格式]
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>categoryOptionItems</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>([]);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 组件数据 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 导航数据
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>navItems</span> <span style=color:#f92672>=</span> [
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>icon</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;House&#39;</span>, <span style=color:#a6e22e>title</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;首页&#39;</span>, <span style=color:#a6e22e>url</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;/Board&#39;</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>icon</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Notebook&#39;</span>, <span style=color:#a6e22e>title</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;课程管理&#39;</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>icon</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Notebook&#39;</span>, <span style=color:#a6e22e>title</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;课程列表&#39;</span>}
</span></span><span style=display:flex><span>];
</span></span><span style=display:flex><span><span style=color:#75715e>// 通用头数据
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>headItems</span> <span style=color:#f92672>=</span> [
</span></span><span style=display:flex><span>  {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;opt&#39;</span>, <span style=color:#a6e22e>placeholder</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;根据类目搜索课程&#39;</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>optValue</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>currentCategoryId</span>.<span style=color:#a6e22e>value</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>categoryId</span> =&gt; {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>currentCategoryId</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>categoryId</span>;
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>page</span>();
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>optItems</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>categoryOptionItems</span>.<span style=color:#a6e22e>value</span>, <span style=color:#a6e22e>span</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>4</span>
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;insertBtn&#39;</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>openInsertDrawer</span>, <span style=color:#a6e22e>offset</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>17</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;deleteBtn&#39;</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>removeBatch</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;excelBtn&#39;</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>notYet</span>},
</span></span><span style=display:flex><span>];
</span></span><span style=display:flex><span><span style=color:#75715e>// 表格中间列数据
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>columns</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>([
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>column</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#39;基础信息&#39;</span>, <span style=color:#e6db74>&#39;课程标题&#39;</span>], <span style=color:#a6e22e>property</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;title&#39;</span>, <span style=color:#a6e22e>prefix</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;《&#39;</span>, <span style=color:#a6e22e>suffix</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;》&#39;</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>column</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#39;基础信息&#39;</span>, <span style=color:#e6db74>&#39;课程作者&#39;</span>], <span style=color:#a6e22e>property</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;member.username&#39;</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>column</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#39;基础信息&#39;</span>, <span style=color:#e6db74>&#39;课程类目&#39;</span>], <span style=color:#a6e22e>property</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;category.title&#39;</span>, <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;tag&#39;</span>, <span style=color:#a6e22e>tagType</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;primary&#39;</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>column</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#39;基础信息&#39;</span>, <span style=color:#e6db74>&#39;课程封面&#39;</span>], <span style=color:#a6e22e>property</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;cover&#39;</span>, <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;img&#39;</span>, <span style=color:#a6e22e>minio</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>MINIO_COVER</span>.<span style=color:#a6e22e>value</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>column</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#39;基础信息&#39;</span>, <span style=color:#e6db74>&#39;摘要图片&#39;</span>], <span style=color:#a6e22e>property</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;summary&#39;</span>, <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;img&#39;</span>, <span style=color:#a6e22e>minio</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>MINIO_SUMMARY</span>.<span style=color:#a6e22e>value</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>column</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#39;基础信息&#39;</span>, <span style=color:#e6db74>&#39;课程价格&#39;</span>], <span style=color:#a6e22e>property</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;price&#39;</span>, <span style=color:#a6e22e>suffix</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;元&#39;</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>column</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#39;基础信息&#39;</span>, <span style=color:#e6db74>&#39;课程评分&#39;</span>], <span style=color:#a6e22e>property</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;star&#39;</span>, <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;star&#39;</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>column</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#39;基础信息&#39;</span>, <span style=color:#e6db74>&#39;点赞数量&#39;</span>], <span style=color:#a6e22e>property</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;likeCount&#39;</span>, <span style=color:#a6e22e>width</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>110</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>column</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#39;基础信息&#39;</span>, <span style=color:#e6db74>&#39;课程描述&#39;</span>], <span style=color:#a6e22e>property</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;info&#39;</span>, <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;card&#39;</span>},
</span></span><span style=display:flex><span>]);
</span></span><span style=display:flex><span><span style=color:#75715e>// 表格末尾列数据
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>buttons</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>([
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;info&#39;</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>openInfoDrawer</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;update&#39;</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>openUpdateDrawer</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;delete&#39;</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>remove</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>btnText</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;季次列表&#39;</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>toSeason</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;upload&#39;</span>, <span style=color:#a6e22e>btnText</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;上传封面&#39;</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>openUploadCoverDrawer</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;upload&#39;</span>, <span style=color:#a6e22e>btnText</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;上传摘要&#39;</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>openUploadSummaryDrawer</span>},
</span></span><span style=display:flex><span>]);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 全部类目 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 获取全部类目列表: 获取全部类目列表 + 将全部类目列表处理为下拉菜单项需要的格式
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>listCategory</span>() {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>data</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>getResponseData</span>(<span style=color:#66d9ef>await</span> <span style=color:#a6e22e>listApi</span>());
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>data</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>i</span> <span style=color:#66d9ef>in</span> <span style=color:#a6e22e>data</span>) {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>categoryOptionItems</span>.<span style=color:#a6e22e>value</span>.<span style=color:#a6e22e>push</span>({
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#39;id&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>data</span>[<span style=color:#a6e22e>i</span>][<span style=color:#e6db74>&#39;id&#39;</span>],
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#39;label&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>data</span>[<span style=color:#a6e22e>i</span>][<span style=color:#e6db74>&#39;title&#39;</span>],
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#39;value&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>data</span>[<span style=color:#a6e22e>i</span>][<span style=color:#e6db74>&#39;id&#39;</span>],
</span></span><span style=display:flex><span>      })
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 分页查询 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 分页查询
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>page</span>(<span style=color:#a6e22e>pageNumber</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>pageInfo</span>[<span style=color:#e6db74>&#39;pageNumber&#39;</span>], <span style=color:#a6e22e>pageSize</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>pageInfo</span>[<span style=color:#e6db74>&#39;pageSize&#39;</span>],
</span></span><span style=display:flex><span>                    <span style=color:#a6e22e>categoryId</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>currentCategoryId</span>.<span style=color:#a6e22e>value</span>) {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>pageConfig</span> <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;params&#39;</span><span style=color:#f92672>:</span> {<span style=color:#e6db74>&#39;pageNumber&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>pageNumber</span>, <span style=color:#e6db74>&#39;pageSize&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>pageSize</span>},
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;records&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>currentRecords</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;pageInfo&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>pageInfo</span>,
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// 根据类目分页
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>categoryId</span> <span style=color:#f92672>!==</span> <span style=color:#e6db74>&#39;&#39;</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>pageConfig</span>[<span style=color:#e6db74>&#39;api&#39;</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>pageCategoryApi</span>;
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>pageConfig</span>[<span style=color:#e6db74>&#39;secondParam&#39;</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>categoryId</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>myPage</span>(<span style=color:#a6e22e>pageConfig</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span>;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// 全量分页
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>pageConfig</span>[<span style=color:#e6db74>&#39;api&#39;</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>pageApi</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>pageConfig</span>[<span style=color:#e6db74>&#39;secondParam&#39;</span>] <span style=color:#f92672>=</span> <span style=color:#66d9ef>null</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>myPage</span>(<span style=color:#a6e22e>pageConfig</span>);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 单条添加 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 抽屉 + 表单数据 + 表单规则
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>insertDrawer</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>();
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>insertFormItems</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>();
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>insertFormData</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowReactive</span>({});
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>insertFormRule</span> <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>title</span><span style=color:#f92672>:</span> [{<span style=color:#a6e22e>min</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>1</span>, <span style=color:#a6e22e>max</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>128</span>, <span style=color:#a6e22e>message</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;标题长度必须在1~128之间&#39;</span>}],
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>info</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>RULE</span>.<span style=color:#a6e22e>COMMON_INFO</span>
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 打开抽屉: 设计表单项 + 打开抽屉
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>openInsertDrawer</span>() {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>insertFormItems</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> [
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;课程标题&#39;</span>, <span style=color:#a6e22e>prop</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;title&#39;</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;作者主键&#39;</span>, <span style=color:#a6e22e>prop</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;fkMemberId&#39;</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;课程类目&#39;</span>, <span style=color:#a6e22e>prop</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;fkCategoryId&#39;</span>, <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;select&#39;</span>, <span style=color:#a6e22e>optionItems</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>categoryOptionItems</span>.<span style=color:#a6e22e>value</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;课程价格&#39;</span>, <span style=color:#a6e22e>prop</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;price&#39;</span>, <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;number&#39;</span>, <span style=color:#a6e22e>precision</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>2</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;横幅描述&#39;</span>, <span style=color:#a6e22e>prop</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;info&#39;</span>, <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;textarea&#39;</span>}
</span></span><span style=display:flex><span>  ];
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>insertDrawer</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 关闭抽屉: 关闭抽屉 + 重新分页
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>closeInsertDrawer</span>() {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>insertDrawer</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>false</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>page</span>();
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 查看详情 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 打开抽屉: 设计列表标题 + 设计列表项 + 打开抽屉
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>openInfoDrawer</span>(<span style=color:#a6e22e>record</span>) {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>descTitle</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;查看课程详情&#39;</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>descItems</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> [
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;封面图片&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;cover&#39;</span>], <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;img&#39;</span>, <span style=color:#a6e22e>minio</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>MINIO_COVER</span>.<span style=color:#a6e22e>value</span>, <span style=color:#a6e22e>large</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;课程标题&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;title&#39;</span>], <span style=color:#a6e22e>prefix</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;《&#39;</span>, <span style=color:#a6e22e>suffix</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;》&#39;</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;课程作者&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;member&#39;</span>][<span style=color:#e6db74>&#39;username&#39;</span>]},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;课程类目&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;category&#39;</span>][<span style=color:#e6db74>&#39;title&#39;</span>], <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;tag&#39;</span>, <span style=color:#a6e22e>tagType</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;primary&#39;</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;课程价格&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;price&#39;</span>], <span style=color:#a6e22e>suffix</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;元&#39;</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;课程评分&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;star&#39;</span>], <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;star&#39;</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;点赞数量&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;likeCount&#39;</span>]},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;课程描述&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;info&#39;</span>], <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;card&#39;</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;创建时间&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;created&#39;</span>], <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>dateStr</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;修改时间&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;updated&#39;</span>], <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>dateStr</span>},
</span></span><span style=display:flex><span>  ];
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>descDrawer</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 单条修改 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 抽屉 + 表单数据 + 表单规则
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>updateDrawer</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>();
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>updateFormData</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowReactive</span>({});
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>updateFormItems</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>();
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>updateFormRule</span> <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>title</span><span style=color:#f92672>:</span> [{<span style=color:#a6e22e>min</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>1</span>, <span style=color:#a6e22e>max</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>128</span>, <span style=color:#a6e22e>message</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;标题长度必须在1~128之间&#39;</span>}],
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>info</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>RULE</span>.<span style=color:#a6e22e>COMMON_INFO</span>
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 打开抽屉: 赋值表单默认值 + 设计表单项 + 打开抽屉
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>openUpdateDrawer</span>(<span style=color:#a6e22e>record</span>) {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>updateFormData</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>record</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>updateFormItems</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> [
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;课程标题&#39;</span>, <span style=color:#a6e22e>prop</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;title&#39;</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;作者主键&#39;</span>, <span style=color:#a6e22e>prop</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;fkMemberId&#39;</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;课程类目&#39;</span>, <span style=color:#a6e22e>prop</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;fkCategoryId&#39;</span>, <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;select&#39;</span>, <span style=color:#a6e22e>optionItems</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>categoryOptionItems</span>.<span style=color:#a6e22e>value</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;课程价格&#39;</span>, <span style=color:#a6e22e>prop</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;price&#39;</span>, <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;number&#39;</span>, <span style=color:#a6e22e>precision</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>2</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;横幅描述&#39;</span>, <span style=color:#a6e22e>prop</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;info&#39;</span>, <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;textarea&#39;</span>}
</span></span><span style=display:flex><span>  ];
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>updateDrawer</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 关闭抽屉: 关闭抽屉 + 重新分页
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>closeUpdateDrawer</span>() {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>updateDrawer</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>false</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>page</span>();
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 上传封面 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 抽屉 + 当前记录的ID值
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>uploadCoverDrawer</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 打开抽屉: 获取当前记录的ID值 + 打开抽屉
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>openUploadCoverDrawer</span>(<span style=color:#a6e22e>record</span>) {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>currentId</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;id&#39;</span>];
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>uploadCoverDrawer</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 关闭抽屉: 重新分页，关闭抽屉
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>closeUploadCoverDrawer</span>() {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>page</span>();
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>uploadCoverDrawer</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>false</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 上传摘要 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 抽屉 + 当前记录的ID值
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>uploadSummaryDrawer</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 打开抽屉: 获取当前记录的ID值 + 打开抽屉
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>openUploadSummaryDrawer</span>(<span style=color:#a6e22e>record</span>) {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>currentId</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;id&#39;</span>];
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>uploadSummaryDrawer</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 关闭抽屉: 重新分页，关闭抽屉
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>closeUploadSummaryDrawer</span>() {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>page</span>();
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>uploadSummaryDrawer</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>false</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 单条删除 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 删除课程信息
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>remove</span>(<span style=color:#a6e22e>record</span>) {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>myDelete</span>({
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;id&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;id&#39;</span>],
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;api&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>removeApi</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;callback&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>page</span>
</span></span><span style=display:flex><span>  });
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 批量删除 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 课程主键数组
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>ids</span> <span style=color:#f92672>=</span> [];
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 当复选框发生改变时触发
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>selectionChange</span>(<span style=color:#a6e22e>row</span>) {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>ids</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>row</span>.<span style=color:#a6e22e>map</span>(<span style=color:#a6e22e>e</span> =&gt; <span style=color:#a6e22e>e</span>[<span style=color:#e6db74>&#39;id&#39;</span>]);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 批量删除课程信息
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>removeBatch</span>() {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>myBatchDelete</span>({
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;ids&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>ids</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;api&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>removeBatchApi</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;callback&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>page</span>
</span></span><span style=display:flex><span>  });
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 季次列表 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 跳转到到Season页面
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>toSeason</span>(<span style=color:#a6e22e>record</span>) {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>router</span>.<span style=color:#a6e22e>push</span>({
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>path</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;/Season&#39;</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>query</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>courseId</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;id&#39;</span>],
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>courseTitle</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;title&#39;</span>],
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  });
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== mount ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>onBeforeMount</span>(() =&gt; {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>page</span>();
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>listCategory</span>();
</span></span><span style=display:flex><span>});
</span></span></code></pre></div><h2 id=e12-开发季次组件>E12. 开发季次组件</h2><blockquote><p>心法: 季次列表组件 <code>@/views/pms/Season.vue</code></p></blockquote><p><img src=/%E7%AC%AC4%E9%98%B6%E6%AE%B5-LESSON/JB4-5-%E5%90%8E%E5%8F%B0%E5%89%8D%E7%AB%AF/image/Season%E9%A1%B5%E9%9D%A2.png alt></p><blockquote><p>武技: 开发季次列表组件 <code>@/views/pms/Season.vue</code></p></blockquote><ol><li>配置Season组件路由:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span>{  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>path</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;/Main&#39;</span>, <span style=color:#a6e22e>name</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Main&#39;</span>, <span style=color:#a6e22e>component</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>Main</span>,  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>redirect</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;/Board&#39;</span>,  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>children</span><span style=color:#f92672>:</span> [  
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>path</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;/Season&#39;</span>, <span style=color:#a6e22e>name</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Season&#39;</span>, <span style=color:#a6e22e>component</span><span style=color:#f92672>:</span> () =&gt; <span style=color:#66d9ef>import</span>(<span style=color:#e6db74>&#39;@/views/pms/Season&#39;</span>)},   
</span></span><span style=display:flex><span>  ]  
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><ol start=2><li>开发Season组件布局:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>&lt;<span style=color:#f92672>my-nav</span> <span style=color:#a6e22e>:items</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;navItems&#34;</span>/&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>my-head</span> <span style=color:#a6e22e>:items</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;headItems&#34;</span>/&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>my-table</span> <span style=color:#a6e22e>:records</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;currentRecords&#34;</span> <span style=color:#a6e22e>:columns</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;columns&#34;</span> <span style=color:#a6e22e>:buttons</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;buttons&#34;</span>
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>:selectionChange</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;selectionChange&#34;</span>/&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>my-pager</span> <span style=color:#a6e22e>:pageInfo</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;pageInfo&#34;</span>/&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>el-drawer</span> <span style=color:#a6e22e>title</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;详情抽屉&#34;</span> <span style=color:#a6e22e>v-model</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;descDrawer&#34;</span> <span style=color:#a6e22e>size</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;30%&#34;</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>my-list</span> <span style=color:#a6e22e>:items</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;descItems&#34;</span> <span style=color:#a6e22e>:title</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;descTitle&#34;</span>/&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>el-drawer</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>el-drawer</span> <span style=color:#a6e22e>title</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;单增抽屉 - 添加季次记录&#34;</span> <span style=color:#a6e22e>v-model</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;insertDrawer&#34;</span> <span style=color:#a6e22e>size</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;30%&#34;</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>my-form</span> <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;insert&#34;</span> <span style=color:#a6e22e>:items</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;insertFormItems&#34;</span> <span style=color:#a6e22e>:data</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;insertFormData&#34;</span> <span style=color:#a6e22e>:rule</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;insertFormRule&#34;</span>
</span></span><span style=display:flex><span>           <span style=color:#a6e22e>:api</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;saveApi&#34;</span> <span style=color:#a6e22e>:fn</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;closeInsertDrawer&#34;</span>/&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>el-drawer</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>el-drawer</span> <span style=color:#a6e22e>title</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;修改抽屉 - 修改季次记录&#34;</span> <span style=color:#a6e22e>v-model</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;updateDrawer&#34;</span> <span style=color:#a6e22e>size</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;30%&#34;</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>my-form</span> <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;update&#34;</span> <span style=color:#a6e22e>:items</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;updateFormItems&#34;</span> <span style=color:#a6e22e>:data</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;updateFormData&#34;</span> <span style=color:#a6e22e>:rule</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;updateFormRule&#34;</span>
</span></span><span style=display:flex><span>           <span style=color:#a6e22e>:api</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;updateApi&#34;</span> <span style=color:#a6e22e>:fn</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;closeUpdateDrawer&#34;</span>/&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>el-drawer</span>&gt;
</span></span></code></pre></div><ol start=3><li>开发Season组件样式:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-css data-lang=css><span style=display:flex><span><span style=color:#75715e>/*暂无*/</span>
</span></span></code></pre></div><ol start=4><li>开发Season组件脚本:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>MyNav</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/components/MyNav&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>MyHead</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/components/MyHead&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>MyTable</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/components/MyTable&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>MyList</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/components/MyList&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>MyPager</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/components/MyPager&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>MyForm</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;@/components/MyForm&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>router</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/router&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>onBeforeMount</span>, <span style=color:#a6e22e>shallowReactive</span>, <span style=color:#a6e22e>shallowRef</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;vue&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>RULE</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/const&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>dateStr</span>, <span style=color:#a6e22e>notYet</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/util&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>myBatchDelete</span>, <span style=color:#a6e22e>myDelete</span>, <span style=color:#a6e22e>myPage</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/util&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>pageCourseApi</span>, <span style=color:#a6e22e>removeApi</span>, <span style=color:#a6e22e>removeBatchApi</span>, <span style=color:#a6e22e>saveApi</span>, <span style=color:#a6e22e>updateApi</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/api/season&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 通用数据 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 当前操作的季次对象 + 当前操作的季次对象列表
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>currentRecord</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>();
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>currentRecords</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>();
</span></span><span style=display:flex><span><span style=color:#75715e>// 分页信息
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>pageInfo</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowReactive</span>({<span style=color:#a6e22e>pageNumber</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>1</span>, <span style=color:#a6e22e>pageSize</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>5</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>page</span>});
</span></span><span style=display:flex><span><span style=color:#75715e>// 详情抽屉 + 详情标题 + 详情数据
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>descDrawer</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>(<span style=color:#66d9ef>null</span>);
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>descTitle</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>(<span style=color:#e6db74>&#39;&#39;</span>);
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>descItems</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>([]);
</span></span><span style=display:flex><span><span style=color:#75715e>// 当前课程ID和课程标题（来自上级组件传递）
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>courseId</span>, <span style=color:#a6e22e>courseTitle</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 组件数据 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 导航数据
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>navItems</span> <span style=color:#f92672>=</span> [
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>icon</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;House&#39;</span>, <span style=color:#a6e22e>title</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;首页&#39;</span>, <span style=color:#a6e22e>url</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;/Board&#39;</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>icon</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Notebook&#39;</span>, <span style=color:#a6e22e>title</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;课程管理&#39;</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>icon</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Notebook&#39;</span>, <span style=color:#a6e22e>title</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;课程列表&#39;</span>, <span style=color:#a6e22e>url</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;/Course&#39;</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>icon</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Notebook&#39;</span>, <span style=color:#a6e22e>title</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;季次列表&#39;</span>}
</span></span><span style=display:flex><span>];
</span></span><span style=display:flex><span><span style=color:#75715e>// 通用头数据
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>headItems</span> <span style=color:#f92672>=</span> [
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;insertBtn&#39;</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>openInsertDrawer</span>, <span style=color:#a6e22e>offset</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>21</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;deleteBtn&#39;</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>removeBatch</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;excelBtn&#39;</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>notYet</span>},
</span></span><span style=display:flex><span>];
</span></span><span style=display:flex><span><span style=color:#75715e>// 表格中间列数据
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>columns</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>([
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>column</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#39;基础信息&#39;</span>, <span style=color:#e6db74>&#39;季次权重&#39;</span>], <span style=color:#a6e22e>property</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;weight&#39;</span>, <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;tag&#39;</span>, <span style=color:#a6e22e>prefix</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;No.&#39;</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>column</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#39;基础信息&#39;</span>, <span style=color:#e6db74>&#39;季次标题&#39;</span>], <span style=color:#a6e22e>property</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;title&#39;</span>, <span style=color:#a6e22e>prefix</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;《&#39;</span>, <span style=color:#a6e22e>suffix</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;》&#39;</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>column</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#39;基础信息&#39;</span>, <span style=color:#e6db74>&#39;季次描述&#39;</span>], <span style=color:#a6e22e>property</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;info&#39;</span>, <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;card&#39;</span>},
</span></span><span style=display:flex><span>]);
</span></span><span style=display:flex><span><span style=color:#75715e>// 表格末尾列数据
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>buttons</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>([
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;info&#39;</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>openInfoDrawer</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;update&#39;</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>openUpdateDrawer</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;delete&#39;</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>remove</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>btnText</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;集次列表&#39;</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>toEpisode</span>},
</span></span><span style=display:flex><span>]);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 分页查询 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 分页查询
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>page</span>(<span style=color:#a6e22e>pageNumber</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>pageInfo</span>[<span style=color:#e6db74>&#39;pageNumber&#39;</span>], <span style=color:#a6e22e>pageSize</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>pageInfo</span>[<span style=color:#e6db74>&#39;pageSize&#39;</span>]) {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// 按课程ID分页查询
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>courseId</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>myPage</span>({
</span></span><span style=display:flex><span>      <span style=color:#e6db74>&#39;api&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>pageCourseApi</span>,
</span></span><span style=display:flex><span>      <span style=color:#e6db74>&#39;params&#39;</span><span style=color:#f92672>:</span> {<span style=color:#e6db74>&#39;pageNumber&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>pageNumber</span>, <span style=color:#e6db74>&#39;pageSize&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>pageSize</span>},
</span></span><span style=display:flex><span>      <span style=color:#e6db74>&#39;records&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>currentRecords</span>,
</span></span><span style=display:flex><span>      <span style=color:#e6db74>&#39;pageInfo&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>pageInfo</span>,
</span></span><span style=display:flex><span>      <span style=color:#e6db74>&#39;secondParam&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>courseId</span>
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 单条添加 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 抽屉 + 表单数据 + 表单规则
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>insertDrawer</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>();
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>insertFormItems</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>();
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>insertFormData</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowReactive</span>({});
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>insertFormRule</span> <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>title</span><span style=color:#f92672>:</span> [{<span style=color:#a6e22e>min</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>1</span>, <span style=color:#a6e22e>max</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>128</span>, <span style=color:#a6e22e>message</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;标题长度必须在1~128之间&#39;</span>}],
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>info</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>RULE</span>.<span style=color:#a6e22e>COMMON_INFO</span>
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 打开抽屉: 设置fkCourseId默认值，设计表单项 + 打开抽屉
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>openInsertDrawer</span>() {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>insertFormData</span>[<span style=color:#e6db74>&#39;fkCourseId&#39;</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>courseId</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>insertFormItems</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> [
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;所属课程&#39;</span>, <span style=color:#a6e22e>prop</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;fkCourseId&#39;</span>, <span style=color:#a6e22e>readonly</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;季次权重&#39;</span>, <span style=color:#a6e22e>prop</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;weight&#39;</span>, <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;number&#39;</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;季次标题&#39;</span>, <span style=color:#a6e22e>prop</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;title&#39;</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;季次描述&#39;</span>, <span style=color:#a6e22e>prop</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;info&#39;</span>, <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;textarea&#39;</span>}
</span></span><span style=display:flex><span>  ];
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>insertDrawer</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 关闭抽屉: 关闭抽屉 + 重新分页
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>closeInsertDrawer</span>() {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>insertDrawer</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>false</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>page</span>();
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 查看详情 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 打开抽屉: 设计列表标题 + 设计列表项 + 打开抽屉
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>openInfoDrawer</span>(<span style=color:#a6e22e>record</span>) {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>descTitle</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;查看季次详情&#39;</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>descItems</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> [
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;季次权重&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;weight&#39;</span>], <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;tag&#39;</span>, <span style=color:#a6e22e>prefix</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;No.&#39;</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;所属课程&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>courseTitle</span>, <span style=color:#a6e22e>prefix</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;《&#39;</span>, <span style=color:#a6e22e>suffix</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;》&#39;</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;季次标题&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;title&#39;</span>], <span style=color:#a6e22e>prefix</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;《&#39;</span>, <span style=color:#a6e22e>suffix</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;》&#39;</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;季次描述&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;info&#39;</span>], <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;card&#39;</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;创建时间&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;created&#39;</span>], <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>dateStr</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;修改时间&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;updated&#39;</span>], <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>dateStr</span>},
</span></span><span style=display:flex><span>  ];
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>descDrawer</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 单条修改 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 抽屉 + 表单数据 + 表单规则
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>updateDrawer</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>();
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>updateFormData</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowReactive</span>({});
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>updateFormItems</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>();
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>updateFormRule</span> <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>title</span><span style=color:#f92672>:</span> [{<span style=color:#a6e22e>min</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>1</span>, <span style=color:#a6e22e>max</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>128</span>, <span style=color:#a6e22e>message</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;标题长度必须在1~128之间&#39;</span>}],
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>info</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>RULE</span>.<span style=color:#a6e22e>COMMON_INFO</span>
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 打开抽屉: 赋值表单默认值 + 设计表单项 + 打开抽屉
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>openUpdateDrawer</span>(<span style=color:#a6e22e>record</span>) {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>updateFormData</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>record</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>updateFormItems</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> [
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;所属课程&#39;</span>, <span style=color:#a6e22e>prop</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;fkCourseId&#39;</span>, <span style=color:#a6e22e>disabled</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;季次权重&#39;</span>, <span style=color:#a6e22e>prop</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;weight&#39;</span>, <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;number&#39;</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;季次标题&#39;</span>, <span style=color:#a6e22e>prop</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;title&#39;</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;季次描述&#39;</span>, <span style=color:#a6e22e>prop</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;info&#39;</span>, <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;textarea&#39;</span>}
</span></span><span style=display:flex><span>  ];
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>updateDrawer</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 关闭抽屉: 关闭抽屉 + 重新分页
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>closeUpdateDrawer</span>() {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>updateDrawer</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>false</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>page</span>();
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 单条删除 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 删除季次信息
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>remove</span>(<span style=color:#a6e22e>id</span>) {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>myDelete</span>({
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;id&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>id</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;api&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>removeApi</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;callback&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>page</span>
</span></span><span style=display:flex><span>  });
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 批量删除 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 季次主键数组
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>ids</span> <span style=color:#f92672>=</span> [];
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 当复选框发生改变时触发
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>selectionChange</span>(<span style=color:#a6e22e>row</span>) {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>ids</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>row</span>.<span style=color:#a6e22e>map</span>(<span style=color:#a6e22e>e</span> =&gt; <span style=color:#a6e22e>e</span>[<span style=color:#e6db74>&#39;id&#39;</span>]);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 批量删除季次信息
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>removeBatch</span>() {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>myBatchDelete</span>({
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;ids&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>ids</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;api&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>removeBatchApi</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;callback&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>page</span>
</span></span><span style=display:flex><span>  });
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 集次列表 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 跳转到到Episode页面
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>toEpisode</span>(<span style=color:#a6e22e>record</span>) {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>router</span>.<span style=color:#a6e22e>push</span>({
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>path</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;/Episode&#39;</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>query</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>seasonId</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;id&#39;</span>],
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>seasonTitle</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;title&#39;</span>],
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  });
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== mount ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>onBeforeMount</span>(() =&gt; {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>courseId</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>router</span>.<span style=color:#a6e22e>currentRoute</span>.<span style=color:#a6e22e>value</span>.<span style=color:#a6e22e>query</span>[<span style=color:#e6db74>&#39;courseId&#39;</span>];
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>courseTitle</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>router</span>.<span style=color:#a6e22e>currentRoute</span>.<span style=color:#a6e22e>value</span>.<span style=color:#a6e22e>query</span>[<span style=color:#e6db74>&#39;courseTitle&#39;</span>];
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>page</span>();
</span></span><span style=display:flex><span>});
</span></span></code></pre></div><h2 id=e13-开发集次组件>E13. 开发集次组件</h2><blockquote><p>心法: 集次列表组件 <code>@/views/pms/Episode.vue</code></p></blockquote><p><img src=/%E7%AC%AC4%E9%98%B6%E6%AE%B5-LESSON/JB4-5-%E5%90%8E%E5%8F%B0%E5%89%8D%E7%AB%AF/image/Episode%E9%A1%B5%E9%9D%A2.png alt></p><blockquote><p>武技: 开发集次列表组件 <code>@/views/pms/Episode.vue</code></p></blockquote><ol><li>配置Episode组件路由:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span>{  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>path</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;/Main&#39;</span>, <span style=color:#a6e22e>name</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Main&#39;</span>, <span style=color:#a6e22e>component</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>Main</span>,  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>redirect</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;/Board&#39;</span>,  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>children</span><span style=color:#f92672>:</span> [  
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>path</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;/Episode&#39;</span>, <span style=color:#a6e22e>name</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Episode&#39;</span>, <span style=color:#a6e22e>component</span><span style=color:#f92672>:</span> () =&gt; <span style=color:#66d9ef>import</span>(<span style=color:#e6db74>&#39;@/views/pms/Episode&#39;</span>)},   
</span></span><span style=display:flex><span>  ]  
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><ol start=2><li>开发Episode组件布局:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>&lt;<span style=color:#f92672>my-nav</span> <span style=color:#a6e22e>:items</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;navItems&#34;</span>/&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>my-head</span> <span style=color:#a6e22e>:items</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;headItems&#34;</span>/&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>my-table</span> <span style=color:#a6e22e>:records</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;currentRecords&#34;</span> <span style=color:#a6e22e>:columns</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;columns&#34;</span> <span style=color:#a6e22e>:buttons</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;buttons&#34;</span> <span style=color:#a6e22e>:selectionChange</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;selectionChange&#34;</span>/&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>my-pager</span> <span style=color:#a6e22e>:pageInfo</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;pageInfo&#34;</span>/&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>el-drawer</span> <span style=color:#a6e22e>title</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;详情抽屉&#34;</span> <span style=color:#a6e22e>v-model</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;descDrawer&#34;</span> <span style=color:#a6e22e>size</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;30%&#34;</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>my-list</span> <span style=color:#a6e22e>:items</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;descItems&#34;</span> <span style=color:#a6e22e>:title</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;descTitle&#34;</span>/&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>el-drawer</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>el-drawer</span> <span style=color:#a6e22e>title</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;单增抽屉 - 添加集次记录&#34;</span> <span style=color:#a6e22e>v-model</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;insertDrawer&#34;</span> <span style=color:#a6e22e>size</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;30%&#34;</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>my-form</span> <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;insert&#34;</span> <span style=color:#a6e22e>:items</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;insertFormItems&#34;</span> <span style=color:#a6e22e>:data</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;insertFormData&#34;</span> <span style=color:#a6e22e>:rule</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;insertFormRule&#34;</span>
</span></span><span style=display:flex><span>           <span style=color:#a6e22e>:api</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;saveApi&#34;</span> <span style=color:#a6e22e>:fn</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;closeInsertDrawer&#34;</span>/&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>el-drawer</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>el-drawer</span> <span style=color:#a6e22e>title</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;修改抽屉 - 修改集次记录&#34;</span> <span style=color:#a6e22e>v-model</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;updateDrawer&#34;</span> <span style=color:#a6e22e>size</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;30%&#34;</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>my-form</span> <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;update&#34;</span> <span style=color:#a6e22e>:items</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;updateFormItems&#34;</span> <span style=color:#a6e22e>:data</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;updateFormData&#34;</span> <span style=color:#a6e22e>:rule</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;updateFormRule&#34;</span>
</span></span><span style=display:flex><span>           <span style=color:#a6e22e>:api</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;updateApi&#34;</span> <span style=color:#a6e22e>:fn</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;closeUpdateDrawer&#34;</span>/&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>el-drawer</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>el-drawer</span> <span style=color:#a6e22e>title</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;文件抽屉 - 上传集次封面&#34;</span> <span style=color:#a6e22e>v-model</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;uploadCoverDrawer&#34;</span> <span style=color:#a6e22e>size</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;30%&#34;</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>my-uploader</span> <span style=color:#a6e22e>name</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;videoCoverFile&#34;</span> <span style=color:#a6e22e>:action</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;UPLOAD_VIDEO_COVER(currentId)&#34;</span>
</span></span><span style=display:flex><span>               <span style=color:#a6e22e>:fn</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;closeUploadCoverDrawer&#34;</span>/&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>el-drawer</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>el-drawer</span> <span style=color:#a6e22e>title</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;文件抽屉 - 上传视频文件&#34;</span> <span style=color:#a6e22e>v-model</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;uploadVideoDrawer&#34;</span> <span style=color:#a6e22e>size</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;30%&#34;</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>my-uploader</span> <span style=color:#a6e22e>name</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;videoFile&#34;</span> <span style=color:#a6e22e>:allow-types</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;[&#39;video/mp4&#39;, &#39;video/x-msvideo&#39;]&#34;</span>
</span></span><span style=display:flex><span>               <span style=color:#a6e22e>:max-size</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;2048&#34;</span> <span style=color:#a6e22e>:action</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;UPLOAD_VIDEO(currentId)&#34;</span>
</span></span><span style=display:flex><span>               <span style=color:#a6e22e>:fn</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;closeUploadVideoDrawer&#34;</span>/&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>el-drawer</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>el-drawer</span> <span style=color:#a6e22e>title</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;视频抽屉 - 观看当前视频&#34;</span> <span style=color:#a6e22e>v-model</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;playVideoDrawer&#34;</span> <span style=color:#a6e22e>size</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;40%&#34;</span>
</span></span><span style=display:flex><span>           <span style=color:#a6e22e>:before-close</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;closePlayVideoDrawer&#34;</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>my-player</span> <span style=color:#a6e22e>:poster</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;coverUrl&#34;</span> <span style=color:#a6e22e>:url</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;videoUrl&#34;</span> <span style=color:#a6e22e>:message</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;message&#34;</span>/&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>el-drawer</span>&gt;
</span></span></code></pre></div><ol start=3><li>开发Episode组件样式:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-css data-lang=css><span style=display:flex><span><span style=color:#75715e>/*暂无*/</span>
</span></span></code></pre></div><ol start=4><li>开发Episode组件脚本:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>MyNav</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/components/MyNav&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>MyHead</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/components/MyHead&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>MyTable</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/components/MyTable&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>MyPager</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/components/MyPager&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>MyList</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;@/components/MyList&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>MyForm</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;@/components/MyForm&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>MyUploader</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/components/MyUploader&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>MyPlayer</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;@/components/MyPlayer&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>router</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/router&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>onBeforeMount</span>, <span style=color:#a6e22e>shallowReactive</span>, <span style=color:#a6e22e>shallowRef</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;vue&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>EPISODE_EXCEL</span>, <span style=color:#a6e22e>MINIO_VIDEO_COVER</span>, <span style=color:#a6e22e>RULE</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/const&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>UPLOAD_VIDEO_COVER</span>, <span style=color:#a6e22e>UPLOAD_VIDEO</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/const&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>dateStr</span>, <span style=color:#a6e22e>elConfirm</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/util&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>myBatchDelete</span>, <span style=color:#a6e22e>myDelete</span>, <span style=color:#a6e22e>myPage</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/util&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>pageSeasonApi</span>, <span style=color:#a6e22e>removeApi</span>, <span style=color:#a6e22e>removeBatchApi</span>, <span style=color:#a6e22e>saveApi</span>, <span style=color:#a6e22e>updateApi</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/api/episode&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 通用数据 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 当前操作的集次对象 + 当前操作的集次对象列表 + 当前操作的
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>currentRecord</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>();
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>currentRecords</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>();
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>currentId</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>();
</span></span><span style=display:flex><span><span style=color:#75715e>// 分页信息
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>pageInfo</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowReactive</span>({<span style=color:#a6e22e>pageNumber</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>1</span>, <span style=color:#a6e22e>pageSize</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>5</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>page</span>});
</span></span><span style=display:flex><span><span style=color:#75715e>// 详情抽屉 + 详情标题 + 详情数据
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>descDrawer</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>(<span style=color:#66d9ef>null</span>);
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>descTitle</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>(<span style=color:#e6db74>&#39;&#39;</span>);
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>descItems</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>([]);
</span></span><span style=display:flex><span><span style=color:#75715e>// 当前季次ID和季次标题（来自上级组件传递）
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>seasonId</span>, <span style=color:#a6e22e>seasonTitle</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 组件数据 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 导航数据
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>navItems</span> <span style=color:#f92672>=</span> [
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>icon</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;House&#39;</span>, <span style=color:#a6e22e>title</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;首页&#39;</span>, <span style=color:#a6e22e>url</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;/Board&#39;</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>icon</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Notebook&#39;</span>, <span style=color:#a6e22e>title</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;课程管理&#39;</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>icon</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Notebook&#39;</span>, <span style=color:#a6e22e>title</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;课程列表&#39;</span>, <span style=color:#a6e22e>url</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;/Course&#39;</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>icon</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Notebook&#39;</span>, <span style=color:#a6e22e>title</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;季次列表&#39;</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> () =&gt; <span style=color:#a6e22e>router</span>.<span style=color:#a6e22e>back</span>(<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>)},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>icon</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Notebook&#39;</span>, <span style=color:#a6e22e>title</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;集次列表&#39;</span>}
</span></span><span style=display:flex><span>];
</span></span><span style=display:flex><span><span style=color:#75715e>// 通用头数据
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>headItems</span> <span style=color:#f92672>=</span> [
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;insertBtn&#39;</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>openInsertDrawer</span>, <span style=color:#a6e22e>offset</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>21</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;deleteBtn&#39;</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>removeBatch</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;excelBtn&#39;</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>excel</span>},
</span></span><span style=display:flex><span>];
</span></span><span style=display:flex><span><span style=color:#75715e>// 表格中间列数据
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>columns</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>([
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>column</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#39;基础信息&#39;</span>, <span style=color:#e6db74>&#39;所属季次&#39;</span>], <span style=color:#a6e22e>property</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;fkSeasonId&#39;</span>, <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;tag&#39;</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>column</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#39;基础信息&#39;</span>, <span style=color:#e6db74>&#39;集次权重&#39;</span>], <span style=color:#a6e22e>property</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;weight&#39;</span>, <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;tag&#39;</span>, <span style=color:#a6e22e>prefix</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;No.&#39;</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>column</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#39;基础信息&#39;</span>, <span style=color:#e6db74>&#39;集次封面&#39;</span>], <span style=color:#a6e22e>property</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;cover&#39;</span>, <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;img&#39;</span>, <span style=color:#a6e22e>minio</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>MINIO_VIDEO_COVER</span>.<span style=color:#a6e22e>value</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>column</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#39;基础信息&#39;</span>, <span style=color:#e6db74>&#39;集次标题&#39;</span>], <span style=color:#a6e22e>property</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;title&#39;</span>, <span style=color:#a6e22e>prefix</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;《&#39;</span>, <span style=color:#a6e22e>suffix</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;》&#39;</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>column</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#39;基础信息&#39;</span>, <span style=color:#e6db74>&#39;集次描述&#39;</span>], <span style=color:#a6e22e>property</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;info&#39;</span>, <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;card&#39;</span>},
</span></span><span style=display:flex><span>]);
</span></span><span style=display:flex><span><span style=color:#75715e>// 表格末尾列数据
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>buttons</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>([
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;info&#39;</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>openInfoDrawer</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;update&#39;</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>openUpdateDrawer</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;delete&#39;</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>remove</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;upload&#39;</span>, <span style=color:#a6e22e>btnText</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;上传封面&#39;</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>openUploadCoverDrawer</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;upload&#39;</span>, <span style=color:#a6e22e>btnText</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;上传视频&#39;</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>openUploadVideoDrawer</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>btnText</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;观看视频&#39;</span>, <span style=color:#a6e22e>btnIcon</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;videoPlay&#39;</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>openPlayVideoDrawer</span>},
</span></span><span style=display:flex><span>]);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 分页查询 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 分页查询
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>page</span>(<span style=color:#a6e22e>pageNumber</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>pageInfo</span>[<span style=color:#e6db74>&#39;pageNumber&#39;</span>], <span style=color:#a6e22e>pageSize</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>pageInfo</span>[<span style=color:#e6db74>&#39;pageSize&#39;</span>]) {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// 按季次ID分页查询
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>myPage</span>({
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;api&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>pageSeasonApi</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;params&#39;</span><span style=color:#f92672>:</span> {<span style=color:#e6db74>&#39;pageNumber&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>pageNumber</span>, <span style=color:#e6db74>&#39;pageSize&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>pageSize</span>},
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;records&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>currentRecords</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;pageInfo&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>pageInfo</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;secondParam&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>seasonId</span>
</span></span><span style=display:flex><span>  });
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 单条添加 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 抽屉 + 表单数据 + 表单规则
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>insertDrawer</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>();
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>insertFormItems</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>();
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>insertFormData</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowReactive</span>({});
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>insertFormRule</span> <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>title</span><span style=color:#f92672>:</span> [{<span style=color:#a6e22e>min</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>1</span>, <span style=color:#a6e22e>max</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>128</span>, <span style=color:#a6e22e>message</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;标题长度必须在1~128之间&#39;</span>}],
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>info</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>RULE</span>.<span style=color:#a6e22e>COMMON_INFO</span>
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 打开抽屉: 设置fkSeasonId默认值，设计表单项 + 打开抽屉
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>openInsertDrawer</span>() {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>insertFormData</span>[<span style=color:#e6db74>&#39;fkSeasonId&#39;</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>seasonId</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>insertFormItems</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> [
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;所属季次&#39;</span>, <span style=color:#a6e22e>prop</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;fkSeasonId&#39;</span>, <span style=color:#a6e22e>disabled</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;集次权重&#39;</span>, <span style=color:#a6e22e>prop</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;weight&#39;</span>, <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;number&#39;</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;集次标题&#39;</span>, <span style=color:#a6e22e>prop</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;title&#39;</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;集次描述&#39;</span>, <span style=color:#a6e22e>prop</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;info&#39;</span>, <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;textarea&#39;</span>}
</span></span><span style=display:flex><span>  ];
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>insertDrawer</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 关闭抽屉: 关闭抽屉 + 重新分页
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>closeInsertDrawer</span>() {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>insertDrawer</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>false</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>page</span>();
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 查看详情 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 打开抽屉: 设计列表标题 + 设计列表项 + 打开抽屉
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>openInfoDrawer</span>(<span style=color:#a6e22e>record</span>) {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>descTitle</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;查看集次详情&#39;</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>descItems</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> [
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;视频封面&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;cover&#39;</span>], <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;img&#39;</span>, <span style=color:#a6e22e>minio</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>MINIO_VIDEO_COVER</span>.<span style=color:#a6e22e>value</span>, <span style=color:#a6e22e>large</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;集次权重&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;weight&#39;</span>], <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;tag&#39;</span>, <span style=color:#a6e22e>prefix</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;No.&#39;</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;所属季次&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>seasonTitle</span>, <span style=color:#a6e22e>prefix</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;《&#39;</span>, <span style=color:#a6e22e>suffix</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;》&#39;</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;集次标题&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;title&#39;</span>], <span style=color:#a6e22e>prefix</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;《&#39;</span>, <span style=color:#a6e22e>suffix</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;》&#39;</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;集次描述&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;info&#39;</span>], <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;card&#39;</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;创建时间&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;created&#39;</span>], <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>dateStr</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;修改时间&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;updated&#39;</span>], <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>dateStr</span>},
</span></span><span style=display:flex><span>  ];
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>descDrawer</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 单条修改 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 抽屉 + 表单数据 + 表单规则
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>updateDrawer</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>();
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>updateFormData</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowReactive</span>({});
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>updateFormItems</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>();
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>updateFormRule</span> <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>title</span><span style=color:#f92672>:</span> [{<span style=color:#a6e22e>min</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>1</span>, <span style=color:#a6e22e>max</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>128</span>, <span style=color:#a6e22e>message</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;标题长度必须在1~128之间&#39;</span>}],
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>info</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>RULE</span>.<span style=color:#a6e22e>COMMON_INFO</span>
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 打开抽屉: 赋值表单默认值 + 设计表单项 + 打开抽屉
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>openUpdateDrawer</span>(<span style=color:#a6e22e>record</span>) {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>updateFormData</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>record</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>updateFormItems</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> [
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;所属季次&#39;</span>, <span style=color:#a6e22e>prop</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;fkSeasonId&#39;</span>, <span style=color:#a6e22e>disabled</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;集次权重&#39;</span>, <span style=color:#a6e22e>prop</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;weight&#39;</span>, <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;number&#39;</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;集次标题&#39;</span>, <span style=color:#a6e22e>prop</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;title&#39;</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;集次描述&#39;</span>, <span style=color:#a6e22e>prop</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;info&#39;</span>, <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;textarea&#39;</span>}
</span></span><span style=display:flex><span>  ];
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>updateDrawer</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 关闭抽屉: 关闭抽屉 + 重新分页
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>closeUpdateDrawer</span>() {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>updateDrawer</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>false</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>page</span>();
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 单条删除 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 删除季次信息
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>remove</span>(<span style=color:#a6e22e>record</span>) {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>myDelete</span>({
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;id&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;id&#39;</span>],
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;api&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>removeApi</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;callback&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>page</span>
</span></span><span style=display:flex><span>  });
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 批量删除 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 季次主键数组
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>ids</span> <span style=color:#f92672>=</span> [];
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 当复选框发生改变时触发
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>selectionChange</span>(<span style=color:#a6e22e>row</span>) {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>ids</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>row</span>.<span style=color:#a6e22e>map</span>(<span style=color:#a6e22e>e</span> =&gt; <span style=color:#a6e22e>e</span>[<span style=color:#e6db74>&#39;id&#39;</span>]);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 批量删除季次信息
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>removeBatch</span>() {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>myBatchDelete</span>({
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;ids&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>ids</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;api&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>removeBatchApi</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;callback&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>page</span>
</span></span><span style=display:flex><span>  });
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 打印报表 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 打印报表数据: 误操作保护 + 打印报表数据
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>excel</span>() {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (<span style=color:#f92672>!</span><span style=color:#66d9ef>await</span> <span style=color:#a6e22e>elConfirm</span>(<span style=color:#e6db74>&#39;正在打印报表数据，确认吗？&#39;</span>)) <span style=color:#66d9ef>return</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>location</span>.<span style=color:#a6e22e>href</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>EPISODE_EXCEL</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 上传封面 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 抽屉 + 当前记录的ID值
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>uploadCoverDrawer</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 打开抽屉: 获取当前记录的ID值 + 打开抽屉
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>openUploadCoverDrawer</span>(<span style=color:#a6e22e>record</span>) {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>currentId</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;id&#39;</span>];
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>uploadCoverDrawer</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 关闭抽屉: 重新分页，关闭抽屉
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>closeUploadCoverDrawer</span>() {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>page</span>();
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>uploadCoverDrawer</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>false</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 上传视频 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 抽屉 + 当前记录的ID值
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>uploadVideoDrawer</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 打开抽屉: 获取当前记录的ID值 + 打开抽屉
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>openUploadVideoDrawer</span>(<span style=color:#a6e22e>record</span>) {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>currentId</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;id&#39;</span>];
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>uploadVideoDrawer</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 关闭抽屉: 重新分页，关闭抽屉
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>closeUploadVideoDrawer</span>() {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>page</span>();
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>uploadVideoDrawer</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>false</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 观看视频 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 抽屉
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>playVideoDrawer</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>();
</span></span><span style=display:flex><span><span style=color:#75715e>// 当前视频地址 + 当前视频封面
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>videoUrl</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>();
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>coverUrl</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>();
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>message</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 打开抽屉: 向子组件发送打开抽屉的信号 + 赋值地址和封面 + 打开抽屉
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>openPlayVideoDrawer</span>(<span style=color:#a6e22e>record</span>) {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>message</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;openPlayVideoDrawer&#39;</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>videoUrl</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;video&#39;</span>];
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>coverUrl</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;cover&#39;</span>];
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>playVideoDrawer</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 关闭抽屉: 向子组件发送关闭抽屉的信号 + 关闭抽屉
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>closePlayVideoDrawer</span>() {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>message</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;closePlayVideoDrawer&#39;</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>playVideoDrawer</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>false</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== mount ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>onBeforeMount</span>(() =&gt; {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>seasonId</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>router</span>.<span style=color:#a6e22e>currentRoute</span>.<span style=color:#a6e22e>value</span>.<span style=color:#a6e22e>query</span>[<span style=color:#e6db74>&#39;seasonId&#39;</span>];
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>seasonTitle</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>router</span>.<span style=color:#a6e22e>currentRoute</span>.<span style=color:#a6e22e>value</span>.<span style=color:#a6e22e>query</span>[<span style=color:#e6db74>&#39;seasonTitle&#39;</span>];
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>page</span>();
</span></span><span style=display:flex><span>});
</span></span></code></pre></div><h2 id=e14-开发会员组件>E14. 开发会员组件</h2><blockquote><p>心法: 会员列表组件 <code>@/views/ums/Member.vue</code></p></blockquote><p><img src=/%E7%AC%AC4%E9%98%B6%E6%AE%B5-LESSON/JB4-5-%E5%90%8E%E5%8F%B0%E5%89%8D%E7%AB%AF/image/Member%E9%A1%B5%E9%9D%A2.png alt></p><blockquote><p>武技: 开发会员列表组件 <code>@/views/ums/Member.vue</code></p></blockquote><ol><li>配置Member组件路由:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span>{  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>path</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;/Main&#39;</span>, <span style=color:#a6e22e>name</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Main&#39;</span>, <span style=color:#a6e22e>component</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>Main</span>,  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>redirect</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;/Board&#39;</span>,  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>children</span><span style=color:#f92672>:</span> [  
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>path</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;/Member&#39;</span>, <span style=color:#a6e22e>name</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Member&#39;</span>, <span style=color:#a6e22e>component</span><span style=color:#f92672>:</span> () =&gt; <span style=color:#66d9ef>import</span>(<span style=color:#e6db74>&#39;@/views/ums/Member&#39;</span>)},   
</span></span><span style=display:flex><span>  ]  
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><ol start=2><li>开发Member组件布局:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>&lt;<span style=color:#f92672>my-nav</span> <span style=color:#a6e22e>:items</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;navItems&#34;</span>/&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>my-head</span> <span style=color:#a6e22e>:items</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;headItems&#34;</span>/&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>my-table</span> <span style=color:#a6e22e>:records</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;currentRecords&#34;</span> <span style=color:#a6e22e>:columns</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;columns&#34;</span> <span style=color:#a6e22e>:buttons</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;buttons&#34;</span>/&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>my-pager</span> <span style=color:#a6e22e>:pageInfo</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;pageInfo&#34;</span>/&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>el-drawer</span> <span style=color:#a6e22e>title</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;详情抽屉&#34;</span> <span style=color:#a6e22e>v-model</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;descDrawer&#34;</span> <span style=color:#a6e22e>size</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;30%&#34;</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>my-list</span> <span style=color:#a6e22e>:title</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;descTitle&#34;</span> <span style=color:#a6e22e>:items</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;descItems&#34;</span>/&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>el-drawer</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>el-drawer</span> <span style=color:#a6e22e>title</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;修改角色列表&#34;</span> <span style=color:#a6e22e>v-model</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;rolesDrawer&#34;</span> <span style=color:#a6e22e>size</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;50%&#34;</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>el-transfer</span> <span style=color:#a6e22e>v-model</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;roleIds&#34;</span> <span style=color:#a6e22e>filterable</span> <span style=color:#a6e22e>filter-placeholder</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;输入角色名搜索&#34;</span>
</span></span><span style=display:flex><span>               <span style=color:#a6e22e>:data</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;roles&#34;</span> <span style=color:#a6e22e>:titles</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;[&#39;可选角色&#39;, &#39;当前角色&#39;]&#34;</span>
</span></span><span style=display:flex><span>               <span style=color:#a6e22e>:props</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;{key: &#39;id&#39;, label: &#39;title&#39;}&#34;</span> <span style=color:#a6e22e>:button-texts</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;[&#39;移除&#39;, &#39;添加&#39;]&#34;</span>/&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>el-divider</span>/&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>el-button</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;update-roles-btn&#34;</span> <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;primary&#34;</span> <span style=color:#960050;background-color:#1e0010>@</span><span style=color:#a6e22e>click</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;updateRoles()&#34;</span>&gt;确认修改&lt;/<span style=color:#f92672>el-button</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>el-drawer</span>&gt;
</span></span></code></pre></div><ol start=3><li>开发Member组件样式:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-css data-lang=css><span style=display:flex><span><span style=color:#75715e>/* 修改EL穿梭框高度 */</span>
</span></span><span style=display:flex><span>:<span style=color:#a6e22e>deep</span><span style=color:#f92672>(</span>.<span style=color:#a6e22e>el-transfer-panel</span><span style=color:#f92672>),</span> :<span style=color:#a6e22e>deep</span><span style=color:#f92672>(</span>.<span style=color:#a6e22e>el-transfer-panel__body</span><span style=color:#f92672>)</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>height</span>: <span style=color:#ae81ff>550</span><span style=color:#66d9ef>px</span>; <span style=color:#960050;background-color:#1e0010>//</span> <span style=color:#960050;background-color:#1e0010>高度</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>.<span style=color:#a6e22e>update-roles-btn</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>width</span>: <span style=color:#ae81ff>100</span><span style=color:#66d9ef>%</span>; <span style=color:#960050;background-color:#1e0010>//</span> <span style=color:#960050;background-color:#1e0010>宽度</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><ol start=4><li>开发Member组件脚本:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>MyNav</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/components/MyNav&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>MyHead</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/components/MyHead&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>MyTable</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/components/MyTable&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>MyPager</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/components/MyPager&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>MyList</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/components/MyList&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>onBeforeMount</span>, <span style=color:#a6e22e>shallowReactive</span>, <span style=color:#a6e22e>shallowRef</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;vue&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>MINIO_AVATAR</span>, <span style=color:#a6e22e>MEMBER_EXCEL</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/const&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>genderStr</span>, <span style=color:#a6e22e>dateStr</span>, <span style=color:#a6e22e>getResponseData</span>, <span style=color:#a6e22e>elConfirm</span>, <span style=color:#a6e22e>myPage</span>, <span style=color:#a6e22e>notYet</span>, <span style=color:#a6e22e>memberStateStr</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/util&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>freezeApi</span>, <span style=color:#a6e22e>getByNicknameApi</span>, <span style=color:#a6e22e>getByPhoneApi</span>, <span style=color:#a6e22e>getByUsernameApi</span>, <span style=color:#a6e22e>getRolesApi</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/api/member&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>pageApi</span>, <span style=color:#a6e22e>resetPasswordApi</span>, <span style=color:#a6e22e>unfreezeApi</span>, <span style=color:#a6e22e>updateRolesApi</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/api/member&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>listApi</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/api/role&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>ElMessage</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;element-plus&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 通用数据 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 当前操作的会员对象 + 当前操作的会员对象列表 + 当前操作的会员状态[0正常，1冻结]
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>currentRecord</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>();
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>currentRecords</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>();
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>currentState</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>(<span style=color:#ae81ff>0</span>);
</span></span><span style=display:flex><span><span style=color:#75715e>// 分页信息
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>pageInfo</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowReactive</span>({<span style=color:#a6e22e>pageNumber</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>1</span>, <span style=color:#a6e22e>pageSize</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>5</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>page</span>});
</span></span><span style=display:flex><span><span style=color:#75715e>// 详情抽屉 + 详情标题 + 详情数据
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>descDrawer</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>(<span style=color:#66d9ef>null</span>);
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>descTitle</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>(<span style=color:#e6db74>&#39;&#39;</span>);
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>descItems</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>([]);
</span></span><span style=display:flex><span><span style=color:#75715e>// 会员账号搜索框 + 会员昵称搜索框 + 会员手机号码搜索框
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>usernameIpt</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>(<span style=color:#e6db74>&#39;&#39;</span>);
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>nicknameIpt</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>(<span style=color:#e6db74>&#39;&#39;</span>);
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>phoneIpt</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>(<span style=color:#e6db74>&#39;&#39;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 组件数据 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 导航数据
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>navItems</span> <span style=color:#f92672>=</span> [
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>icon</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;House&#39;</span>, <span style=color:#a6e22e>title</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;首页&#39;</span>, <span style=color:#a6e22e>url</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;/Board&#39;</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>icon</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;User&#39;</span>, <span style=color:#a6e22e>title</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;会员管理&#39;</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>icon</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;User&#39;</span>, <span style=color:#a6e22e>title</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;会员列表&#39;</span>},
</span></span><span style=display:flex><span>];
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 通用头数据
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>headItems</span> <span style=color:#f92672>=</span> [
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;ipt&#39;</span>, <span style=color:#a6e22e>iptValue</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>usernameIpt</span>.<span style=color:#a6e22e>value</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>getByUsername</span>, <span style=color:#a6e22e>placeholder</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;输入会员账号..&#39;</span>, <span style=color:#a6e22e>span</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>4</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;ipt&#39;</span>, <span style=color:#a6e22e>iptValue</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>nicknameIpt</span>.<span style=color:#a6e22e>value</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>getByNickname</span>, <span style=color:#a6e22e>placeholder</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;输入会员昵称..&#39;</span>, <span style=color:#a6e22e>span</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>4</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;ipt&#39;</span>, <span style=color:#a6e22e>iptValue</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>phoneIpt</span>.<span style=color:#a6e22e>value</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>getByPhone</span>, <span style=color:#a6e22e>placeholder</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;输入手机号码..&#39;</span>, <span style=color:#a6e22e>span</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>4</span>},
</span></span><span style=display:flex><span>  {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;rdo&#39;</span>, <span style=color:#a6e22e>rdoValue</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>currentState</span>.<span style=color:#a6e22e>value</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>currentMemberState</span> =&gt; {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>currentState</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>currentMemberState</span>;
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>page</span>();
</span></span><span style=display:flex><span>    }, <span style=color:#a6e22e>rdoItems</span><span style=color:#f92672>:</span> [
</span></span><span style=display:flex><span>      {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>0</span>, <span style=color:#a6e22e>text</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;正常账号&#39;</span>},
</span></span><span style=display:flex><span>      {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>1</span>, <span style=color:#a6e22e>text</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;冻结账号&#39;</span>},
</span></span><span style=display:flex><span>    ], <span style=color:#a6e22e>span</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>4</span>, <span style=color:#a6e22e>offset</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>5</span>
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;insertBtn&#39;</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>notYet</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;deleteBtn&#39;</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>notYet</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;excelBtn&#39;</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>excel</span>},
</span></span><span style=display:flex><span>];
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 表格中间列数据
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>columns</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>([
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>column</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#39;基础信息&#39;</span>, <span style=color:#e6db74>&#39;会员头像&#39;</span>], <span style=color:#a6e22e>property</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;avatar&#39;</span>, <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;img&#39;</span>, <span style=color:#a6e22e>minio</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>MINIO_AVATAR</span>.<span style=color:#a6e22e>value</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>column</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#39;基础信息&#39;</span>, <span style=color:#e6db74>&#39;账号状态&#39;</span>], <span style=color:#a6e22e>property</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;state&#39;</span>, <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;tag&#39;</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>memberStateStr</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>column</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#39;基础信息&#39;</span>, <span style=color:#e6db74>&#39;会员账号&#39;</span>], <span style=color:#a6e22e>property</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;username&#39;</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>column</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#39;基础信息&#39;</span>, <span style=color:#e6db74>&#39;粉丝数量&#39;</span>], <span style=color:#a6e22e>property</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;fanCount&#39;</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>column</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#39;会员信息&#39;</span>, <span style=color:#e6db74>&#39;会员昵称&#39;</span>], <span style=color:#a6e22e>property</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;nickname&#39;</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>column</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#39;会员信息&#39;</span>, <span style=color:#e6db74>&#39;会员性别&#39;</span>], <span style=color:#a6e22e>property</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;gender&#39;</span>, <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;tag&#39;</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>genderStr</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>column</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#39;会员信息&#39;</span>, <span style=color:#e6db74>&#39;会员年龄&#39;</span>], <span style=color:#a6e22e>property</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;age&#39;</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>column</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#39;会员信息&#39;</span>, <span style=color:#e6db74>&#39;会员星座&#39;</span>], <span style=color:#a6e22e>property</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;zodiac&#39;</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>column</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#39;会员信息&#39;</span>, <span style=color:#e6db74>&#39;所属省份&#39;</span>], <span style=color:#a6e22e>property</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;province&#39;</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>column</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#39;会员信息&#39;</span>, <span style=color:#e6db74>&#39;用户描述&#39;</span>], <span style=color:#a6e22e>property</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;info&#39;</span>, <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;card&#39;</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>column</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#39;认证信息&#39;</span>, <span style=color:#e6db74>&#39;真实姓名&#39;</span>], <span style=color:#a6e22e>property</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;realname&#39;</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>column</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#39;认证信息&#39;</span>, <span style=color:#e6db74>&#39;电子邮箱&#39;</span>], <span style=color:#a6e22e>property</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;email&#39;</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>column</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#39;认证信息&#39;</span>, <span style=color:#e6db74>&#39;手机号码&#39;</span>], <span style=color:#a6e22e>property</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;phone&#39;</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>column</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#39;认证信息&#39;</span>, <span style=color:#e6db74>&#39;身份证号&#39;</span>], <span style=color:#a6e22e>property</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;idcard&#39;</span>},
</span></span><span style=display:flex><span>]);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 表格末尾列数据
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>buttons</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>([
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;info&#39;</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>openInfoDrawer</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>btnText</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;重置密码&#39;</span>, <span style=color:#a6e22e>btnType</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;danger&#39;</span>, <span style=color:#a6e22e>btnIcon</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;RefreshRight&#39;</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>resetPassword</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>btnText</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;冻结账号&#39;</span>, <span style=color:#a6e22e>btnType</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;primary&#39;</span>, <span style=color:#a6e22e>btnIcon</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Lock&#39;</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>freeze</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>btnText</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;解冻账号&#39;</span>, <span style=color:#a6e22e>btnType</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;success&#39;</span>, <span style=color:#a6e22e>btnIcon</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Unlock&#39;</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>unfreeze</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>btnText</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;角色列表&#39;</span>, <span style=color:#a6e22e>btnType</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;warning&#39;</span>, <span style=color:#a6e22e>btnIcon</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Edit&#39;</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>getRoles</span>},
</span></span><span style=display:flex><span>]);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 分页查询 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 分页查询
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>page</span>(<span style=color:#a6e22e>pageNumber</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>pageInfo</span>[<span style=color:#e6db74>&#39;pageNumber&#39;</span>], <span style=color:#a6e22e>pageSize</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>pageInfo</span>[<span style=color:#e6db74>&#39;pageSize&#39;</span>],
</span></span><span style=display:flex><span>                    <span style=color:#a6e22e>state</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>currentState</span>.<span style=color:#a6e22e>value</span>) {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>pageConfig</span> <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;params&#39;</span><span style=color:#f92672>:</span> {<span style=color:#e6db74>&#39;pageNumber&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>pageNumber</span>, <span style=color:#e6db74>&#39;pageSize&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>pageSize</span>},
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;records&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>currentRecords</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;pageInfo&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>pageInfo</span>,
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// 根据账号状态分页查询数据
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>pageConfig</span>[<span style=color:#e6db74>&#39;api&#39;</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>pageApi</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>pageConfig</span>[<span style=color:#e6db74>&#39;secondParam&#39;</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>state</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>myPage</span>(<span style=color:#a6e22e>pageConfig</span>);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 查看详情 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 打开抽屉: 设计列表标题 + 设计列表项 + 打开抽屉
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>openInfoDrawer</span>(<span style=color:#a6e22e>record</span>) {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>descTitle</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;查看会员详情&#39;</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>descItems</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> [
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;会员头像&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;avatar&#39;</span>], <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;img&#39;</span>, <span style=color:#a6e22e>minio</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>MINIO_AVATAR</span>.<span style=color:#a6e22e>value</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;会员账号&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;username&#39;</span>]},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;会员年龄&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;age&#39;</span>]},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;会员性别&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;gender&#39;</span>], <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;tag&#39;</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>genderStr</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;会员星座&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;zodiac&#39;</span>]},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;所属省份&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;province&#39;</span>]},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;邮箱地址&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;email&#39;</span>]},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;真实姓名&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;realname&#39;</span>]},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;手机号码&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;phone&#39;</span>]},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;身份证号&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;idcard&#39;</span>]},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;粉丝数量&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;fanCount&#39;</span>]},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;创建时间&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;created&#39;</span>], <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>dateStr</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;修改时间&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;updated&#39;</span>], <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>dateStr</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;会员描述&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;info&#39;</span>], <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;card&#39;</span>},
</span></span><span style=display:flex><span>  ];
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>descDrawer</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 重置密码 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 重置用户密码: 误操作保护 + 发送请求 + 成功提示 + 重新分页
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>resetPassword</span>(<span style=color:#a6e22e>row</span>) {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (<span style=color:#f92672>!</span><span style=color:#66d9ef>await</span> <span style=color:#a6e22e>elConfirm</span>(<span style=color:#e6db74>&#39;正在重置密码，确认吗？&#39;</span>)) <span style=color:#66d9ef>return</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>data</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>getResponseData</span>(<span style=color:#66d9ef>await</span> <span style=color:#a6e22e>resetPasswordApi</span>(<span style=color:#a6e22e>row</span>[<span style=color:#e6db74>&#39;id&#39;</span>]));
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>data</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>ElMessage</span>.<span style=color:#a6e22e>success</span>(<span style=color:#e6db74>&#39;密码重置成功，初始密码为123456，请牢记！&#39;</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>page</span>();
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 冻结账号 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 冻结账号: 校验账号状态 + 误操作保护 + 发送请求 + 成功提示 + 重新分页
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>freeze</span>(<span style=color:#a6e22e>row</span>) {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>row</span>[<span style=color:#e6db74>&#39;state&#39;</span>] <span style=color:#f92672>===</span> <span style=color:#ae81ff>1</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>ElMessage</span>.<span style=color:#a6e22e>warning</span>(<span style=color:#e6db74>&#39;该账号已处于冻结状态！&#39;</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span>;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (<span style=color:#f92672>!</span><span style=color:#66d9ef>await</span> <span style=color:#a6e22e>elConfirm</span>(<span style=color:#e6db74>&#39;正在冻结账户，确认吗？&#39;</span>)) <span style=color:#66d9ef>return</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>data</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>getResponseData</span>(<span style=color:#66d9ef>await</span> <span style=color:#a6e22e>freezeApi</span>(<span style=color:#a6e22e>row</span>[<span style=color:#e6db74>&#39;id&#39;</span>]));
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>data</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>ElMessage</span>.<span style=color:#a6e22e>success</span>(<span style=color:#e6db74>&#39;冻结成功！&#39;</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>page</span>();
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 解冻账号 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 冻结账号: 校验账号状态 + 误操作保护 + 发送请求 + 成功提示 + 重新分页
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>unfreeze</span>(<span style=color:#a6e22e>row</span>) {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>row</span>[<span style=color:#e6db74>&#39;state&#39;</span>] <span style=color:#f92672>===</span> <span style=color:#ae81ff>0</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>ElMessage</span>.<span style=color:#a6e22e>warning</span>(<span style=color:#e6db74>&#39;该账号无需解冻！&#39;</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span>;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (<span style=color:#f92672>!</span><span style=color:#66d9ef>await</span> <span style=color:#a6e22e>elConfirm</span>(<span style=color:#e6db74>&#39;正在解冻账户，确认吗？&#39;</span>)) <span style=color:#66d9ef>return</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>data</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>getResponseData</span>(<span style=color:#66d9ef>await</span> <span style=color:#a6e22e>unfreezeApi</span>(<span style=color:#a6e22e>row</span>[<span style=color:#e6db74>&#39;id&#39;</span>]));
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>data</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>ElMessage</span>.<span style=color:#a6e22e>success</span>(<span style=color:#e6db74>&#39;解冻成功！&#39;</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>page</span>();
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 角色列表 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 抽屉
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>rolesDrawer</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 当前会员的全部角色ID列表 + 全部可选角色 + 当前会员ID值
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>roleIds</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>([]);
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>roles</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>([]);
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>currentMemberId</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>null</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 获取当前会员拥有的全部角色
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>getRoles</span>(<span style=color:#a6e22e>row</span>) {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// 清空数组，防止叠加
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>roleIds</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> [];
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// 发送请求: 获取当前会员拥有的全部角色
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>getRolesApi</span>(<span style=color:#a6e22e>row</span>[<span style=color:#e6db74>&#39;id&#39;</span>]).<span style=color:#a6e22e>then</span>(<span style=color:#a6e22e>res</span> =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>data</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>getResponseData</span>(<span style=color:#a6e22e>res</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>data</span>) {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#75715e>// 构建当前会员的全部角色ID数组
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>i</span> <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>data</span>.<span style=color:#a6e22e>length</span>; <span style=color:#a6e22e>i</span><span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>roleIds</span>.<span style=color:#a6e22e>value</span>.<span style=color:#a6e22e>push</span>(<span style=color:#a6e22e>data</span>[<span style=color:#a6e22e>i</span>][<span style=color:#e6db74>&#39;id&#39;</span>]);
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#75715e>// 发送请求: 获取全部角色 + 打开抽屉
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      <span style=color:#a6e22e>listApi</span>().<span style=color:#a6e22e>then</span>(<span style=color:#a6e22e>res</span> =&gt; {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>data</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>getResponseData</span>(<span style=color:#a6e22e>res</span>);
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>data</span>) {
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>roles</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>data</span>;
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>rolesDrawer</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span>;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>      });
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  });
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 修改当前会员的角色: 校验参数 + 发送请求 + 成功提示 + 关闭抽屉 + 重新分页
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>updateRoles</span>() {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (<span style=color:#f92672>!</span><span style=color:#a6e22e>currentMemberId</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>ElMessage</span>.<span style=color:#a6e22e>warning</span>(<span style=color:#e6db74>&#39;当前会员ID异常！&#39;</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span>;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (<span style=color:#f92672>!</span><span style=color:#a6e22e>roleIds</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>||</span> <span style=color:#a6e22e>roleIds</span>.<span style=color:#a6e22e>value</span>.<span style=color:#a6e22e>length</span> <span style=color:#f92672>&lt;=</span> <span style=color:#ae81ff>0</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>ElMessage</span>.<span style=color:#a6e22e>warning</span>(<span style=color:#e6db74>&#39;至少选择一个角色！&#39;</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span>;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// 发送请求: 修改当前会员的角色
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>data</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>getResponseData</span>(<span style=color:#66d9ef>await</span> <span style=color:#a6e22e>updateRolesApi</span>(<span style=color:#a6e22e>currentMemberId</span>, <span style=color:#a6e22e>roleIds</span>.<span style=color:#a6e22e>value</span>));
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>data</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>ElMessage</span>.<span style=color:#a6e22e>success</span>(<span style=color:#e6db74>&#39;修改成功！&#39;</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>rolesDrawer</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>false</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>page</span>();
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 根据账号查询 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 根据会员账号搜索: 空值保护 + 根据会员账号搜索 + 打开抽屉
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>getByUsername</span>(<span style=color:#a6e22e>username</span>) {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>username</span> <span style=color:#f92672>===</span> <span style=color:#e6db74>&#39;&#39;</span>) <span style=color:#66d9ef>return</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>data</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>getResponseData</span>(<span style=color:#66d9ef>await</span> <span style=color:#a6e22e>getByUsernameApi</span>(<span style=color:#a6e22e>username</span>));
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>data</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>openInfoDrawer</span>(<span style=color:#a6e22e>data</span>);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 根据昵称查询 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 根据会员昵称搜索: 空值保护 + 根据会员昵称搜索 + 打开抽屉
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>getByNickname</span>(<span style=color:#a6e22e>nickname</span>) {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>nickname</span> <span style=color:#f92672>===</span> <span style=color:#e6db74>&#39;&#39;</span>) <span style=color:#66d9ef>return</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>data</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>getResponseData</span>(<span style=color:#66d9ef>await</span> <span style=color:#a6e22e>getByNicknameApi</span>(<span style=color:#a6e22e>nickname</span>));
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>data</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>openInfoDrawer</span>(<span style=color:#a6e22e>data</span>);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 根据手机查询 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 根据会员手机搜索: 空值保护 + 根据会员手机搜索 + 打开抽屉
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>getByPhone</span>(<span style=color:#a6e22e>phone</span>) {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>phone</span> <span style=color:#f92672>===</span> <span style=color:#e6db74>&#39;&#39;</span>) <span style=color:#66d9ef>return</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>data</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>getResponseData</span>(<span style=color:#66d9ef>await</span> <span style=color:#a6e22e>getByPhoneApi</span>(<span style=color:#a6e22e>phone</span>));
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>data</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>openInfoDrawer</span>(<span style=color:#a6e22e>data</span>);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 打印报表数据 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 打印报表数据: 误操作保护 + 打印报表数据
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>excel</span>() {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (<span style=color:#f92672>!</span><span style=color:#66d9ef>await</span> <span style=color:#a6e22e>elConfirm</span>(<span style=color:#e6db74>&#39;正在打印报表数据，确认吗？&#39;</span>)) <span style=color:#66d9ef>return</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>location</span>.<span style=color:#a6e22e>href</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>MEMBER_EXCEL</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== mount ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>onBeforeMount</span>(() =&gt; <span style=color:#a6e22e>page</span>());
</span></span></code></pre></div><h2 id=e15-开发角色组件>E15. 开发角色组件</h2><blockquote><p>心法: 角色列表组件 <code>@/views/ums/Role.vue</code></p></blockquote><p><img src=/%E7%AC%AC4%E9%98%B6%E6%AE%B5-LESSON/JB4-5-%E5%90%8E%E5%8F%B0%E5%89%8D%E7%AB%AF/image/Role%E9%A1%B5%E9%9D%A2.png alt></p><blockquote><p>武技: 开发角色列表组件 <code>@/views/ums/Role.vue</code></p></blockquote><ol><li>配置Role组件路由:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span>{  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>path</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;/Main&#39;</span>, <span style=color:#a6e22e>name</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Main&#39;</span>, <span style=color:#a6e22e>component</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>Main</span>,  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>redirect</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;/Board&#39;</span>,  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>children</span><span style=color:#f92672>:</span> [  
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>path</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;/Role&#39;</span>, <span style=color:#a6e22e>name</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Role&#39;</span>, <span style=color:#a6e22e>component</span><span style=color:#f92672>:</span> () =&gt; <span style=color:#66d9ef>import</span>(<span style=color:#e6db74>&#39;@/views/ums/Role&#39;</span>)},   
</span></span><span style=display:flex><span>  ]  
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><ol start=2><li>开发Role组件布局:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>&lt;<span style=color:#f92672>my-nav</span> <span style=color:#a6e22e>:items</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;navItems&#34;</span>/&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>my-head</span> <span style=color:#a6e22e>:items</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;headItems&#34;</span>/&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>my-table</span> <span style=color:#a6e22e>:records</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;currentRecords&#34;</span> <span style=color:#a6e22e>:columns</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;columns&#34;</span> <span style=color:#a6e22e>:buttons</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;buttons&#34;</span> <span style=color:#a6e22e>:selection-change</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;selectionChange&#34;</span>/&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>my-pager</span> <span style=color:#a6e22e>:pageInfo</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;pageInfo&#34;</span>/&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>el-drawer</span> <span style=color:#a6e22e>title</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;详情抽屉&#34;</span> <span style=color:#a6e22e>v-model</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;descDrawer&#34;</span> <span style=color:#a6e22e>size</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;30%&#34;</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>my-list</span> <span style=color:#a6e22e>:title</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;descTitle&#34;</span> <span style=color:#a6e22e>:items</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;descItems&#34;</span>/&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>el-drawer</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>el-drawer</span> <span style=color:#a6e22e>title</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;单增抽屉 - 添加角色记录&#34;</span> <span style=color:#a6e22e>v-model</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;insertDrawer&#34;</span> <span style=color:#a6e22e>size</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;30%&#34;</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>my-form</span> <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;insert&#34;</span> <span style=color:#a6e22e>:items</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;insertFormItems&#34;</span> <span style=color:#a6e22e>:data</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;insertFormData&#34;</span> <span style=color:#a6e22e>:rule</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;insertFormRule&#34;</span>
</span></span><span style=display:flex><span>           <span style=color:#a6e22e>:api</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;saveApi&#34;</span> <span style=color:#a6e22e>:fn</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;closeInsertDrawer&#34;</span>/&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>el-drawer</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>el-drawer</span> <span style=color:#a6e22e>title</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;修改抽屉 - 修改角色记录&#34;</span> <span style=color:#a6e22e>v-model</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;updateDrawer&#34;</span> <span style=color:#a6e22e>size</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;30%&#34;</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>my-form</span> <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;update&#34;</span> <span style=color:#a6e22e>:items</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;updateFormItems&#34;</span> <span style=color:#a6e22e>:data</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;updateFormData&#34;</span> <span style=color:#a6e22e>:rule</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;updateFormRule&#34;</span>
</span></span><span style=display:flex><span>           <span style=color:#a6e22e>:api</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;updateApi&#34;</span> <span style=color:#a6e22e>:fn</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;closeUpdateDrawer&#34;</span>/&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>el-drawer</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>el-drawer</span> <span style=color:#a6e22e>title</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;修改权限列表&#34;</span> <span style=color:#a6e22e>v-model</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;permissionsDrawer&#34;</span> <span style=color:#a6e22e>size</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;50%&#34;</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>el-transfer</span> <span style=color:#a6e22e>v-model</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;permissionIds&#34;</span> <span style=color:#a6e22e>filterable</span> <span style=color:#a6e22e>filter-placeholder</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;输入权限名搜索&#34;</span>
</span></span><span style=display:flex><span>               <span style=color:#a6e22e>:data</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;permissions&#34;</span> <span style=color:#a6e22e>:titles</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;[&#39;可选权限&#39;, &#39;当前权限&#39;]&#34;</span>
</span></span><span style=display:flex><span>               <span style=color:#a6e22e>:props</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;{key: &#39;id&#39;, label: &#39;title&#39;}&#34;</span> <span style=color:#a6e22e>:button-texts</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;[&#39;移除&#39;, &#39;添加&#39;]&#34;</span>/&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>el-divider</span>/&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>el-button</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;update-permissions-btn&#34;</span> <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;primary&#34;</span> <span style=color:#960050;background-color:#1e0010>@</span><span style=color:#a6e22e>click</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;updatePermissions()&#34;</span>&gt;确认修改&lt;/<span style=color:#f92672>el-button</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>el-drawer</span>&gt;
</span></span></code></pre></div><ol start=3><li>开发Role组件样式:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-css data-lang=css><span style=display:flex><span><span style=color:#75715e>/* 修改EL穿梭框高度 */</span>
</span></span><span style=display:flex><span>:<span style=color:#a6e22e>deep</span><span style=color:#f92672>(</span>.<span style=color:#a6e22e>el-transfer-panel</span><span style=color:#f92672>),</span> :<span style=color:#a6e22e>deep</span><span style=color:#f92672>(</span>.<span style=color:#a6e22e>el-transfer-panel__body</span><span style=color:#f92672>)</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>height</span>: <span style=color:#ae81ff>550</span><span style=color:#66d9ef>px</span>; <span style=color:#960050;background-color:#1e0010>//</span> <span style=color:#960050;background-color:#1e0010>高度</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><ol start=4><li>开发Role组件脚本:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>MyNav</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/components/MyNav&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>MyHead</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/components/MyHead&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>MyTable</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/components/MyTable&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>MyPager</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/components/MyPager&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>MyList</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/components/MyList&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>MyForm</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;@/components/MyForm&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>onBeforeMount</span>, <span style=color:#a6e22e>shallowReactive</span>, <span style=color:#a6e22e>shallowRef</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;vue&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>RE</span>, <span style=color:#a6e22e>RULE</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/const&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>dateStr</span>, <span style=color:#a6e22e>getResponseData</span>, <span style=color:#a6e22e>myBatchDelete</span>, <span style=color:#a6e22e>myDelete</span>, <span style=color:#a6e22e>myPage</span>, <span style=color:#a6e22e>notYet</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/util&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>pageApi</span>, <span style=color:#a6e22e>saveApi</span>, <span style=color:#a6e22e>updateApi</span>, <span style=color:#a6e22e>removeApi</span>, <span style=color:#a6e22e>removeBatchApi</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/api/role&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>getPermissionsApi</span>, <span style=color:#a6e22e>updatePermissionsApi</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/api/role&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>listApi</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/api/permission&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>ElMessage</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;element-plus&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 通用数据 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 当前操作的角色对象 + 当前操作的角色对象列表
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>currentRecord</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>();
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>currentRecords</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>();
</span></span><span style=display:flex><span><span style=color:#75715e>// 分页信息
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>pageInfo</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowReactive</span>({<span style=color:#a6e22e>pageNumber</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>1</span>, <span style=color:#a6e22e>pageSize</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>5</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>page</span>});
</span></span><span style=display:flex><span><span style=color:#75715e>// 详情抽屉 + 详情标题 + 详情数据
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>descDrawer</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>(<span style=color:#66d9ef>null</span>);
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>descTitle</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>(<span style=color:#e6db74>&#39;&#39;</span>);
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>descItems</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>([]);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 组件数据 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 导航数据
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>navItems</span> <span style=color:#f92672>=</span> [
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>icon</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;House&#39;</span>, <span style=color:#a6e22e>title</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;首页&#39;</span>, <span style=color:#a6e22e>url</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;/Board&#39;</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>icon</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;User&#39;</span>, <span style=color:#a6e22e>title</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;会员管理&#39;</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>icon</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Avatar&#39;</span>, <span style=color:#a6e22e>title</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;角色列表&#39;</span>},
</span></span><span style=display:flex><span>];
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 通用头数据
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>headItems</span> <span style=color:#f92672>=</span> [
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;insertBtn&#39;</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>openInsertDrawer</span>, <span style=color:#a6e22e>offset</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>21</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;deleteBtn&#39;</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>removeBatch</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;excelBtn&#39;</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>notYet</span>},
</span></span><span style=display:flex><span>];
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 表格中间列数据
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>columns</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>([
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>column</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#39;基础信息&#39;</span>, <span style=color:#e6db74>&#39;角色权重&#39;</span>], <span style=color:#a6e22e>property</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;weight&#39;</span>, <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;tag&#39;</span>, <span style=color:#a6e22e>prefix</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;No.&#39;</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>column</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#39;基础信息&#39;</span>, <span style=color:#e6db74>&#39;角色标题&#39;</span>], <span style=color:#a6e22e>property</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;title&#39;</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>column</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#39;基础信息&#39;</span>, <span style=color:#e6db74>&#39;角色描述&#39;</span>], <span style=color:#a6e22e>property</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;info&#39;</span>, <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;card&#39;</span>},
</span></span><span style=display:flex><span>]);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 表格末尾列数据
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>buttons</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>([
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;info&#39;</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>openInfoDrawer</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;update&#39;</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>openUpdateDrawer</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;delete&#39;</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>remove</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>btnText</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;角色列表&#39;</span>, <span style=color:#a6e22e>btnType</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;success&#39;</span>, <span style=color:#a6e22e>btnIcon</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Edit&#39;</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>getPermissions</span>},
</span></span><span style=display:flex><span>]);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 分页查询 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 分页查询
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>page</span>(<span style=color:#a6e22e>pageNumber</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>pageInfo</span>[<span style=color:#e6db74>&#39;pageNumber&#39;</span>], <span style=color:#a6e22e>pageSize</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>pageInfo</span>[<span style=color:#e6db74>&#39;pageSize&#39;</span>]) {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// 全量分页
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>myPage</span>({
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;api&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>pageApi</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;params&#39;</span><span style=color:#f92672>:</span> {<span style=color:#e6db74>&#39;pageNumber&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>pageNumber</span>, <span style=color:#e6db74>&#39;pageSize&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>pageSize</span>},
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;records&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>currentRecords</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;pageInfo&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>pageInfo</span>,
</span></span><span style=display:flex><span>  });
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 单条添加 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 抽屉 + 表单数据 + 表单规则
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>insertDrawer</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>();
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>insertFormItems</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>();
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>insertFormData</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowReactive</span>({});
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>insertFormRule</span> <span style=color:#f92672>=</span> {<span style=color:#a6e22e>title</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>RULE</span>.<span style=color:#a6e22e>COMM_TITLE</span>, <span style=color:#a6e22e>info</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>RULE</span>.<span style=color:#a6e22e>COMMON_INFO</span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 打开抽屉: 设计表单项 + 打开抽屉
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>openInsertDrawer</span>() {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>insertFormItems</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> [
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;角色权重&#39;</span>, <span style=color:#a6e22e>prop</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;weight&#39;</span>, <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;number&#39;</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;角色标题&#39;</span>, <span style=color:#a6e22e>prop</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;title&#39;</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;角色描述&#39;</span>, <span style=color:#a6e22e>prop</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;info&#39;</span>, <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;textarea&#39;</span>}
</span></span><span style=display:flex><span>  ];
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>insertDrawer</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 关闭抽屉: 关闭抽屉 + 重新分页
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>closeInsertDrawer</span>() {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>insertDrawer</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>false</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>page</span>();
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 查看详情 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 打开抽屉: 设计列表标题 + 设计列表项 + 打开抽屉
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>openInfoDrawer</span>(<span style=color:#a6e22e>record</span>) {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>descTitle</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;查看角色详情&#39;</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>descItems</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> [
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;角色权重&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;weight&#39;</span>], <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;tag&#39;</span>, <span style=color:#a6e22e>prefix</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;No.&#39;</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;角色标题&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;title&#39;</span>]},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;角色描述&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;info&#39;</span>], <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;card&#39;</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;创建时间&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;created&#39;</span>], <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>dateStr</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;修改时间&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;updated&#39;</span>], <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>dateStr</span>},
</span></span><span style=display:flex><span>  ];
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>descDrawer</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 单条修改 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 抽屉 + 表单数据 + 表单规则
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>updateDrawer</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>();
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>updateFormData</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowReactive</span>({});
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>updateFormItems</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>();
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>updateFormRule</span> <span style=color:#f92672>=</span> {<span style=color:#a6e22e>title</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>RULE</span>.<span style=color:#a6e22e>COMM_TITLE</span>, <span style=color:#a6e22e>info</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>RULE</span>.<span style=color:#a6e22e>COMMON_INFO</span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 打开抽屉: 赋值表单默认值 + 设计表单项 + 打开抽屉
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>openUpdateDrawer</span>(<span style=color:#a6e22e>record</span>) {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>updateFormData</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>record</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>updateFormItems</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> [
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;角色权重&#39;</span>, <span style=color:#a6e22e>prop</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;weight&#39;</span>, <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;number&#39;</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;角色标题&#39;</span>, <span style=color:#a6e22e>prop</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;title&#39;</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;角色描述&#39;</span>, <span style=color:#a6e22e>prop</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;info&#39;</span>, <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;textarea&#39;</span>}
</span></span><span style=display:flex><span>  ];
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>updateDrawer</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 关闭抽屉: 关闭抽屉 + 重新分页
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>closeUpdateDrawer</span>() {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>updateDrawer</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>false</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>page</span>();
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 单条删除 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 删除角色信息
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>remove</span>(<span style=color:#a6e22e>row</span>) {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>myDelete</span>({
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;id&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>row</span>[<span style=color:#e6db74>&#39;id&#39;</span>],
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;api&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>removeApi</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;callback&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>page</span>
</span></span><span style=display:flex><span>  });
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 批量删除 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 角色主键数组
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>ids</span> <span style=color:#f92672>=</span> [];
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 当复选框发生改变时触发
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>selectionChange</span>(<span style=color:#a6e22e>row</span>) {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>ids</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>row</span>.<span style=color:#a6e22e>map</span>(<span style=color:#a6e22e>e</span> =&gt; <span style=color:#a6e22e>e</span>[<span style=color:#e6db74>&#39;id&#39;</span>]);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 批量删除角色信息
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>removeBatch</span>() {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>myBatchDelete</span>({
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;ids&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>ids</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;api&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>removeBatchApi</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;callback&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>page</span>
</span></span><span style=display:flex><span>  });
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 权限列表 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 抽屉
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>permissionsDrawer</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 当前角色的全部权限ID列表 + 全部可选权限 + 当前角色ID值
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>permissionIds</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>([]);
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>permissions</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>([]);
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>currentRoleId</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>null</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 获取当前角色拥有的全部权限
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>getPermissions</span>(<span style=color:#a6e22e>row</span>) {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// 清空数组，防止叠加
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>permissionIds</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> [];
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// 发送请求: 获取当前角色拥有的全部权限
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>getPermissionsApi</span>(<span style=color:#a6e22e>row</span>[<span style=color:#e6db74>&#39;id&#39;</span>]).<span style=color:#a6e22e>then</span>(<span style=color:#a6e22e>res</span> =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>data</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>getResponseData</span>(<span style=color:#a6e22e>res</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>data</span>) {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#75715e>// 构建当前角色拥有的全部权限ID列表
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>i</span> <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>data</span>.<span style=color:#a6e22e>length</span>; <span style=color:#a6e22e>i</span><span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>permissionIds</span>.<span style=color:#a6e22e>value</span>.<span style=color:#a6e22e>push</span>(<span style=color:#a6e22e>data</span>[<span style=color:#a6e22e>i</span>][<span style=color:#e6db74>&#39;id&#39;</span>]);
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#75715e>// 发送请求: 获取全部权限 + 打开抽屉
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      <span style=color:#a6e22e>listApi</span>().<span style=color:#a6e22e>then</span>(<span style=color:#a6e22e>res</span> =&gt; {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>data</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>getResponseData</span>(<span style=color:#a6e22e>res</span>);
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>data</span>) {
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>permissions</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>data</span>;
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>permissionsDrawer</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span>;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>      });
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  });
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 修改当前角色的权限: 校验参数 + 发送请求 + 成功提示 + 关闭抽屉 + 重新分页
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>updatePermissions</span>() {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (<span style=color:#f92672>!</span><span style=color:#a6e22e>currentRoleId</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>ElMessage</span>.<span style=color:#a6e22e>warning</span>(<span style=color:#e6db74>&#39;当前角色ID异常！&#39;</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span>;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (<span style=color:#f92672>!</span><span style=color:#a6e22e>permissionIds</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>||</span> <span style=color:#a6e22e>permissionIds</span>.<span style=color:#a6e22e>value</span>.<span style=color:#a6e22e>length</span> <span style=color:#f92672>&lt;=</span> <span style=color:#ae81ff>0</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>ElMessage</span>.<span style=color:#a6e22e>warning</span>(<span style=color:#e6db74>&#39;至少选择一个权限！&#39;</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span>;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// 发送请求: 修改当前角色的权限
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>data</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>getResponseData</span>(<span style=color:#66d9ef>await</span> <span style=color:#a6e22e>updatePermissionsApi</span>(<span style=color:#a6e22e>currentRoleId</span>, <span style=color:#a6e22e>permissionIds</span>.<span style=color:#a6e22e>value</span>));
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>data</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>ElMessage</span>.<span style=color:#a6e22e>success</span>(<span style=color:#e6db74>&#39;修改成功！&#39;</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>permissionsDrawer</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>false</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>page</span>();
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== mount ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>onBeforeMount</span>(() =&gt; <span style=color:#a6e22e>page</span>());
</span></span></code></pre></div><h2 id=e16-开发权限组件>E16. 开发权限组件</h2><blockquote><p>心法: 权限列表组件 <code>@/views/ums/Permission.vue</code></p></blockquote><p><img src=/%E7%AC%AC4%E9%98%B6%E6%AE%B5-LESSON/JB4-5-%E5%90%8E%E5%8F%B0%E5%89%8D%E7%AB%AF/image/Permission%E9%A1%B5%E9%9D%A2.png alt></p><blockquote><p>武技: 开发权限列表组件 <code>@/views/ums/Permission.vue</code></p></blockquote><ol><li>配置Permission组件路由:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span>{  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>path</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;/Main&#39;</span>, <span style=color:#a6e22e>name</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Main&#39;</span>, <span style=color:#a6e22e>component</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>Main</span>,  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>redirect</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;/Board&#39;</span>,  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>children</span><span style=color:#f92672>:</span> [  
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>path</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;/Permission&#39;</span>, <span style=color:#a6e22e>name</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Permission&#39;</span>, <span style=color:#a6e22e>component</span><span style=color:#f92672>:</span> () =&gt; <span style=color:#66d9ef>import</span>(<span style=color:#e6db74>&#39;@/views/ums/Permission&#39;</span>)},   
</span></span><span style=display:flex><span>  ]  
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><ol start=2><li>开发Permission组件布局:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>&lt;<span style=color:#f92672>my-nav</span> <span style=color:#a6e22e>:items</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;navItems&#34;</span>/&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>my-head</span> <span style=color:#a6e22e>:items</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;headItems&#34;</span>/&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>my-table</span> <span style=color:#a6e22e>:records</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;currentRecords&#34;</span> <span style=color:#a6e22e>:columns</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;columns&#34;</span> <span style=color:#a6e22e>:buttons</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;buttons&#34;</span>
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>:selection-change</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;selectionChange&#34;</span>/&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>my-pager</span> <span style=color:#a6e22e>:pageInfo</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;pageInfo&#34;</span>/&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>el-drawer</span> <span style=color:#a6e22e>title</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;详情抽屉&#34;</span> <span style=color:#a6e22e>v-model</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;descDrawer&#34;</span> <span style=color:#a6e22e>size</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;30%&#34;</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>my-list</span> <span style=color:#a6e22e>:title</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;descTitle&#34;</span> <span style=color:#a6e22e>:items</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;descItems&#34;</span>/&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>el-drawer</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>el-drawer</span> <span style=color:#a6e22e>title</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;单增抽屉 - 添加权限记录&#34;</span> <span style=color:#a6e22e>v-model</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;insertDrawer&#34;</span> <span style=color:#a6e22e>size</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;51%&#34;</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>my-form</span> <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;insert&#34;</span> <span style=color:#a6e22e>:items</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;insertFormItems&#34;</span> <span style=color:#a6e22e>:data</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;insertFormData&#34;</span> <span style=color:#a6e22e>:rule</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;insertFormRule&#34;</span>
</span></span><span style=display:flex><span>           <span style=color:#a6e22e>:api</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;saveApi&#34;</span> <span style=color:#a6e22e>:fn</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;closeInsertDrawer&#34;</span>/&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>el-drawer</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>el-drawer</span> <span style=color:#a6e22e>title</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;修改抽屉 - 修改权限记录&#34;</span> <span style=color:#a6e22e>v-model</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;updateDrawer&#34;</span> <span style=color:#a6e22e>size</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;51%&#34;</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>my-form</span> <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;update&#34;</span> <span style=color:#a6e22e>:items</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;updateFormItems&#34;</span> <span style=color:#a6e22e>:data</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;updateFormData&#34;</span> <span style=color:#a6e22e>:rule</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;updateFormRule&#34;</span>
</span></span><span style=display:flex><span>           <span style=color:#a6e22e>:api</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;updateApi&#34;</span> <span style=color:#a6e22e>:fn</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;closeUpdateDrawer&#34;</span>/&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>el-drawer</span>&gt;
</span></span></code></pre></div><ol start=3><li>开发Permission组件样式:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-css data-lang=css><span style=display:flex><span><span style=color:#75715e>/*修改EL穿梭框高度*/</span>  
</span></span><span style=display:flex><span>:<span style=color:#a6e22e>deep</span><span style=color:#f92672>(</span>.<span style=color:#a6e22e>el-transfer-panel</span><span style=color:#f92672>),</span> :<span style=color:#a6e22e>deep</span><span style=color:#f92672>(</span>.<span style=color:#a6e22e>el-transfer-panel__body</span><span style=color:#f92672>)</span> {  
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>height</span>: <span style=color:#ae81ff>550</span><span style=color:#66d9ef>px</span>; <span style=color:#960050;background-color:#1e0010>//</span> <span style=color:#960050;background-color:#1e0010>高度</span>  
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><ol start=4><li>开发Permission组件脚本:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>MyNav</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/components/MyNav&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>MyHead</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/components/MyHead&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>MyTable</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/components/MyTable&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>MyPager</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/components/MyPager&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>MyList</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/components/MyList&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>MyForm</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;@/components/MyForm&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>onBeforeMount</span>, <span style=color:#a6e22e>shallowReactive</span>, <span style=color:#a6e22e>shallowRef</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;vue&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>RE</span>, <span style=color:#a6e22e>RULE</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/const&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>dateStr</span>, <span style=color:#a6e22e>myBatchDelete</span>, <span style=color:#a6e22e>myDelete</span>, <span style=color:#a6e22e>myPage</span>, <span style=color:#a6e22e>notYet</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/util&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>pageApi</span>, <span style=color:#a6e22e>saveApi</span>, <span style=color:#a6e22e>updateApi</span>, <span style=color:#a6e22e>removeApi</span>, <span style=color:#a6e22e>removeBatchApi</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/api/permission&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>router</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/router&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 通用数据 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 当前操作的权限对象 + 当前操作的权限对象列表
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>currentRecord</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>();
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>currentRecords</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>();
</span></span><span style=display:flex><span><span style=color:#75715e>// 分页信息
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>pageInfo</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowReactive</span>({<span style=color:#a6e22e>pageNumber</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>1</span>, <span style=color:#a6e22e>pageSize</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>5</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>page</span>});
</span></span><span style=display:flex><span><span style=color:#75715e>// 详情抽屉 + 详情标题 + 详情数据
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>descDrawer</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>(<span style=color:#66d9ef>null</span>);
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>descTitle</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>(<span style=color:#e6db74>&#39;&#39;</span>);
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>descItems</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>([]);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 组件数据 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 导航数据
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>navItems</span> <span style=color:#f92672>=</span> [
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>icon</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;House&#39;</span>, <span style=color:#a6e22e>title</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;首页&#39;</span>, <span style=color:#a6e22e>url</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;/Board&#39;</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>icon</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;User&#39;</span>, <span style=color:#a6e22e>title</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;会员管理&#39;</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>icon</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Avatar&#39;</span>, <span style=color:#a6e22e>title</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;角色列表&#39;</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> () =&gt; <span style=color:#a6e22e>router</span>.<span style=color:#a6e22e>back</span>(<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>)},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>icon</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Flag&#39;</span>, <span style=color:#a6e22e>title</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;权限列表&#39;</span>},
</span></span><span style=display:flex><span>];
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 通用头数据
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>headItems</span> <span style=color:#f92672>=</span> [
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;insertBtn&#39;</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>openInsertDrawer</span>, <span style=color:#a6e22e>offset</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>21</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;deleteBtn&#39;</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>removeBatch</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;excelBtn&#39;</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>notYet</span>},
</span></span><span style=display:flex><span>];
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 表格中间列数据
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>columns</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>([
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>column</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#39;基础信息&#39;</span>, <span style=color:#e6db74>&#39;权限权重&#39;</span>], <span style=color:#a6e22e>property</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;weight&#39;</span>, <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;tag&#39;</span>, <span style=color:#a6e22e>prefix</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;No.&#39;</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>column</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#39;基础信息&#39;</span>, <span style=color:#e6db74>&#39;权限标题&#39;</span>], <span style=color:#a6e22e>property</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;title&#39;</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>column</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#39;基础信息&#39;</span>, <span style=color:#e6db74>&#39;权限图标&#39;</span>], <span style=color:#a6e22e>property</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;icon&#39;</span>, <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;icon&#39;</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>column</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#39;基础信息&#39;</span>, <span style=color:#e6db74>&#39;权限描述&#39;</span>], <span style=color:#a6e22e>property</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;info&#39;</span>, <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;card&#39;</span>},
</span></span><span style=display:flex><span>]);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 表格末尾列数据
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>buttons</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>([
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;info&#39;</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>openInfoDrawer</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;update&#39;</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>openUpdateDrawer</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;delete&#39;</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>remove</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>btnText</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;下级权限&#39;</span>, <span style=color:#a6e22e>btnType</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;success&#39;</span>, <span style=color:#a6e22e>btnIcon</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;List&#39;</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>toSubPermissions</span>},
</span></span><span style=display:flex><span>]);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 分页查询 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 分页查询
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>page</span>(<span style=color:#a6e22e>pageNumber</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>pageInfo</span>[<span style=color:#e6db74>&#39;pageNumber&#39;</span>], <span style=color:#a6e22e>pageSize</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>pageInfo</span>[<span style=color:#e6db74>&#39;pageSize&#39;</span>]) {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// 全量分页: 仅查询根权限
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>myPage</span>({
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;api&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>pageApi</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;params&#39;</span><span style=color:#f92672>:</span> {<span style=color:#e6db74>&#39;pageNumber&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>pageNumber</span>, <span style=color:#e6db74>&#39;pageSize&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>pageSize</span>},
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;records&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>currentRecords</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;pageInfo&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>pageInfo</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;secondParam&#39;</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>  });
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 单条添加 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 抽屉 + 表单数据 + 表单规则
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>insertDrawer</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>();
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>insertFormItems</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>();
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>insertFormData</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowReactive</span>({<span style=color:#a6e22e>icon</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Plus&#39;</span>});
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>insertFormRule</span> <span style=color:#f92672>=</span> {<span style=color:#a6e22e>title</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>RULE</span>.<span style=color:#a6e22e>COMM_TITLE</span>, <span style=color:#a6e22e>info</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>RULE</span>.<span style=color:#a6e22e>COMMON_INFO</span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 打开抽屉: 设计表单项 + 打开抽屉
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>openInsertDrawer</span>() {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>insertFormItems</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> [
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;权限权重&#39;</span>, <span style=color:#a6e22e>prop</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;weight&#39;</span>, <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;number&#39;</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;权限图标&#39;</span>, <span style=color:#a6e22e>prop</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;icon&#39;</span>, <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;icon&#39;</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;权限标题&#39;</span>, <span style=color:#a6e22e>prop</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;title&#39;</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;权限描述&#39;</span>, <span style=color:#a6e22e>prop</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;info&#39;</span>, <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;textarea&#39;</span>}
</span></span><span style=display:flex><span>  ];
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>insertDrawer</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 关闭抽屉: 关闭抽屉 + 重新分页
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>closeInsertDrawer</span>() {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>insertDrawer</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>false</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>page</span>();
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 查看详情 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 打开抽屉: 设计列表标题 + 设计列表项 + 打开抽屉
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>openInfoDrawer</span>(<span style=color:#a6e22e>record</span>) {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>descTitle</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;查看权限详情&#39;</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>descItems</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> [
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;权限权重&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;weight&#39;</span>], <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;tag&#39;</span>, <span style=color:#a6e22e>prefix</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;No.&#39;</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;权限标题&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;title&#39;</span>]},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;权限图标&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;icon&#39;</span>], <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;icon&#39;</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;权限描述&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;info&#39;</span>], <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;card&#39;</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;创建时间&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;created&#39;</span>], <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>dateStr</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;修改时间&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;updated&#39;</span>], <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>dateStr</span>},
</span></span><span style=display:flex><span>  ];
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>descDrawer</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 单条修改 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 抽屉 + 表单数据 + 表单规则
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>updateDrawer</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>();
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>updateFormData</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowReactive</span>({<span style=color:#a6e22e>pid</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>0</span>});
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>updateFormItems</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>();
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>updateFormRule</span> <span style=color:#f92672>=</span> {<span style=color:#a6e22e>title</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>RULE</span>.<span style=color:#a6e22e>COMM_TITLE</span>, <span style=color:#a6e22e>info</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>RULE</span>.<span style=color:#a6e22e>COMMON_INFO</span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 打开抽屉: 赋值表单默认值 + 清空根权限的url值 + 设计表单项 + 打开抽屉
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>openUpdateDrawer</span>(<span style=color:#a6e22e>record</span>) {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>updateFormData</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>record</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>delete</span> <span style=color:#a6e22e>updateFormData</span>[<span style=color:#e6db74>&#39;url&#39;</span>];
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>updateFormItems</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> [
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;权限权重&#39;</span>, <span style=color:#a6e22e>prop</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;weight&#39;</span>, <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;number&#39;</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;权限图标&#39;</span>, <span style=color:#a6e22e>prop</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;icon&#39;</span>, <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;icon&#39;</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;权限标题&#39;</span>, <span style=color:#a6e22e>prop</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;title&#39;</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;权限描述&#39;</span>, <span style=color:#a6e22e>prop</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;info&#39;</span>, <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;textarea&#39;</span>}
</span></span><span style=display:flex><span>  ];
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>updateDrawer</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 关闭抽屉: 关闭抽屉 + 重新分页
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>closeUpdateDrawer</span>() {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>updateDrawer</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>false</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>page</span>();
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 单条删除 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 删除权限信息
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>remove</span>(<span style=color:#a6e22e>row</span>) {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>myDelete</span>({
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;id&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>row</span>[<span style=color:#e6db74>&#39;id&#39;</span>],
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;api&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>removeApi</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;callback&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>page</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;confirmTip&#39;</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;删除权限的同时，也会删除全部权限的子权限，确认吗？&#39;</span>
</span></span><span style=display:flex><span>  });
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 批量删除 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 权限主键数组
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>ids</span> <span style=color:#f92672>=</span> [];
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 当复选框发生改变时触发
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>selectionChange</span>(<span style=color:#a6e22e>row</span>) {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>ids</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>row</span>.<span style=color:#a6e22e>map</span>(<span style=color:#a6e22e>e</span> =&gt; <span style=color:#a6e22e>e</span>[<span style=color:#e6db74>&#39;id&#39;</span>]);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 批量删除权限信息
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>removeBatch</span>() {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>myBatchDelete</span>({
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;ids&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>ids</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;api&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>removeBatchApi</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;callback&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>page</span>
</span></span><span style=display:flex><span>  });
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 二级权限 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>toSubPermissions</span>(<span style=color:#a6e22e>row</span>) {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>router</span>.<span style=color:#a6e22e>push</span>({
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>path</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;/SubPermission&#39;</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>query</span><span style=color:#f92672>:</span> {<span style=color:#e6db74>&#39;pid&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>row</span>[<span style=color:#e6db74>&#39;id&#39;</span>], <span style=color:#e6db74>&#39;pTitle&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>row</span>[<span style=color:#e6db74>&#39;title&#39;</span>]}
</span></span><span style=display:flex><span>  });
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== mount ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>onBeforeMount</span>(() =&gt; <span style=color:#a6e22e>page</span>());
</span></span></code></pre></div><h2 id=e17-开发子权限组件>E17. 开发子权限组件</h2><blockquote><p>心法: 子权限列表组件 <code>@/views/ums/SubPermission.vue</code></p></blockquote><p><img src=/%E7%AC%AC4%E9%98%B6%E6%AE%B5-LESSON/JB4-5-%E5%90%8E%E5%8F%B0%E5%89%8D%E7%AB%AF/image/SubPermission%E9%A1%B5%E9%9D%A2.png alt></p><blockquote><p>武技: 开发子权限列表组件 <code>@/views/ums/SubPermission.vue</code></p></blockquote><ol><li>配置SubPermission组件路由:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span>{  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>path</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;/Main&#39;</span>, <span style=color:#a6e22e>name</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Main&#39;</span>, <span style=color:#a6e22e>component</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>Main</span>,  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>redirect</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;/Board&#39;</span>,  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>children</span><span style=color:#f92672>:</span> [  
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>path</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;/SubPermission&#39;</span>, <span style=color:#a6e22e>name</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;SubPermission&#39;</span>, <span style=color:#a6e22e>component</span><span style=color:#f92672>:</span> () =&gt; <span style=color:#66d9ef>import</span>(<span style=color:#e6db74>&#39;@/views/ums/SubPermission&#39;</span>)},   
</span></span><span style=display:flex><span>  ]  
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><ol start=2><li>开发SubPermission组件布局:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>&lt;<span style=color:#f92672>my-nav</span> <span style=color:#a6e22e>:items</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;navItems&#34;</span>/&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>my-head</span> <span style=color:#a6e22e>:items</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;headItems&#34;</span>/&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>my-table</span> <span style=color:#a6e22e>:records</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;currentRecords&#34;</span> <span style=color:#a6e22e>:columns</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;columns&#34;</span> <span style=color:#a6e22e>:buttons</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;buttons&#34;</span>
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>:selection-change</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;selectionChange&#34;</span>/&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>my-pager</span> <span style=color:#a6e22e>:pageInfo</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;pageInfo&#34;</span>/&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>el-drawer</span> <span style=color:#a6e22e>title</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;详情抽屉&#34;</span> <span style=color:#a6e22e>v-model</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;descDrawer&#34;</span> <span style=color:#a6e22e>size</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;30%&#34;</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>my-list</span> <span style=color:#a6e22e>:title</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;descTitle&#34;</span> <span style=color:#a6e22e>:items</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;descItems&#34;</span>/&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>el-drawer</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>el-drawer</span> <span style=color:#a6e22e>title</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;单增抽屉 - 添加权限记录&#34;</span> <span style=color:#a6e22e>v-model</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;insertDrawer&#34;</span> <span style=color:#a6e22e>size</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;51%&#34;</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>my-form</span> <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;insert&#34;</span> <span style=color:#a6e22e>:items</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;insertFormItems&#34;</span> <span style=color:#a6e22e>:data</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;insertFormData&#34;</span> <span style=color:#a6e22e>:rule</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;insertFormRule&#34;</span>
</span></span><span style=display:flex><span>           <span style=color:#a6e22e>:api</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;saveApi&#34;</span> <span style=color:#a6e22e>:fn</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;closeInsertDrawer&#34;</span>/&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>el-drawer</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>el-drawer</span> <span style=color:#a6e22e>title</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;修改抽屉 - 修改权限记录&#34;</span> <span style=color:#a6e22e>v-model</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;updateDrawer&#34;</span> <span style=color:#a6e22e>size</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;51%&#34;</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>my-form</span> <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;update&#34;</span> <span style=color:#a6e22e>:items</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;updateFormItems&#34;</span> <span style=color:#a6e22e>:data</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;updateFormData&#34;</span> <span style=color:#a6e22e>:rule</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;updateFormRule&#34;</span>
</span></span><span style=display:flex><span>           <span style=color:#a6e22e>:api</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;updateApi&#34;</span> <span style=color:#a6e22e>:fn</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;closeUpdateDrawer&#34;</span>/&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>el-drawer</span>&gt;
</span></span></code></pre></div><ol start=3><li>开发SubPermission组件样式:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-css data-lang=css><span style=display:flex><span><span style=color:#75715e>/*暂无*/</span>
</span></span></code></pre></div><ol start=4><li>开发SubPermission组件脚本:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>MyNav</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/components/MyNav&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>MyHead</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/components/MyHead&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>MyTable</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/components/MyTable&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>MyPager</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/components/MyPager&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>MyList</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/components/MyList&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>MyForm</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;@/components/MyForm&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>onBeforeMount</span>, <span style=color:#a6e22e>shallowReactive</span>, <span style=color:#a6e22e>shallowRef</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;vue&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>RE</span>, <span style=color:#a6e22e>RULE</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/const&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>dateStr</span>, <span style=color:#a6e22e>myBatchDelete</span>, <span style=color:#a6e22e>myDelete</span>, <span style=color:#a6e22e>myPage</span>, <span style=color:#a6e22e>notYet</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/util&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>pageApi</span>, <span style=color:#a6e22e>saveApi</span>, <span style=color:#a6e22e>updateApi</span>, <span style=color:#a6e22e>removeApi</span>, <span style=color:#a6e22e>removeBatchApi</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/api/permission&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>router</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@/router&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 通用数据 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 从路由中获取父权限ID + 从路由中获取父权限标题
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>pid</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>null</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>pTitle</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 当前操作的权限对象 + 当前操作的权限对象列表
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>currentRecord</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>();
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>currentRecords</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>();
</span></span><span style=display:flex><span><span style=color:#75715e>// 分页信息
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>pageInfo</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowReactive</span>({<span style=color:#a6e22e>pageNumber</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>1</span>, <span style=color:#a6e22e>pageSize</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>5</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>page</span>});
</span></span><span style=display:flex><span><span style=color:#75715e>// 详情抽屉 + 详情标题 + 详情数据
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>descDrawer</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>(<span style=color:#66d9ef>null</span>);
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>descTitle</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>(<span style=color:#e6db74>&#39;&#39;</span>);
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>descItems</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>([]);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 组件数据 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 导航数据
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>navItems</span> <span style=color:#f92672>=</span> [
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>icon</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;House&#39;</span>, <span style=color:#a6e22e>title</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;首页&#39;</span>, <span style=color:#a6e22e>url</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;/Board&#39;</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>icon</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;User&#39;</span>, <span style=color:#a6e22e>title</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;会员管理&#39;</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>icon</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Flag&#39;</span>, <span style=color:#a6e22e>title</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;权限列表&#39;</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> () =&gt; <span style=color:#a6e22e>router</span>.<span style=color:#a6e22e>back</span>(<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>)},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>icon</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Flag&#39;</span>, <span style=color:#a6e22e>title</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;二级权限&#39;</span>},
</span></span><span style=display:flex><span>];
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 通用头数据
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>headItems</span> <span style=color:#f92672>=</span> [
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;insertBtn&#39;</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>openInsertDrawer</span>, <span style=color:#a6e22e>offset</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>21</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;deleteBtn&#39;</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>removeBatch</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;excelBtn&#39;</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>notYet</span>},
</span></span><span style=display:flex><span>];
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 表格中间列数据
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>columns</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>([
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>column</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#39;基础信息&#39;</span>, <span style=color:#e6db74>&#39;权限权重&#39;</span>], <span style=color:#a6e22e>property</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;weight&#39;</span>, <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;tag&#39;</span>, <span style=color:#a6e22e>prefix</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;No.&#39;</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>column</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#39;基础信息&#39;</span>, <span style=color:#e6db74>&#39;权限标题&#39;</span>], <span style=color:#a6e22e>property</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;title&#39;</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>column</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#39;基础信息&#39;</span>, <span style=color:#e6db74>&#39;权限图标&#39;</span>], <span style=color:#a6e22e>property</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;icon&#39;</span>, <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;icon&#39;</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>column</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#39;基础信息&#39;</span>, <span style=color:#e6db74>&#39;权限路径&#39;</span>], <span style=color:#a6e22e>property</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;url&#39;</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>column</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#39;基础信息&#39;</span>, <span style=color:#e6db74>&#39;权限描述&#39;</span>], <span style=color:#a6e22e>property</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;info&#39;</span>, <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;card&#39;</span>},
</span></span><span style=display:flex><span>]);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 表格末尾列数据
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>buttons</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>([
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;info&#39;</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>openInfoDrawer</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;update&#39;</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>openUpdateDrawer</span>},
</span></span><span style=display:flex><span>  {<span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;delete&#39;</span>, <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>remove</span>},
</span></span><span style=display:flex><span>]);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 分页查询 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 分页查询
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>page</span>(<span style=color:#a6e22e>pageNumber</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>pageInfo</span>[<span style=color:#e6db74>&#39;pageNumber&#39;</span>], <span style=color:#a6e22e>pageSize</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>pageInfo</span>[<span style=color:#e6db74>&#39;pageSize&#39;</span>]) {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// 根据父权限ID分页查询
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>myPage</span>({
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;api&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>pageApi</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;params&#39;</span><span style=color:#f92672>:</span> {<span style=color:#e6db74>&#39;pageNumber&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>pageNumber</span>, <span style=color:#e6db74>&#39;pageSize&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>pageSize</span>},
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;records&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>currentRecords</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;pageInfo&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>pageInfo</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;secondParam&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>pid</span>
</span></span><span style=display:flex><span>  });
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 单条添加 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 抽屉 + 表单数据 + 表单规则
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>insertDrawer</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>();
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>insertFormItems</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>();
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>insertFormData</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowReactive</span>({<span style=color:#a6e22e>url</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;&#39;</span>, <span style=color:#a6e22e>icon</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Plus&#39;</span>});
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>insertFormRule</span> <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>title</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>RULE</span>.<span style=color:#a6e22e>COMM_TITLE</span>,  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>url</span><span style=color:#f92672>:</span> [{<span style=color:#a6e22e>pattern</span><span style=color:#f92672>:</span> <span style=color:#e6db74>/^[/].*$/</span>, <span style=color:#a6e22e>message</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;路径必须以 &#34;/&#34; 开头&#39;</span>}],
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>info</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>RULE</span>.<span style=color:#a6e22e>COMMON_INFO</span>,
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 打开抽屉: 设计表单项 + 设置PID + 打开抽屉
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>openInsertDrawer</span>() {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>insertFormItems</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> [
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;权限权重&#39;</span>, <span style=color:#a6e22e>prop</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;weight&#39;</span>, <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;number&#39;</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;权限图标&#39;</span>, <span style=color:#a6e22e>prop</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;icon&#39;</span>, <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;icon&#39;</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;权限标题&#39;</span>, <span style=color:#a6e22e>prop</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;title&#39;</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;权限路径&#39;</span>, <span style=color:#a6e22e>prop</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;url&#39;</span>, <span style=color:#a6e22e>placeholder</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;路径必须以 &#34;/&#34; 开头&#39;</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;权限描述&#39;</span>, <span style=color:#a6e22e>prop</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;info&#39;</span>, <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;textarea&#39;</span>}
</span></span><span style=display:flex><span>  ];
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>insertFormData</span>[<span style=color:#e6db74>&#39;pid&#39;</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>pid</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>insertDrawer</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 关闭抽屉: 关闭抽屉 + 重新分页
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>closeInsertDrawer</span>() {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>insertDrawer</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>false</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>page</span>();
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 查看详情 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 打开抽屉: 设计列表标题 + 设计列表项 + 打开抽屉
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>openInfoDrawer</span>(<span style=color:#a6e22e>record</span>) {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>descTitle</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;查看权限详情&#39;</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>descItems</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> [
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;权限权重&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;weight&#39;</span>], <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;tag&#39;</span>, <span style=color:#a6e22e>prefix</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;No.&#39;</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;权限标题&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;title&#39;</span>]},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;权限图标&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;icon&#39;</span>], <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;icon&#39;</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;权限路径&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;url&#39;</span>]},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;权限描述&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;info&#39;</span>], <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;card&#39;</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;创建时间&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;created&#39;</span>], <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>dateStr</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;修改时间&#39;</span>, <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>record</span>[<span style=color:#e6db74>&#39;updated&#39;</span>], <span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>dateStr</span>},
</span></span><span style=display:flex><span>  ];
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>descDrawer</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 单条修改 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 抽屉 + 表单数据 + 表单规则
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>updateDrawer</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>();
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>updateFormData</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowReactive</span>({<span style=color:#a6e22e>pid</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>0</span>});
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>updateFormItems</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>shallowRef</span>();
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>updateFormRule</span> <span style=color:#f92672>=</span> {  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>title</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>RULE</span>.<span style=color:#a6e22e>COMM_TITLE</span>,  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>url</span><span style=color:#f92672>:</span> [{<span style=color:#a6e22e>pattern</span><span style=color:#f92672>:</span> <span style=color:#e6db74>/^[/].*$/</span>, <span style=color:#a6e22e>message</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;路径必须以 &#34;/&#34; 开头&#39;</span>}],  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>info</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>RULE</span>.<span style=color:#a6e22e>COMMON_INFO</span>,  
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 打开抽屉: 赋值表单默认值 + 设计表单项 + 打开抽屉
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>openUpdateDrawer</span>(<span style=color:#a6e22e>record</span>) {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>updateFormData</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>record</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>updateFormItems</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> [
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;权限权重&#39;</span>, <span style=color:#a6e22e>prop</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;weight&#39;</span>, <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;number&#39;</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;权限图标&#39;</span>, <span style=color:#a6e22e>prop</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;icon&#39;</span>, <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;icon&#39;</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;权限标题&#39;</span>, <span style=color:#a6e22e>prop</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;title&#39;</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;权限路径&#39;</span>, <span style=color:#a6e22e>prop</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;url&#39;</span>, <span style=color:#a6e22e>placeholder</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;路径必须以 &#34;/&#34; 开头&#39;</span>},
</span></span><span style=display:flex><span>    {<span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;权限描述&#39;</span>, <span style=color:#a6e22e>prop</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;info&#39;</span>, <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;textarea&#39;</span>}
</span></span><span style=display:flex><span>  ];
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>updateDrawer</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 关闭抽屉: 关闭抽屉 + 重新分页
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>closeUpdateDrawer</span>() {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>updateDrawer</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>false</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>page</span>();
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 单条删除 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 删除权限信息
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>remove</span>(<span style=color:#a6e22e>row</span>) {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>myDelete</span>({
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;id&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>row</span>[<span style=color:#e6db74>&#39;id&#39;</span>],
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;api&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>removeApi</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;callback&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>page</span>
</span></span><span style=display:flex><span>  });
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== 批量删除 ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 权限主键数组
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>ids</span> <span style=color:#f92672>=</span> [];
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 当复选框发生改变时触发
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>selectionChange</span>(<span style=color:#a6e22e>row</span>) {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>ids</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>row</span>.<span style=color:#a6e22e>map</span>(<span style=color:#a6e22e>e</span> =&gt; <span style=color:#a6e22e>e</span>[<span style=color:#e6db74>&#39;id&#39;</span>]);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 批量删除权限信息
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>removeBatch</span>() {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>myBatchDelete</span>({
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;ids&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>ids</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;api&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>removeBatchApi</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;callback&#39;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>page</span>
</span></span><span style=display:flex><span>  });
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* ==================== mount ==================== */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>onBeforeMount</span>(() =&gt; {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>pid</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>router</span>.<span style=color:#a6e22e>currentRoute</span>.<span style=color:#a6e22e>value</span>.<span style=color:#a6e22e>query</span>[<span style=color:#e6db74>&#39;pid&#39;</span>];
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>pTitle</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>router</span>.<span style=color:#a6e22e>currentRoute</span>.<span style=color:#a6e22e>value</span>.<span style=color:#a6e22e>query</span>[<span style=color:#e6db74>&#39;pTitle&#39;</span>];
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>page</span>();
</span></span><span style=display:flex><span>});
</span></span></code></pre></div><h1 id=s04-部署后台前端>S04. 部署后台前端</h1><blockquote><p>武技: 在Docker中部署Lesson后台前端项目</p></blockquote><h2 id=e01-打包项目>E01. 打包项目</h2><h3 id=1-替换ip地址>1. 替换IP地址</h3><ol><li>将项目中的 <code>localhost</code> 全部替换为虚拟机IP地址 <code>192.168.40.77</code>。</li></ol><h3 id=2-删除打印语句>2. 删除打印语句</h3><blockquote><p>心法：生产环境下不要使用打印语句，打印的内容无法回收，容易造成内存泄露，页面越来越卡。</p></blockquote><ol><li>删除整个项目中的 <code>console.log()</code> 打印语句，尤其是请求拦截器中的打印语句。</li></ol><h3 id=3-打包前端项目>3. 打包前端项目</h3><ol><li>使用 <code>npm run build</code> 命令打包后端前台项目，打包后会生成一个 <code>dist</code> 目录。</li></ol><h2 id=e02-部署项目>E02. 部署项目</h2><h3 id=1-上传dist目录>1. 上传dist目录</h3><ol><li>将打包生成的 <code>dist</code> 目录，整体拷贝到 <code>/opt/nginx/html/</code> 目录中。</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#75715e># 进入Nginx的html目录</span>
</span></span><span style=display:flex><span>cd /opt/nginx/html
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 重命名dist目录为</span>
</span></span><span style=display:flex><span>mv dist lesson-admin-web
</span></span></code></pre></div><h3 id=2-使用nginx代理>2. 使用Nginx代理</h3><blockquote><p>心法: 需要 Nginx 容器在创建时对外映射了 81 端口，即 <code>-p 81:81</code> 配置</p></blockquote><ol><li>开发子配置文件：</li></ol><p><code>cp /opt/nginx/conf.d/default.conf /opt/nginx/conf.d/81.conf</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-properties data-lang=properties><span style=display:flex><span><span style=color:#a6e22e>server</span> <span style=color:#e6db74>{</span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>listen</span> <span style=color:#e6db74>81;</span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>listen</span> <span style=color:#e6db74>[::]:81;</span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>server_name</span> <span style=color:#e6db74>lesson-server;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#75715e># Nginx首页所在目录  </span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>location</span> <span style=color:#e6db74>/ {  </span>
</span></span><span style=display:flex><span>	    <span style=color:#a6e22e>root</span>   <span style=color:#e6db74>/usr/share/nginx/html/lesson-admin-web;  </span>
</span></span><span style=display:flex><span>	    <span style=color:#a6e22e>index</span>  <span style=color:#e6db74>index.html;  </span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>    }</span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>}</span>
</span></span></code></pre></div><ol start=2><li>重启Nginx服务使得配置生效：</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>docker restart nginx
</span></span></code></pre></div><ol start=3><li>在Windows机器上 <a href=http://192.168.40.77:81>访问前端项目</a></li></ol></div><svg id="btt-button" class="arrow-logo" xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 384 512" onclick="scrollToTop()" title="Go to top"><path d="M177 159.7l136 136c9.4 9.4 9.4 24.6.0 33.9l-22.6 22.6c-9.4 9.4-24.6 9.4-33.9.0L160 255.9l-96.4 96.4c-9.4 9.4-24.6 9.4-33.9.0L7 329.7c-9.4-9.4-9.4-24.6.0-33.9l136-136c9.4-9.5 24.6-9.5 34-.1z"/></svg>
<script>let backToTopButton=document.getElementById("btt-button");window.onscroll=function(){scrollFunction()};function scrollFunction(){document.body.scrollTop>20||document.documentElement.scrollTop>20?backToTopButton.style.display="block":backToTopButton.style.display="none"}function scrollToTop(){window.scrollTo(0,0)}</script></div></main><footer class=footer><span>&copy; 2024 The Marauders</span>
<span>Made with &#10084;&#65039; using <a target=_blank href=https://github.com/gokarna-theme/gokarna-hugo>Gokarna</a></span></footer></body></html>