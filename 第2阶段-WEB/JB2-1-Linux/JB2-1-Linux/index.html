<!doctype html><html lang=en><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><style>:root{--accent-color:#FF4D4D}</style><title>JB2-1-Linux</title>
<meta name=description content="[!NOTE] Java道经第2卷 - 第1阶 - Linux
S01. Linux虚拟主机 E01. 基础概念 1. LINUX 心法: LINUX Linux is not Unix
Linux是一种自由和开源的仿UNIX操作系统。 Linux在1991年，由 林纳斯·托瓦兹 在赫尔辛基大学上学时创立。 Linux …"><meta name=keywords content='blog,lsx2216,hugo'><meta property="og:url" content="https://lsx2216.netlify.app/%E7%AC%AC2%E9%98%B6%E6%AE%B5-WEB/JB2-1-Linux/JB2-1-Linux/"><meta property="og:type" content="website"><meta property="og:title" content="JB2-1-Linux"><meta property="og:description" content="[!NOTE] Java道经第2卷 - 第1阶 - Linux
S01. Linux虚拟主机 E01. 基础概念 1. LINUX 心法: LINUX Linux is not Unix
Linux是一种自由和开源的仿UNIX操作系统。 Linux在1991年，由 林纳斯·托瓦兹 在赫尔辛基大学上学时创立。 Linux …"><meta property="og:image" content="https://lsx2216.netlify.app/assets/images/user.jpg"><meta property="og:image:secure_url" content="https://lsx2216.netlify.app/assets/images/user.jpg"><meta name=twitter:card content="summary_large_image"><meta name=twitter:title content="JB2-1-Linux"><meta name=twitter:description content="[!NOTE] Java道经第2卷 - 第1阶 - Linux
S01. Linux虚拟主机 E01. 基础概念 1. LINUX 心法: LINUX Linux is not Unix
Linux是一种自由和开源的仿UNIX操作系统。 Linux在1991年，由 林纳斯·托瓦兹 在赫尔辛基大学上学时创立。 Linux …"><meta property="twitter:domain" content="https://lsx2216.netlify.app/%E7%AC%AC2%E9%98%B6%E6%AE%B5-WEB/JB2-1-Linux/JB2-1-Linux/"><meta property="twitter:url" content="https://lsx2216.netlify.app/%E7%AC%AC2%E9%98%B6%E6%AE%B5-WEB/JB2-1-Linux/JB2-1-Linux/"><meta name=twitter:image content="https://lsx2216.netlify.app/assets/images/user.jpg"><link rel=canonical href=https://lsx2216.netlify.app/%E7%AC%AC2%E9%98%B6%E6%AE%B5-WEB/JB2-1-Linux/JB2-1-Linux/><link rel=stylesheet type=text/css href=/css/normalize.min.css media=print><link rel=stylesheet type=text/css href=/css/main.min.css><link id=dark-theme rel=stylesheet href=/css/dark.min.css><script src=/js/bundle.min.3eb19cb61dde9e37b9522867f3e024aeb68e26ab8e03252e46e365abcb19acf7.js integrity="sha256-PrGcth3enje5Uihn8+AkrraOJquOAyUuRuNlq8sZrPc="></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.css integrity=sha384-Xi8rHCmBmhbuyyhbI88391ZKP2dmfnOl4rT9ZfRI7mLTdk1wblIUnrIq35nqwEvC crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.js integrity=sha384-X/XCfMm41VSsqRNQgDerQczD69XqmjOOOwYQvr/uuC+j4OPoNhVgjdGFwhvN02Ja crossorigin=anonymous></script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/contrib/auto-render.min.js integrity=sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR crossorigin=anonymous></script><script>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1}],throwOnError:!1})})</script>    <link rel="shortcut icon" href="/assets/images/user.jpg" type="image/x-icon">
</head><body><script>setThemeByUserPref()</script><header class=header><nav class=header-nav><div class=avatar><a href=https://lsx2216.netlify.app/><img src=/assets/images/user.jpg alt=avatar></a></div><div class=nav-title><a class=nav-brand href=https://lsx2216.netlify.app/>lsx2216</a></div><div class=nav-links><div class=nav-link><a href=https://lsx2216.netlify.app/ aria-label><span data-feather=home></span> Home</a></div><div class=nav-link><a href=https://lsx2216.netlify.app/projects/ aria-label><span data-feather=code></span> Projects</a></div><div class=nav-link><a href=https://github.com aria-label=github><span data-feather=github></span></a></div><span class=nav-icons-divider></span><div class="nav-link dark-theme-toggle"><span class="sr-only dark-theme-toggle-screen-reader-target">theme</span>
<a aria-hidden=true role=switch><span class=theme-toggle-icon data-feather=moon></span></a></div><div class=nav-link id=hamburger-menu-toggle><span class="sr-only hamburger-menu-toggle-screen-reader-target">menu</span>
<a aria-checked=false aria-labelledby=hamburger-menu-toggle id=hamburger-menu-toggle-target role=switch><span data-feather=menu></span></a></div><ul class="nav-hamburger-list visibility-hidden"><li class=nav-item><a href=https://lsx2216.netlify.app/><span data-feather=home></span> Home</a></li><li class=nav-item><a href=https://lsx2216.netlify.app/projects/><span data-feather=code></span> Projects</a></li><li class=nav-item><a href=https://github.com><span data-feather=github></span></a></li><li class="nav-item dark-theme-toggle"><span class="sr-only dark-theme-toggle-screen-reader-target">theme</span>
<a role=switch><span class=theme-toggle-icon data-feather=moon></span></a></li></ul></div></nav></header><main id=content><div class="post container"><div class=post-header-section><h1>JB2-1-Linux</h1></div><div class=post-content><blockquote><p>[!NOTE] Java道经第2卷 - 第1阶 - Linux</p></blockquote><h1 id=s01-linux虚拟主机>S01. Linux虚拟主机</h1><h2 id=e01-基础概念>E01. 基础概念</h2><h3 id=1-linux>1. LINUX</h3><blockquote><p>心法: LINUX <code>Linux is not Unix</code></p></blockquote><ul><li>Linux是一种自由和开源的仿UNIX操作系统。</li><li>Linux在1991年，由 <code>林纳斯·托瓦兹</code> 在赫尔辛基大学上学时创立。</li><li>Linux内核和应用程序打包后被称为Linux发行版产品，如Ubuntu，RedHat，CentOS等。</li><li>Linux以命令为主，更适合搭建服务器，Windows以图形为主，更适合开发项目。</li></ul><h3 id=2-虚拟化>2. 虚拟化</h3><blockquote><p>心法: 虚拟化的常见概念</p></blockquote><table><thead><tr><th>虚拟机概念</th><th>中文</th><th>描述</th><th>示例</th></tr></thead><tbody><tr><td><code>host</code></td><td>主机</td><td>运行虚拟化软件的物理计算机（硬件）</td><td>笔记本，台式机，服务器等</td></tr><tr><td><code>host machine</code></td><td>宿主机</td><td>运行在主机上的虚拟化软件的操作系统（软件）</td><td>Windows11 操作系统等</td></tr><tr><td><code>virtual machine</code></td><td>虚拟机</td><td>通过虚拟化技术在主机上创建的一台完整的计算机系统虚拟机中包括独立的CPU，内存，硬盘，网络等资源虚拟机可以运行不同的操作系统和应用程序</td><td>Linux操作系统虚拟机等</td></tr></tbody></table><h2 id=e02-安装虚拟机>E02. 安装虚拟机</h2><h3 id=1-开启虚拟技术>1. 开启虚拟技术</h3><blockquote><p>心法: Hypervisor 虚拟机监视器，简称 Hyper-V</p></blockquote><ul><li>Hyper-V是一种运行在基础物理服务器（计算机硬件）和操作系统之间的中间软件层，允许多个OS和应用共享硬件。</li><li>Hyper-V可以访问主机上全部物理设备，其作用和意义就是协调这些硬件资源。</li><li>目前大部分Windows系统都是基于Hyper-V技术的一个虚拟OS系统，而非真实的操作系统。</li></ul><p><img src=/%E7%AC%AC2%E9%98%B6%E6%AE%B5-WEB/JB2-1-Linux/image/5076d1e10250fec91d5900dff4c76304.png alt=截图></p><blockquote><p>武技: 开启PC电脑的虚拟技术</p></blockquote><ol><li>检查主机的CPU是否已经开启了虚拟化功能，若已开启则省略全部步骤:</li></ol><p><img src=/%E7%AC%AC2%E9%98%B6%E6%AE%B5-WEB/JB2-1-Linux/image/83c6894aa8c414e2edef375181b51a24.png alt></p><ol start=2><li>重启电脑，启动时按 <code>Del/F10/F1/F2/F8</code> 等进入BIOS界面，如联想电脑为 <code>F2</code> 进入:<ol><li>寻找 <code>Intel Virtualization Technology</code> 相关配置。</li><li>打勾或选择 <code>Enabled</code> 来开启虚拟化支持。</li></ol></li><li>保存配置并重启，完成虚拟化的开启工作。</li></ol><h3 id=2-安装vmware>2. 安装VMWare</h3><blockquote><p>心法: 威睿工作站 <code>VMware Workstation</code></p></blockquote><ul><li>威睿工作站是一款功能强大的虚拟机工具，建议使用15.5.5以上的版本，可以更好的与Win10的虚拟化平台兼容。</li></ul><blockquote><p>武技: 在Windows平台上安装VMware</p></blockquote><ol><li>安装VMware: 傻瓜式安装:<ol><li>建议勾选键盘增强，建议取勾体验计划，其余都建议默认。</li><li>res: <code>VMware-workstation-full-17.5.1-23298084.exe</code></li></ol></li><li>激活VMware: 安装结束后建议直接点击 <code>许可</code> 输入激活码：<ol><li>激活码：<code>JU090-6039P-08409-8J0QH-2YR7F</code></li><li>激活码：<code>ZF3R0-FHED2-M80TY-8QYGC-NPKYF</code></li><li>激活码：<code>FC7D0-D1YDL-M8DXZ-CYPZE-P2AY6</code></li><li>激活码：<code>ZC3TK-63GE6-481JY-WWW5T-Z7ATA</code></li><li>激活码：<code>1Z0G9-67285-FZG78-ZL3Q2-234JG</code></li><li>激活码：<code>4A4RR-813DK-M81A9-4U35H-06KND</code></li><li>激活码：<code>NZ4RR-FTK5H-H81C1-Q30QH-1V2LA</code></li><li>激活码：<code>JU090-6039P-08409-8J0QH-2YR7F</code></li><li>激活码：<code>4Y09U-AJK97-089Z0-A3054-83KLA</code></li><li>激活码：<code>4C21U-2KK9Q-M8130-4V2QH-CF810</code></li><li>激活码：<code>MC60H-DWHD5-H80U9-6V85M-8280D</code></li></ol></li><li>使用VMware快捷键:<ol><li>快捷键 <code>Ctrl + G</code> 可以将焦点设置在虚拟机内部。</li><li>快捷键 <code>Ctrl + Alt</code> 可以将焦点设置在虚拟机外部。</li></ol></li><li>安装成功后，在 <code>设备管理器 -> 网络适配器</code> 中查看是否存在 <code>vnet1</code> 和 <code>vnet8</code> 两张网卡：<ol><li>若出现黄叹号，则使用 <code>CCleaner</code> 扫描多次全部注册表漏洞，并全部进行修补。</li><li>然后在 <code>vmware</code> 中恢复默认网络配置。</li></ol></li></ol><h3 id=3-安装虚拟机>3. 安装虚拟机</h3><p><a href=res/VMWare%E5%AE%89%E8%A3%85%E6%AC%A7%E6%8B%89.md>VMWare安装欧拉系统</a></p><h3 id=4-配置外网连接>4. 配置外网连接</h3><blockquote><p>心法: Linux网络类型</p></blockquote><table><thead><tr><th>网络类型</th><th>描述</th></tr></thead><tbody><tr><td><code>bridge</code></td><td>虚拟机直连到物理网络并占用一个局域网IP地址，可直接与局域网内其他设备通信</td></tr><tr><td><code>NAT</code></td><td>虚拟机共享宿主机的IP地址并通过宿主机进行外部通信</td></tr><tr><td><code>host only</code></td><td>虚拟机创建独立的私有网络，只允许和宿主机或其它同一私有网络中的虚拟机通信</td></tr></tbody></table><p>![[第2阶段-WEB/JB2-1-Linux/draw/Drawing 2024-05-18 11.57.37.excalidraw.md#^group=qE1B354fxLEy7lo0iHq4x|100%]]</p><blockquote><p>武技: 配置NAT网络模式，并配置静态IP地址</p></blockquote><ol><li>进入威睿工作站的 <code>编辑 -> 虚拟网络编辑器 -> VMnet8 -> NAT 设置</code> 界面：<ol><li>记住 <code>子网IP/子网掩码/网关IP</code> 三项的值。</li></ol></li><li>使用 <code>ip a</code> 查看当前网卡，如 <code>ens32</code>。</li><li>修改ens32网卡的配置:</li></ol><p><code>vi /etc/sysconfig/network-scripts/ifcfg-ens32</code>：内容如下</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#75715e># 修改: 静态IP模式: 默认的 `DHCP` 动态分配会每隔一段时间跳网，体验很差</span>
</span></span><span style=display:flex><span>BOOTPROTO<span style=color:#f92672>=</span>none
</span></span><span style=display:flex><span><span style=color:#75715e># 修改：IPV4失败获取</span>
</span></span><span style=display:flex><span>IPV4_FAILURE_FATAL<span style=color:#f92672>=</span>yes
</span></span><span style=display:flex><span><span style=color:#75715e># 添加: 设置虚拟机IP，要求网段和子网IP一致，最后1位随意，不要和网关冲突即可</span>
</span></span><span style=display:flex><span>IPADDR<span style=color:#f92672>=</span>192.168.40.77
</span></span><span style=display:flex><span><span style=color:#75715e># 添加: 设置虚拟机子网掩码地址</span>
</span></span><span style=display:flex><span>NETMASK<span style=color:#f92672>=</span>255.255.255.0
</span></span><span style=display:flex><span><span style=color:#75715e># 添加: 设置虚拟机网关IP地址</span>
</span></span><span style=display:flex><span>GATEWAY<span style=color:#f92672>=</span>192.168.40.2
</span></span><span style=display:flex><span><span style=color:#75715e># 添加: 谷歌和电信的DNS</span>
</span></span><span style=display:flex><span>DNS1<span style=color:#f92672>=</span>8.8.8.8
</span></span><span style=display:flex><span>DNS2<span style=color:#f92672>=</span>114.114.114.114
</span></span><span style=display:flex><span>PEERDNS<span style=color:#f92672>=</span>no
</span></span></code></pre></div><ol start=4><li>重启网卡：</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#75715e># 停止网络管理器</span>
</span></span><span style=display:flex><span>systemctl stop NetworkManager
</span></span><span style=display:flex><span><span style=color:#75715e># 重启网络管理器</span>
</span></span><span style=display:flex><span>systemctl restart NetworkManager
</span></span><span style=display:flex><span><span style=color:#75715e># 重启虚拟机</span>
</span></span><span style=display:flex><span>reboot
</span></span></code></pre></div><ol start=5><li>测试虚拟机网络是否连通外网:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-powershell data-lang=powershell><span style=display:flex><span><span style=color:#75715e># 查看是否能ping同，使用 `ctrl + c` 结束</span>
</span></span><span style=display:flex><span>ping baidu.com
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 查看虚拟机的虚拟IP地址: 即ens32中的inet值</span>
</span></span><span style=display:flex><span>ip a
</span></span></code></pre></div><h3 id=5-配置nat转发>5. 配置NAT转发</h3><ol><li>点击 <code>编辑 -> 虚拟网络编辑器(N)</code></li><li>点击 <code>更改设置(C)</code>：</li></ol><p><img src=/%E7%AC%AC2%E9%98%B6%E6%AE%B5-WEB/JB2-1-Linux/image/%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%9101.png alt></p><ol start=3><li>点击 <code>VMnet8 -> NAT设置(S)</code>：</li></ol><p><img src=/%E7%AC%AC2%E9%98%B6%E6%AE%B5-WEB/JB2-1-Linux/image/%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%9102.png alt></p><ol start=4><li>点击 <code>添加(A)</code>：<ol><li>输入主机端口如 <code>19001</code>。</li><li>选择 <code>TCP</code> 类型。</li><li>输入虚拟机IP地址 <code>192.168.40.77</code>。</li><li>输入虚拟机端口号 <code>9001</code>。</li><li>点击确定，完成转发，此时window的 <code>localhost:19001</code> 请求会被转发到虚拟机的 <code>192.168.40.77:9001</code> 上。</li></ol></li></ol><p><img src=/%E7%AC%AC2%E9%98%B6%E6%AE%B5-WEB/JB2-1-Linux/image/%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%9103.png alt></p><h3 id=6-终端工具整合>6. 终端工具整合</h3><blockquote><p>心法: Linux终端工具</p></blockquote><ul><li>终端也称终端设备，是计算机网络中处于网络最外围的设备，比如虚拟机。</li><li>IDEA可以作为Linux服务器的终端工具。</li></ul><blockquote><p>武技: 使用IDEA远程连接虚拟机</p></blockquote><ol><li>添加SSH插件：<ol><li><code>FTP/SFTP Connectivity（ex.Remote Hosts Access）</code></li></ol></li><li>配置SSH连接: 点击右侧 <code>+</code> 即可开启一个新的SSH连接：</li></ol><p><img src=/%E7%AC%AC2%E9%98%B6%E6%AE%B5-WEB/JB2-1-Linux/image/79c734b038d5054839d1d21bba2a87c9.png alt></p><ol start=3><li>开启SSH连接：<ol><li>点击 <code>Tools -> Start SSH Session</code> 可以开启一个终端命令行。</li></ol></li><li>进入 <code>Tools -> Deployment -> Configuration...</code> 界面配置SFTP传输：</li></ol><p><img src=/%E7%AC%AC2%E9%98%B6%E6%AE%B5-WEB/JB2-1-Linux/image/21f460d71c492a02a9b4ab9e0890d68b.png alt></p><ol start=5><li>查看虚拟机目录：<ol><li>点击 <code>Tools -> Deployment -> Browse Remote Host</code> 即可。</li><li>拖拽，复制粘贴都可以在IDEA和虚拟机之间传输文件。</li></ol></li></ol><h2 id=e03-linux基础配置>E03. Linux基础配置</h2><h3 id=1-安装常用软件>1. 安装常用软件</h3><blockquote><p>心法: 安装 yum 工具</p></blockquote><ul><li><code>yum search XX</code>: 搜索指定软件，搜索本身就是模糊搜索，勿加 <code>*</code> 通配符。</li><li><code>yum install XX -y</code>: 下载指定软件，支持同时下载多个源，空格分割，支持 <code>*</code> 通配符。</li><li><code>yum uninstall XX</code>: 卸载指定软件，支持同时卸载多个源，空格分割，支持 <code>*</code> 通配符。</li></ul><blockquote><p>武技: 使用 yum 工具安装常用软件</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#75715e># 升级yum工具到最新</span>
</span></span><span style=display:flex><span><span style=color:#75715e># 参数 `-y` 表示全部询问均自动选择 `yes` 项</span>
</span></span><span style=display:flex><span>yum update -y
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 查看yum工具当前版本</span>
</span></span><span style=display:flex><span>yum info yum
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 安装vim: 用于编辑文件</span>
</span></span><span style=display:flex><span><span style=color:#75715e># 安装zip: 用于压缩zip文件</span>
</span></span><span style=display:flex><span><span style=color:#75715e># 安装unzip: 解压缩zip文件</span>
</span></span><span style=display:flex><span><span style=color:#75715e># 安装tar: 用于解压缩tar文件</span>
</span></span><span style=display:flex><span><span style=color:#75715e># 安装net-tools: 用于查看网络相关信息</span>
</span></span><span style=display:flex><span><span style=color:#75715e># 安装ntpdate: 用于同步系统时间</span>
</span></span><span style=display:flex><span><span style=color:#75715e># 安装wget: 用于下载资源</span>
</span></span><span style=display:flex><span>yum install vim* zip unzip tar net-tools ntpdate wget -y
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 查看已安装的本地软件</span>
</span></span><span style=display:flex><span><span style=color:#75715e># 参数 `|` 管道符用于将左侧的结果传递给右侧</span>
</span></span><span style=display:flex><span><span style=color:#75715e># 参数 `grep -E` 用于指定正则表达式类型的过滤条件</span>
</span></span><span style=display:flex><span>yum list installed | grep -E <span style=color:#e6db74>&#34;vim|ntpdate|zip|unzip|tar|net-tools|wget&#34;</span>
</span></span></code></pre></div><h3 id=2-同步系统时间>2. 同步系统时间</h3><blockquote><p>心法: 为何要同步系统时间</p></blockquote><ul><li>当虚拟机系统中的系统时间和主机中的系统时间不同步时，可能会造成某些软件安装失败。</li></ul><blockquote><p>武技: 同步系统时间</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#75715e># 查看当前系统时区: 需要保证为 `Asia/Shanghai` 时区，否则需要调整</span>
</span></span><span style=display:flex><span>timedatectl status | grep <span style=color:#e6db74>&#39;Time zone&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 设置时区为 `Asia/Shanghai`</span>
</span></span><span style=display:flex><span>timedatectl set-timezone Asia/Shanghai
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 设置硬件时钟调整为与本地时钟一致</span>
</span></span><span style=display:flex><span>timedatectl set-local-rtc <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 同步时间</span>
</span></span><span style=display:flex><span>ntpdate -u pool.ntp.org
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 查看当前时间</span>
</span></span><span style=display:flex><span>date
</span></span></code></pre></div><h3 id=3-虚拟机防火墙>3. 虚拟机防火墙</h3><blockquote><p>心法: Linux虚拟机防火墙</p></blockquote><ul><li>开发环境中可以直接关闭防火墙，简单明了。</li><li>生产环境中不建议直接关闭防火墙，容易被攻击。</li></ul><blockquote><p>武技: 测试Linux防火墙相关命令，设置完毕后建议重启虚拟机使其生效</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#75715e># 查看防火墙状态</span>
</span></span><span style=display:flex><span>systemctl status firewalld
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 临时关闭防火墙: 重启时恢复</span>
</span></span><span style=display:flex><span>systemctl stop firewalld
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 永久关闭防火墙，需要在防火墙关闭状态下设置</span>
</span></span><span style=display:flex><span>systemctl disable firewalld
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 查看防火墙服务是否开机启动</span>
</span></span><span style=display:flex><span>systemctl is-enabled firewalld
</span></span></code></pre></div><h3 id=4-虚拟机开放端口>4. 虚拟机开放端口</h3><blockquote><p>心法: Linux虚拟机防火墙开放端口</p></blockquote><ul><li>虚拟机防火墙默认只对外开放了80端口，若主机想要访问虚拟机中其它端口的服务，则需要单独在防火墙中进行开放。</li></ul><blockquote><p>武技: 测试Linux防火墙端口相关命令</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#75715e># 查询全部端口</span>
</span></span><span style=display:flex><span>firewall-cmd --list-all
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 查询指定端口</span>
</span></span><span style=display:flex><span>firewall-cmd --query-port<span style=color:#f92672>=</span>5277/tcp
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 设置永久开放http服务</span>
</span></span><span style=display:flex><span>firewall-cmd --add-service<span style=color:#f92672>=</span>http --permanent
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 设置永久开放指定端口</span>
</span></span><span style=display:flex><span>firewall-cmd --add-port<span style=color:#f92672>=</span>5277/tcp --permanent
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 设置永久关闭的端口</span>
</span></span><span style=display:flex><span>firewall-cmd --remove-port<span style=color:#f92672>=</span>1234/tcp --permanent
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 重启防火墙: 开启和关闭端口都需要重启防火墙使其生效</span>
</span></span><span style=display:flex><span>firewall-cmd --reload
</span></span></code></pre></div><h1 id=s02-linux常用命令>S02. Linux常用命令</h1><h2 id=e01-系统目录结构>E01. 系统目录结构</h2><blockquote><p>心法: Linux系统目录结构</p></blockquote><ul><li>Linux是一个基于Unix的操作系统，它采用了树形目录结构，所有的文件和目录都位于根目录 <code>/</code> 下:</li></ul><table><thead><tr><th>目录</th><th>存储内容</th><th>其他描述</th></tr></thead><tbody><tr><td><code>/bin</code></td><td>任何用户都可以使用的命令</td><td>如 <code>ls / cp / mv / rm</code> 等</td></tr><tr><td><code>/boot</code></td><td>系统内核文件和系统引导程序类似Win系统分区（通常为C盘）</td><td>Linux系统启动时，先加载该目录下的引导程序再加载OS内核，从而完成Linux系统的启动</td></tr><tr><td><code>/dev</code></td><td>硬盘，光驱，键鼠等设备文件类似Win中的U盘等符号文件</td><td>1.<code>/dev/sda</code>: 表示第1块硬盘2.<code>/dev/usb0</code>: 表示第1个USB设备</td></tr><tr><td><code>/etc</code></td><td>系统的各种重要配置文件和启动脚本类似Win中的注册表</td><td>1.<code>/etc/passwd</code>: 存放用户的用户名，ID等信息2.<code>/etc/group</code>: 存放用户组的组名，ID和成员等信息3.<code>/etc/shadow</code>: 存放用户加密后的密码，密码修改时间等4.<code>/etc/fstab</code>: 存放文件系统的设备名，挂载点，类型等信息5.<code>/etc/hosts</code>: 存放主机的IP地址和主机名的对应关系6.<code>/etc/resolv.conf</code>: 存放DNS服务器的地址和搜索域的信息7.<code>/etc/sysconfig</code>: 存放网络配置文件，防火墙配置文件等8.<code>/etc/init.d</code>: 存放网络，数据库等服务的启动脚本</td></tr><tr><td><code>/home</code></td><td>普通用户家目录类似Win中普通用户的 <code>我的文档</code></td><td>每个用户都有一个独享的家目录用于存放用户的文件和配置</td></tr><tr><td><code>/lib</code></td><td>linux运行时需要的一些公共资源类似项目开发中的 <code>lib</code> 目录</td><td>1.<code>/lib/modules</code>: 包含驱动程序，文件系统模块等2.<code>/lib/firmware</code>: 包含网卡，声卡等设备的固件文件3.<code>/lib/udev</code>: 设备管理器文件，用于自动识别和配置各种设备4.<code>/lib/systemd</code>: 包含systemd服务管理器的配置文件和脚本</td></tr><tr><td><code>/media</code></td><td>挂载U盘，光盘等可移动媒体设备</td><td>1.<code>/media/usb0</code>:插入第1块U盘时创建，拔出设备时删除2.<code>/media/cdrom0</code>: 插入第1块光盘时创建，拔出设备时删除</td></tr><tr><td><code>/mnt</code></td><td>挂载固定磁盘分区</td><td>与 <code>/media</code> 目录不同，<code>/mnt</code> 目录通常不挂载可移动媒体设备</td></tr><tr><td><code>/opt</code></td><td>第三方软件的安装目录</td><td>该目录默认是一个空目录</td></tr><tr><td><code>/proc</code></td><td>一些虚拟文件和目录</td><td>1.该目录是一个虚拟文件系统，不包含任何实际的文件2.该目录中的文件都是系统运行时动态生成的3.<code>/proc/cpuinfo</code>: 包含CPU型号，速度，缓存大小等信息4.<code>/proc/meminfo</code>: 包含总内存，可用内存，缓存大小等信息5.<code>/proc/进程ID</code>: 包含指定进程的状态，内存使用情况等信息</td></tr><tr><td><code>/root</code></td><td>系统管理员的家目录类似Win中管理员的 <code>我的文档</code></td><td>当root用户登录系统时，它的当前工作目录就是 <code>/root</code> 目录</td></tr><tr><td><code>/run</code></td><td>系统启动时创建的临时文件和目录</td><td>1.<code>/run</code> 目录中的临时文件不会在系统重启时被删除2.<code>/run</code> 目录中的临时文件在系统正常运行期间保持不变</td></tr><tr><td><code>/sbin</code></td><td>仅管理员可以使用的命令</td><td>普通用户也可以通过 <code>sudo</code> 等命令获取root权限来运行这些程序</td></tr><tr><td><code>/srv</code></td><td>系统服务数据</td><td>1.<code>/srv/http</code>: 存储Web服务器的网页文件2.<code>/srv/ftp</code>: 存储FTP服务器的文件和数据</td></tr><tr><td><code>/sys</code></td><td>系统硬件设备和系统内核模块的信息</td><td>1.<code>/sys/devices/pci0000:00/0000:00:01.0</code>: 一个PCI设备的路径2.<code>/sys/module/nvidia</code>: Nvidia显卡驱动的路径</td></tr><tr><td><code>/tmp</code></td><td>程序和服务产生的临时文件和目录</td><td>1.<code>/tmp</code> 中包含缓存文件，日志文件，打印临时文件等2.<code>/tmp</code> 目录中的临时文件通常在系统重启时被删除3.<code>/tmp</code> 目录通常对所有用户开放</td></tr><tr><td><code>/usr</code></td><td>用户可执行程序，库文件，文档等类似Win中的 <code>C:\\Program Files</code></td><td>1.<code>/usr</code> 是系统软件的默认安装路径2.<code>/usr</code> 默认只读，需要管理员才能对其进行修改3.<code>/usr/bin</code>: 包含用户可执行程序4.<code>/usr/sbin</code>: 包含系统管理员的可执行程序5.<code>/usr/lib</code>: 包含与程序运行相关的库和模块文件6.<code>/usr/share</code>: 包含文档，背景图等与程序运行无关的数据文件7.<code>/usr/include</code>: 包含头文件，用于编译程序时引用</td></tr><tr><td><code>/var</code></td><td>系统运行过程中产生的各种数据文件</td><td>1.<code>/var</code> 中的文件会随着系统运行的状态而发生变化2.<code>/var</code> 中的文件通常只能由root用户访问和修改3.<code>/var/log</code>: 包含系统和应用程序的日志文件4.<code>/var/cache</code>: 包含应用程序的缓存文件5.<code>/var/tmp</code>: 包含系统和应用程序的临时文件6.<code>/var/spool</code>: 包含邮件队列和打印队列等待处理的任务7.<code>/var/lib</code>: 包含应用程序的状态和数据文件</td></tr></tbody></table><h2 id=e02-常用命令集合>E02. 常用命令集合</h2><blockquote><p>心法: Linux常用命令</p></blockquote><ul><li>目录权限被设计为 <code>R(1)</code>，<code>W(2)</code> 和 <code>X(4)</code> 三种写法的组合，如777表示可读，可写，可执行：</li></ul><table><thead><tr><th>命令</th><th>描述</th><th>示例</th></tr></thead><tbody><tr><td><code>ip</code></td><td>查看本地网络接口详细信息</td><td><code>ip addr</code> / <code>ip a</code>: 查看MAC地址，IPv4和IPv6地址，子网掩码等信息结果集中的 <code>lo</code> 是一个本地循环接口，用于本机内部通信</td></tr><tr><td><code>ping</code></td><td>测试网络连通性，延迟和丢包率</td><td><code>ping www.baidu.com</code>: PING百度服务器</td></tr><tr><td><code>date</code></td><td>查看系统时间和日期</td><td><code>date</code>: 查看当前系统时间</td></tr><tr><td><code>logout</code></td><td>注销当前用户并结束当前会话</td><td><code>logout</code>: 注销，不关闭整个系统</td></tr><tr><td><code>exit</code></td><td>退出当前终端会话</td><td><code>exit</code>: 退出，不关闭整个系统</td></tr><tr><td><code>shutdown</code></td><td>关闭计算机</td><td><code>shutdown now</code>: 立刻关闭计算机<code>shutdown -h +180</code>: 180分钟后关闭计算机<code>shutdown -h 12:00</code>: 在12点的时候关闭计算机<code>shutdown -c</code>: 取消预定的关机操作</td></tr><tr><td><code>clear</code></td><td>清空屏幕</td><td><code>clear</code>: 清空屏幕</td></tr><tr><td><code>cd</code></td><td>切换当前位置</td><td><code>cd a</code>: 切换到 <code>a</code> 目录<code>cd /</code>: 切换到整个文件系统的根目录<code>cd ~</code>: 切换到当前用户的主目录<code>cd ..</code>: 切换到上层目录</td></tr><tr><td><code>ls</code></td><td>查看当前文件/目录列表</td><td><code>ls</code>: 仅展示文件名/目录名<code>ls -l</code> / <code>ll</code>: 额外展示 <code>类型 权限 硬链接数 用户 大小 时间</code> 等信息 <code>类型</code> 分为 <code>d</code> 目录，<code>-</code> 文件，<code>c</code> 键盘鼠标设备，<code>b</code> 硬盘设备等 <code>权限</code> 分为 <code>当前用户权限 文件所属用户组权限 其他用户权限</code> 三部分<code>ls -al</code>: 额外展示隐藏文件/目录</td></tr><tr><td><code>pwd</code></td><td>查看当前所在目录</td><td><code>pwd</code>: 查看当前所在目录</td></tr><tr><td><code>mkdir</code></td><td>创建目录</td><td><code>mkdir a</code>: 在当前位置创建 <code>a</code> 目录<code>mkdir a b</code>: 在当前位置同时创建 <code>a, b</code> 两个目录<code>mkdir -p /a/b</code>: 在指定位置递归创建 <code>/a/b</code> 目录</td></tr><tr><td><code>chmod</code></td><td>修改文件/目录权限</td><td><code>chmod -R 777 a</code>: 为 <code>a</code> 目录递归赋予最高权限</td></tr><tr><td><code>touch</code></td><td>创建空白文件</td><td><code>touch b.txt</code>: 在当前位置创建 <code>b.txt</code> 文件</td></tr><tr><td><code>rm</code></td><td>删除文件/目录</td><td><code>rm -f a.txt</code>: 强制删除 <code>a.txt</code> 文件<code>rm -rf a</code>：强制递归删除 <code>a</code> 目录<code>rm -rf a b</code>: 强制递归同时删除 <code>a</code> 目录和 <code>b</code> 目录</td></tr><tr><td><code>cp</code></td><td>拷贝文件/目录</td><td><code>cp a.txt b.txt</code>: 拷贝 <code>a.txt</code> 为 <code>b.txt</code> 文件<code>cp -r a b</code>: 递归拷贝 <code>a</code> 目录为 <code>b</code> 目录</td></tr><tr><td><code>mv</code></td><td>重命名/移动文件/目录</td><td><code>mv a.txt b.txt</code>: 重命名 <code>a.txt</code> 文件为 <code>b.txt</code> 文件<code>mv b.txt m</code>: 移动 <code>b.txt</code> 文件到 <code>m</code> 目录中<code>mv b.txt n/c.txt</code>: 移动 <code>b.txt</code> 到 <code>n</code> 目录中并重命名为 <code>c.txt</code> 文件原则：从左到右看，能移动就移动，不能移动就覆盖</td></tr><tr><td><code>wget</code></td><td>下载文件</td><td><code>wget -P /a https://xxx.tar.gz</code>: 下载文件到 <code>/a</code> 目录中。示例: <code>https://download.redis.io/releases/redis-7.0.5.tar.gz</code></td></tr><tr><td><code>tar</code></td><td>解压缩文件</td><td><code>tar -zxvf xxx.tar.gz -C /a</code>: 将文件解压缩到 <code>/a</code> 目录中</td></tr><tr><td><code>cat</code></td><td>查看小文件</td><td><code>cat a.txt</code>: 查看 <code>a.txt</code> 文件，适用于查看小文件支持配合 <code>| grep -vE "^$</code></td></tr><tr><td><code>less</code></td><td>查看大文件</td><td><code>less a.txt</code>: 查看 <code>a.txt</code> 文件，适用于查看大文件支持方向键上下滚动，支持 <code>/关键词</code> 进行搜索，输入 <code>q</code> 退出查看</td></tr><tr><td><code>tail</code></td><td>查看文件后N行内容</td><td><code>tail -n 20 a.txt</code>: 查看 <code>a.txt</code> 文件的最后20行内容，默认10行</td></tr><tr><td><code>find</code></td><td>查找文件</td><td><code>find /opt -name a.txt</code>: 在 <code>/opt</code> 路径下查找 <code>a.txt</code> 文件<code>find /opt -name *.txt</code>: 在 <code>/opt</code> 路径下查找全部 <code>.txt</code> 文件</td></tr><tr><td><code>ps</code></td><td>静态查看系统进程</td><td><code>ps -aux</code>: 静态查看当前系统进程支持配合<code>| grep sshd</code> 筛选出全部 <code>sshd</code> 相关系统进程</td></tr><tr><td><code>top</code></td><td>动态查看系统进程</td><td><code>top</code>: 动态查看当前系统进程</td></tr><tr><td><code>kill</code></td><td>杀死系统进程</td><td><code>kill -9 10000</code>: 强制杀死10000号进程，慎用</td></tr><tr><td><code>></code></td><td>覆盖写入</td><td><code>tail a.txt > a.log</code>: 将 <code>a.txt</code> 的后10行数据覆盖写入到 <code>a.log</code> 中</td></tr><tr><td><code>>></code></td><td>追加写入</td><td><code>tail b.txt >> b.log</code>: 将 <code>b.txt</code> 的后10行数据追加写入到 <code>a.log</code> 中</td></tr><tr><td><code>whereis</code></td><td>查找命令所在位置</td><td><code>whereis ls</code>: 查找 <code>ls</code> 命令所在的位置</td></tr></tbody></table><h1 id=s03-linux云服务器>S03. Linux云服务器</h1><h2 id=e01-腾讯云服务器>E01. 腾讯云服务器</h2><ul><li><a href=https://cloud.tencent.com/product/cvm>腾讯云服务器官网</a></li></ul><blockquote><p>武技: 购买腾讯云服务器</p></blockquote><ul><li>注册腾讯云账号密码并登录。</li><li>购买腾讯云服务器:<ul><li>地区只要是中国境内差别就不大。</li><li>机型选择1核2G就可以。</li><li>系统选择centos7~8。</li></ul></li><li>进入首页控制台，找到所购地区的服务器实例。<ul><li>点击末尾更多，重置密码如Tma，然后重启服务器。</li></ul></li><li>修改服务器的密码认证:<ul><li>点击末尾登录，输入公网IP和密码。</li></ul></li><li>查看全局SSH配置:<ul><li>lnx: <code>cat /etc/ssh/sshd_config | grep -Ev "^$|#"</code>: 过滤掉所有注释和空白字符。</li></ul></li><li>修改全局SSH配置:<ul><li>lnx: <code>vim /etc/ssh/sshd_config</code></li><li>删除 <code>PasswordAuthentication=yes</code> 和 <code>PermitRootLogin=yes</code> 这两项。</li></ul></li><li>重启SSH服务以更新配置:<ul><li>lnx: <code>systemctl restart sshd.service</code></li></ul></li></ul><h2 id=e02-阿里云服务器>E02. 阿里云服务器</h2><ul><li><a href=https://www.aliyun.com/>阿里云服务器官网</a></li></ul><blockquote><p>武技: 购买阿里云服务器</p></blockquote><ul><li>注册阿里云账号密码并登录:<ul><li>实名认证后可以获取免费试用机会，选择免费试用的ECS云服务器。</li><li>登录账号 <code>allsx/Tma/17766541438</code></li></ul></li><li>正式购买点击产品 - ECS云服务器 - 立即购买:<ul><li>付费模式: 包年包月</li><li>地域: 选择华北2北京，原则是离我们越近，访问速度越快。</li><li>架构: x86，通用</li><li>镜像: centOS7.9 64位</li><li>云盘: 20G够用</li><li>分配公网IP地址，固定带宽等默认。</li><li>开放80和443端口。</li><li>自定义实例名称和实例密码如 <code>Tma</code>。</li><li>下单，支付即可在控制台查看到该服务器。</li></ul></li><li>创建远程连接密码: 如 <code>Joe130</code> 设置后需要重启生效。</li><li>点击服务器 <code>远程连接 - VNC远程连接 - 输入远程连接密码</code>:<ul><li>输入服务器账号密码: 默认账号为root</li></ul></li><li>查看全局SSH配置:<ul><li>lnx: <code>cat /etc/ssh/sshd_config | grep -Ev "^$|#"</code>: 过滤掉所有注释和空白字符。</li></ul></li><li>修改全局SSH配置:<ul><li>lnx: <code>vim /etc/ssh/sshd_config</code></li><li>删除 <code>PasswordAuthentication=yes</code> 和 <code>PermitRootLogin=yes</code> 这两项。</li></ul></li><li>重启SSH服务以更新配置:<ul><li>lnx: <code>systemctl restart sshd.service</code></li></ul></li></ul></div><svg id="btt-button" class="arrow-logo" xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 384 512" onclick="scrollToTop()" title="Go to top"><path d="M177 159.7l136 136c9.4 9.4 9.4 24.6.0 33.9l-22.6 22.6c-9.4 9.4-24.6 9.4-33.9.0L160 255.9l-96.4 96.4c-9.4 9.4-24.6 9.4-33.9.0L7 329.7c-9.4-9.4-9.4-24.6.0-33.9l136-136c9.4-9.5 24.6-9.5 34-.1z"/></svg>
<script>let backToTopButton=document.getElementById("btt-button");window.onscroll=function(){scrollFunction()};function scrollFunction(){document.body.scrollTop>20||document.documentElement.scrollTop>20?backToTopButton.style.display="block":backToTopButton.style.display="none"}function scrollToTop(){window.scrollTo(0,0)}</script></div></main><footer class=footer><span>&copy; 2024 The Marauders</span>
<span>Made with &#10084;&#65039; using <a target=_blank href=https://github.com/gokarna-theme/gokarna-hugo>Gokarna</a></span></footer></body></html>