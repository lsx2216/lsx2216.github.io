<!doctype html><html lang=en><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><style>:root{--accent-color:#FF4D4D}</style><title>JB1-4-高级进阶</title>
<meta name=description content="Java道经第1卷 - 第4阶 - v1-4-basic-senior(JAR) - 高级进阶
CH01. 异常例外 心法: 异常 Exception，也叫例外
异常会在程序运行时发生并打断程序运行，比如: 赵四每天开车去上班，一般情况下半个小时内就能到公司。 今天突发堵车，赵四与公司取得联系然后告知情况，以免影响工 …"><meta name=keywords content='blog,lsx2216,hugo'><meta property="og:url" content="https://lsx2216.netlify.app/%E7%AC%AC1%E9%98%B6%E6%AE%B5-BASIC/JB1-4-%E9%AB%98%E7%BA%A7%E8%BF%9B%E9%98%B6/JB1-4-%E9%AB%98%E7%BA%A7%E8%BF%9B%E9%98%B6/"><meta property="og:type" content="website"><meta property="og:title" content="JB1-4-高级进阶"><meta property="og:description" content="Java道经第1卷 - 第4阶 - v1-4-basic-senior(JAR) - 高级进阶
CH01. 异常例外 心法: 异常 Exception，也叫例外
异常会在程序运行时发生并打断程序运行，比如: 赵四每天开车去上班，一般情况下半个小时内就能到公司。 今天突发堵车，赵四与公司取得联系然后告知情况，以免影响工 …"><meta property="og:image" content="https://lsx2216.netlify.app/assets/images/user.jpg"><meta property="og:image:secure_url" content="https://lsx2216.netlify.app/assets/images/user.jpg"><meta name=twitter:card content="summary_large_image"><meta name=twitter:title content="JB1-4-高级进阶"><meta name=twitter:description content="Java道经第1卷 - 第4阶 - v1-4-basic-senior(JAR) - 高级进阶
CH01. 异常例外 心法: 异常 Exception，也叫例外
异常会在程序运行时发生并打断程序运行，比如: 赵四每天开车去上班，一般情况下半个小时内就能到公司。 今天突发堵车，赵四与公司取得联系然后告知情况，以免影响工 …"><meta property="twitter:domain" content="https://lsx2216.netlify.app/%E7%AC%AC1%E9%98%B6%E6%AE%B5-BASIC/JB1-4-%E9%AB%98%E7%BA%A7%E8%BF%9B%E9%98%B6/JB1-4-%E9%AB%98%E7%BA%A7%E8%BF%9B%E9%98%B6/"><meta property="twitter:url" content="https://lsx2216.netlify.app/%E7%AC%AC1%E9%98%B6%E6%AE%B5-BASIC/JB1-4-%E9%AB%98%E7%BA%A7%E8%BF%9B%E9%98%B6/JB1-4-%E9%AB%98%E7%BA%A7%E8%BF%9B%E9%98%B6/"><meta name=twitter:image content="https://lsx2216.netlify.app/assets/images/user.jpg"><link rel=canonical href=https://lsx2216.netlify.app/%E7%AC%AC1%E9%98%B6%E6%AE%B5-BASIC/JB1-4-%E9%AB%98%E7%BA%A7%E8%BF%9B%E9%98%B6/JB1-4-%E9%AB%98%E7%BA%A7%E8%BF%9B%E9%98%B6/><link rel=stylesheet type=text/css href=/css/normalize.min.css media=print><link rel=stylesheet type=text/css href=/css/main.min.css><link id=dark-theme rel=stylesheet href=/css/dark.min.css><script src=/js/bundle.min.3eb19cb61dde9e37b9522867f3e024aeb68e26ab8e03252e46e365abcb19acf7.js integrity="sha256-PrGcth3enje5Uihn8+AkrraOJquOAyUuRuNlq8sZrPc="></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.css integrity=sha384-Xi8rHCmBmhbuyyhbI88391ZKP2dmfnOl4rT9ZfRI7mLTdk1wblIUnrIq35nqwEvC crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.js integrity=sha384-X/XCfMm41VSsqRNQgDerQczD69XqmjOOOwYQvr/uuC+j4OPoNhVgjdGFwhvN02Ja crossorigin=anonymous></script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/contrib/auto-render.min.js integrity=sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR crossorigin=anonymous></script><script>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1}],throwOnError:!1})})</script>    <link rel="shortcut icon" href="/assets/images/user.jpg" type="image/x-icon">
</head><body><script>setThemeByUserPref()</script><header class=header><nav class=header-nav><div class=avatar><a href=https://lsx2216.netlify.app/><img src=/assets/images/user.jpg alt=avatar></a></div><div class=nav-title><a class=nav-brand href=https://lsx2216.netlify.app/>lsx2216</a></div><div class=nav-links><div class=nav-link><a href=https://lsx2216.netlify.app/ aria-label><span data-feather=home></span> Home</a></div><div class=nav-link><a href=https://lsx2216.netlify.app/projects/ aria-label><span data-feather=code></span> Projects</a></div><div class=nav-link><a href=https://github.com aria-label=github><span data-feather=github></span></a></div><span class=nav-icons-divider></span><div class="nav-link dark-theme-toggle"><span class="sr-only dark-theme-toggle-screen-reader-target">theme</span>
<a aria-hidden=true role=switch><span class=theme-toggle-icon data-feather=moon></span></a></div><div class=nav-link id=hamburger-menu-toggle><span class="sr-only hamburger-menu-toggle-screen-reader-target">menu</span>
<a aria-checked=false aria-labelledby=hamburger-menu-toggle id=hamburger-menu-toggle-target role=switch><span data-feather=menu></span></a></div><ul class="nav-hamburger-list visibility-hidden"><li class=nav-item><a href=https://lsx2216.netlify.app/><span data-feather=home></span> Home</a></li><li class=nav-item><a href=https://lsx2216.netlify.app/projects/><span data-feather=code></span> Projects</a></li><li class=nav-item><a href=https://github.com><span data-feather=github></span></a></li><li class="nav-item dark-theme-toggle"><span class="sr-only dark-theme-toggle-screen-reader-target">theme</span>
<a role=switch><span class=theme-toggle-icon data-feather=moon></span></a></li></ul></div></nav></header><main id=content><div class="post container"><div class=post-header-section><h1>JB1-4-高级进阶</h1></div><div class=post-content><blockquote><p>Java道经第1卷 - 第4阶 - v1-4-basic-senior(JAR) - 高级进阶</p></blockquote><h1 id=ch01-异常例外>CH01. 异常例外</h1><blockquote><p>心法: 异常 <code>Exception</code>，也叫例外</p></blockquote><ul><li>异常会在程序运行时发生并打断程序运行，比如:<ul><li>赵四每天开车去上班，一般情况下半个小时内就能到公司。</li><li>今天突发堵车，赵四与公司取得联系然后告知情况，以免影响工作。</li><li>而对于程序而言，堵车就是一种异常，与公司联系告知情况，就是一种异常处理。</li></ul></li><li>异常处理:<ul><li>异常可以被直接抛出或手动捕获处理，但异常无法直接被解决。</li><li>所谓的异常处理，也仅仅是一些紧急补救或通知方案而已。</li></ul></li></ul><blockquote><p>心法: 异常分类</p></blockquote><table><thead><tr><th>异常分类</th><th>是否接收Javac检查</th><th>是否可以不处理</th><th>描述</th><th>示例</th></tr></thead><tbody><tr><td>运行异常</td><td>非受检</td><td>可以不处理</td><td>一般指逻辑错误，应积极避免</td><td>类转换，数组越界，空指针等</td></tr><tr><td>可控异常</td><td>受检</td><td>必须处理</td><td>一般由外界因素造成</td><td>IO异常，SQL异常，类丢失等</td></tr></tbody></table><p><img src=/%E7%AC%AC1%E9%98%B6%E6%AE%B5-BASIC/JB1-4-%E9%AB%98%E7%BA%A7%E8%BF%9B%E9%98%B6/image/ad09e76ccbb64d10da46f1d271545e5b.png alt=异常结构图></p><h2 id=ep01-异常基本结构>EP01. 异常基本结构</h2><blockquote><p>心法: 异常基本结构</p></blockquote><ul><li><code>try{}</code>: 用于包裹可能会爆发异常的代码，必须且只能存在1个。</li><li><code>catch(){}</code>: 按照由小到大的顺序捕获并处理1或N种异常，处理方案除发短信/邮件给coder外:<ul><li><code>log.error(e.getMessage())</code>: 日志记录异常信息。</li><li><code>System.exit(-1)</code>: 退出虚拟机。</li><li><code>e.printStackTrace()</code>: 打印堆栈信息。</li></ul></li><li><code>finally{}</code>: 无论程序是否爆发异常，其中的代码都一定会执行，仅能存在0或1个:<ul><li>一般在finally中做一些恢复操作和释放资源的操作。</li></ul></li></ul><blockquote><p>武技: 测试try-catch-finally异常结构</p></blockquote><ol><li>开发测试方法 <code>TryCatchTest -> testTryCatchStructure()</code>:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> exception;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/** @author lsx */</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>TryCatchTest</span> {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Test</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>testTryCatchStructure</span>() {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>try</span> {
</span></span><span style=display:flex><span>            <span style=color:#75715e>// try{}块中存放的是可能会爆发异常的代码</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>int</span><span style=color:#f92672>[]</span> arr <span style=color:#f92672>=</span> {1, 2};
</span></span><span style=display:flex><span>            System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;结果: &#34;</span> <span style=color:#f92672>+</span> arr<span style=color:#f92672>[</span>5<span style=color:#f92672>]</span> <span style=color:#f92672>/</span> 0);
</span></span><span style=display:flex><span>            System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;如果爆发异常，则我不会被输出&#34;</span>);
</span></span><span style=display:flex><span>        } <span style=color:#66d9ef>catch</span> (ArithmeticException <span style=color:#f92672>|</span> ArrayIndexOutOfBoundsException e) {
</span></span><span style=display:flex><span>            <span style=color:#75715e>// catch{}块负责捕获指定的异常，并进行处理</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#75715e>// 打印异常信息</span>
</span></span><span style=display:flex><span>            System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;爆发了异常：&#34;</span> <span style=color:#f92672>+</span> e.<span style=color:#a6e22e>getMessage</span>());
</span></span><span style=display:flex><span>        } <span style=color:#66d9ef>finally</span> {
</span></span><span style=display:flex><span>            <span style=color:#75715e>// finally{}块中的代码，一定会执行</span>
</span></span><span style=display:flex><span>            System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;无论程序是否爆发异常，我都会被输出...&#34;</span>);
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 如果上面的异常被处理了，那么我会被输出</span>
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;如果异常被处理了，那么我会被输出&#34;</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=ep02-异常自动关闭>EP02. 异常自动关闭</h2><blockquote><p>心法: 异常自动关闭</p></blockquote><ul><li>JDK8版本推出try-with-resources结构的异常写法:<ul><li>支持在 <code>try()</code> 存放实现了 <code>Closeable</code> 接口的类实例。</li><li>并在程序结束或爆发异常时自动帮其调用 <code>close()</code> 方法。</li></ul></li></ul><blockquote><p>武技: 测试try-with-resources异常结构</p></blockquote><ol><li>开发测试方法 <code>TryWithResourceTest -> testTryWithResources()</code>:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> exception;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/** @author lsx */</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>TryWithResourceTest</span> {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Person</span> <span style=color:#66d9ef>implements</span> Closeable {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>@Override</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>close</span>() {
</span></span><span style=display:flex><span>            System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;Person的close()被调用...&#34;</span>);
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Test</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>testTryWithResources</span>() {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 原始try-catch-finally写法</span>
</span></span><span style=display:flex><span>        Person personA <span style=color:#f92672>=</span> <span style=color:#66d9ef>null</span>;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>try</span> {
</span></span><span style=display:flex><span>            personA <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Person();
</span></span><span style=display:flex><span>            System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;personA: &#34;</span> <span style=color:#f92672>+</span> personA);
</span></span><span style=display:flex><span>        } <span style=color:#66d9ef>catch</span> (Exception e) {
</span></span><span style=display:flex><span>            e.<span style=color:#a6e22e>printStackTrace</span>();
</span></span><span style=display:flex><span>        } <span style=color:#66d9ef>finally</span> {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> (personA <span style=color:#f92672>!=</span> <span style=color:#66d9ef>null</span>) {
</span></span><span style=display:flex><span>                personA.<span style=color:#a6e22e>close</span>();
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// jdk8+出的try-with-resources写法</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// try可以使用()存放实现了Closeable接口的类实例</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 并在程序结束或爆发异常时自动帮其调用close()</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>try</span> (Person personB <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Person()) {
</span></span><span style=display:flex><span>            System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;personB: &#34;</span> <span style=color:#f92672>+</span> personB);
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=ep03-异常结果缓存>EP03. 异常结果缓存</h2><blockquote><p>心法: 异常结构中的return关键字</p></blockquote><ul><li>若 <code>try/catch</code> 块中存在 <code>return</code>，则先将 <code>return</code> 结果缓存，先执行 <code>finally</code> 块后，再 <code>return</code>:<ul><li>若此时 <code>finally</code> 块中修改了基本类型的返回结果，则修改无效。</li><li>若此时 <code>finally</code> 块中修改了引用类型的返回结果，则修改成功。</li></ul></li><li>若 <code>finally</code> 块中存在 <code>return</code>，则只执行 <code>finally</code> 块中的 <code>return</code>。</li></ul><blockquote><p>武技: 测试异常结构中的return关键字</p></blockquote><ol><li>开发测试方法 <code>ExceptionReturnTest -> testReturnTime()</code>:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> exception;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/** @author lsx */</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>ExceptionReturnTest</span> {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * 测试：异常结构中的return关键字
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * try中存在return，finally中修改了基本类型的返回值
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @return 返回一个基本类型的数据
</span></span></span><span style=display:flex><span><span style=color:#75715e>     */</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>int</span> <span style=color:#a6e22e>returnA</span>() {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>int</span> num <span style=color:#f92672>=</span> 0;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>try</span> {
</span></span><span style=display:flex><span>            System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;try执行...&#34;</span>);
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> num;
</span></span><span style=display:flex><span>        } <span style=color:#66d9ef>finally</span> {
</span></span><span style=display:flex><span>            System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;finally执行...&#34;</span>);
</span></span><span style=display:flex><span>            num <span style=color:#f92672>=</span> 100;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * 测试：异常结构中的return关键字
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * try中存在return，finally中修改了引用类型的返回值
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @return 返回一个引用类型的数据
</span></span></span><span style=display:flex><span><span style=color:#75715e>     */</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>int</span><span style=color:#f92672>[]</span> <span style=color:#a6e22e>returnB</span>() {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>int</span><span style=color:#f92672>[]</span> arr <span style=color:#f92672>=</span> {0, 0};
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>try</span> {
</span></span><span style=display:flex><span>            System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;try执行...&#34;</span>);
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> arr;
</span></span><span style=display:flex><span>        } <span style=color:#66d9ef>finally</span> {
</span></span><span style=display:flex><span>            System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;finally执行...&#34;</span>);
</span></span><span style=display:flex><span>            arr<span style=color:#f92672>[</span>0<span style=color:#f92672>]</span> <span style=color:#f92672>=</span> 1;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * 测试：异常结构中的return关键字
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * try和finally中同时存在return
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @return 返回一个引用类型的数据
</span></span></span><span style=display:flex><span><span style=color:#75715e>     */</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>int</span> <span style=color:#a6e22e>returnC</span>() {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>try</span> {
</span></span><span style=display:flex><span>            System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;try执行...&#34;</span>);
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> 0;
</span></span><span style=display:flex><span>        } <span style=color:#66d9ef>finally</span> {
</span></span><span style=display:flex><span>            System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;finally执行...&#34;</span>);
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> 1;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Test</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>testReturnTime</span>() {
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;结果: &#34;</span> <span style=color:#f92672>+</span> returnA());
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;结果: &#34;</span> <span style=color:#f92672>+</span> returnB()<span style=color:#f92672>[</span>0<span style=color:#f92672>]</span>);
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;结果: &#34;</span> <span style=color:#f92672>+</span> returnC());
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=ep04-异常抛出方案>EP04. 异常抛出方案</h2><blockquote><p>心法: 异常抛出方案</p></blockquote><ul><li>异常可以直接配抛出给调用方，若为受检异常，则调用方必须处理该异常:<ul><li>同时抛出多个异常时，一定要注意顺序和大小。</li></ul></li></ul><table><thead><tr><th>异常处理方案</th><th>代码位置</th><th>关键字</th><th>示例代码</th></tr></thead><tbody><tr><td>抛出多个异常</td><td>方法名之后</td><td><code>throws</code></td><td><code>throws RuntimeException, Exception</code></td></tr><tr><td>抛出单个异常</td><td>方法体内部</td><td><code>throw</code></td><td><code>throw new RuntimeException()</code></td></tr></tbody></table><blockquote><p>武技: 测试 <code>throws</code> 异常多抛方案</p></blockquote><ol><li>开发测试方法 <code>ExceptionThrowTest -> testThrows()</code>:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> exception;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/** @author lsx */</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@SuppressWarnings</span>(<span style=color:#e6db74>&#34;all&#34;</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>ExceptionThrowTest</span> {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/** 我知道有异常，但我选择抛出，谁调用我谁处理 */</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>method</span>() <span style=color:#66d9ef>throws</span> ArithmeticException, NullPointerException {
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;1 / 0 = &#34;</span> <span style=color:#f92672>+</span> (1 <span style=color:#f92672>/</span> 0));
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/** 多抛异常 */</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Test</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>testThrows</span>() {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>try</span> {
</span></span><span style=display:flex><span>            method();
</span></span><span style=display:flex><span>        } <span style=color:#66d9ef>catch</span> (ArithmeticException <span style=color:#f92672>|</span> NullPointerException e) {
</span></span><span style=display:flex><span>            System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;记录日志...&#34;</span>);
</span></span><span style=display:flex><span>            System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;发短信给开发人员...&#34;</span>);
</span></span><span style=display:flex><span>            e.<span style=color:#a6e22e>printStackTrace</span>();
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><blockquote><p>武技: 测试 <code>throw</code> 异常单抛方案</p></blockquote><ol><li>开发测试方法 <code>ExceptionThrowTest -> testThrow()</code>:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> exception;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/** @author lsx */</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>ExceptionThrowTest</span> {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/** 单抛异常 */</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Test</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>testThrow</span>() {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>try</span> {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>throw</span> <span style=color:#66d9ef>new</span> ArithmeticException(<span style=color:#e6db74>&#34;不能为0啊！！！！&#34;</span>);
</span></span><span style=display:flex><span>        } <span style=color:#66d9ef>catch</span> (Exception e) {
</span></span><span style=display:flex><span>            System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;记录日志并发短信给开发人员&#34;</span>);
</span></span><span style=display:flex><span>            e.<span style=color:#a6e22e>printStackTrace</span>();
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=ep05-异常重写原则>EP05. 异常重写原则</h2><blockquote><p>心法: 重写带异常的方法的原则</p></blockquote><ul><li>运行时异常在什么情况都不需要被处理。</li><li>原方法有受检异常，重写方法的异常只能比原方法小，或选择不抛出该异常:<ul><li>若调用方使用了多态来调用重写方法，则这个异常依然需要被调用方处理。</li></ul></li><li>原方法没有受检异常，重写方法不可抛出受检异常，但可以抛出运行时异常。</li></ul><blockquote><p>武技: 测试异常方法的重写原则</p></blockquote><ol><li>开发测试方法 <code>ExceptionOverrideTest -> testMethodA()</code>:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> exception;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/** @author lsx */</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>ExceptionOverrideTest</span> {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/** 父接口 */</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>interface</span> <span style=color:#a6e22e>Fu</span> {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>methodA</span>() <span style=color:#66d9ef>throws</span> Exception;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>methodB</span>();
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/** 实现类Zi */</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Zi</span> <span style=color:#66d9ef>implements</span> Fu {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e>         * 原方法有受检异常，重写方法的异常只能比原方法小，或选择不抛出该异常
</span></span></span><span style=display:flex><span><span style=color:#75715e>         * 若选择不抛出，且调用方使用了多态来调用重写方法，
</span></span></span><span style=display:flex><span><span style=color:#75715e>         * 则原方法的可控异常依然需要被调用方处理。
</span></span></span><span style=display:flex><span><span style=color:#75715e>         */</span>
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>@Override</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>methodA</span>() {
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e>         * 原方法没有受检异常，重写方法不可抛出受检异常，但可以抛出运行时异常
</span></span></span><span style=display:flex><span><span style=color:#75715e>         */</span>
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>@Override</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>methodB</span>() <span style=color:#66d9ef>throws</span> RuntimeException {
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/** 若使用了多态来调用重写方法，则原方法的可控异常依然需要被调用方处理 */</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Test</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>testMethodA</span>() {
</span></span><span style=display:flex><span>        Fu fu <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Zi();
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>try</span> {
</span></span><span style=display:flex><span>            <span style=color:#75715e>// 若使用了多态来调用重写方法，则原方法的可控异常依然需要被调用方处理</span>
</span></span><span style=display:flex><span>            fu.<span style=color:#a6e22e>methodA</span>();
</span></span><span style=display:flex><span>        } <span style=color:#66d9ef>catch</span> (Exception e) {
</span></span><span style=display:flex><span>            e.<span style=color:#a6e22e>printStackTrace</span>();
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h1 id=ch02-泛型机制>CH02. 泛型机制</h1><blockquote><p>心法: 泛型机制</p></blockquote><ul><li>泛型概念: JDK5引入的参数化类型的概念，表示很多很多种类型。</li><li>泛型特点: 使用泛型后，可以不在类内部指定成员的具体类型，而是由外部调用者来决定和显示声明。</li><li>泛型声明: <code>class 类名&lt;泛型, 泛型...>{}</code>:<ul><li>构造器名后面不能使用泛型，但是构造器参数可以。</li><li>泛型不能使用基本数据类型。</li></ul></li><li>泛型使用: <code>类名&lt;泛型> 实例 = new 类名&lt;>()</code>:<ul><li>当调用方未指定泛型视为泛型擦除，容器内部默认将泛型向上转型为 <code>Object</code>，不建议这样写。</li></ul></li></ul><blockquote><p>武技: 测试泛型使用</p></blockquote><ol><li>开发测试方法 <code>GenericTypeTest -> testPoint()</code>:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> collection;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/** @author lsx */</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@SuppressWarnings</span>(<span style=color:#e6db74>&#34;all&#34;</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>GenericTypeTest</span> {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Data</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Point</span><span style=color:#f92672>&lt;</span>T<span style=color:#f92672>&gt;</span> {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>private</span> T x;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>private</span> T y;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/** 基本泛型的使用 */</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Test</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>testPoint</span>() {
</span></span><span style=display:flex><span>        Point<span style=color:#f92672>&lt;</span>Double<span style=color:#f92672>&gt;</span> pointA <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Point<span style=color:#f92672>&lt;&gt;</span>();
</span></span><span style=display:flex><span>        pointA.<span style=color:#a6e22e>setX</span>(5.<span style=color:#a6e22e>6</span>);
</span></span><span style=display:flex><span>        pointA.<span style=color:#a6e22e>setY</span>(6.<span style=color:#a6e22e>8</span>);
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;pointA &#34;</span> <span style=color:#f92672>+</span> pointA);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 视为泛型擦除</span>
</span></span><span style=display:flex><span>        Point pointB <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Point();
</span></span><span style=display:flex><span>        pointB.<span style=color:#a6e22e>setX</span>(<span style=color:#e6db74>&#34;北纬36度&#34;</span>);
</span></span><span style=display:flex><span>        pointB.<span style=color:#a6e22e>setY</span>(6.<span style=color:#a6e22e>8</span>);
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;pointB &#34;</span> <span style=color:#f92672>+</span> pointB);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=ep01-形参上的泛型>EP01. 形参上的泛型</h2><blockquote><p>心法: 形参上的泛型</p></blockquote><ul><li>方法参数上的泛型只有在实例化之后才能被确定下来。</li><li>成员方法参数列表中，能直接用类上的泛型，也支持在方法返回值前自定义:<ul><li><code>&lt;V, K> K method(T t, V v, K k){}</code>: 其中 <code>T</code> 是类上定义的泛型，<code>V/K</code> 是自定义的泛型。</li></ul></li><li>静态方法参数列表中，不能用类上的泛型，只支持在方法返回值前自定义:<ul><li><code>static &lt;Q> void method(Q q){}</code>: 其中 <code>Q</code> 是自定义的泛型。</li></ul></li></ul><blockquote><p>武技: 测试形参上的泛型</p></blockquote><ol><li>开发测试方法 <code>ParamGenericTypeTest -> testParam()</code>:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> collection;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/** @author lsx */</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>ParamGenericTypeTest</span> {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>User</span><span style=color:#f92672>&lt;</span>T<span style=color:#f92672>&gt;</span> {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e>         * 成员方法: 可以直接使用类上的泛型，还可以再返回值前自定义泛型
</span></span></span><span style=display:flex><span><span style=color:#75715e>         *
</span></span></span><span style=display:flex><span><span style=color:#75715e>         * @param t   可以直接使用类上的泛型
</span></span></span><span style=display:flex><span><span style=color:#75715e>         * @param v   可以直接使用方法返回值前定义的泛型
</span></span></span><span style=display:flex><span><span style=color:#75715e>         * @param &lt;V&gt; 定义方法泛型
</span></span></span><span style=display:flex><span><span style=color:#75715e>         * @return 返回第1个参数
</span></span></span><span style=display:flex><span><span style=color:#75715e>         */</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>private</span> <span style=color:#f92672>&lt;</span>V<span style=color:#f92672>&gt;</span> T <span style=color:#a6e22e>methodA</span>(T t, V v) {
</span></span><span style=display:flex><span>            System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(v <span style=color:#66d9ef>instanceof</span> Integer <span style=color:#f92672>?</span>
</span></span><span style=display:flex><span>                    <span style=color:#e6db74>&#34;第2个参数是Integer类型&#34;</span> : <span style=color:#e6db74>&#34;第2个参数不是Integer类型&#34;</span>);
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> t;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e>         * 静态方法: 不能用类上的泛型，只支持在返回值前定义
</span></span></span><span style=display:flex><span><span style=color:#75715e>         *
</span></span></span><span style=display:flex><span><span style=color:#75715e>         * @param v   可以直接使用方法返回值前定义的泛型
</span></span></span><span style=display:flex><span><span style=color:#75715e>         * @param k   可以直接使用方法返回值前定义的泛型
</span></span></span><span style=display:flex><span><span style=color:#75715e>         * @param &lt;V&gt; 参数泛型定义
</span></span></span><span style=display:flex><span><span style=color:#75715e>         * @return 返回第2个参数
</span></span></span><span style=display:flex><span><span style=color:#75715e>         */</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>static</span> <span style=color:#f92672>&lt;</span>V, K<span style=color:#f92672>&gt;</span> K <span style=color:#a6e22e>methodB</span>(V v, K k) {
</span></span><span style=display:flex><span>            System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(v <span style=color:#66d9ef>instanceof</span> Integer <span style=color:#f92672>?</span>
</span></span><span style=display:flex><span>                    <span style=color:#e6db74>&#34;第1个参数是Integer类型&#34;</span> : <span style=color:#e6db74>&#34;第1个参数不是Integer类型&#34;</span>);
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> k;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Test</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>testParam</span>() {
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 成员方法泛型</span>
</span></span><span style=display:flex><span>        User<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>&gt;</span> user <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> User<span style=color:#f92672>&lt;&gt;</span>();
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(user.<span style=color:#a6e22e>methodA</span>(<span style=color:#e6db74>&#34;你好&#34;</span>, 10));
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 静态方法泛型</span>
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(User.<span style=color:#a6e22e>methodB</span>(10.<span style=color:#a6e22e>6</span>, <span style=color:#66d9ef>true</span>));
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=ep02-泛型强制限定>EP02. 泛型强制限定</h2><blockquote><p>心法: 泛型强制限定</p></blockquote><ul><li>支持使用问号格式对方法的参数泛型进行范围限定:</li></ul><table><thead><tr><th>限定方式</th><th>限定符号</th><th>描述</th></tr></thead><tbody><tr><td>未知类型限定</td><td><code>&lt;?></code></td><td>支持一切泛型</td></tr><tr><td>父类限定</td><td><code>&lt;? super Number></code></td><td>只接受Number或Number的父类</td></tr><tr><td>子类限定</td><td><code>&lt;? extends Number></code></td><td>只接受Number或Number的子类</td></tr></tbody></table><blockquote><p>武技: 测试泛型限定</p></blockquote><ol><li>开发测试方法 <code>GenericTypeLimitTest -> testGenericTypeLimit()</code>:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> collection;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/** @author lsx */</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@SuppressWarnings</span>(<span style=color:#e6db74>&#34;all&#34;</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>GenericTypeLimitTest</span> {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>User</span><span style=color:#f92672>&lt;</span>T<span style=color:#f92672>&gt;</span> {
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/** 未知限定 */</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>methodA</span>(User<span style=color:#f92672>&lt;?&gt;</span> user) {
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/** 父类限定 */</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>methodB</span>(User<span style=color:#f92672>&lt;?</span> <span style=color:#66d9ef>super</span> Number<span style=color:#f92672>&gt;</span> user) {
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/** 子类限定 */</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>methodC</span>(User<span style=color:#f92672>&lt;?</span> <span style=color:#66d9ef>extends</span> Number<span style=color:#f92672>&gt;</span> user) {
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/** 方法限定 */</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Test</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>testGenericTypeLimit</span>() {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 测试未知限定</span>
</span></span><span style=display:flex><span>        methodA(<span style=color:#66d9ef>new</span> User());
</span></span><span style=display:flex><span>        methodA(<span style=color:#66d9ef>new</span> User<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>&gt;</span>());
</span></span><span style=display:flex><span>        methodA(<span style=color:#66d9ef>new</span> User<span style=color:#f92672>&lt;</span>Integer<span style=color:#f92672>&gt;</span>());
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 测试父类限定</span>
</span></span><span style=display:flex><span>        methodB(<span style=color:#66d9ef>new</span> User<span style=color:#f92672>&lt;</span>Number<span style=color:#f92672>&gt;</span>());
</span></span><span style=display:flex><span>        methodB(<span style=color:#66d9ef>new</span> User<span style=color:#f92672>&lt;</span>Object<span style=color:#f92672>&gt;</span>());
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 测试子类限定</span>
</span></span><span style=display:flex><span>        methodC(<span style=color:#66d9ef>new</span> User<span style=color:#f92672>&lt;</span>Number<span style=color:#f92672>&gt;</span>());
</span></span><span style=display:flex><span>        methodC(<span style=color:#66d9ef>new</span> User<span style=color:#f92672>&lt;</span>Integer<span style=color:#f92672>&gt;</span>());
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h1 id=ch03-常用容器>CH03. 常用容器</h1><blockquote><p>心法: 容器类 <code>java.util.Collection</code></p></blockquote><ul><li>容器类继承自 <code>j.l.Iterable</code>，便于更灵活地组织和操纵数据。</li><li>Java中常用的 <code>List/Queue/Set</code> 等接口，均为 <code>Collection</code> 的子接口。</li></ul><h2 id=ep01-常用序列容器>EP01. 常用序列容器</h2><blockquote><p>心法: 序列容器 <code>java.util.List</code></p></blockquote><ul><li>List序列是一种相对有序，即输入同输出的容器，支持精准插入，搜索，访问，删除等操作。</li><li>List序列常用的子类为 <code>ArrayList</code> 和 <code>LinkedList</code>:</li></ul><table><thead><tr><th>List实现类</th><th>底层实现</th><th>容器特点</th></tr></thead><tbody><tr><td><code>ArrayList</code></td><td>数组</td><td>允许存储重复元素和null值，初始默认容量为10，查询快，操作慢</td></tr><tr><td><code>LinkedList</code></td><td>链表</td><td>允许存储重复元素和null值，初始默认容量为空，查询慢，操作快</td></tr></tbody></table><blockquote><p>武技: 测试List序列容器的常用API方法</p></blockquote><ol><li>开发测试方法 <code>ListTest -> testListApi()</code>:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> collection;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/** @author lsx */</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@SuppressWarnings</span>(<span style=color:#e6db74>&#34;all&#34;</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>ListTest</span> {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Test</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>testListApi</span>() {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 快速创建一个List容器，可以直接打印输出</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 虽然底层使用ArrayList实现，但无法调用添加和删除的API方法</span>
</span></span><span style=display:flex><span>        List<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>&gt;</span> countries <span style=color:#f92672>=</span> Arrays.<span style=color:#a6e22e>asList</span>(<span style=color:#e6db74>&#34;中国&#34;</span>, <span style=color:#e6db74>&#34;葡萄牙&#34;</span>, <span style=color:#e6db74>&#34;日本&#34;</span>, <span style=color:#e6db74>&#34;西班牙&#34;</span>, <span style=color:#e6db74>&#34;葡萄牙&#34;</span>);
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;countries: &#34;</span> <span style=color:#f92672>+</span> countries);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 返回countries的容量</span>
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;size(): &#34;</span> <span style=color:#f92672>+</span> countries.<span style=color:#a6e22e>size</span>());
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 返回countries是否为空</span>
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(countries.<span style=color:#a6e22e>isEmpty</span>() <span style=color:#f92672>?</span> <span style=color:#e6db74>&#34;countries中无元素&#34;</span> : <span style=color:#e6db74>&#34;countries中有元素&#34;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 返回countries是否和指定队列相等</span>
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(countries.<span style=color:#a6e22e>equals</span>(Arrays.<span style=color:#a6e22e>asList</span>(<span style=color:#e6db74>&#34;中国&#34;</span>, <span style=color:#e6db74>&#34;葡萄牙&#34;</span>, <span style=color:#e6db74>&#34;日本&#34;</span>, <span style=color:#e6db74>&#34;西班牙&#34;</span>)) <span style=color:#f92672>?</span>
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#34;和指定队列相等&#34;</span> : <span style=color:#e6db74>&#34;和指定队列不相等&#34;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 返回countries中是否包含指定元素</span>
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(countries.<span style=color:#a6e22e>contains</span>(<span style=color:#e6db74>&#34;中国&#34;</span>) <span style=color:#f92672>?</span> <span style=color:#e6db74>&#34;countries中有中国&#34;</span> : <span style=color:#e6db74>&#34;countries中无中国&#34;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 将countries转换为Object[]</span>
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;countries[0]: &#34;</span> <span style=color:#f92672>+</span> countries.<span style=color:#a6e22e>toArray</span>()<span style=color:#f92672>[</span>0<span style=color:#f92672>]</span>.<span style=color:#a6e22e>toString</span>());
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 返回countries中是否包含指定的list</span>
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(countries.<span style=color:#a6e22e>containsAll</span>(Arrays.<span style=color:#a6e22e>asList</span>(<span style=color:#e6db74>&#34;西班牙&#34;</span>, <span style=color:#e6db74>&#34;葡萄牙&#34;</span>)) <span style=color:#f92672>?</span>
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#34;countries中包含西班牙和葡萄亚&#34;</span> : <span style=color:#e6db74>&#34;countries中不包含西班牙和葡萄亚&#34;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 返回countries中指定位置的元素</span>
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;countries[0]: &#34;</span> <span style=color:#f92672>+</span> countries.<span style=color:#a6e22e>get</span>(0));
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 设置countries中指定位置的元素为指定内容，返回原内容</span>
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;将2号位设置为刚果: &#34;</span> <span style=color:#f92672>+</span> countries.<span style=color:#a6e22e>set</span>(2, <span style=color:#e6db74>&#34;刚果&#34;</span>));
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 从左到右，返回countries中指定元素第一次出现的位置</span>
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;从左到右，葡萄牙位于: &#34;</span> <span style=color:#f92672>+</span> countries.<span style=color:#a6e22e>indexOf</span>(<span style=color:#e6db74>&#34;葡萄牙&#34;</span>));
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 从右到左，返回countries中指定元素第一次出现的位置</span>
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;从右到左，葡萄牙位于: &#34;</span> <span style=color:#f92672>+</span> countries.<span style=color:#a6e22e>lastIndexOf</span>(<span style=color:#e6db74>&#34;葡萄牙&#34;</span>));
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 根据指定范围，截取countries片段</span>
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;截取countries中 [1, 4) 的内容: &#34;</span> <span style=color:#f92672>+</span> countries.<span style=color:#a6e22e>subList</span>(1, 4));
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// for-i遍历</span>
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;for-i遍历&#34;</span>);
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> 0, j <span style=color:#f92672>=</span> countries.<span style=color:#a6e22e>size</span>(); i <span style=color:#f92672>&lt;</span> j; i<span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>            System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(i <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;: &#34;</span> <span style=color:#f92672>+</span> countries.<span style=color:#a6e22e>get</span>(i));
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// for-e遍历</span>
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;for-e遍历&#34;</span>);
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> (String e : countries) {
</span></span><span style=display:flex><span>            System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;for-e遍历: &#34;</span> <span style=color:#f92672>+</span> e);
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><ol start=2><li>开发测试方法 <code>ArrayListTest -> testArrayListApi()</code>:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> collection;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/** @author lsx */</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@SuppressWarnings</span>(<span style=color:#e6db74>&#34;all&#34;</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>ArrayListTest</span> {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/** 测试: ArrayList实现类（仅测试独有API方法） */</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Test</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>testArrayListApi</span>() {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 支持使用多态的写法，默认初始容量为10</span>
</span></span><span style=display:flex><span>        ArrayList<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>&gt;</span> counties <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> ArrayList<span style=color:#f92672>&lt;&gt;</span>(10);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 在counties的末尾添加指定元素</span>
</span></span><span style=display:flex><span>        counties.<span style=color:#a6e22e>add</span>(<span style=color:#e6db74>&#34;中国&#34;</span>);
</span></span><span style=display:flex><span>        counties.<span style=color:#a6e22e>add</span>(<span style=color:#e6db74>&#34;日本&#34;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 在counties的指定位置添加元素，其余元素依次向后移动</span>
</span></span><span style=display:flex><span>        counties.<span style=color:#a6e22e>add</span>(1, <span style=color:#e6db74>&#34;韩国&#34;</span>);
</span></span><span style=display:flex><span>        counties.<span style=color:#a6e22e>add</span>(1, <span style=color:#e6db74>&#34;泰国&#34;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 将指定的list整体追加到在counties的中</span>
</span></span><span style=display:flex><span>        counties.<span style=color:#a6e22e>addAll</span>(Arrays.<span style=color:#a6e22e>asList</span>(<span style=color:#e6db74>&#34;美国&#34;</span>, <span style=color:#e6db74>&#34;法国&#34;</span>));
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 将指定list整体追加到counties中的1号位，其余元素依次向后移动</span>
</span></span><span style=display:flex><span>        counties.<span style=color:#a6e22e>addAll</span>(1, Arrays.<span style=color:#a6e22e>asList</span>(<span style=color:#e6db74>&#34;刚果&#34;</span>, <span style=color:#e6db74>&#34;埃及&#34;</span>));
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;counties: &#34;</span> <span style=color:#f92672>+</span> counties);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 删除并返回counties中指定位置的元素</span>
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;删除1号元素: &#34;</span> <span style=color:#f92672>+</span> counties.<span style=color:#a6e22e>remove</span>(1));
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 删除并返回counties中的指定元素</span>
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(counties.<span style=color:#a6e22e>remove</span>(<span style=color:#e6db74>&#34;埃及&#34;</span>) <span style=color:#f92672>?</span> <span style=color:#e6db74>&#34;埃及删除成功...&#34;</span> : <span style=color:#e6db74>&#34;埃及删除失败...&#34;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 删除counties中的指定list</span>
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(counties.<span style=color:#a6e22e>removeAll</span>(Arrays.<span style=color:#a6e22e>asList</span>(<span style=color:#e6db74>&#34;美国&#34;</span>, <span style=color:#e6db74>&#34;法国&#34;</span>)) <span style=color:#f92672>?</span>
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#34;美国和法国删除成功...&#34;</span> : <span style=color:#e6db74>&#34;美国和法国删除失败...&#34;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;counties: &#34;</span> <span style=color:#f92672>+</span> counties);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><ol start=3><li>开发测试方法 <code>LinkedListTest -> testLinkedListApi()</code>:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> collection;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/** @author lsx */</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@SuppressWarnings</span>(<span style=color:#e6db74>&#34;all&#34;</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>LinkedListTest</span> {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/** 测试: LinkedList实现类（仅测试独有API方法） */</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Test</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>testLinkedListApi</span>() {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 支持使用多态的写法</span>
</span></span><span style=display:flex><span>        LinkedList<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>&gt;</span> contries <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> LinkedList<span style=color:#f92672>&lt;&gt;</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 添加数据</span>
</span></span><span style=display:flex><span>        contries.<span style=color:#a6e22e>add</span>(<span style=color:#e6db74>&#34;韩国&#34;</span>);
</span></span><span style=display:flex><span>        contries.<span style=color:#a6e22e>add</span>(1, <span style=color:#e6db74>&#34;日本&#34;</span>);
</span></span><span style=display:flex><span>        contries.<span style=color:#a6e22e>addFirst</span>(<span style=color:#e6db74>&#34;法国&#34;</span>);
</span></span><span style=display:flex><span>        contries.<span style=color:#a6e22e>addFirst</span>(<span style=color:#e6db74>&#34;中国&#34;</span>);
</span></span><span style=display:flex><span>        contries.<span style=color:#a6e22e>addLast</span>(<span style=color:#e6db74>&#34;美国&#34;</span>);
</span></span><span style=display:flex><span>        contries.<span style=color:#a6e22e>addLast</span>(<span style=color:#e6db74>&#34;泰国&#34;</span>);
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;contries: &#34;</span> <span style=color:#f92672>+</span> contries);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 获取元素</span>
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;查看链表头元素，不存在返回null: &#34;</span> <span style=color:#f92672>+</span> contries.<span style=color:#a6e22e>peekFirst</span>());
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;查看链表尾元素，不存在返回null: &#34;</span> <span style=color:#f92672>+</span> contries.<span style=color:#a6e22e>peekLast</span>());
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;查看链表头元素，不存在抛出异常: &#34;</span> <span style=color:#f92672>+</span> contries.<span style=color:#a6e22e>getFirst</span>());
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;查看链表尾元素，不存在抛出异常: &#34;</span> <span style=color:#f92672>+</span> contries.<span style=color:#a6e22e>getLast</span>());
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 删除</span>
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;弹出链表头，不存在返回null: &#34;</span> <span style=color:#f92672>+</span> contries.<span style=color:#a6e22e>pollFirst</span>());
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;弹出链表尾，不存在返回null: &#34;</span> <span style=color:#f92672>+</span> contries.<span style=color:#a6e22e>pollLast</span>());
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;弹出链表头，不存在抛出异常: &#34;</span> <span style=color:#f92672>+</span> contries.<span style=color:#a6e22e>removeFirst</span>());
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;弹出链表尾，不存在抛出异常: &#34;</span> <span style=color:#f92672>+</span> contries.<span style=color:#a6e22e>removeLast</span>());
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=ep02-常用集合容器>EP02. 常用集合容器</h2><blockquote><p>心法: 集合容器 <code>java.util.Set</code></p></blockquote><ul><li>Set集合是一种相对无序，即输入不同输出的容器。</li><li>Set不支持存储重复数据，且最多包含一个null元素。</li><li>Set常用的子类为 <code>HashSet</code> 和 <code>TreeSet</code>:</li></ul><table><thead><tr><th>Set实现类</th><th>底层实现</th><th>容器特点</th></tr></thead><tbody><tr><td><code>HashSet</code></td><td>HashMap</td><td>允许存储null值，无序不同步，底层使用Hash分布</td></tr><tr><td><code>TreeSet</code></td><td>二叉树</td><td>1. 可以对存储的内容进行排序，无序不同步2. 默认对实现了Comparable的接口的类进行自然排序，如String、Integer等3. 允许指定自定义的比较器并作用在集合中元素的排序过程中4. 一个没有实现Comparable接口，也没指定比较器的元素无法被TreeSet存储</td></tr></tbody></table><blockquote><p>武技: 测试Set集合容器的常用API方法</p></blockquote><ol><li>开发测试方法 <code>HashSetTest -> testHashSetApi()</code>:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> collection;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/** @author lsx */</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@SuppressWarnings</span>(<span style=color:#e6db74>&#34;all&#34;</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>HashSetTest</span> {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/** 测试: HashSet常用API方法 */</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Test</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>testHashSetApi</span>() {
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 支持多态写法，hashSet默认初始容量为16</span>
</span></span><span style=display:flex><span>        HashSet<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>&gt;</span> set <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> HashSet<span style=color:#f92672>&lt;&gt;</span>(16);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 向set中添加指定元素</span>
</span></span><span style=display:flex><span>        set.<span style=color:#a6e22e>add</span>(<span style=color:#e6db74>&#34;a&#34;</span>);
</span></span><span style=display:flex><span>        set.<span style=color:#a6e22e>add</span>(<span style=color:#e6db74>&#34;b&#34;</span>);
</span></span><span style=display:flex><span>        set.<span style=color:#a6e22e>add</span>(<span style=color:#66d9ef>null</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;set的容量: &#34;</span> <span style=color:#f92672>+</span> set.<span style=color:#a6e22e>size</span>());
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;集合中所有元素的hash值的总和: &#34;</span> <span style=color:#f92672>+</span> set.<span style=color:#a6e22e>hashCode</span>());
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(set.<span style=color:#a6e22e>isEmpty</span>() <span style=color:#f92672>?</span> <span style=color:#e6db74>&#34;set为空&#34;</span> : <span style=color:#e6db74>&#34;set不为空&#34;</span>);
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(set.<span style=color:#a6e22e>contains</span>(<span style=color:#e6db74>&#34;a&#34;</span>) <span style=color:#f92672>?</span> <span style=color:#e6db74>&#34;set中包含a&#34;</span> : <span style=color:#e6db74>&#34;set中不包含a&#34;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// set就是去重复的</span>
</span></span><span style=display:flex><span>        set.<span style=color:#a6e22e>add</span>(<span style=color:#e6db74>&#34;b&#34;</span>);
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;集合中所有元素的hash值的总和: &#34;</span> <span style=color:#f92672>+</span> set.<span style=color:#a6e22e>hashCode</span>());
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 删除set中指定的元素</span>
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(set.<span style=color:#a6e22e>remove</span>(<span style=color:#e6db74>&#34;b&#34;</span>) <span style=color:#f92672>?</span> <span style=color:#e6db74>&#34;删除成功&#34;</span> : <span style=color:#e6db74>&#34;删除失败&#34;</span>);
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;集合中所有元素的hash值的总和: &#34;</span> <span style=color:#f92672>+</span> set.<span style=color:#a6e22e>hashCode</span>());
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 清空set中的所有元素</span>
</span></span><span style=display:flex><span>        set.<span style=color:#a6e22e>clear</span>();
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;集合中所有元素的hash值的总和: &#34;</span> <span style=color:#f92672>+</span> set.<span style=color:#a6e22e>hashCode</span>());
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// for-e遍历</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> (String e : set) {
</span></span><span style=display:flex><span>            System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;for-e遍历: &#34;</span> <span style=color:#f92672>+</span> e);
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><ol start=2><li>开发测试方法 <code>TreeSetTest -> testTreeSetApi()</code>:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> collection;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/** @author lsx */</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@SuppressWarnings</span>(<span style=color:#e6db74>&#34;all&#34;</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>SetTest</span> {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/** TreeSet的排序效果 */</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Test</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>testTreeSetApi</span>() {
</span></span><span style=display:flex><span>        Set<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>&gt;</span> set <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> TreeSet<span style=color:#f92672>&lt;&gt;</span>();
</span></span><span style=display:flex><span>        set.<span style=color:#a6e22e>add</span>(<span style=color:#e6db74>&#34;abc&#34;</span>);
</span></span><span style=display:flex><span>        set.<span style=color:#a6e22e>add</span>(<span style=color:#e6db74>&#34;aac&#34;</span>);
</span></span><span style=display:flex><span>        set.<span style=color:#a6e22e>add</span>(<span style=color:#e6db74>&#34;abb&#34;</span>);
</span></span><span style=display:flex><span>        set.<span style=color:#a6e22e>add</span>(<span style=color:#e6db74>&#34;acc&#34;</span>);
</span></span><span style=display:flex><span>        set.<span style=color:#a6e22e>add</span>(<span style=color:#e6db74>&#34;3&#34;</span>);
</span></span><span style=display:flex><span>        set.<span style=color:#a6e22e>add</span>(<span style=color:#e6db74>&#34;1&#34;</span>);
</span></span><span style=display:flex><span>        set.<span style=color:#a6e22e>add</span>(<span style=color:#e6db74>&#34;2&#34;</span>);
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;set: &#34;</span> <span style=color:#f92672>+</span> set);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><ol start=3><li>开发测试方法 <code>TreeSetTest -> testComparable()</code>:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> collection;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/** @author lsx */</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@SuppressWarnings</span>(<span style=color:#e6db74>&#34;all&#34;</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>SetTest</span> {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/** 让自定义类可被比较: 需要重写Comparable.compareTo() */</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Data</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@AllArgsConstructor</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@NoArgsConstructor</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Student</span> <span style=color:#66d9ef>implements</span> Comparable<span style=color:#f92672>&lt;</span>Student<span style=color:#f92672>&gt;</span> {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>int</span> age;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e>         * 比较当前的student和下一个student的age，谁小谁靠前
</span></span></span><span style=display:flex><span><span style=color:#75715e>         *
</span></span></span><span style=display:flex><span><span style=color:#75715e>         * @param student 下一个student。
</span></span></span><span style=display:flex><span><span style=color:#75715e>         * @return 正数表示当前student年龄大，往后排，负数表示当前student年龄小，往前排，0表示相等并去重。
</span></span></span><span style=display:flex><span><span style=color:#75715e>         */</span>
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>@Override</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>int</span> <span style=color:#a6e22e>compareTo</span>(Student student) {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>age</span> <span style=color:#f92672>-</span> student.<span style=color:#a6e22e>getAge</span>();
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/** 让自定义类实现Comparable接口后，进入TreeSet存储 */</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Test</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>testComparable</span>() {
</span></span><span style=display:flex><span>        Set<span style=color:#f92672>&lt;</span>Student<span style=color:#f92672>&gt;</span> set <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> TreeSet<span style=color:#f92672>&lt;&gt;</span>();
</span></span><span style=display:flex><span>        set.<span style=color:#a6e22e>add</span>(<span style=color:#66d9ef>new</span> Student(60));
</span></span><span style=display:flex><span>        set.<span style=color:#a6e22e>add</span>(<span style=color:#66d9ef>new</span> Student(5));
</span></span><span style=display:flex><span>        set.<span style=color:#a6e22e>add</span>(<span style=color:#66d9ef>new</span> Student(30));
</span></span><span style=display:flex><span>        set.<span style=color:#a6e22e>add</span>(<span style=color:#66d9ef>new</span> Student(30));
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;set: &#34;</span> <span style=color:#f92672>+</span> set);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><ol start=4><li>开发测试方法 <code>TreeSetTest -> testComparator()</code>:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> collection;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/** @author lsx */</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@SuppressWarnings</span>(<span style=color:#e6db74>&#34;all&#34;</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>SetTest</span> {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/** 用于测试自定义比较器 */</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Data</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@AllArgsConstructor</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@NoArgsConstructor</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Person</span> {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>private</span> String name;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/** 自定义比较器: 需要重写Comparator.compare() */</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>CustomComparator</span> <span style=color:#66d9ef>implements</span> Comparator<span style=color:#f92672>&lt;</span>Person<span style=color:#f92672>&gt;</span> {
</span></span><span style=display:flex><span>        <span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e>         * 比较当前的person和下一个person的姓名，谁小谁靠前
</span></span></span><span style=display:flex><span><span style=color:#75715e>         *
</span></span></span><span style=display:flex><span><span style=color:#75715e>         * @param personA 上一个person
</span></span></span><span style=display:flex><span><span style=color:#75715e>         * @param personB 下一个person
</span></span></span><span style=display:flex><span><span style=color:#75715e>         * @return 正数表示当前student年龄大，往后排，负数表示当前student年龄小，往前排，0表示相等并去重。
</span></span></span><span style=display:flex><span><span style=color:#75715e>         */</span>
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>@Override</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>int</span> <span style=color:#a6e22e>compare</span>(Person personA, Person personB) {
</span></span><span style=display:flex><span>            <span style=color:#75715e>// compareTo() 是String类自带的API方法</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> personA.<span style=color:#a6e22e>getName</span>().<span style=color:#a6e22e>compareTo</span>(personB.<span style=color:#a6e22e>getName</span>());
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/** 使用自定义比较器 */</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Test</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>testComparator</span>() {
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 在实例化set时，传入自定义的比较器</span>
</span></span><span style=display:flex><span>        Set<span style=color:#f92672>&lt;</span>Person<span style=color:#f92672>&gt;</span> set <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> TreeSet<span style=color:#f92672>&lt;&gt;</span>(<span style=color:#66d9ef>new</span> CustomComparator());
</span></span><span style=display:flex><span>        set.<span style=color:#a6e22e>add</span>(<span style=color:#66d9ef>new</span> Person(<span style=color:#e6db74>&#34;c&#34;</span>));
</span></span><span style=display:flex><span>        set.<span style=color:#a6e22e>add</span>(<span style=color:#66d9ef>new</span> Person(<span style=color:#e6db74>&#34;b&#34;</span>));
</span></span><span style=display:flex><span>        set.<span style=color:#a6e22e>add</span>(<span style=color:#66d9ef>new</span> Person(<span style=color:#e6db74>&#34;a&#34;</span>));
</span></span><span style=display:flex><span>        set.<span style=color:#a6e22e>add</span>(<span style=color:#66d9ef>new</span> Person(<span style=color:#e6db74>&#34;a&#34;</span>));
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;set: &#34;</span> <span style=color:#f92672>+</span> set);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=ep03-常用映射容器>EP03. 常用映射容器</h2><blockquote><p>心法: 映射容器 <code>java.util.Map</code></p></blockquote><ul><li>Map映射是一种以键值对Entry方式存储数据的容器，不能包含重复的key。</li><li>Map接口实际上是Set接口的底层实现，包括Set接口的实现类底层调用的也是对应的Map接口的实现类。</li><li>Map常用的子类为 <code>HashMap</code> 和 <code>TreeMap</code>:</li></ul><table><thead><tr><th>Map实现类</th><th>底层实现</th><th>容器特点</th></tr></thead><tbody><tr><td><code>HashMap</code></td><td>数组 + 链表 + 红黑树</td><td>1. 允许使用null键和null值，无序不同步2. 可以辅助 <code>keySet()/entrySet()</code> 完成遍历</td></tr><tr><td><code>TreeMap</code></td><td>红黑树</td><td>可根据其key进行自然排序或指定自定义Comparator</td></tr></tbody></table><blockquote><p>武技: 测试HashMap哈希映射容器</p></blockquote><ol><li>开发测试方法 <code>MapTest -> testHashMap()</code>:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> collection;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/** @author lsx */</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>MapTest</span> {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/** HashMap的常用API方法 */</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Test</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>testHashMap</span>() {
</span></span><span style=display:flex><span>        <span style=color:#75715e>// hashMap容器的默认大小为16</span>
</span></span><span style=display:flex><span>        HashMap<span style=color:#f92672>&lt;</span>String, Object<span style=color:#f92672>&gt;</span> hashMap <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> HashMap<span style=color:#f92672>&lt;&gt;</span>(16);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 以键值对的方式向容器添加元素</span>
</span></span><span style=display:flex><span>        hashMap.<span style=color:#a6e22e>put</span>(<span style=color:#e6db74>&#34;name&#34;</span>, <span style=color:#e6db74>&#34;赵四&#34;</span>);
</span></span><span style=display:flex><span>        hashMap.<span style=color:#a6e22e>put</span>(<span style=color:#e6db74>&#34;age&#34;</span>, 58);
</span></span><span style=display:flex><span>        hashMap.<span style=color:#a6e22e>put</span>(<span style=color:#e6db74>&#34;gender&#34;</span>, <span style=color:#e6db74>&#34;male&#34;</span>);
</span></span><span style=display:flex><span>        hashMap.<span style=color:#a6e22e>put</span>(<span style=color:#e6db74>&#34;info&#34;</span>, <span style=color:#e6db74>&#34;亚洲舞王&#34;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// hashMap是重写了toString()</span>
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;hashMap: &#34;</span> <span style=color:#f92672>+</span> hashMap);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 通过key删除指定键值对</span>
</span></span><span style=display:flex><span>        hashMap.<span style=color:#a6e22e>remove</span>(<span style=color:#e6db74>&#34;age&#34;</span>);
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(hashMap.<span style=color:#a6e22e>containsKey</span>(<span style=color:#e6db74>&#34;age&#34;</span>) <span style=color:#f92672>?</span> <span style=color:#e6db74>&#34;包含age键&#34;</span> : <span style=color:#e6db74>&#34;不包含age键&#34;</span>);
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(hashMap.<span style=color:#a6e22e>containsValue</span>(<span style=color:#e6db74>&#34;赵四&#34;</span>) <span style=color:#f92672>?</span> <span style=color:#e6db74>&#34;包含赵四值&#34;</span> : <span style=color:#e6db74>&#34;不包含赵四值&#34;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// map没有办法直接遍历</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// hashMap.keySet(): 获取hashMap容器中的所有key，并存储到一个Set容器中</span>
</span></span><span style=display:flex><span>        Set<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>&gt;</span> keys <span style=color:#f92672>=</span> hashMap.<span style=color:#a6e22e>keySet</span>();
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> (String key : keys) {
</span></span><span style=display:flex><span>            System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;遍历: &#34;</span> <span style=color:#f92672>+</span> key <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34; - &#34;</span> <span style=color:#f92672>+</span> hashMap.<span style=color:#a6e22e>get</span>(key));
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// hashMap.EntrySet(): 获取hashMap容器中的所有Entry，并存储到一个Set容器中</span>
</span></span><span style=display:flex><span>        Set<span style=color:#f92672>&lt;</span>Map.<span style=color:#a6e22e>Entry</span><span style=color:#f92672>&lt;</span>String, Object<span style=color:#f92672>&gt;&gt;</span> entries <span style=color:#f92672>=</span> hashMap.<span style=color:#a6e22e>entrySet</span>();
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> (Map.<span style=color:#a6e22e>Entry</span><span style=color:#f92672>&lt;</span>String, Object<span style=color:#f92672>&gt;</span> entry : entries) {
</span></span><span style=display:flex><span>            System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;遍历: &#34;</span> <span style=color:#f92672>+</span> entry.<span style=color:#a6e22e>getKey</span>() <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34; - &#34;</span> <span style=color:#f92672>+</span> entry.<span style=color:#a6e22e>getValue</span>());
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><blockquote><p>武技: 测试TreeMap排序映射容器</p></blockquote><ol><li>开发测试方法 <code>MapTest -> testTreeMap()</code>:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> collection;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/** @author lsx */</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>MapTest</span> {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/** TreeMap的常用API方法 */</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Test</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>testTreeMap</span>() {
</span></span><span style=display:flex><span>        TreeMap<span style=color:#f92672>&lt;</span>String, Object<span style=color:#f92672>&gt;</span> treeMap <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> TreeMap<span style=color:#f92672>&lt;&gt;</span>();
</span></span><span style=display:flex><span>        treeMap.<span style=color:#a6e22e>put</span>(<span style=color:#e6db74>&#34;1&#34;</span>, <span style=color:#e6db74>&#34;a&#34;</span>);
</span></span><span style=display:flex><span>        treeMap.<span style=color:#a6e22e>put</span>(<span style=color:#e6db74>&#34;3&#34;</span>, <span style=color:#e6db74>&#34;c&#34;</span>);
</span></span><span style=display:flex><span>        treeMap.<span style=color:#a6e22e>put</span>(<span style=color:#e6db74>&#34;2&#34;</span>, <span style=color:#e6db74>&#34;b&#34;</span>);
</span></span><span style=display:flex><span>        treeMap.<span style=color:#a6e22e>put</span>(<span style=color:#e6db74>&#34;4&#34;</span>, <span style=color:#e6db74>&#34;e&#34;</span>);
</span></span><span style=display:flex><span>        treeMap.<span style=color:#a6e22e>put</span>(<span style=color:#e6db74>&#34;5&#34;</span>, <span style=color:#e6db74>&#34;f&#34;</span>);
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;treeMap: &#34;</span> <span style=color:#f92672>+</span> treeMap);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 返回&gt;=2的所有值中的最小Entry</span>
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;&gt;=2的所有值中的最小Entry: &#34;</span> <span style=color:#f92672>+</span> treeMap.<span style=color:#a6e22e>ceilingEntry</span>(<span style=color:#e6db74>&#34;2&#34;</span>));
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 返回&gt;=4的所有值中的最小key</span>
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;&gt;=4的所有值中的最小key: &#34;</span> <span style=color:#f92672>+</span> treeMap.<span style=color:#a6e22e>ceilingKey</span>(<span style=color:#e6db74>&#34;4&#34;</span>));
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 返回&gt;2的所有值中的最小Entry</span>
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;&gt;2的所有值中的最小Entry: &#34;</span> <span style=color:#f92672>+</span> treeMap.<span style=color:#a6e22e>higherEntry</span>(<span style=color:#e6db74>&#34;2&#34;</span>));
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 返回&gt;2的所有值中的最小key</span>
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;&gt;2的所有值中的最小key: &#34;</span> <span style=color:#f92672>+</span> treeMap.<span style=color:#a6e22e>higherKey</span>(<span style=color:#e6db74>&#34;2&#34;</span>));
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 返回&lt;=4的所有值中的最大Entry</span>
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;&lt;=4的所有值中的最大Entry: &#34;</span> <span style=color:#f92672>+</span> treeMap.<span style=color:#a6e22e>floorEntry</span>(<span style=color:#e6db74>&#34;4&#34;</span>));
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 返回&lt;=2的所有值中的最大Key</span>
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;&lt;=2的所有值中的最大Key: &#34;</span> <span style=color:#f92672>+</span> treeMap.<span style=color:#a6e22e>floorKey</span>(<span style=color:#e6db74>&#34;2&#34;</span>));
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 返回&lt;4的所有值中的最大Entry</span>
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;&lt;4的所有值中的最大Entry: &#34;</span> <span style=color:#f92672>+</span> treeMap.<span style=color:#a6e22e>lowerEntry</span>(<span style=color:#e6db74>&#34;4&#34;</span>));
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 返回&lt;2的所有值中的最大Key</span>
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;&lt;2的所有值中的最大Key: &#34;</span> <span style=color:#f92672>+</span> treeMap.<span style=color:#a6e22e>lowerKey</span>(<span style=color:#e6db74>&#34;2&#34;</span>));
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 查询Map的自定义比较器实例，没有返回null。</span>
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;查询Map的自定义比较器实例: &#34;</span> <span style=color:#f92672>+</span> treeMap.<span style=color:#a6e22e>comparator</span>());
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 倒排所有Entry</span>
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;倒排所有Entry: &#34;</span> <span style=color:#f92672>+</span> treeMap.<span style=color:#a6e22e>descendingMap</span>());
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 倒排所有key</span>
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;倒排所有key: &#34;</span> <span style=color:#f92672>+</span> treeMap.<span style=color:#a6e22e>descendingKeySet</span>());
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 返回第一个Entry</span>
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;返回第一个Entry: &#34;</span> <span style=color:#f92672>+</span> treeMap.<span style=color:#a6e22e>firstEntry</span>());
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 返回第一个Key</span>
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;返回第一个Key: &#34;</span> <span style=color:#f92672>+</span> treeMap.<span style=color:#a6e22e>firstKey</span>());
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 返回最后一个Entry</span>
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;返回最后一个Entry: &#34;</span> <span style=color:#f92672>+</span> treeMap.<span style=color:#a6e22e>lastEntry</span>());
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 返回最后一个Key</span>
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;返回最后一个Key: &#34;</span> <span style=color:#f92672>+</span> treeMap.<span style=color:#a6e22e>lastKey</span>());
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 从头截取到4，不包括4</span>
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;从头截取到4，不包括4: &#34;</span> <span style=color:#f92672>+</span> treeMap.<span style=color:#a6e22e>headMap</span>(<span style=color:#e6db74>&#34;4&#34;</span>));
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 从头截取到4，包括4</span>
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;从头截取到4，包括4: &#34;</span> <span style=color:#f92672>+</span> treeMap.<span style=color:#a6e22e>headMap</span>(<span style=color:#e6db74>&#34;4&#34;</span>, <span style=color:#66d9ef>true</span>));
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 从3开始截取到末尾，包括3</span>
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;从3开始截取到末尾，包括3: &#34;</span> <span style=color:#f92672>+</span> treeMap.<span style=color:#a6e22e>tailMap</span>(<span style=color:#e6db74>&#34;3&#34;</span>));
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 从3开始截取到末尾，不包括3</span>
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;从3开始截取到末尾，不包括3: &#34;</span> <span style=color:#f92672>+</span> treeMap.<span style=color:#a6e22e>tailMap</span>(<span style=color:#e6db74>&#34;3&#34;</span>, <span style=color:#66d9ef>false</span>));
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 从2截取到4，包括2，不包括4</span>
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;从2截取到4，包括2，不包括4: &#34;</span> <span style=color:#f92672>+</span> treeMap.<span style=color:#a6e22e>subMap</span>(<span style=color:#e6db74>&#34;2&#34;</span>, <span style=color:#e6db74>&#34;4&#34;</span>));
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 从2截取到4，不包括2，包括4</span>
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;从2截取到4，不包括2，包括4: &#34;</span> <span style=color:#f92672>+</span> treeMap.<span style=color:#a6e22e>subMap</span>(<span style=color:#e6db74>&#34;2&#34;</span>, <span style=color:#66d9ef>false</span>, <span style=color:#e6db74>&#34;3&#34;</span>, <span style=color:#66d9ef>true</span>));
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=ep04-迭代器遍历法>EP04. 迭代器遍历法</h2><blockquote><p>心法: 迭代器 <code>Iterator</code></p></blockquote><ul><li>Iterator迭代器的遍历效率比for要优秀，且支持边遍历，边操作数据，但并不建议。</li><li>List/Set都可以直接获取迭代器对象，Map需要曲线救国。</li></ul><blockquote><p>武技: 使用迭代器遍历List，Set和Map</p></blockquote><ol><li>开发测试方法 <code>IteratorTest -> testIterList()</code>:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> collection;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/** @author lsx */</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@SuppressWarnings</span>(<span style=color:#e6db74>&#34;all&#34;</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>IteratorTest</span> {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/** 使用迭代器来遍历list */</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Test</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>testIterList</span>() {
</span></span><span style=display:flex><span>        List<span style=color:#f92672>&lt;</span>Integer<span style=color:#f92672>&gt;</span> nums <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> ArrayList<span style=color:#f92672>&lt;&gt;</span>();
</span></span><span style=display:flex><span>        nums.<span style=color:#a6e22e>add</span>(1);
</span></span><span style=display:flex><span>        nums.<span style=color:#a6e22e>add</span>(3);
</span></span><span style=display:flex><span>        nums.<span style=color:#a6e22e>add</span>(5);
</span></span><span style=display:flex><span>        nums.<span style=color:#a6e22e>add</span>(7);
</span></span><span style=display:flex><span>        nums.<span style=color:#a6e22e>add</span>(8);
</span></span><span style=display:flex><span>        nums.<span style=color:#a6e22e>add</span>(2);
</span></span><span style=display:flex><span>        nums.<span style=color:#a6e22e>add</span>(4);
</span></span><span style=display:flex><span>        nums.<span style=color:#a6e22e>add</span>(6);
</span></span><span style=display:flex><span>        nums.<span style=color:#a6e22e>add</span>(8);
</span></span><span style=display:flex><span>        nums.<span style=color:#a6e22e>add</span>(0);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// iterator()可以获取list的迭代器对象</span>
</span></span><span style=display:flex><span>        Iterator<span style=color:#f92672>&lt;</span>Integer<span style=color:#f92672>&gt;</span> it <span style=color:#f92672>=</span> nums.<span style=color:#a6e22e>iterator</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// it.hasNext() 用于判断迭代器中是否还有下一个元素</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>while</span> (it.<span style=color:#a6e22e>hasNext</span>()) {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#75715e>// it.next() 用于取出迭代器中的下一个元素</span>
</span></span><span style=display:flex><span>            System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(it.<span style=color:#a6e22e>next</span>());
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// .forEach()遍历: </span>
</span></span><span style=display:flex><span>        nums.<span style=color:#a6e22e>forEach</span>(System.<span style=color:#a6e22e>out</span>::println);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><ol start=2><li>开发测试方法 <code>IteratorTest -> testIterSet()</code>:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> collection;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/** @author lsx */</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@SuppressWarnings</span>(<span style=color:#e6db74>&#34;all&#34;</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>IteratorTest</span> {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/** 使用迭代器来遍历set */</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Test</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>testIterSet</span>() {
</span></span><span style=display:flex><span>        Set<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>&gt;</span> set <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> HashSet<span style=color:#f92672>&lt;&gt;</span>();
</span></span><span style=display:flex><span>        set.<span style=color:#a6e22e>add</span>(<span style=color:#e6db74>&#34;a&#34;</span>);
</span></span><span style=display:flex><span>        set.<span style=color:#a6e22e>add</span>(<span style=color:#e6db74>&#34;b&#34;</span>);
</span></span><span style=display:flex><span>        set.<span style=color:#a6e22e>add</span>(<span style=color:#e6db74>&#34;c&#34;</span>);
</span></span><span style=display:flex><span>        set.<span style=color:#a6e22e>add</span>(<span style=color:#e6db74>&#34;d&#34;</span>);
</span></span><span style=display:flex><span>        set.<span style=color:#a6e22e>add</span>(<span style=color:#e6db74>&#34;e&#34;</span>);
</span></span><span style=display:flex><span>        set.<span style=color:#a6e22e>add</span>(<span style=color:#e6db74>&#34;f&#34;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 获取set的迭代器对象</span>
</span></span><span style=display:flex><span>        Iterator<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>&gt;</span> it <span style=color:#f92672>=</span> set.<span style=color:#a6e22e>iterator</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// it.hasNext() 用于判断迭代器中是否还有下一个元素</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>while</span> (it.<span style=color:#a6e22e>hasNext</span>()) {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#75715e>// it.next() 用于取出迭代器中的下一个元素</span>
</span></span><span style=display:flex><span>            System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(it.<span style=color:#a6e22e>next</span>());
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// .forEach()遍历: </span>
</span></span><span style=display:flex><span>        set.<span style=color:#a6e22e>forEach</span>(System.<span style=color:#a6e22e>out</span>::println);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><ol start=3><li>开发测试方法 <code>IteratorTest -> testIterMap()</code>:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> collection;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/** @author lsx */</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@SuppressWarnings</span>(<span style=color:#e6db74>&#34;all&#34;</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>IteratorTest</span> {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/** 使用迭代器来间接遍历map */</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Test</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>testIterMap</span>() {
</span></span><span style=display:flex><span>        Map<span style=color:#f92672>&lt;</span>String, Object<span style=color:#f92672>&gt;</span> map <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> HashMap<span style=color:#f92672>&lt;&gt;</span>(5);
</span></span><span style=display:flex><span>        map.<span style=color:#a6e22e>put</span>(<span style=color:#e6db74>&#34;name&#34;</span>, <span style=color:#e6db74>&#34;赵四&#34;</span>);
</span></span><span style=display:flex><span>        map.<span style=color:#a6e22e>put</span>(<span style=color:#e6db74>&#34;age&#34;</span>, 58);
</span></span><span style=display:flex><span>        map.<span style=color:#a6e22e>put</span>(<span style=color:#e6db74>&#34;gender&#34;</span>, <span style=color:#e6db74>&#34;male&#34;</span>);
</span></span><span style=display:flex><span>        map.<span style=color:#a6e22e>put</span>(<span style=color:#e6db74>&#34;info&#34;</span>, <span style=color:#e6db74>&#34;亚洲舞王&#34;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 获取EntrySet的迭代器对象</span>
</span></span><span style=display:flex><span>        Iterator<span style=color:#f92672>&lt;</span>Map.<span style=color:#a6e22e>Entry</span><span style=color:#f92672>&lt;</span>String, Object<span style=color:#f92672>&gt;&gt;</span> it <span style=color:#f92672>=</span> map.<span style=color:#a6e22e>entrySet</span>().<span style=color:#a6e22e>iterator</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// it.hasNext() 用于判断迭代器中是否还有下一个元素</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>while</span> (it.<span style=color:#a6e22e>hasNext</span>()) {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#75715e>// it.next() 用于取出迭代器中的下一个元素</span>
</span></span><span style=display:flex><span>            System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(it.<span style=color:#a6e22e>next</span>());
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// .forEach()遍历: </span>
</span></span><span style=display:flex><span>        map.<span style=color:#a6e22e>forEach</span>((k, v) <span style=color:#f92672>-&gt;</span> System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(k <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;: &#34;</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;v&#34;</span>));
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h1 id=ch04-反射机制>CH04. 反射机制</h1><blockquote><p>心法: <code>reflection</code> 反射机制</p></blockquote><ul><li>反射机制指的是在程序运行期间，动态获取程序信息以及动态调用对象的功能：<ul><li>可以构造任意一个类的对象。</li><li>可以了解任意一个对象所属的类。</li><li>可以了解任意一个类的成员变量和方法。</li><li>可以调用任意一个对象的属性和方法。</li></ul></li><li>反射是Java动态性的一种体现。</li><li>反射的效率要低于正常调用，非必要情况下，不要使用。</li></ul><blockquote><p>心法: 反射过程</p></blockquote><ol><li>先得到某个类的Class对象。</li><li>再通过Class对象获取和使用其成员，包括私有成员。</li></ol><h2 id=ep01-获取类的对象>EP01. 获取类的对象</h2><blockquote><p>心法: 类的对象 <code>java.lang.Class</code></p></blockquote><ul><li>获取普通的Class对象:<ul><li><code>实例.getClass()</code>: 此方式要求必须先有类的实例。</li><li><code>类名.class</code>: 便捷但属于硬编码，对于JDK中内置的类，推荐使用此方式。</li><li><code>Class.forName("类全名")</code>: 软编码，需要处理异常，对于自定义类，推荐使用此方式。</li></ul></li><li>获取数组的Class对象:<ul><li>判断数组的Class对象是否相同的时候，只比较它们的类型和维度。</li></ul></li></ul><blockquote><p>武技: 获取普通的Class对象</p></blockquote><ol><li>开发测试方法 <code>ReflectTest -> testDemoClass()</code>:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> reflect;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/** @author lsx */</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@SuppressWarnings</span>(<span style=color:#e6db74>&#34;all&#34;</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>ReflectTest</span> {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/** 本类用于测试反射机制 */</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@NoArgsConstructor</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@AllArgsConstructor</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Data</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@CustomAnnotation</span>(<span style=color:#e6db74>&#34;飞机&#34;</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Demo</span> {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>private</span> String name;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>int</span> age;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>private</span> Map<span style=color:#f92672>&lt;</span>String, Object<span style=color:#f92672>&gt;</span> map;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/** 本注解类用于测试反射机制 */</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Target</span>({ElementType.<span style=color:#a6e22e>TYPE</span>, ElementType.<span style=color:#a6e22e>METHOD</span>})
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Retention</span>(RetentionPolicy.<span style=color:#a6e22e>RUNTIME</span>)
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@interface</span> CustomAnnotation {
</span></span><span style=display:flex><span>        String <span style=color:#a6e22e>value</span>() <span style=color:#66d9ef>default</span> <span style=color:#e6db74>&#34;&#34;</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/** 获取Demo类的Class对象 */</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@SneakyThrows</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Test</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>testDemoClass</span>() {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 方法一: 实例.getClass()</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 该方法要求必须先有实例</span>
</span></span><span style=display:flex><span>        Class<span style=color:#f92672>&lt;?&gt;</span> c01 <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Demo().<span style=color:#a6e22e>getClass</span>();
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;Demo的Class对象的hashCode: &#34;</span> <span style=color:#f92672>+</span> c01.<span style=color:#a6e22e>hashCode</span>());
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 方法二: 类名.class</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 便捷但属于硬编码，对于JDK中的类，推荐使用此方式</span>
</span></span><span style=display:flex><span>        Class<span style=color:#f92672>&lt;?&gt;</span> c02 <span style=color:#f92672>=</span> Demo.<span style=color:#a6e22e>class</span>;
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;Demo的Class对象的hashCode: &#34;</span> <span style=color:#f92672>+</span> c02.<span style=color:#a6e22e>hashCode</span>());
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 方法三: Class.forName(&#34;类全名&#34;)</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 软编码，需要处理异常，对于自定义类，推荐使用此方式</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 内部类使用 `$` 连接</span>
</span></span><span style=display:flex><span>        Class<span style=color:#f92672>&lt;?&gt;</span> c03 <span style=color:#f92672>=</span> Class.<span style=color:#a6e22e>forName</span>(<span style=color:#e6db74>&#34;reflect.ReflectTest$Demo&#34;</span>);
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;Demo的Class对象的hashCode: &#34;</span> <span style=color:#f92672>+</span> c03.<span style=color:#a6e22e>hashCode</span>());
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><blockquote><p>武技: 获取数组的Class对象</p></blockquote><ol><li>开发测试方法 <code>ReflectTest -> testArrayClass()</code>:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> reflect;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/** @author lsx */</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@SuppressWarnings</span>(<span style=color:#e6db74>&#34;all&#34;</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>ReflectTest</span> {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/** 获取数组的Class对象 */</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Test</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>testArrayClass</span>() {
</span></span><span style=display:flex><span>        Class<span style=color:#f92672>&lt;?&gt;</span> c01 <span style=color:#f92672>=</span> <span style=color:#66d9ef>int</span><span style=color:#f92672>[]</span>.<span style=color:#a6e22e>class</span>;
</span></span><span style=display:flex><span>        Class<span style=color:#f92672>&lt;?&gt;</span> c02 <span style=color:#f92672>=</span> <span style=color:#66d9ef>int</span><span style=color:#f92672>[]</span>.<span style=color:#a6e22e>class</span>;
</span></span><span style=display:flex><span>        Class<span style=color:#f92672>&lt;?&gt;</span> c03 <span style=color:#f92672>=</span> <span style=color:#66d9ef>double</span><span style=color:#f92672>[]</span>.<span style=color:#a6e22e>class</span>;
</span></span><span style=display:flex><span>        Class<span style=color:#f92672>&lt;?&gt;</span> c04 <span style=color:#f92672>=</span> <span style=color:#66d9ef>int</span><span style=color:#f92672>[][]</span>.<span style=color:#a6e22e>class</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// c01和c02类型相同，维度相同，所以hashCode相同，其余均不相同</span>
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;c01的hashCode值: &#34;</span> <span style=color:#f92672>+</span> c01.<span style=color:#a6e22e>hashCode</span>());
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;c02的hashCode值: &#34;</span> <span style=color:#f92672>+</span> c02.<span style=color:#a6e22e>hashCode</span>());
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;c03的hashCode值: &#34;</span> <span style=color:#f92672>+</span> c03.<span style=color:#a6e22e>hashCode</span>());
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;c04的hashCode值: &#34;</span> <span style=color:#f92672>+</span> c04.<span style=color:#a6e22e>hashCode</span>());
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=ep02-反射构造方法>EP02. 反射构造方法</h2><blockquote><p>心法: 反射构造方法</p></blockquote><table><thead><tr><th>API方法</th><th>描述</th></tr></thead><tbody><tr><td><code>c.getDeclaredConstructors()</code></td><td>获取类的所有构造器，需要处理异常</td></tr><tr><td><code>c.getDeclaredConstructor(形参)</code></td><td>获取指定的一个构造器</td></tr><tr><td><code>constructor.setAccessible(true)</code></td><td>开启私有访问权限，且可以提高运行效率</td></tr><tr><td><code>constructor.newInstance(形参)</code></td><td>等同于使用new来调用构造器的效果，需要处理异常</td></tr></tbody></table><blockquote><p>武技: 反射构造方法</p></blockquote><ol><li>开发测试方法 <code>ReflectTest -> testReflectConstructor()</code>:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> reflect;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/** @author lsx */</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@SuppressWarnings</span>(<span style=color:#e6db74>&#34;all&#34;</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>ReflectTest</span> {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/** 反射构造器 */</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@SneakyThrows</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Test</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>testReflectConstructor</span>() {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 获取Demo类的类对象</span>
</span></span><span style=display:flex><span>        Class<span style=color:#f92672>&lt;?&gt;</span> c <span style=color:#f92672>=</span> Demo.<span style=color:#a6e22e>class</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 获取全部构造器</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> (Constructor<span style=color:#f92672>&lt;?&gt;</span> constructor : c.<span style=color:#a6e22e>getDeclaredConstructors</span>()) {
</span></span><span style=display:flex><span>            System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;constructor: &#34;</span> <span style=color:#f92672>+</span> constructor);
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 获取指定构造器并开启私有访问权限</span>
</span></span><span style=display:flex><span>        Constructor constructor <span style=color:#f92672>=</span> c.<span style=color:#a6e22e>getDeclaredConstructor</span>(String.<span style=color:#a6e22e>class</span>, <span style=color:#66d9ef>int</span>.<span style=color:#a6e22e>class</span>, Map.<span style=color:#a6e22e>class</span>);
</span></span><span style=display:flex><span>        constructor.<span style=color:#a6e22e>setAccessible</span>(<span style=color:#66d9ef>true</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 使用构造器获取一个demo实例</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 相当于: Demo demo = new Demo(&#34;刘能&#34;, 68);</span>
</span></span><span style=display:flex><span>        Demo demo <span style=color:#f92672>=</span> (Demo) constructor.<span style=color:#a6e22e>newInstance</span>(<span style=color:#e6db74>&#34;刘能&#34;</span>, 68, <span style=color:#66d9ef>new</span> HashMap());
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 调用实例中的成员属性</span>
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;name: &#34;</span> <span style=color:#f92672>+</span> demo.<span style=color:#a6e22e>getName</span>());
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=ep03-反射成员属性>EP03. 反射成员属性</h2><blockquote><p>心法: 反射成员属性</p></blockquote><table><thead><tr><th>API方法</th><th>描述</th></tr></thead><tbody><tr><td><code>c.getDeclaredFields()</code></td><td>获取类的所有属性</td></tr><tr><td><code>c.getDeclaredField("属性名")</code></td><td>获取指定的一个属性</td></tr><tr><td><code>field.setAccessible(true)</code></td><td>开启私有访问权限，且可以提高运行效率</td></tr><tr><td><code>field.set(实例, 值)</code></td><td>往哪个实例的对应属性中设置值，<code>setInt()/setDouble()</code> 等同理</td></tr><tr><td><code>field.get(实例)</code></td><td>从哪个实例中取出对应属性的值，<code>getInt()/getDouble()</code> 等同理</td></tr></tbody></table><blockquote><p>武技: 反射成员属性</p></blockquote><ol><li>开发测试方法 <code>ReflectTest -> testReflectField()</code>:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> reflect;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/** @author lsx */</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@SuppressWarnings</span>(<span style=color:#e6db74>&#34;all&#34;</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>ReflectTest</span> {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/** 反射成员属性 */</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@SneakyThrows</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Test</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>testReflectField</span>() {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 获取Demo类的类对象</span>
</span></span><span style=display:flex><span>        Class<span style=color:#f92672>&lt;?&gt;</span> c <span style=color:#f92672>=</span> Demo.<span style=color:#a6e22e>class</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 获取全部属性</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> (Field field : c.<span style=color:#a6e22e>getDeclaredFields</span>()) {
</span></span><span style=display:flex><span>            System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;field: &#34;</span> <span style=color:#f92672>+</span> field);
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 获取指定属性并开启私有访问权限</span>
</span></span><span style=display:flex><span>        Field ageField <span style=color:#f92672>=</span> c.<span style=color:#a6e22e>getDeclaredField</span>(<span style=color:#e6db74>&#34;age&#34;</span>);
</span></span><span style=display:flex><span>        ageField.<span style=color:#a6e22e>setAccessible</span>(<span style=color:#66d9ef>true</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 获取一个demo实例</span>
</span></span><span style=display:flex><span>        Demo demo <span style=color:#f92672>=</span> (Demo) c.<span style=color:#a6e22e>getDeclaredConstructor</span>().<span style=color:#a6e22e>newInstance</span>();
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 获取demo中的age属性的值</span>
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;demo中age属性原值为: &#34;</span> <span style=color:#f92672>+</span> ageField.<span style=color:#a6e22e>get</span>(demo));
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 设置demoA中的age属性的值</span>
</span></span><span style=display:flex><span>        ageField.<span style=color:#a6e22e>set</span>(demo, 73);
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;demo中age属性新值为: &#34;</span> <span style=color:#f92672>+</span> ageField.<span style=color:#a6e22e>get</span>(demo));
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=ep04-反射成员方法>EP04. 反射成员方法</h2><blockquote><p>心法: 反射成员方法</p></blockquote><ul><li>反射方法并调用时可以直接跳过泛型检查:</li></ul><table><thead><tr><th>API方法</th><th>描述</th></tr></thead><tbody><tr><td><code>c.getDeclaredMethods()</code></td><td>获取类的所有方法，不包括继承下来的方法</td></tr><tr><td><code>c.getDeclaredMethod("方法名", 形参)</code></td><td>获取指定的一个方法</td></tr><tr><td><code>method.setAccessible(true)</code></td><td>开启私有访问权限，且可以提高运行效率</td></tr><tr><td><code>method.invoke(实例, 形参)</code></td><td>调用指定实例的方法并传入参数，静态方法p1传null即可</td></tr></tbody></table><blockquote><p>武技: 反射成员方法</p></blockquote><ol><li>开发测试方法 <code>ReflectTest -> testReflectMethod()</code>:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> reflect;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/** @author lsx */</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@SuppressWarnings</span>(<span style=color:#e6db74>&#34;all&#34;</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>ReflectTest</span> {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/** 反射成员方法 */</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@SneakyThrows</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Test</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>testReflectMethod</span>() {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 获取Demo类的类对象</span>
</span></span><span style=display:flex><span>        Class<span style=color:#f92672>&lt;?&gt;</span> c <span style=color:#f92672>=</span> Demo.<span style=color:#a6e22e>class</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 获取全部方法</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> (Method method : c.<span style=color:#a6e22e>getDeclaredMethods</span>()) {
</span></span><span style=display:flex><span>            System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;method: &#34;</span> <span style=color:#f92672>+</span> method);
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 获取指定方法并开启私有访问权限</span>
</span></span><span style=display:flex><span>        Method setNameMethod <span style=color:#f92672>=</span> c.<span style=color:#a6e22e>getDeclaredMethod</span>(<span style=color:#e6db74>&#34;setName&#34;</span>, String.<span style=color:#a6e22e>class</span>);
</span></span><span style=display:flex><span>        setNameMethod.<span style=color:#a6e22e>setAccessible</span>(<span style=color:#66d9ef>true</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 获取一个demo实例</span>
</span></span><span style=display:flex><span>        Demo demo <span style=color:#f92672>=</span> (Demo) c.<span style=color:#a6e22e>getDeclaredConstructor</span>().<span style=color:#a6e22e>newInstance</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 调用demo中的setName()方法</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 静态方法第一个参数传入null即可</span>
</span></span><span style=display:flex><span>        setNameMethod.<span style=color:#a6e22e>invoke</span>(demo, <span style=color:#e6db74>&#34;王云&#34;</span>);
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;name: &#34;</span> <span style=color:#f92672>+</span> demo.<span style=color:#a6e22e>getName</span>());
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=ep05-反射运行注解>EP05. 反射运行注解</h2><blockquote><p>心法: 反射运行注解</p></blockquote><ul><li>只有 <code>RetentionPolicy.RUNTIME</code> 的注解才可以被反射到。</li><li>若需要获取方法/属性上的注解，可直接使用方法/属性的实例调用以上API方法。</li></ul><table><thead><tr><th>API方法</th><th>描述</th></tr></thead><tbody><tr><td><code>c.getDeclaredAnnotations()</code></td><td>获取类上全部注解，不包括继承来的</td></tr><tr><td><code>c.getDeclaredAnnotation(注解名.class)</code></td><td>获取指定注解，不包括继承来的</td></tr></tbody></table><blockquote><p>武技: 反射运行注解</p></blockquote><ol><li>开发测试方法 <code>ReflectTest -> testReflectAnnotation()</code>:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> reflect;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/** @author lsx */</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@SuppressWarnings</span>(<span style=color:#e6db74>&#34;all&#34;</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>ReflectTest</span> {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/** 反射类上和方法上标记的运行时注解 */</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@SneakyThrows</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Test</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>testReflectAnnotation</span>() {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 获取Demo类的类对象</span>
</span></span><span style=display:flex><span>        Class<span style=color:#f92672>&lt;?&gt;</span> c <span style=color:#f92672>=</span> Demo.<span style=color:#a6e22e>class</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 获取类上的全部Retention为RUNTIME的注解</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> (Annotation annotation : c.<span style=color:#a6e22e>getDeclaredAnnotations</span>()) {
</span></span><span style=display:flex><span>            System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;annotation: &#34;</span> <span style=color:#f92672>+</span> annotation);
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 获取类上的@CustomAnnotation注解</span>
</span></span><span style=display:flex><span>        CustomAnnotation annoA <span style=color:#f92672>=</span> c.<span style=color:#a6e22e>getDeclaredAnnotation</span>(CustomAnnotation.<span style=color:#a6e22e>class</span>);
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (annoA <span style=color:#f92672>!=</span> <span style=color:#66d9ef>null</span>) {
</span></span><span style=display:flex><span>            System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;value: &#34;</span> <span style=color:#f92672>+</span> annoA.<span style=color:#a6e22e>value</span>());
</span></span><span style=display:flex><span>        } <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>            System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;Demo类上没有@CustomAnnotation注解...&#34;</span>);
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 获取方法上的@CustomAnnotation注解</span>
</span></span><span style=display:flex><span>        CustomAnnotation annoB <span style=color:#f92672>=</span> c.<span style=color:#a6e22e>getDeclaredMethod</span>(<span style=color:#e6db74>&#34;getName&#34;</span>).<span style=color:#a6e22e>getDeclaredAnnotation</span>(CustomAnnotation.<span style=color:#a6e22e>class</span>);
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (annoB <span style=color:#f92672>!=</span> <span style=color:#66d9ef>null</span>) {
</span></span><span style=display:flex><span>            System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;value: &#34;</span> <span style=color:#f92672>+</span> annoB.<span style=color:#a6e22e>value</span>());
</span></span><span style=display:flex><span>        } <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>            System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;getName()方法上没有@CustomAnnotation注解...&#34;</span>);
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=ep06-反射方法泛型>EP06. 反射方法泛型</h2><blockquote><p>心法: 反射方法参数的泛型</p></blockquote><table><thead><tr><th>API方法</th><th>描述</th></tr></thead><tbody><tr><td><code>method.getGenericParameterTypes()</code></td><td>获取方法的全部参数类型及其泛型类型</td></tr><tr><td><code>method.getGenericReturnType()</code></td><td>获取方法的返回值类型及其泛型类型</td></tr><tr><td><code>paramType.getTypeName()</code></td><td>获取参数类型的类全名</td></tr><tr><td><code>paramType instanceof ParameterizedType</code></td><td>参数类型是否带泛型ParameterizedType是Type的子接口，表示带泛型的参数类型</td></tr><tr><td><code>parameterizedType.getActualTypeArguments()</code></td><td>获取泛型类型对应的真实Java类型</td></tr></tbody></table><blockquote><p>武技: 反射方法参数的泛型</p></blockquote><ol><li>开发测试方法 <code>ReflectTest -> testReflectGenericType()</code>:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> reflect;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/** @author lsx */</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@SuppressWarnings</span>(<span style=color:#e6db74>&#34;all&#34;</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>ReflectTest</span> {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/** 反射方法参数类型和方法返回值类型的泛型 */</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@SneakyThrows</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Test</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>testReflectGenericType</span>() {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 获取Demo类的类对象</span>
</span></span><span style=display:flex><span>        Class<span style=color:#f92672>&lt;?&gt;</span> c <span style=color:#f92672>=</span> Demo.<span style=color:#a6e22e>class</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 获取 void setMap(Map&lt;String, Object&gt; map) 方法</span>
</span></span><span style=display:flex><span>        Method setMapMethod <span style=color:#f92672>=</span> c.<span style=color:#a6e22e>getDeclaredMethod</span>(<span style=color:#e6db74>&#34;setMap&#34;</span>, Map.<span style=color:#a6e22e>class</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 遍历 setMap() 的全部参数类型及其泛型类型</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> (Type paramType : setMapMethod.<span style=color:#a6e22e>getGenericParameterTypes</span>()) {
</span></span><span style=display:flex><span>            System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;完整参数类型: &#34;</span> <span style=color:#f92672>+</span> paramType.<span style=color:#a6e22e>getTypeName</span>());
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#75715e>// 如果参数带泛型（参数化类型）</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> (paramType <span style=color:#66d9ef>instanceof</span> ParameterizedType) {
</span></span><span style=display:flex><span>                ParameterizedType parameterizedType <span style=color:#f92672>=</span> (ParameterizedType) paramType;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>                <span style=color:#75715e>// 获取带泛型的参数的真实泛型类型</span>
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>for</span> (Type actualType : parameterizedType.<span style=color:#a6e22e>getActualTypeArguments</span>()) {
</span></span><span style=display:flex><span>                    System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;参数泛型类型: &#34;</span> <span style=color:#f92672>+</span> actualType.<span style=color:#a6e22e>getTypeName</span>());
</span></span><span style=display:flex><span>                }
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 获取 getMap() 的方法对象</span>
</span></span><span style=display:flex><span>        Method getMapMethod <span style=color:#f92672>=</span> c.<span style=color:#a6e22e>getDeclaredMethod</span>(<span style=color:#e6db74>&#34;getMap&#34;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 获取 getMap() 方法的返回值类型及其泛型类型</span>
</span></span><span style=display:flex><span>        Type returnType <span style=color:#f92672>=</span> getMapMethod.<span style=color:#a6e22e>getGenericReturnType</span>();
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;完整返回值类型: &#34;</span> <span style=color:#f92672>+</span> returnType.<span style=color:#a6e22e>getTypeName</span>());
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 如果返回值类型带泛型（参数化类型）</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (returnType <span style=color:#66d9ef>instanceof</span> ParameterizedType) {
</span></span><span style=display:flex><span>            ParameterizedType parameterizedType <span style=color:#f92672>=</span> (ParameterizedType) returnType;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#75715e>// 获取带泛型的返回值的真实泛型类型</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>for</span> (Type actualType : parameterizedType.<span style=color:#a6e22e>getActualTypeArguments</span>()) {
</span></span><span style=display:flex><span>                System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;返回值泛型类型: &#34;</span> <span style=color:#f92672>+</span> actualType.<span style=color:#a6e22e>getTypeName</span>());
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=ep07-动态编译代码>EP07. 动态编译代码</h2><blockquote><p>心法: 动态编译</p></blockquote><ul><li>动态编译指的是使用代码编译从客户端接收到的java文件中的代码。</li></ul><blockquote><p>武技: 测试动态编译</p></blockquote><ol><li>开发测试方法 <code>DynamicCompileTest -> testDynamicCompile()</code>:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> reflect;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/** @author lsx */</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>DynamicCompileTest</span> {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/** 动态编译 */</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Test</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>testDynamicCompile</span>() {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 提前在D盘开发一个HelloWorld.java文件</span>
</span></span><span style=display:flex><span>        String filePath <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;D:\\HelloWorld.java&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 获取系统编译器JavaCompiler实例</span>
</span></span><span style=display:flex><span>        JavaCompiler javac <span style=color:#f92672>=</span> ToolProvider.<span style=color:#a6e22e>getSystemJavaCompiler</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>/*
</span></span></span><span style=display:flex><span><span style=color:#75715e>         * p1: inputStream流，传递给javac的数据，填null表示使用 `System.in` 标准输入
</span></span></span><span style=display:flex><span><span style=color:#75715e>         * p2: outputStream流，javac返回的正确数据，填null表示使用 `System.out` 标准输出。
</span></span></span><span style=display:flex><span><span style=color:#75715e>         * p3: outputStream流，javac返回的错误信息，填null表示使用 `System.err` 错误输出。
</span></span></span><span style=display:flex><span><span style=color:#75715e>         * p4: String类型的不定长数组，可以传递一个或者多个java文件。
</span></span></span><span style=display:flex><span><span style=color:#75715e>         * return: 0代表全部java文件编译成功，其它返回值表示1或N个java文件编译失败。
</span></span></span><span style=display:flex><span><span style=color:#75715e>         * */</span>
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(javac.<span style=color:#a6e22e>run</span>(<span style=color:#66d9ef>null</span>, <span style=color:#66d9ef>null</span>, <span style=color:#66d9ef>null</span>, filePath) <span style=color:#f92672>==</span> 0 <span style=color:#f92672>?</span> <span style=color:#e6db74>&#34;编译成功&#34;</span> : <span style=color:#e6db74>&#34;编译失败&#34;</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=ep08-动态运行代码>EP08. 动态运行代码</h2><blockquote><p>心法: 动态运行</p></blockquote><ul><li>动态运行指的是使用代码运行从客户端接收到的class文件中的代码。</li></ul><blockquote><p>武技: 测试动态运行</p></blockquote><ol><li>开发测试方法 <code>DynamicCompileTest -> testDynamicRun()</code>:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> reflect;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/** @author lsx */</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>DynamicCompileTest</span> {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/** 动态运行 */</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Test</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@SneakyThrows</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>testDynamicRun</span>() {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 构建一个URL地址，指向一个目录，格式以 `file:` 开头</span>
</span></span><span style=display:flex><span>        URL url <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> URL(<span style=color:#e6db74>&#34;file:\\D:\\&#34;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 构建一个URL类加载器，并指定其工作范围（URL数组）</span>
</span></span><span style=display:flex><span>        URLClassLoader urlClassLoader <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> URLClassLoader(<span style=color:#66d9ef>new</span> URL<span style=color:#f92672>[]</span>{url});
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 将HelloWorld类的内容逐行加载到内存中，并返回该类的Class对象</span>
</span></span><span style=display:flex><span>        Class<span style=color:#f92672>&lt;?&gt;</span> c <span style=color:#f92672>=</span> urlClassLoader.<span style=color:#a6e22e>loadClass</span>(<span style=color:#e6db74>&#34;HelloWorld&#34;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 反射该类的main方法</span>
</span></span><span style=display:flex><span>        Method mainMethod <span style=color:#f92672>=</span> c.<span style=color:#a6e22e>getDeclaredMethod</span>(<span style=color:#e6db74>&#34;main&#34;</span>, String<span style=color:#f92672>[]</span>.<span style=color:#a6e22e>class</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 静态方法的回调，第一个参数填写null</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 参数强转为Object: 因为 `new String[]{&#34;a&#34;, &#34;b&#34;}` 会被拆分为两个参数 &#34;a&#34; 和 &#34;b&#34;</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 两个参数对于main()来说是错误的</span>
</span></span><span style=display:flex><span>        mainMethod.<span style=color:#a6e22e>invoke</span>(<span style=color:#66d9ef>null</span>, (Object) <span style=color:#66d9ef>new</span> String<span style=color:#f92672>[]</span>{<span style=color:#e6db74>&#34;a&#34;</span>, <span style=color:#e6db74>&#34;b&#34;</span>});
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 关闭URL类加载器以释放资源</span>
</span></span><span style=display:flex><span>        urlClassLoader.<span style=color:#a6e22e>close</span>();
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h1 id=ch05-流类操作>CH05. 流类操作</h1><blockquote><p>心法: 流类操作</p></blockquote><ul><li>大多数的应用程序都需要与外部设备如磁盘，硬盘和网络等进行数据交换，I/O流指的就是它们之间的交换方式，我们可以将I/O流理解为一根根功能各异的"管道"，java中有很 &ldquo;管道&rdquo;，都在 <code>java.io</code> 包中。</li><li>在所有的输出流和RandomAccessFile中，文件不存在会被自动创建，但目录不存在则直接报错。</li></ul><h2 id=ep01-流类之文件流>EP01. 流类之文件流</h2><blockquote><p>心法: 流类之文件流</p></blockquote><ul><li>文件流仅用于操作文件内容，需要释放资源。</li></ul><table><thead><tr><th>文件流</th><th>中文</th><th>实例化方式</th></tr></thead><tbody><tr><td><code>FileInputStream</code></td><td>文件字节输入流</td><td><code>new FileInputStream("文件路径")</code></td></tr><tr><td><code>FileOutputStream</code></td><td>文件字节输出流</td><td><code>new FileOutputStream("文件路径", true)</code>: p2为true表示追加</td></tr><tr><td><code>FileReader</code></td><td>文件字符输入流</td><td><code>new FileReader("文件路径")</code></td></tr><tr><td><code>FileWriter</code></td><td>文件字符输出流</td><td><code>new FileWriter("文件路径", true)</code>: p2为true表示追加</td></tr></tbody></table><blockquote><p>武技: 测试文件流</p></blockquote><ol><li>开发测试方法 <code>FileSeriesTest -> testFileInputStream()</code>:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> io;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/** @author lsx */</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>FileSeriesTest</span> {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> String filePath <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;io/HelloWorld.txt&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/** 需求: 将 &#34;io/HelloWorld.txt&#34; 的内容输入到程序中并打印在控制台，并计算总字节数 */</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@SneakyThrows</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Test</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>testFileInputStream</span>() {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 创建一个文件字节输入流</span>
</span></span><span style=display:flex><span>        FileInputStream fis <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> FileInputStream(filePath);
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;当前流中共有 &#34;</span> <span style=color:#f92672>+</span> fis.<span style=color:#a6e22e>available</span>() <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34; 个字节&#34;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// fis.read(): 从流中读取数据，若无数据返回-1</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>int</span> b;
</span></span><span style=display:flex><span>        StringBuilder result <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> StringBuilder();
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>while</span> ((b <span style=color:#f92672>=</span> fis.<span style=color:#a6e22e>read</span>()) <span style=color:#f92672>!=</span> <span style=color:#f92672>-</span>1) {
</span></span><span style=display:flex><span>            result.<span style=color:#a6e22e>append</span>((<span style=color:#66d9ef>char</span>) b);
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;result: &#34;</span> <span style=color:#f92672>+</span> result.<span style=color:#a6e22e>toString</span>());
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>();
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;当前流中共有 &#34;</span> <span style=color:#f92672>+</span> fis.<span style=color:#a6e22e>available</span>() <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34; 个字节&#34;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 释放资源</span>
</span></span><span style=display:flex><span>        fis.<span style=color:#a6e22e>close</span>();
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><ol start=2><li>开发测试方法 <code>FileSeriesTest -> testFileOutputStream()</code>:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> io;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/** @author lsx */</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>FileSeriesTest</span> {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> String filePath <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;io/HelloWorld.txt&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/** 需求: 将 &#34;io/HelloWorld.txt&#34; 的内容copy到 &#34;io/HelloWorld.java&#34; */</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@SneakyThrows</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Test</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>testFileOutputStream</span>() {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 设置目标路径</span>
</span></span><span style=display:flex><span>        String destPath <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;io/HelloWorld.java&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        FileInputStream fis <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> FileInputStream(filePath);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// p2设置为true表示内容追加</span>
</span></span><span style=display:flex><span>        FileOutputStream fos <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> FileOutputStream(destPath, <span style=color:#66d9ef>true</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 从HelloWorld.txt中每读取一个字节后立刻向HelloWorld.java写入这个字节</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>int</span> b;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>while</span> ((b <span style=color:#f92672>=</span> fis.<span style=color:#a6e22e>read</span>()) <span style=color:#f92672>!=</span> <span style=color:#f92672>-</span>1) {
</span></span><span style=display:flex><span>            fos.<span style=color:#a6e22e>write</span>(b);
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 将流中的数据强制冲刷到目标路径</span>
</span></span><span style=display:flex><span>        fos.<span style=color:#a6e22e>flush</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 释放资源</span>
</span></span><span style=display:flex><span>        fis.<span style=color:#a6e22e>close</span>();
</span></span><span style=display:flex><span>        fos.<span style=color:#a6e22e>close</span>();
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;复制完毕...&#34;</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><ol start=3><li>开发测试方法 <code>FileSeriesTest -> testFileReader()</code>:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> io;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/** @author lsx */</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>FileSeriesTest</span> {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> String filePath <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;io/HelloWorld.txt&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/** 需求: 将包含中文的 &#34;io/HelloWorld.txt&#34; 的内容输入到程序中并打印在控制台 */</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@SneakyThrows</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Test</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>testFileReader</span>() {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 创建要给文件字符输入流实例</span>
</span></span><span style=display:flex><span>        FileReader fr <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> FileReader(filePath);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// fr.getEncoding(): 打印当前编码</span>
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;当前编码: &#34;</span> <span style=color:#f92672>+</span> fr.<span style=color:#a6e22e>getEncoding</span>());
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 从io/HelloWorld.java中以字符为单位读取数据</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>int</span> b;
</span></span><span style=display:flex><span>        StringBuilder result <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> StringBuilder();
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>while</span> ((b <span style=color:#f92672>=</span> fr.<span style=color:#a6e22e>read</span>()) <span style=color:#f92672>!=</span> <span style=color:#f92672>-</span>1) {
</span></span><span style=display:flex><span>            result.<span style=color:#a6e22e>append</span>((<span style=color:#66d9ef>char</span>) b);
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;result: &#34;</span> <span style=color:#f92672>+</span> result.<span style=color:#a6e22e>toString</span>());
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 释放资源</span>
</span></span><span style=display:flex><span>        fr.<span style=color:#a6e22e>close</span>();
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><ol start=4><li>开发测试方法 <code>FileSeriesTest -> testFileWriter()</code>:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> io;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/** @author lsx */</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>FileSeriesTest</span> {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> String filePath <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;io/HelloWorld.txt&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/** 需求: 创建文件 &#34;io/Unicode.dat&#34;，包含65536个Unicode字符 */</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@SneakyThrows</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Test</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>testFileWriter</span>() {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 创建目标路径</span>
</span></span><span style=display:flex><span>        String destPath <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;io/Unicode.dat&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 创建文件字符输出流实例</span>
</span></span><span style=display:flex><span>        FileWriter fw <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> FileWriter(destPath);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 将0~65535写入目标文件</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> 0; i <span style=color:#f92672>&lt;</span> 65535; i<span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>            fw.<span style=color:#a6e22e>write</span>(i);
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 刷管</span>
</span></span><span style=display:flex><span>        fw.<span style=color:#a6e22e>flush</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 释放资源</span>
</span></span><span style=display:flex><span>        fw.<span style=color:#a6e22e>close</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;io/Unicode.dat写入完毕...&#34;</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=ep02-流类之缓冲流>EP02. 流类之缓冲流</h2><blockquote><p>心法: 流类之缓冲流</p></blockquote><ul><li>缓冲流自带一个默认8K的缓冲区，可以让传输过程更加高效和流畅。</li><li>全部缓冲流都支持在构造器的第二个参数中自定义缓冲区字节大小。</li><li>缓冲区字节大小和mark()有效期谁大谁生效。</li></ul><table><thead><tr><th>缓冲流</th><th>中文</th><th>实例化方式</th></tr></thead><tbody><tr><td><code>BufferedInputStream</code></td><td>缓冲字节输入流</td><td><code>new BufferedInputStream(字节输入流)</code></td></tr><tr><td><code>BufferedOutputStream</code></td><td>缓冲字节输出流</td><td><code>new BufferedOutputStream(字节输出流)</code></td></tr><tr><td><code>BufferedReader</code></td><td>缓冲字符输入流</td><td><code>new BufferedReader(字符输入流)</code></td></tr><tr><td><code>BufferedWriter</code></td><td>缓冲字符输出流</td><td><code>new BufferedWriter(字符输出流)</code></td></tr></tbody></table><blockquote><p>武技: 测试缓冲流</p></blockquote><ol><li>开发测试方法 <code>BufferedSeriesTest -> testBufferedInputStream()</code>:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> io;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/** @author lsx */</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>BufferedSeriesTest</span> {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> String filePath <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;io/HelloWorld.txt&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/** 需求: 对 `HelloWorld.txt` 文件进行中间部分内容读取 `blic blic blic` */</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@SneakyThrows</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Test</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>testBufferedInputStream</span>() {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 创建一个缓冲输入字节流，缓冲区大小初始化位5字节</span>
</span></span><span style=display:flex><span>        BufferedInputStream bis <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> BufferedInputStream(<span style=color:#66d9ef>new</span> FileInputStream(filePath), 5);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 打印3456号元素，并在在3号位置做标记，有效期为4，即4个字节内标记有效</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// mark()有效期和BufferedInputStream的缓存大小谁大谁生效</span>
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;跳过 &#34;</span> <span style=color:#f92672>+</span> bis.<span style=color:#a6e22e>skip</span>(2) <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34; 个字节&#34;</span>);
</span></span><span style=display:flex><span>        bis.<span style=color:#a6e22e>mark</span>(3);
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;pos-03: &#34;</span> <span style=color:#f92672>+</span> (<span style=color:#66d9ef>char</span>) bis.<span style=color:#a6e22e>read</span>());
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;pos-04: &#34;</span> <span style=color:#f92672>+</span> (<span style=color:#66d9ef>char</span>) bis.<span style=color:#a6e22e>read</span>());
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;pos-05: &#34;</span> <span style=color:#f92672>+</span> (<span style=color:#66d9ef>char</span>) bis.<span style=color:#a6e22e>read</span>());
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;pos-06: &#34;</span> <span style=color:#f92672>+</span> (<span style=color:#66d9ef>char</span>) bis.<span style=color:#a6e22e>read</span>());
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 光标回到mark的位置（3号位），继续打印3456号元素</span>
</span></span><span style=display:flex><span>        bis.<span style=color:#a6e22e>reset</span>();
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;pos-03: &#34;</span> <span style=color:#f92672>+</span> (<span style=color:#66d9ef>char</span>) bis.<span style=color:#a6e22e>read</span>());
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;pos-04: &#34;</span> <span style=color:#f92672>+</span> (<span style=color:#66d9ef>char</span>) bis.<span style=color:#a6e22e>read</span>());
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;pos-05: &#34;</span> <span style=color:#f92672>+</span> (<span style=color:#66d9ef>char</span>) bis.<span style=color:#a6e22e>read</span>());
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;pos-06: &#34;</span> <span style=color:#f92672>+</span> (<span style=color:#66d9ef>char</span>) bis.<span style=color:#a6e22e>read</span>());
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        bis.<span style=color:#a6e22e>close</span>();
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><ol start=2><li>开发测试方法 <code>BufferedSeriesTest -> testBufferedOutputStream()</code>:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> io;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/** @author lsx */</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>BufferedSeriesTest</span> {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> String filePath <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;io/HelloWorld.txt&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/** 需求: 对一个文件写入10个字母A */</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@SneakyThrows</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Test</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>testBufferedOutputStream</span>() {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        String destFile <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;io/buffered.txt&#34;</span>;
</span></span><span style=display:flex><span>        BufferedOutputStream bos <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> BufferedOutputStream(<span style=color:#66d9ef>new</span> FileOutputStream(destFile));
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 向 io/buffered.txt 文件写入10个字母A</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> 0; i <span style=color:#f92672>&lt;</span> 10; i<span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>            bos.<span style=color:#a6e22e>write</span>(<span style=color:#e6db74>&#39;A&#39;</span>);
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;写入完毕...&#34;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        bos.<span style=color:#a6e22e>flush</span>();
</span></span><span style=display:flex><span>        bos.<span style=color:#a6e22e>close</span>();
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><ol start=3><li>开发测试方法 <code>BufferedSeriesTest -> testBufferedReader()</code>:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> io;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/** @author lsx */</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>BufferedSeriesTest</span> {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> String filePath <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;io/HelloWorld.txt&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/** 需求: 一行一行地读取 `HelloWorld.txt` 文件，并打印在控制台上 */</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@SneakyThrows</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Test</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>testBufferedReader</span>() {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 创建缓冲字符输入流</span>
</span></span><span style=display:flex><span>        BufferedReader br <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> BufferedReader(<span style=color:#66d9ef>new</span> FileReader(filePath));
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 一行一行地读取 `HelloWorld.txt` 文件</span>
</span></span><span style=display:flex><span>        String str;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>while</span> ((str <span style=color:#f92672>=</span> br.<span style=color:#a6e22e>readLine</span>()) <span style=color:#f92672>!=</span> <span style=color:#66d9ef>null</span>) {
</span></span><span style=display:flex><span>            System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;str: &#34;</span> <span style=color:#f92672>+</span> str);
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        br.<span style=color:#a6e22e>close</span>();
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><ol start=4><li>开发测试方法 <code>BufferedSeriesTest -> testBufferedWriter()</code>:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> io;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/** @author lsx */</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>BufferedSeriesTest</span> {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/** 需求: 向指定文件写入100个随机数，每个随机数占据一行 */</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@SneakyThrows</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Test</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>testBufferedWriter</span>() {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 创建缓冲字符输出流</span>
</span></span><span style=display:flex><span>        String destFile <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;io/random.txt&#34;</span>;
</span></span><span style=display:flex><span>        BufferedWriter bw <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> BufferedWriter(<span style=color:#66d9ef>new</span> FileWriter(destFile));
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 向指定文件写入100个随机数，每个随机数占据一行</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> 0, j <span style=color:#f92672>=</span> 100; i <span style=color:#f92672>&lt;</span> j; i<span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>            bw.<span style=color:#a6e22e>write</span>(<span style=color:#e6db74>&#34;第&#34;</span> <span style=color:#f92672>+</span> (i <span style=color:#f92672>+</span> 1) <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;个随机数: &#34;</span> <span style=color:#f92672>+</span> (<span style=color:#66d9ef>new</span> Random().<span style=color:#a6e22e>nextInt</span>(100)));
</span></span><span style=display:flex><span>            bw.<span style=color:#a6e22e>newLine</span>();
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;写入完毕...&#34;</span>);
</span></span><span style=display:flex><span>        bw.<span style=color:#a6e22e>flush</span>();
</span></span><span style=display:flex><span>        bw.<span style=color:#a6e22e>close</span>();
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=ep03-流类之转换流>EP03. 流类之转换流</h2><blockquote><p>心法: 流类之转换流</p></blockquote><ul><li>我们可以利用处理转换流将字节流转换成对应的字符流。</li></ul><table><thead><tr><th>转换流</th><th>中文</th><th>实例化方式</th></tr></thead><tbody><tr><td><code>InputStreamReader</code></td><td>字节转字符输入流</td><td><code>new InputStreamReader(字节输入流, "编码")</code></td></tr><tr><td><code>OutputStreamWriter</code></td><td>字节转字符输出流</td><td><code>new OutputStreamWriter(字节输出流, "编码")</code></td></tr></tbody></table><blockquote><p>武技: 测试转换流</p></blockquote><ol><li>开发测试方法 <code>TransformSeriesTest -> main()</code>:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> io;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/** @author lsx */</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>TransformSeriesTest</span> {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * 需求: 设计模拟Scanner读取控制台信息的方法，要求输入 `exit` 时可以退出。
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * 提示: IDEA中的Junit和System.in或者Scanner有冲突，需要换成main方法测试。
</span></span></span><span style=display:flex><span><span style=color:#75715e>     */</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@SneakyThrows</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>main</span>(String<span style=color:#f92672>[]</span> args) {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;请输入您的内容: exit表示退出...&#34;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// System.in 就是一个 InputStream</span>
</span></span><span style=display:flex><span>        BufferedReader br <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> BufferedReader(<span style=color:#66d9ef>new</span> InputStreamReader(System.<span style=color:#a6e22e>in</span>));
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 程序会卡在 br.readLine() 的位置等待读取</span>
</span></span><span style=display:flex><span>        String str;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>while</span> ((str <span style=color:#f92672>=</span> br.<span style=color:#a6e22e>readLine</span>()) <span style=color:#f92672>!=</span> <span style=color:#66d9ef>null</span>) {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> (<span style=color:#e6db74>&#34;exit&#34;</span>.<span style=color:#a6e22e>equalsIgnoreCase</span>(str)) {
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>break</span>;
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>            System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;&gt;&gt; &#34;</span> <span style=color:#f92672>+</span> str);
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        br.<span style=color:#a6e22e>close</span>();
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><ol start=2><li>开发测试方法 <code>TransformSeriesTest -> testOutputStreamWriter()</code>:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> io;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/** @author lsx */</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>TransformSeriesTest</span> {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/** 需求: 向文件中写入一个UTF8的 &#34;你好&#34; 和一个 GBK的 &#34;世界&#34; */</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@SneakyThrows</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Test</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>testOutputStreamWriter</span>() {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 创建一个文件字节输出流</span>
</span></span><span style=display:flex><span>        FileOutputStream fos <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> FileOutputStream(<span style=color:#e6db74>&#34;io/hello.txt&#34;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        OutputStreamWriter oswU8 <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> OutputStreamWriter(fos, StandardCharsets.<span style=color:#a6e22e>UTF_8</span>);
</span></span><span style=display:flex><span>        oswU8.<span style=color:#a6e22e>write</span>(<span style=color:#e6db74>&#34;你好&#34;</span>);
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;当前编码: &#34;</span> <span style=color:#f92672>+</span> oswU8.<span style=color:#a6e22e>getEncoding</span>());
</span></span><span style=display:flex><span>        oswU8.<span style=color:#a6e22e>flush</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        OutputStreamWriter oswGbk <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> OutputStreamWriter(fos, <span style=color:#e6db74>&#34;GBK&#34;</span>);
</span></span><span style=display:flex><span>        oswGbk.<span style=color:#a6e22e>write</span>(<span style=color:#e6db74>&#34;世界&#34;</span>);
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;当前编码: &#34;</span> <span style=color:#f92672>+</span> oswGbk.<span style=color:#a6e22e>getEncoding</span>());
</span></span><span style=display:flex><span>        oswGbk.<span style=color:#a6e22e>flush</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 释放资源</span>
</span></span><span style=display:flex><span>        oswU8.<span style=color:#a6e22e>close</span>();
</span></span><span style=display:flex><span>        oswGbk.<span style=color:#a6e22e>close</span>();
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=ep04-流类之打印流>EP04. 流类之打印流</h2><blockquote><p>心法: 流类之打印流</p></blockquote><ul><li>打印流是输出语句的底层结构，无需抛出IO异常。</li></ul><table><thead><tr><th>打印流</th><th>中文</th><th>实例化方式</th></tr></thead><tbody><tr><td><code>PrintStream</code></td><td>字节打印流</td><td><code>new PrintStream(字节输出流)</code></td></tr><tr><td><code>PrintWriter</code></td><td>字符打印流</td><td><code>new PrintWriter(字节输出流)</code></td></tr></tbody></table><blockquote><p>武技: 测试打印流</p></blockquote><ol><li>开发测试方法 <code>PrintSeriesTest -> testPrintStream()</code>:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> io;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/** @author lsx */</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>PrintSeriesTest</span> {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/** 需求: 重新定义输出语句的目标位置为硬盘文件，并打印Unicode前128个字符，并还原 */</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@SneakyThrows</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Test</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>testPrintStream</span>() {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 创建一个打印字节流</span>
</span></span><span style=display:flex><span>        PrintStream ps <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> PrintStream(<span style=color:#66d9ef>new</span> FileOutputStream(<span style=color:#e6db74>&#34;io/ps.dat&#34;</span>));
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 将System.out做一个备份</span>
</span></span><span style=display:flex><span>        PrintStream outBak <span style=color:#f92672>=</span> System.<span style=color:#a6e22e>out</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 重新设置输出语句的位置为文件</span>
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>setOut</span>(ps);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> 0; i <span style=color:#f92672>&lt;</span> 128; i<span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>            System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>print</span>((<span style=color:#66d9ef>char</span>) i <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34; &#34;</span>);
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 重新设置输出语句的位置为控制台</span>
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>setOut</span>(outBak);
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;打印完毕...&#34;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 释放资源</span>
</span></span><span style=display:flex><span>        ps.<span style=color:#a6e22e>close</span>();
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><ol start=2><li>开发测试方法 <code>PrintSeriesTest -> testPrintWriter()</code>:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> io;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/** @author lsx */</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>PrintSeriesTest</span> {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/** 需求: 设计一个模拟Log4j（java的日志文件）工作的方法 */</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@SneakyThrows</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Test</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>testPrintWriter</span>() {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        String destFile <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;io/log.log&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 创建一个打印字符流</span>
</span></span><span style=display:flex><span>        PrintWriter pw <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> PrintWriter(<span style=color:#66d9ef>new</span> FileWriter(destFile, <span style=color:#66d9ef>true</span>));
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 记录日志内容: [时间] [日志级别] [类.方法: 行号]: 日志内容</span>
</span></span><span style=display:flex><span>        pw.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;[&#34;</span> <span style=color:#f92672>+</span> <span style=color:#66d9ef>new</span> Date() <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;] [INFO] [PrintSeriesTest.testPrintWriter: 65]: 添加了一个用户&#34;</span>);
</span></span><span style=display:flex><span>        pw.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;[&#34;</span> <span style=color:#f92672>+</span> <span style=color:#66d9ef>new</span> Date() <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;] [INFO] [PrintSeriesTest.testPrintWriter: 66]: 修改了一个用户&#34;</span>);
</span></span><span style=display:flex><span>        pw.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;[&#34;</span> <span style=color:#f92672>+</span> <span style=color:#66d9ef>new</span> Date() <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;] [INFO] [PrintSeriesTest.testPrintWriter: 67]: 删除了一个用户&#34;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;打印完毕...&#34;</span>);
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 释放资源</span>
</span></span><span style=display:flex><span>        pw.<span style=color:#a6e22e>close</span>();
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=ep05-流类之数据流>EP05. 流类之数据流</h2><blockquote><p>心法: 流类之数据流</p></blockquote><ul><li>数据流支持以Java类型为单位读取和写入数据。</li></ul><table><thead><tr><th>数据流</th><th>中文</th><th>实例化方式</th></tr></thead><tbody><tr><td><code>DataOutputStream</code></td><td>数据字节输出流</td><td><code>new PrintStream(字节输出流)</code></td></tr><tr><td><code>DataInputStream</code></td><td>数据字节输入流</td><td><code>new DataInputStream(字节输入流)</code></td></tr></tbody></table><blockquote><p>武技: 测试数据流</p></blockquote><ol><li>开发测试方法 <code>DataSeriesTest -> testDataOutputStream()</code>:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> io;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/** @author lsx */</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>DataSeriesTest</span> {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> String destFile <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;io/data.txt&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/** 需求: 将一个int，一个boolean和一个double写入文件 `io/data.txt`*/</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@SneakyThrows</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Test</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>testDataOutputStream</span>() {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 创建一个数据输出字节流</span>
</span></span><span style=display:flex><span>        DataOutputStream dos <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> DataOutputStream(<span style=color:#66d9ef>new</span> FileOutputStream(destFile));
</span></span><span style=display:flex><span>        dos.<span style=color:#a6e22e>writeInt</span>(250);
</span></span><span style=display:flex><span>        dos.<span style=color:#a6e22e>writeBoolean</span>(<span style=color:#66d9ef>true</span>);
</span></span><span style=display:flex><span>        dos.<span style=color:#a6e22e>writeDouble</span>(3.<span style=color:#a6e22e>14</span>);
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;写入完毕...&#34;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 刷管</span>
</span></span><span style=display:flex><span>        dos.<span style=color:#a6e22e>flush</span>();
</span></span><span style=display:flex><span>        dos.<span style=color:#a6e22e>close</span>();
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><ol start=2><li>开发测试方法 <code>DataSeriesTest -> testInputStream()</code>:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> io;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/** @author lsx */</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>DataSeriesTest</span> {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> String destFile <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;io/data.txt&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/** 需求: 从 `io/data.txt` 中读取一个int，一个boolean和一个double数据*/</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@SneakyThrows</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Test</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>testInputStream</span>() {
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 创建一个数据输入字节流</span>
</span></span><span style=display:flex><span>        DataInputStream dis <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> DataInputStream(<span style=color:#66d9ef>new</span> FileInputStream(destFile));
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;读取int: &#34;</span> <span style=color:#f92672>+</span> dis.<span style=color:#a6e22e>readInt</span>());
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;读取boolean: &#34;</span> <span style=color:#f92672>+</span> dis.<span style=color:#a6e22e>readBoolean</span>());
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;读取double: &#34;</span> <span style=color:#f92672>+</span> dis.<span style=color:#a6e22e>readDouble</span>());
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 释放资源</span>
</span></span><span style=display:flex><span>        dis.<span style=color:#a6e22e>close</span>();
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=ep06-流类之对象流>EP06. 流类之对象流</h2><h3 id=1-序列化>1. 序列化</h3><blockquote><p>心法: 序列化 <code>Serialization</code> 与反序列化 <code>Deserialization</code></p></blockquote><ul><li>序列化就是将数据对象转换为二进制流的过程：<ul><li>转换为二进制流，才可以进行数据持久化和网络传输。</li><li>序列化需要保留充分的信息以恢复数据对象，但是为了节约存储空间和网络带宽，序列化后的二进制流又要尽可能小。</li></ul></li><li>反序列化就是将二进制流转换为数据对象的过程：<ul><li>转换为数据对象，才可以进行Java代码操作。</li></ul></li></ul><blockquote><p>心法: JDK对象序列化方案</p></blockquote><ul><li>Java类通过实现Serializable接口来实现该类对象的序列化：<ul><li>该接口没有任何方法，只起标识作用。</li></ul></li><li>该序列化方案保留了对象类的元数据（如类、成员变量、继承类信息等），以及对象数据等，兼容性最好，但不支持跨语言，而且性能一般。</li><li>该序列化方案建议手动设置serialVersionUID字段值，若不设置，则每次运行时，编译器根据类的内部实现，包括类名、接口名、方法和属性等来自动生成serialVersionUID。如果类的源代码有修改，那么重新编译后serial VersionUID的取值可能会发生变化。因此实现Serializable接口的类一定要显式地定义serialVersionUID属性值。修改类时需要根据兼容性决定是否修改serialVersionUID值：<ul><li>兼容升级，请不要修改serialVersionUID字段，避免反序列化失败。</li><li>不兼容升级，需要修改serialVersionUID值，避免反序列化混乱。</li></ul></li></ul><blockquote><p>心法: 流类之对象流</p></blockquote><ul><li>对象流可以传输一个类对象，但要求该类必须是一个可序列化的类。</li><li>被 <code>transient</code> 修饰的属性不参与序列化过程，真实的值不可见，只可见其默认值。</li></ul><table><thead><tr><th>对象流</th><th>中文</th><th>实例化方式</th></tr></thead><tbody><tr><td><code>ObjectOutputStream</code></td><td>对象字节输出流</td><td><code>new ObjectOutputStream(字节输出流)</code></td></tr><tr><td><code>ObjectInputStream</code></td><td>对象字节输入流</td><td><code>new ObjectInputStream(字节输入流)</code></td></tr></tbody></table><blockquote><p>武技: 测试对象流</p></blockquote><ol><li>开发测试方法 <code>ObjectSeriesTest -> testObjectOutputStream()</code>:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> io;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/** @author lsx */</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>ObjectSeriesTest</span> {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> String destFile <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;io/student.txt&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/** 本类用于测试对象流 */</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Data</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@AllArgsConstructor</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@NoArgsConstructor</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Student</span> <span style=color:#66d9ef>implements</span> Serializable {
</span></span><span style=display:flex><span>        <span style=color:#75715e>/** 被transient修饰的属性无法参与序列化 */</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>transient</span> Integer age;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>private</span> String name;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/** 需求: 将Student类的实例写入 `io/student.txt` 文件中 */</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@SneakyThrows</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Test</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>testObjectOutputStream</span>() {
</span></span><span style=display:flex><span>        ObjectOutputStream oos <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> ObjectOutputStream(<span style=color:#66d9ef>new</span> FileOutputStream(destFile));
</span></span><span style=display:flex><span>        oos.<span style=color:#a6e22e>writeObject</span>(<span style=color:#66d9ef>new</span> Student(18, <span style=color:#e6db74>&#34;赵四&#34;</span>));
</span></span><span style=display:flex><span>        oos.<span style=color:#a6e22e>flush</span>();
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;写入完毕...&#34;</span>);
</span></span><span style=display:flex><span>        oos.<span style=color:#a6e22e>close</span>();
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><ol start=2><li>开发测试方法 <code>ObjectSeriesTest -> testObjectInputStream()</code>:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> io;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/** @author lsx */</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>ObjectSeriesTest</span> {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> String destFile <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;io/student.txt&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/** 本类用于测试对象流 */</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Data</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@AllArgsConstructor</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@NoArgsConstructor</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Student</span> <span style=color:#66d9ef>implements</span> Serializable {
</span></span><span style=display:flex><span>        <span style=color:#75715e>/** 被transient修饰的属性无法参与序列化 */</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>transient</span> Integer age;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>private</span> String name;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/** 需求: 从 `io/student.txt` 文件中读取Student类实例 */</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@SneakyThrows</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Test</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>testObjectInputStream</span>() {
</span></span><span style=display:flex><span>        ObjectInputStream ois <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> ObjectInputStream(<span style=color:#66d9ef>new</span> FileInputStream(destFile));
</span></span><span style=display:flex><span>        Student student <span style=color:#f92672>=</span> (Student) ois.<span style=color:#a6e22e>readObject</span>();
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;student: &#34;</span> <span style=color:#f92672>+</span> student);
</span></span><span style=display:flex><span>        ois.<span style=color:#a6e22e>close</span>();
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h1 id=ch06-常用工具>CH06. 常用工具</h1><h2 id=ep01-数学运算工具>EP01. 数学运算工具</h2><table><thead><tr><th>数学运算工具类</th><th>实例化方式</th><th>描述</th></tr></thead><tbody><tr><td><code>j.l.Math</code></td><td>静态方法</td><td>提供了大量用于数学运算的静态方法</td></tr><tr><td><code>j.u.Random</code></td><td><code>new Random()</code></td><td>提供生成指定范围随机数的API方法</td></tr></tbody></table><p><img src=/%E7%AC%AC1%E9%98%B6%E6%AE%B5-BASIC/JB1-4-%E9%AB%98%E7%BA%A7%E8%BF%9B%E9%98%B6/image/767ba8f3284465c0a78243b9c364adce.png alt=四舍五入原理图></p><blockquote><p>武技: 测试Math</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> tool;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/** @author lsx */</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>MathTest</span> {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/** Math常用API方法 */</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Test</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>testMath</span>() {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// java.lang.Math工具类: 无需导包，无需new</span>
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;最大值: &#34;</span> <span style=color:#f92672>+</span> Math.<span style=color:#a6e22e>max</span>(1, 2));
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;最小值: &#34;</span> <span style=color:#f92672>+</span> Math.<span style=color:#a6e22e>min</span>(1, 2));
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;绝对值: &#34;</span> <span style=color:#f92672>+</span> Math.<span style=color:#a6e22e>abs</span>(<span style=color:#f92672>-</span>2));
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;幂次方: &#34;</span> <span style=color:#f92672>+</span> Math.<span style=color:#a6e22e>pow</span>(2, 3));
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;向上取整: &#34;</span> <span style=color:#f92672>+</span> Math.<span style=color:#a6e22e>ceil</span>(1.<span style=color:#a6e22e>1</span>));
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;向下取整: &#34;</span> <span style=color:#f92672>+</span> Math.<span style=color:#a6e22e>floor</span>(1.<span style=color:#a6e22e>9</span>));
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;四舍五入: &#34;</span> <span style=color:#f92672>+</span> Math.<span style=color:#a6e22e>round</span>(<span style=color:#f92672>-</span>11.<span style=color:#a6e22e>5</span>));
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><blockquote><p>武技: 测试Random</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> tool;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/** @author lsx */</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>MathTest</span> {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/** Random常用API方法 */</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Test</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>testRandom</span>() {
</span></span><span style=display:flex><span>        <span style=color:#75715e>// java.util.Random工具类: 需要导包，需要new</span>
</span></span><span style=display:flex><span>        Random random <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Random();
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;随机获取一个 [0-1) 范围内的浮点数: &#34;</span> <span style=color:#f92672>+</span> random.<span style=color:#a6e22e>nextDouble</span>());
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;随机获取一个 [0-10) 范围内的整数: &#34;</span> <span style=color:#f92672>+</span> random.<span style=color:#a6e22e>nextInt</span>(10));
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=ep02-字符拼接工具>EP02. 字符拼接工具</h2><blockquote><p>心法: 字符串拼接建议</p></blockquote><ul><li>JDK7中加号，每次拼接都需要重新扩容char数组，对位赋值等工作，效率很低，不推荐。</li><li>JDK8中加号，底层使用StringBuilder，但每次拼接都创建StringBuilder实例，优化力度不够。</li><li>手动使用StringBuilder，仅创建一次StringBuilder实例，效率最好，强力推荐。</li></ul><table><thead><tr><th>字符串拼接工具类</th><th>实例化方式</th><th>描述</th></tr></thead><tbody><tr><td><code>java.lang.StringBuilder</code></td><td><code>new StringBuilder("值")</code></td><td>JDK1.5的产物，线程异步不安全，效率相对高</td></tr><tr><td><code>java.lang.StringBuffer</code></td><td><code>new StringBuffer("值")</code></td><td>JDK1.0的产物，线程同步安全，效率相对低</td></tr></tbody></table><blockquote><p>武技: 测试StringBuilder</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> tool;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/** @author lsx */</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@SuppressWarnings</span>(<span style=color:#e6db74>&#34;all&#34;</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>StringBuilderTest</span> {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/** StringBuilder常用API方法 */</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Test</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>testStringBuilder</span>() {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 创建StringBuilder时需要指定字符串内容</span>
</span></span><span style=display:flex><span>        StringBuilder sb <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> StringBuilder(<span style=color:#e6db74>&#34;abc&#34;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 向StringBuilder追加字符串和true</span>
</span></span><span style=display:flex><span>        sb.<span style=color:#a6e22e>append</span>(<span style=color:#e6db74>&#34;def&#34;</span>);
</span></span><span style=display:flex><span>        sb.<span style=color:#a6e22e>append</span>(<span style=color:#66d9ef>true</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;sb: &#34;</span> <span style=color:#f92672>+</span> sb.<span style=color:#a6e22e>toString</span>());
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;首次出现e的位置: &#34;</span> <span style=color:#f92672>+</span> sb.<span style=color:#a6e22e>indexOf</span>(<span style=color:#e6db74>&#34;e&#34;</span>));
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;最后一次出现e的位置: &#34;</span> <span style=color:#f92672>+</span> sb.<span style=color:#a6e22e>lastIndexOf</span>(<span style=color:#e6db74>&#34;e&#34;</span>));
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 在StringBuilder的6号位置插入一个&#34;g&#34;，其余元素依次向后移动</span>
</span></span><span style=display:flex><span>        sb.<span style=color:#a6e22e>insert</span>(6, <span style=color:#e6db74>&#34;g&#34;</span>);
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;sb: &#34;</span> <span style=color:#f92672>+</span> sb.<span style=color:#a6e22e>toString</span>());
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 将StringBuilder的6-8号位的值替换为&#34;G&#34;</span>
</span></span><span style=display:flex><span>        sb.<span style=color:#a6e22e>replace</span>(6, 8, <span style=color:#e6db74>&#34;G&#34;</span>);
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;sb: &#34;</span> <span style=color:#f92672>+</span> sb.<span style=color:#a6e22e>toString</span>());
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 将StringBuilder的7号位置的内容删除</span>
</span></span><span style=display:flex><span>        sb.<span style=color:#a6e22e>deleteCharAt</span>(7);
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;sb: &#34;</span> <span style=color:#f92672>+</span> sb.<span style=color:#a6e22e>toString</span>());
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 将StringBuilder的2号位置到4号位置的内容删除</span>
</span></span><span style=display:flex><span>        sb.<span style=color:#a6e22e>delete</span>(2, 4);
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;sb: &#34;</span> <span style=color:#f92672>+</span> sb.<span style=color:#a6e22e>toString</span>());
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 将StringBuilder的内容水平翻转</span>
</span></span><span style=display:flex><span>        sb.<span style=color:#a6e22e>reverse</span>();
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;sb: &#34;</span> <span style=color:#f92672>+</span> sb.<span style=color:#a6e22e>toString</span>());
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/** StringBuilder对比加号的拼接效率 */</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Test</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>testStringBuilderSplicingSpeed</span>() {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>long</span> start <span style=color:#f92672>=</span> 0L;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>long</span> end <span style=color:#f92672>=</span> 0L;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 测试+拼接效率</span>
</span></span><span style=display:flex><span>        String str <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;&#34;</span>;
</span></span><span style=display:flex><span>        start <span style=color:#f92672>=</span> System.<span style=color:#a6e22e>currentTimeMillis</span>();
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 使用+号循环拼接10万次字符串</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> 0; i <span style=color:#f92672>&lt;</span> 10_0000; i<span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>            str <span style=color:#f92672>+=</span> i;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        end <span style=color:#f92672>=</span> System.<span style=color:#a6e22e>currentTimeMillis</span>();
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;使用+拼接10w次耗时 &#34;</span> <span style=color:#f92672>+</span> (end <span style=color:#f92672>-</span> start) <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34; 毫秒&#34;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 测试StringBuilder拼接效率</span>
</span></span><span style=display:flex><span>        StringBuilder sb <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> StringBuilder(<span style=color:#e6db74>&#34;&#34;</span>);
</span></span><span style=display:flex><span>        start <span style=color:#f92672>=</span> System.<span style=color:#a6e22e>currentTimeMillis</span>();
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 使用+号循环拼接10万次字符串</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> 0; i <span style=color:#f92672>&lt;</span> 10_0000; i<span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>            sb.<span style=color:#a6e22e>append</span>(i);
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        end <span style=color:#f92672>=</span> System.<span style=color:#a6e22e>currentTimeMillis</span>();
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;使用StringBuilder拼接10w次耗时 &#34;</span> <span style=color:#f92672>+</span> (end <span style=color:#f92672>-</span> start) <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34; 毫秒&#34;</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=ep03-线性结构工具>EP03. 线性结构工具</h2><table><thead><tr><th>线性结构工具类</th><th>实例化方式</th><th>描述</th></tr></thead><tbody><tr><td><code>j.u.Arrays</code></td><td>静态方法</td><td>数组常用工具类</td></tr><tr><td><code>j.u.Stack</code></td><td><code>new Stack&lt;>()</code></td><td>一种LIFO的线性数据结构</td></tr><tr><td><code>j.u.Queue</code></td><td><code>new LinkedBlockingQueue&lt;>()</code></td><td>一种FIFO/LIFO的线性数据结构</td></tr><tr><td><code>j.u.BitSet</code></td><td><code>new BitSet()</code></td><td>可以按bit位存储一个布尔值</td></tr></tbody></table><p><img src=/%E7%AC%AC1%E9%98%B6%E6%AE%B5-BASIC/JB1-4-%E9%AB%98%E7%BA%A7%E8%BF%9B%E9%98%B6/image/0a125eaec78ebd04b63648ef943960c8.png alt=栈结构与队列结构></p><blockquote><p>武技: 测试Arrays</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> tool;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/** @author lsx */</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>ArraysTest</span> {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Test</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>testToString</span>() {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>int</span><span style=color:#f92672>[]</span> arr <span style=color:#f92672>=</span> {1, 2, 3, 4, 5};
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(Arrays.<span style=color:#a6e22e>toString</span>(arr));
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Test</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>testDeepToString</span>() {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>int</span><span style=color:#f92672>[][]</span> arr <span style=color:#f92672>=</span> {{1, 2}, {3, 4, 5}};
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(Arrays.<span style=color:#a6e22e>deepToString</span>(arr));
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Test</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>testFill</span>() {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>int</span><span style=color:#f92672>[]</span> arr <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#66d9ef>int</span><span style=color:#f92672>[</span>5<span style=color:#f92672>]</span>;
</span></span><span style=display:flex><span>        Arrays.<span style=color:#a6e22e>fill</span>(arr, 1);
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(Arrays.<span style=color:#a6e22e>toString</span>(arr));
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Test</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>testCopyOf</span>() {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>int</span><span style=color:#f92672>[]</span> arr <span style=color:#f92672>=</span> {1, 3, 5, 7, 9, 2, 4, 6, 8, 0};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 使用Arrays类拷贝数组</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>int</span><span style=color:#f92672>[]</span> arrNew <span style=color:#f92672>=</span> Arrays.<span style=color:#a6e22e>copyOf</span>(arr, arr.<span style=color:#a6e22e>length</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;使用Arrays拷贝数组: &#34;</span> <span style=color:#f92672>+</span> Arrays.<span style=color:#a6e22e>toString</span>(arrNew));
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Test</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>testAsList</span>() {
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(Arrays.<span style=color:#a6e22e>asList</span>(1, 2, 3, 4, 5, 6));
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Test</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>testBinarySearch</span>() {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>int</span><span style=color:#f92672>[]</span> arr <span style=color:#f92672>=</span> {1, 2, 3, 4, 5, 6};
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(Arrays.<span style=color:#a6e22e>binarySearch</span>(arr, 3));
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Test</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>testSort</span>() {
</span></span><span style=display:flex><span>        Integer<span style=color:#f92672>[]</span> arr <span style=color:#f92672>=</span> {1, 3, 2, 6, 5, 4, 3};
</span></span><span style=display:flex><span>        Arrays.<span style=color:#a6e22e>sort</span>(arr);
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;升序:&#34;</span> <span style=color:#f92672>+</span> Arrays.<span style=color:#a6e22e>toString</span>(arr));
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        Arrays.<span style=color:#a6e22e>sort</span>(arr, ((o1, o2) <span style=color:#f92672>-&gt;</span> o2 <span style=color:#f92672>-</span> o1));
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;降序:&#34;</span> <span style=color:#f92672>+</span> Arrays.<span style=color:#a6e22e>toString</span>(arr));
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><blockquote><p>武技: 测试Stack</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> tool;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/** @author lsx */</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>StackTest</span> {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/** Stack常用API方法 */</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Test</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>testStack</span>() {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 创建了一个栈结构</span>
</span></span><span style=display:flex><span>        Stack<span style=color:#f92672>&lt;</span>Integer<span style=color:#f92672>&gt;</span> stack <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Stack<span style=color:#f92672>&lt;&gt;</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 入栈</span>
</span></span><span style=display:flex><span>        stack.<span style=color:#a6e22e>push</span>(100);
</span></span><span style=display:flex><span>        stack.<span style=color:#a6e22e>push</span>(250);
</span></span><span style=display:flex><span>        stack.<span style=color:#a6e22e>push</span>(370);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 出栈: 弹出栈顶元素</span>
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(stack.<span style=color:#a6e22e>pop</span>());
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(stack.<span style=color:#a6e22e>pop</span>());
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 查看栈顶元素</span>
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(stack.<span style=color:#a6e22e>peek</span>());
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 栈结构可直接打印输出</span>
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(stack);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 查看栈是否为空</span>
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(stack.<span style=color:#a6e22e>empty</span>() <span style=color:#f92672>?</span> <span style=color:#e6db74>&#34;栈为空&#34;</span> : <span style=color:#e6db74>&#34;栈不为空&#34;</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><blockquote><p>武技: 测试Queue</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> tool;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/** @author lsx */</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>QueueTest</span> {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/** Queue常用API方法 */</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Test</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>testQueue</span>() {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 使用多态方式创建队列</span>
</span></span><span style=display:flex><span>        Queue<span style=color:#f92672>&lt;</span>Integer<span style=color:#f92672>&gt;</span> queue <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> LinkedBlockingQueue<span style=color:#f92672>&lt;&gt;</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 入队列</span>
</span></span><span style=display:flex><span>        queue.<span style=color:#a6e22e>add</span>(100);
</span></span><span style=display:flex><span>        queue.<span style=color:#a6e22e>add</span>(250);
</span></span><span style=display:flex><span>        queue.<span style=color:#a6e22e>add</span>(370);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 出队列: 弹出队列头</span>
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(queue.<span style=color:#a6e22e>poll</span>());
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(queue.<span style=color:#a6e22e>poll</span>());
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 查看队列头</span>
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(queue.<span style=color:#a6e22e>peek</span>());
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 队列结构可直接打印输出</span>
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(queue);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 查看队列是否为空</span>
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(queue.<span style=color:#a6e22e>isEmpty</span>() <span style=color:#f92672>?</span> <span style=color:#e6db74>&#34;队列为空&#34;</span> : <span style=color:#e6db74>&#34;队列不为空&#34;</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><blockquote><p>武技: 测试BitSet</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> tool;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/** @author lsx */</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>BitSetTest</span> {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/** BitSet常用API方法 */</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Test</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>testBitSet</span>() {
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 创建一个位组，默认64个false</span>
</span></span><span style=display:flex><span>        BitSet bitSet <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> BitSet();
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;位组当前容量: &#34;</span> <span style=color:#f92672>+</span> bitSet.<span style=color:#a6e22e>size</span>());
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 设置位组中0号位为true，不触发扩容</span>
</span></span><span style=display:flex><span>        bitSet.<span style=color:#a6e22e>set</span>(0);
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;0号位置的值: &#34;</span> <span style=color:#f92672>+</span> bitSet.<span style=color:#a6e22e>get</span>(0));
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;位组当前容量: &#34;</span> <span style=color:#f92672>+</span> bitSet.<span style=color:#a6e22e>size</span>());
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 设置位组中64号位为true，触发扩容</span>
</span></span><span style=display:flex><span>        bitSet.<span style=color:#a6e22e>set</span>(64);
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;64号位置的值: &#34;</span> <span style=color:#f92672>+</span> bitSet.<span style=color:#a6e22e>get</span>(64));
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;位组当前容量: &#34;</span> <span style=color:#f92672>+</span> bitSet.<span style=color:#a6e22e>size</span>());
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 返回位组中500号位的值，不触发扩容</span>
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;500号位置的值: &#34;</span> <span style=color:#f92672>+</span> bitSet.<span style=color:#a6e22e>get</span>(500));
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;位组当前容量: &#34;</span> <span style=color:#f92672>+</span> bitSet.<span style=color:#a6e22e>size</span>());
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=ep04-日期时间工具>EP04. 日期时间工具</h2><table><thead><tr><th>日期时间工具类</th><th>实例化方式</th><th>描述</th></tr></thead><tbody><tr><td><code>j.u.Date</code></td><td><code>new Date()</code></td><td>用于表示指定的日期对象，可以精确到毫秒</td></tr><tr><td><code>j.u.SimpleDateFormat</code></td><td><code>new SimpleDateFormat("格式")</code></td><td>用于格式化日期和解析日期字符串，线程不安全</td></tr><tr><td><code>j.t.DateFormat</code></td><td><code>DateFormat.getInstance()</code></td><td>SimpleDateFormat类的抽象父类内置了一些日期模板</td></tr><tr><td><code>j.t.LocalDateTime</code></td><td><code>LocalDateTime.now()</code></td><td>线程安全的本地日期 + 时间</td></tr><tr><td><code>j.t.LocalDate</code></td><td><code>LocalDate.now()</code></td><td>线程安全的本地日期</td></tr><tr><td><code>j.t.LocalTime</code></td><td><code>LocalTime.now()</code></td><td>线程安全的本地时间</td></tr><tr><td><code>j.u.Calendar</code></td><td><code>Calendar.getInstance()</code></td><td>设置和获取日期数据的某一个部分</td></tr></tbody></table><blockquote><p>武技: 测试Date</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> tool;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/** @author lsx */</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>DateTest</span> {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/** Date常用API方法 */</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Test</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@SneakyThrows</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>testDate</span>() {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 当不指定时间戳时，创建的的就是本地的当前时间</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// Date重写了toString()方法，可以直接打印</span>
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#66d9ef>new</span> Date());
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 当指定long类型的时间戳时，则创建的就是指定的日期</span>
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#66d9ef>new</span> Date(100_0000L));
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><blockquote><p>武技: 测试SimpleDateFormat</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> tool;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/** @author lsx */</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>DateTest</span> {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/** DateFormat常用API方法 */</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Test</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@SneakyThrows</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>testDateFormat</span>() {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 通过DateFormat类来设置一个日期模板</span>
</span></span><span style=display:flex><span>        SimpleDateFormat sdf <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> SimpleDateFormat(<span style=color:#e6db74>&#34;yyyy年MM月dd日 hh:mm:ss.SSS&#34;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 格式化: date -&gt; string</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 将date按照我们的模板来进行转换，最终返回一个自定义格式的字符串</span>
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(sdf.<span style=color:#a6e22e>format</span>(<span style=color:#66d9ef>new</span> Date()));
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 解析: string - date</span>
</span></span><span style=display:flex><span>        String dateStr <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;2021年06月10日 14:18:33.666&#34;</span>;
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(sdf.<span style=color:#a6e22e>parse</span>(dateStr));
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><blockquote><p>武技: 测试DateFormat</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> tool;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/** @author lsx */</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>DateTest</span> {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/** DateFormat内置日期模板 */</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Test</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>testDateFormatGetInstance</span>() {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        DateFormat defaultFormat <span style=color:#f92672>=</span> DateFormat.<span style=color:#a6e22e>getInstance</span>();
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;默认模板: &#34;</span> <span style=color:#f92672>+</span> defaultFormat.<span style=color:#a6e22e>format</span>(<span style=color:#66d9ef>new</span> Date()));
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        DateFormat fullFormat <span style=color:#f92672>=</span> DateFormat.<span style=color:#a6e22e>getDateTimeInstance</span>(DateFormat.<span style=color:#a6e22e>FULL</span>, DateFormat.<span style=color:#a6e22e>FULL</span>);
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;FULL模板: &#34;</span> <span style=color:#f92672>+</span> fullFormat.<span style=color:#a6e22e>format</span>(<span style=color:#66d9ef>new</span> Date()));
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        DateFormat longFormat <span style=color:#f92672>=</span> DateFormat.<span style=color:#a6e22e>getDateTimeInstance</span>(DateFormat.<span style=color:#a6e22e>LONG</span>, DateFormat.<span style=color:#a6e22e>LONG</span>);
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;LONG模板: &#34;</span> <span style=color:#f92672>+</span> longFormat.<span style=color:#a6e22e>format</span>(<span style=color:#66d9ef>new</span> Date()));
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        DateFormat mediumFormat <span style=color:#f92672>=</span> DateFormat.<span style=color:#a6e22e>getDateTimeInstance</span>(DateFormat.<span style=color:#a6e22e>MEDIUM</span>, DateFormat.<span style=color:#a6e22e>MEDIUM</span>);
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;MEDIUM模板: &#34;</span> <span style=color:#f92672>+</span> mediumFormat.<span style=color:#a6e22e>format</span>(<span style=color:#66d9ef>new</span> Date()));
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        DateFormat shortFormat <span style=color:#f92672>=</span> DateFormat.<span style=color:#a6e22e>getDateTimeInstance</span>(DateFormat.<span style=color:#a6e22e>SHORT</span>, DateFormat.<span style=color:#a6e22e>SHORT</span>);
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;SHORT模板: &#34;</span> <span style=color:#f92672>+</span> shortFormat.<span style=color:#a6e22e>format</span>(<span style=color:#66d9ef>new</span> Date()));
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><blockquote><p>武技: 测试LocalDate</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> tool;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/** @author lsx */</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>DateTest</span> {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/** LocalDate常用API方法 */</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Test</span>  
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>testLocalDate</span>() {  
</span></span><span style=display:flex><span>	  
</span></span><span style=display:flex><span>	    <span style=color:#75715e>// 获取当前时间  </span>
</span></span><span style=display:flex><span>	    System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(LocalDateTime.<span style=color:#a6e22e>now</span>());  
</span></span><span style=display:flex><span>	    System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(LocalDateTime.<span style=color:#a6e22e>now</span>(ZoneOffset.<span style=color:#a6e22e>of</span>(<span style=color:#e6db74>&#34;+8&#34;</span>)));  
</span></span><span style=display:flex><span>	  
</span></span><span style=display:flex><span>	    <span style=color:#75715e>// 自定义时间  </span>
</span></span><span style=display:flex><span>	    System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(LocalDate.<span style=color:#a6e22e>of</span>(2019, 1, 12));  
</span></span><span style=display:flex><span>	  
</span></span><span style=display:flex><span>	    <span style=color:#75715e>// 获取当前时间戳  </span>
</span></span><span style=display:flex><span>	    Long milliSecond <span style=color:#f92672>=</span> LocalDateTime.<span style=color:#a6e22e>now</span>().<span style=color:#a6e22e>toInstant</span>(ZoneOffset.<span style=color:#a6e22e>of</span>(<span style=color:#e6db74>&#34;+8&#34;</span>)).<span style=color:#a6e22e>toEpochMilli</span>();  
</span></span><span style=display:flex><span>	    System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(milliSecond);  
</span></span><span style=display:flex><span>	  
</span></span><span style=display:flex><span>	    <span style=color:#75715e>// 解析: 字符串 -&gt; 时间  </span>
</span></span><span style=display:flex><span>	    String dateStr <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;2024-03-14&#34;</span>;  
</span></span><span style=display:flex><span>	    System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(LocalDate.<span style=color:#a6e22e>parse</span>(dateStr, DateTimeFormatter.<span style=color:#a6e22e>ofPattern</span>(<span style=color:#e6db74>&#34;yyyy-MM-dd&#34;</span>)));  
</span></span><span style=display:flex><span>	  
</span></span><span style=display:flex><span>	    <span style=color:#75715e>// 格式化: 时间 -&gt; 字符串  </span>
</span></span><span style=display:flex><span>	    LocalDateTime now <span style=color:#f92672>=</span> LocalDateTime.<span style=color:#a6e22e>now</span>();  
</span></span><span style=display:flex><span>	    System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(now.<span style=color:#a6e22e>format</span>(DateTimeFormatter.<span style=color:#a6e22e>ofPattern</span>(<span style=color:#e6db74>&#34;yyyy年MM月dd日&#34;</span>)));  
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><blockquote><p>武技: 测试Calendar</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> tool;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/** @author lsx */</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>DateTest</span> {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/** Calendar常用API方法 */</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Test</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>testCalendar</span>() {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 快速获取一个日历实例，默认使用当前本地日期</span>
</span></span><span style=display:flex><span>        Calendar calendar <span style=color:#f92672>=</span> Calendar.<span style=color:#a6e22e>getInstance</span>();
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 获取当前日历中的Date数据</span>
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;日历: &#34;</span> <span style=color:#f92672>+</span> calendar.<span style=color:#a6e22e>getTime</span>());
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 获取日历中的指定属性（老外视1月为常量0，视周日为常量1）</span>
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;年份: &#34;</span> <span style=color:#f92672>+</span> calendar.<span style=color:#a6e22e>get</span>(Calendar.<span style=color:#a6e22e>YEAR</span>));
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;月份: &#34;</span> <span style=color:#f92672>+</span> calendar.<span style=color:#a6e22e>get</span>(Calendar.<span style=color:#a6e22e>MONTH</span>) <span style=color:#f92672>+</span> 1);
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;日期: &#34;</span> <span style=color:#f92672>+</span> calendar.<span style=color:#a6e22e>get</span>(Calendar.<span style=color:#a6e22e>DATE</span>));
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;星期: &#34;</span> <span style=color:#f92672>+</span> (calendar.<span style=color:#a6e22e>get</span>(Calendar.<span style=color:#a6e22e>DAY_OF_WEEK</span>) <span style=color:#f92672>-</span> 1));
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;小时: &#34;</span> <span style=color:#f92672>+</span> calendar.<span style=color:#a6e22e>get</span>(Calendar.<span style=color:#a6e22e>HOUR</span>));
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;分钟: &#34;</span> <span style=color:#f92672>+</span> calendar.<span style=color:#a6e22e>get</span>(Calendar.<span style=color:#a6e22e>MINUTE</span>));
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;秒数: &#34;</span> <span style=color:#f92672>+</span> calendar.<span style=color:#a6e22e>get</span>(Calendar.<span style=color:#a6e22e>SECOND</span>));
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 设置日历的时间为指定Date数据</span>
</span></span><span style=display:flex><span>        calendar.<span style=color:#a6e22e>setTime</span>(<span style=color:#66d9ef>new</span> Date(10_0000_0000L));
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;日历: &#34;</span> <span style=color:#f92672>+</span> calendar.<span style=color:#a6e22e>getTime</span>());
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 将年份减去1</span>
</span></span><span style=display:flex><span>        calendar.<span style=color:#a6e22e>add</span>(Calendar.<span style=color:#a6e22e>YEAR</span>, <span style=color:#f92672>-</span>1);
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;日历: &#34;</span> <span style=color:#f92672>+</span> calendar.<span style=color:#a6e22e>getTime</span>());
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 设置日历为1日</span>
</span></span><span style=display:flex><span>        calendar.<span style=color:#a6e22e>set</span>(Calendar.<span style=color:#a6e22e>DATE</span>, 1);
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;日历: &#34;</span> <span style=color:#f92672>+</span> calendar.<span style=color:#a6e22e>getTime</span>());
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=ep05-文件对象工具>EP05. 文件对象工具</h2><table><thead><tr><th>文件对象工具类</th><th>实例化方式</th><th>描述</th></tr></thead><tbody><tr><td><code>j.u.File</code></td><td><code>new File("文件路径")</code></td><td>用于操作硬盘文件本身</td></tr><tr><td><code>j.u.RandomAccessFile</code></td><td><code>new RandomAccessFile("文件路径", "rw")</code></td><td>通过位置指示器从指定的位置开始访问文件数据</td></tr><tr><td><code>j.n.c.StandardCharsets</code></td><td><code>StandardCharsets.UTF_8</code></td><td>用于返回编码实例</td></tr><tr><td><code>j.n.f.Paths</code></td><td><code>Paths.get(文件对象)</code></td><td>返回指定路径对应的Path实例</td></tr><tr><td><code>j.u.Files</code></td><td><code>Files.writeString(路径, "内容", 编码)</code><code>Files.readString(路径, 编码)</code></td><td>按指定编码向文件中写入内容按指定编码从文件中读取内容</td></tr></tbody></table><blockquote><p>武技: 测试File</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> tool;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/** @author lsx */</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>FileTest</span> {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/** File工具类创建本地文件 */</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@SneakyThrows</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Test</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>testCreateFile</span>() {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 相对路径从项目出发，绝对路径从盘符出发</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 支持使用 File.separator 动态生成的路径分隔符</span>
</span></span><span style=display:flex><span>        String filePath <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;io&#34;</span> <span style=color:#f92672>+</span> File.<span style=color:#a6e22e>separator</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;start.txt&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 创建一个File实例，注意此时文件并未真正生成</span>
</span></span><span style=display:flex><span>        File file <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> File(filePath);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 若file的父文件不存在，则创建一个</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// file.getParentFile(): 返回file的父文件（File类型）</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// file.exists(): 返回文件/目录是否存在</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// file.mkdirs(): 创建多层目录，返回布尔值</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (<span style=color:#f92672>!</span>file.<span style=color:#a6e22e>getParentFile</span>().<span style=color:#a6e22e>exists</span>()) {
</span></span><span style=display:flex><span>            System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(file.<span style=color:#a6e22e>getParentFile</span>().<span style=color:#a6e22e>mkdirs</span>() <span style=color:#f92672>?</span> <span style=color:#e6db74>&#34;目录创建成功&#34;</span> : <span style=color:#e6db74>&#34;目录创建失败&#34;</span>);
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 若file存在，则删除该file</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// file.delete(): 彻底删除文件/目录，不进回收站，目录必须是空的才可以删除。</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (file.<span style=color:#a6e22e>exists</span>()) {
</span></span><span style=display:flex><span>            <span style=color:#75715e>// 彻底删除文件/目录，不进回收站，目录必须是空的才可以删除</span>
</span></span><span style=display:flex><span>            System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(file.<span style=color:#a6e22e>delete</span>() <span style=color:#f92672>?</span> <span style=color:#e6db74>&#34;文件/目录删除成功&#34;</span> : <span style=color:#e6db74>&#34;文件/目录删除失败&#34;</span>);
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 创建文件</span>
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(file.<span style=color:#a6e22e>createNewFile</span>() <span style=color:#f92672>?</span> <span style=color:#e6db74>&#34;文件创建成功&#34;</span> : <span style=color:#e6db74>&#34;文件创建失败&#34;</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/** File工具类常用API方法 */</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Test</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>testFile</span>() {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 根据父子路径创建一个File实例</span>
</span></span><span style=display:flex><span>        File file <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> File(<span style=color:#e6db74>&#34;io&#34;</span>, <span style=color:#e6db74>&#34;start.txt&#34;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 常用文件属性API</span>
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;文件/目录名字: &#34;</span> <span style=color:#f92672>+</span> file.<span style=color:#a6e22e>getName</span>());
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;文件/目录路径: &#34;</span> <span style=color:#f92672>+</span> file.<span style=color:#a6e22e>getPath</span>());
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;文件的字节数: &#34;</span> <span style=color:#f92672>+</span> file.<span style=color:#a6e22e>length</span>());
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;文件的父目录（String类型）: &#34;</span> <span style=color:#f92672>+</span> file.<span style=color:#a6e22e>getParent</span>());
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 文件不存在或发生异常都会返回0L</span>
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;文件最后修改日期: &#34;</span> <span style=color:#f92672>+</span> <span style=color:#66d9ef>new</span> Date(file.<span style=color:#a6e22e>lastModified</span>()));
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(file.<span style=color:#a6e22e>canRead</span>() <span style=color:#f92672>?</span> <span style=color:#e6db74>&#34;文件可读: 能查看但是不能操作和存储&#34;</span> : <span style=color:#e6db74>&#34;不可读&#34;</span>);
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(file.<span style=color:#a6e22e>canWrite</span>() <span style=color:#f92672>?</span> <span style=color:#e6db74>&#34;文件可写: 能写入但是看不见&#34;</span> : <span style=color:#e6db74>&#34;不可写&#34;</span>);
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(file.<span style=color:#a6e22e>isFile</span>() <span style=color:#f92672>?</span> <span style=color:#e6db74>&#34;是文件&#34;</span> : <span style=color:#e6db74>&#34;不是文件&#34;</span>);
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(file.<span style=color:#a6e22e>isDirectory</span>() <span style=color:#f92672>?</span> <span style=color:#e6db74>&#34;是目录&#34;</span> : <span style=color:#e6db74>&#34;不是目录&#34;</span>);
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(file.<span style=color:#a6e22e>isHidden</span>() <span style=color:#f92672>?</span> <span style=color:#e6db74>&#34;隐藏文件&#34;</span> : <span style=color:#e6db74>&#34;非隐藏文件&#34;</span>);
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(file.<span style=color:#a6e22e>isAbsolute</span>() <span style=color:#f92672>?</span> <span style=color:#e6db74>&#34;是绝对路径&#34;</span> : <span style=color:#e6db74>&#34;是相对路径&#34;</span>);
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;文件绝对路径: &#34;</span> <span style=color:#f92672>+</span> file.<span style=color:#a6e22e>getAbsolutePath</span>());
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 重命名操作中，参数中的file实例不能创建出来</span>
</span></span><span style=display:flex><span>        File newFile <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> File(<span style=color:#e6db74>&#34;io/start-重命名.txt&#34;</span>);
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(file.<span style=color:#a6e22e>renameTo</span>(newFile) <span style=color:#f92672>?</span> <span style=color:#e6db74>&#34;重命名成功&#34;</span> : <span style=color:#e6db74>&#34;重命名失败&#34;</span>);
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(file.<span style=color:#a6e22e>equals</span>(newFile) <span style=color:#f92672>?</span> <span style=color:#e6db74>&#34;两个文件/目录是同一个&#34;</span> : <span style=color:#e6db74>&#34;两个文件/目录非同一个&#34;</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><blockquote><p>武技: 测试RandomAccessFile</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> tool;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/** @author lsx */</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>FileTest</span> {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/** RandomAccessFile工具类常用API方法 */</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@SneakyThrows</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Test</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>testRandomAccessFile</span>() {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 创建一个可以随机访问的可读可写的文件</span>
</span></span><span style=display:flex><span>        RandomAccessFile file <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> RandomAccessFile(<span style=color:#e6db74>&#34;io/user.txt&#34;</span>, <span style=color:#e6db74>&#34;rw&#34;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 向文件中写入三组字符串和int数据</span>
</span></span><span style=display:flex><span>        file.<span style=color:#a6e22e>writeUTF</span>(<span style=color:#e6db74>&#34;赵四&#34;</span>);
</span></span><span style=display:flex><span>        file.<span style=color:#a6e22e>writeInt</span>(18);
</span></span><span style=display:flex><span>        file.<span style=color:#a6e22e>writeUTF</span>(<span style=color:#e6db74>&#34;刘能&#34;</span>);
</span></span><span style=display:flex><span>        file.<span style=color:#a6e22e>writeInt</span>(28);
</span></span><span style=display:flex><span>        file.<span style=color:#a6e22e>writeUTF</span>(<span style=color:#e6db74>&#34;广坤&#34;</span>);
</span></span><span style=display:flex><span>        file.<span style=color:#a6e22e>writeInt</span>(38);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 位置指示器置于0号位</span>
</span></span><span style=display:flex><span>        file.<span style=color:#a6e22e>seek</span>(0);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 从文件中指示器的位置开始读取一个字符串</span>
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;&#34;</span> <span style=color:#f92672>+</span> file.<span style=color:#a6e22e>readUTF</span>());
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 跳过4个字节（赵四的年龄）</span>
</span></span><span style=display:flex><span>        file.<span style=color:#a6e22e>skipBytes</span>(4);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 从文件中指示器的位置开始剩余两组字符串和int数据</span>
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;&#34;</span> <span style=color:#f92672>+</span> file.<span style=color:#a6e22e>readUTF</span>());
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;&#34;</span> <span style=color:#f92672>+</span> file.<span style=color:#a6e22e>readInt</span>());
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;&#34;</span> <span style=color:#f92672>+</span> file.<span style=color:#a6e22e>readUTF</span>());
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;&#34;</span> <span style=color:#f92672>+</span> file.<span style=color:#a6e22e>readInt</span>());
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 释放资源</span>
</span></span><span style=display:flex><span>        file.<span style=color:#a6e22e>close</span>();
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><blockquote><p>武技: 测试StandardCharsets</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> tool;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/** @author lsx */</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>FilesTest</span> {
</span></span><span style=display:flex><span>    <span style=color:#75715e>/** StandardCharsets常用API方法 */</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Test</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>testStandardCharsets</span>() {
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(StandardCharsets.<span style=color:#a6e22e>UTF_8</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><blockquote><p>武技: 测试Paths</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> tool;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/** @author lsx */</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>FilesTest</span> {
</span></span><span style=display:flex><span>    <span style=color:#75715e>/** Paths常用API方法 */</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Test</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>testPaths</span>() {
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(Paths.<span style=color:#a6e22e>get</span>(file));
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><blockquote><p>武技: 测试Files</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> tool;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/** @author lsx */</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>FilesTest</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@SneakyThrows</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Test</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>testWriteString</span>() {
</span></span><span style=display:flex><span>        String content <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;你好&#34;</span>;
</span></span><span style=display:flex><span>        Files.<span style=color:#a6e22e>writeString</span>(Paths.<span style=color:#a6e22e>get</span>(file), content, StandardCharsets.<span style=color:#a6e22e>UTF_8</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@SneakyThrows</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Test</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>testReadString</span>() {
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(Files.<span style=color:#a6e22e>readString</span>(Paths.<span style=color:#a6e22e>get</span>(file), StandardCharsets.<span style=color:#a6e22e>UTF_8</span>));
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=ep06-空值处理工具>EP06. 空值处理工具</h2><blockquote><p>心法: Optional可以更优雅的避免空指针异常</p></blockquote><ul><li><code>Optional.of(obj)</code>: 生成 <code>obj</code> 对应的Optional对象。</li><li><code>Optional.ofNullable(obj)</code>: <code>obj</code> 不为空则生成对应的Optional对象，否则返回空Optional对象。</li><li><code>optional.map(Function fun)</code>: 调用函数，若参数为空，直接返回空Optional对象。</li><li><code>optional.orElse(null)</code>: 终止Optional调用链，返回 <code>null</code>。</li></ul><blockquote><p>武技: 测试Optional常用API方法</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> tool;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/**  @author lsx */</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@SuppressWarnings</span>(<span style=color:#e6db74>&#34;all&#34;</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>OptionalTest</span> {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Data</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>A</span> {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>private</span> B b <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> B();
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Data</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>B</span> {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>private</span> C c <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> C();
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Data</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>C</span> {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>private</span> String name <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;赵四&#34;</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Test</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>testOptionalApi</span>() {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        String element <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;你好&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 创建一个空的Optional容器</span>
</span></span><span style=display:flex><span>        Optional<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>&gt;</span> opt01 <span style=color:#f92672>=</span> Optional.<span style=color:#a6e22e>empty</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// isPresent(): 仅在容器中存在非null值时，才会返回true</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// isEmpty(): 仅在容器中存在非null值时，才会返回false</span>
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(opt01.<span style=color:#a6e22e>isPresent</span>() <span style=color:#f92672>?</span> <span style=color:#e6db74>&#34;容器不为空&#34;</span> : <span style=color:#e6db74>&#34;容器为空&#34;</span>);
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(opt01.<span style=color:#a6e22e>isEmpty</span>() <span style=color:#f92672>?</span> <span style=color:#e6db74>&#34;容器为空&#34;</span> : <span style=color:#e6db74>&#34;容器不为空&#34;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 创建一个存储 &#34;hello&#34; 字符串的容器，参数为null时会爆发空指针异常，极度不推荐</span>
</span></span><span style=display:flex><span>        Optional<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>&gt;</span> opt02 <span style=color:#f92672>=</span> Optional.<span style=color:#a6e22e>of</span>(element);
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (opt02.<span style=color:#a6e22e>isPresent</span>()) {
</span></span><span style=display:flex><span>            <span style=color:#75715e>// 获取容器中的值，如果Optional为空，则爆发NoSuchElementException异常，不推荐使用</span>
</span></span><span style=display:flex><span>            System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(opt02.<span style=color:#a6e22e>get</span>());
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 创建一个存储 &#34;hello&#34; 字符串的容器，参数为null时返回空的Optional容器</span>
</span></span><span style=display:flex><span>        Optional<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>&gt;</span> opt03 <span style=color:#f92672>=</span> Optional.<span style=color:#a6e22e>ofNullable</span>(element);
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(opt03.<span style=color:#a6e22e>toString</span>());
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// ifPresent(): 在容器中存在非null值时，进行操作</span>
</span></span><span style=display:flex><span>        Optional<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>&gt;</span> opt04 <span style=color:#f92672>=</span> Optional.<span style=color:#a6e22e>ofNullable</span>(element);
</span></span><span style=display:flex><span>        opt04.<span style=color:#a6e22e>ifPresent</span>(e <span style=color:#f92672>-&gt;</span> System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(e));
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 若容器为空则返回默认值，若不为空则返回容器中的值</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 性能比orElse()更高</span>
</span></span><span style=display:flex><span>        Optional<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>&gt;</span> opt05 <span style=color:#f92672>=</span> Optional.<span style=color:#a6e22e>ofNullable</span>(element);
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(opt05.<span style=color:#a6e22e>orElseGet</span>(() <span style=color:#f92672>-&gt;</span> <span style=color:#e6db74>&#34;默认值&#34;</span>));
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 若容器为空则抛出异常，若不为空则返回容器中的值</span>
</span></span><span style=display:flex><span>        Optional<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>&gt;</span> opt06 <span style=color:#f92672>=</span> Optional.<span style=color:#a6e22e>ofNullable</span>(element);
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(opt06.<span style=color:#a6e22e>orElseThrow</span>(() <span style=color:#f92672>-&gt;</span> <span style=color:#66d9ef>new</span> RuntimeException(<span style=color:#e6db74>&#34;为空&#34;</span>)));
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Test</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>testOptionCheck</span>() {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        A a <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> A();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 不够优雅</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (<span style=color:#66d9ef>null</span> <span style=color:#f92672>!=</span> a <span style=color:#f92672>&amp;&amp;</span> <span style=color:#66d9ef>null</span> <span style=color:#f92672>!=</span> a.<span style=color:#a6e22e>getB</span>() <span style=color:#f92672>&amp;&amp;</span> <span style=color:#66d9ef>null</span> <span style=color:#f92672>!=</span> a.<span style=color:#a6e22e>getB</span>().<span style=color:#a6e22e>getC</span>()) {
</span></span><span style=display:flex><span>            System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;name: &#34;</span> <span style=color:#f92672>+</span> a.<span style=color:#a6e22e>getB</span>().<span style=color:#a6e22e>getC</span>().<span style=color:#a6e22e>getName</span>());
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 优雅</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// map(): 如果参数为空，则返回空Optional以避免 NullPointException</span>
</span></span><span style=display:flex><span>        String name <span style=color:#f92672>=</span> Optional.<span style=color:#a6e22e>ofNullable</span>(a)
</span></span><span style=display:flex><span>                .<span style=color:#a6e22e>map</span>(A::getB)
</span></span><span style=display:flex><span>                .<span style=color:#a6e22e>map</span>(B::getC)
</span></span><span style=display:flex><span>                .<span style=color:#a6e22e>map</span>(C::getName)
</span></span><span style=display:flex><span>                .<span style=color:#a6e22e>orElse</span>(<span style=color:#66d9ef>null</span>);
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;name: &#34;</span> <span style=color:#f92672>+</span> name);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=ep07-定时任务工具>EP07. 定时任务工具</h2><blockquote><p>心法: Timer定时工具类负责Java中的定时任务</p></blockquote><ul><li><code>timer.schedule(TimerTask实现类, 延迟毫秒数, 每隔多少毫秒执行一次)</code>: 开启定时器。</li><li><code>timer.cancel()</code>: 关闭定时器。</li></ul><blockquote><p>武技: 测试Timer常用API方法</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> tool;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/**  @author lsx */</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@SuppressWarnings</span>(<span style=color:#e6db74>&#34;all&#34;</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>TimerTest</span> {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/** 闹钟任务类 */</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@EqualsAndHashCode</span>(callSuper <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span>)
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Data</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>AlarmClockTask</span> <span style=color:#66d9ef>extends</span> TimerTask {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>/** 是否响起闹钟 */</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>boolean</span> ring;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>@Override</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>run</span>() {
</span></span><span style=display:flex><span>            <span style=color:#75715e>// 获取当前时间并格式化为 &#34;时:分:秒&#34; 字符串</span>
</span></span><span style=display:flex><span>            String dateStr <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> SimpleDateFormat(<span style=color:#e6db74>&#34;HH:mm:ss&#34;</span>).<span style=color:#a6e22e>format</span>(<span style=color:#66d9ef>new</span> Date());
</span></span><span style=display:flex><span>            <span style=color:#75715e>// 每天的这个时间闹钟响起</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> (<span style=color:#e6db74>&#34;10:25:00&#34;</span>.<span style=color:#a6e22e>equals</span>(dateStr)) {
</span></span><span style=display:flex><span>                ring <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span>;
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>            <span style=color:#75715e>// 模拟闹钟响起</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> (ring) {
</span></span><span style=display:flex><span>                System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;起床了...&#34;</span>);
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@SneakyThrows</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>main</span>(String<span style=color:#f92672>[]</span> args) {
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 创建一个Timer实例</span>
</span></span><span style=display:flex><span>        Timer timer <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Timer();
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 创建一个闹钟任务类实例</span>
</span></span><span style=display:flex><span>        AlarmClockTask alarmClockTask <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> AlarmClockTask();
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 每个1秒发起一次定时任务，延迟0秒</span>
</span></span><span style=display:flex><span>        timer.<span style=color:#a6e22e>schedule</span>(alarmClockTask, 0, 1000);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 若在控制台输入&#34;q&#34;，则停止闹钟</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (System.<span style=color:#a6e22e>in</span>.<span style=color:#a6e22e>read</span>() <span style=color:#f92672>==</span> <span style=color:#e6db74>&#39;q&#39;</span>) {
</span></span><span style=display:flex><span>            <span style=color:#75715e>// 取消闹钟</span>
</span></span><span style=display:flex><span>            timer.<span style=color:#a6e22e>cancel</span>();
</span></span><span style=display:flex><span>            <span style=color:#75715e>// 将闹钟是否响起的标识变量设置为false</span>
</span></span><span style=display:flex><span>            alarmClockTask.<span style=color:#a6e22e>setRing</span>(<span style=color:#66d9ef>false</span>);
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=ep08-流式编程工具>EP08. 流式编程工具</h2><blockquote><p>心法: Timer定时工具类负责Java中的定时任务</p></blockquote><ul><li>Stream是JDK8提供的一种处理集合数据的新方案，可以提高生产力，写出高效且简洁的代码。</li><li>Stream的核心就是将要处理的元素集合看作一种流:<ul><li>流在管道中传输，并且可以在管道的节点上进行如筛选，排序，聚合等处理操作。</li></ul></li></ul></div><svg id="btt-button" class="arrow-logo" xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 384 512" onclick="scrollToTop()" title="Go to top"><path d="M177 159.7l136 136c9.4 9.4 9.4 24.6.0 33.9l-22.6 22.6c-9.4 9.4-24.6 9.4-33.9.0L160 255.9l-96.4 96.4c-9.4 9.4-24.6 9.4-33.9.0L7 329.7c-9.4-9.4-9.4-24.6.0-33.9l136-136c9.4-9.5 24.6-9.5 34-.1z"/></svg>
<script>let backToTopButton=document.getElementById("btt-button");window.onscroll=function(){scrollFunction()};function scrollFunction(){document.body.scrollTop>20||document.documentElement.scrollTop>20?backToTopButton.style.display="block":backToTopButton.style.display="none"}function scrollToTop(){window.scrollTo(0,0)}</script></div></main><footer class=footer><span>&copy; 2024 The Marauders</span>
<span>Made with &#10084;&#65039; using <a target=_blank href=https://github.com/gokarna-theme/gokarna-hugo>Gokarna</a></span></footer></body></html>